(window["webpackJsonp_N_E"] = window["webpackJsonp_N_E"] || []).push([[5],{

/***/ "../node_modules/@xobotyi/scrollbar-width/dist/index.esm.js":
/*!******************************************************************!*\
  !*** ../node_modules/@xobotyi/scrollbar-width/dist/index.esm.js ***!
  \******************************************************************/
/*! exports provided: scrollbarWidth */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scrollbarWidth", function() { return e; });
var e=function(t){if("undefined"==typeof document)return 0;if(document.body&&(!document.readyState||"loading"!==document.readyState)){if(!0!==t&&"number"==typeof e.__cache)return e.__cache;var o=document.createElement("div"),d=o.style;d.display="block",d.position="absolute",d.width="100px",d.height="100px",d.left="-999px",d.top="-999px",d.overflow="scroll",document.body.insertBefore(o,null);var n=o.clientWidth;if(0!==n)return e.__cache=100-n,document.body.removeChild(o),e.__cache;document.body.removeChild(o)}};


/***/ }),

/***/ "../node_modules/copy-to-clipboard/index.js":
/*!**************************************************!*\
  !*** ../node_modules/copy-to-clipboard/index.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var deselectCurrent = __webpack_require__(/*! toggle-selection */ "../node_modules/toggle-selection/index.js");

var clipboardToIE11Formatting = {
  "text/plain": "Text",
  "text/html": "Url",
  "default": "Text"
}

var defaultMessage = "Copy to clipboard: #{key}, Enter";

function format(message) {
  var copyKey = (/mac os x/i.test(navigator.userAgent) ? "âŒ˜" : "Ctrl") + "+C";
  return message.replace(/#{\s*key\s*}/g, copyKey);
}

function copy(text, options) {
  var debug,
    message,
    reselectPrevious,
    range,
    selection,
    mark,
    success = false;
  if (!options) {
    options = {};
  }
  debug = options.debug || false;
  try {
    reselectPrevious = deselectCurrent();

    range = document.createRange();
    selection = document.getSelection();

    mark = document.createElement("span");
    mark.textContent = text;
    // reset user styles for span element
    mark.style.all = "unset";
    // prevents scrolling to the end of the page
    mark.style.position = "fixed";
    mark.style.top = 0;
    mark.style.clip = "rect(0, 0, 0, 0)";
    // used to preserve spaces and line breaks
    mark.style.whiteSpace = "pre";
    // do not inherit user-select (it may be `none`)
    mark.style.webkitUserSelect = "text";
    mark.style.MozUserSelect = "text";
    mark.style.msUserSelect = "text";
    mark.style.userSelect = "text";
    mark.addEventListener("copy", function(e) {
      e.stopPropagation();
      if (options.format) {
        e.preventDefault();
        if (typeof e.clipboardData === "undefined") { // IE 11
          debug && console.warn("unable to use e.clipboardData");
          debug && console.warn("trying IE specific stuff");
          window.clipboardData.clearData();
          var format = clipboardToIE11Formatting[options.format] || clipboardToIE11Formatting["default"]
          window.clipboardData.setData(format, text);
        } else { // all other browsers
          e.clipboardData.clearData();
          e.clipboardData.setData(options.format, text);
        }
      }
      if (options.onCopy) {
        e.preventDefault();
        options.onCopy(e.clipboardData);
      }
    });

    document.body.appendChild(mark);

    range.selectNodeContents(mark);
    selection.addRange(range);

    var successful = document.execCommand("copy");
    if (!successful) {
      throw new Error("copy command was unsuccessful");
    }
    success = true;
  } catch (err) {
    debug && console.error("unable to copy using execCommand: ", err);
    debug && console.warn("trying IE specific stuff");
    try {
      window.clipboardData.setData(options.format || "text", text);
      options.onCopy && options.onCopy(window.clipboardData);
      success = true;
    } catch (err) {
      debug && console.error("unable to copy using clipboardData: ", err);
      debug && console.error("falling back to prompt");
      message = format("message" in options ? options.message : defaultMessage);
      window.prompt(message, text);
    }
  } finally {
    if (selection) {
      if (typeof selection.removeRange == "function") {
        selection.removeRange(range);
      } else {
        selection.removeAllRanges();
      }
    }

    if (mark) {
      document.body.removeChild(mark);
    }
    reselectPrevious();
  }

  return success;
}

module.exports = copy;


/***/ }),

/***/ "../node_modules/fast-deep-equal/react.js":
/*!************************************************!*\
  !*** ../node_modules/fast-deep-equal/react.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


// do not edit .js files directly - edit src/index.jst



module.exports = function equal(a, b) {
  if (a === b) return true;

  if (a && b && typeof a == 'object' && typeof b == 'object') {
    if (a.constructor !== b.constructor) return false;

    var length, i, keys;
    if (Array.isArray(a)) {
      length = a.length;
      if (length != b.length) return false;
      for (i = length; i-- !== 0;)
        if (!equal(a[i], b[i])) return false;
      return true;
    }



    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;
    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();
    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();

    keys = Object.keys(a);
    length = keys.length;
    if (length !== Object.keys(b).length) return false;

    for (i = length; i-- !== 0;)
      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;

    for (i = length; i-- !== 0;) {
      var key = keys[i];

      if (key === '_owner' && a.$$typeof) {
        // React-specific: avoid traversing React elements' _owner.
        //  _owner contains circular references
        // and is not needed when comparing the actual elements (and not their owners)
        continue;
      }

      if (!equal(a[key], b[key])) return false;
    }

    return true;
  }

  // true if both NaN, false otherwise
  return a!==a && b!==b;
};


/***/ }),

/***/ "../node_modules/fast-shallow-equal/index.js":
/*!***************************************************!*\
  !*** ../node_modules/fast-shallow-equal/index.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

var keyList = Object.keys;

exports.equal = function equal (a, b) {
  if (a === b) return true;
  if (!(a instanceof Object) || !(b instanceof Object)) return false;

  var keys = keyList(a);
  var length = keys.length;

  for (var i = 0; i < length; i++)
    if (!(keys[i] in b)) return false;

  for (var i = 0; i < length; i++)
    if (a[keys[i]] !== b[keys[i]]) return false;

  return length === keyList(b).length;
};


/***/ }),

/***/ "../node_modules/is-hotkey/lib/index.js":
/*!**********************************************!*\
  !*** ../node_modules/is-hotkey/lib/index.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

/**
 * Constants.
 */

var IS_MAC = typeof window != 'undefined' && /Mac|iPod|iPhone|iPad/.test(window.navigator.platform);

var MODIFIERS = {
  alt: 'altKey',
  control: 'ctrlKey',
  meta: 'metaKey',
  shift: 'shiftKey'
};

var ALIASES = {
  add: '+',
  break: 'pause',
  cmd: 'meta',
  command: 'meta',
  ctl: 'control',
  ctrl: 'control',
  del: 'delete',
  down: 'arrowdown',
  esc: 'escape',
  ins: 'insert',
  left: 'arrowleft',
  mod: IS_MAC ? 'meta' : 'control',
  opt: 'alt',
  option: 'alt',
  return: 'enter',
  right: 'arrowright',
  space: ' ',
  spacebar: ' ',
  up: 'arrowup',
  win: 'meta',
  windows: 'meta'
};

var CODES = {
  backspace: 8,
  tab: 9,
  enter: 13,
  shift: 16,
  control: 17,
  alt: 18,
  pause: 19,
  capslock: 20,
  escape: 27,
  ' ': 32,
  pageup: 33,
  pagedown: 34,
  end: 35,
  home: 36,
  arrowleft: 37,
  arrowup: 38,
  arrowright: 39,
  arrowdown: 40,
  insert: 45,
  delete: 46,
  meta: 91,
  numlock: 144,
  scrolllock: 145,
  ';': 186,
  '=': 187,
  ',': 188,
  '-': 189,
  '.': 190,
  '/': 191,
  '`': 192,
  '[': 219,
  '\\': 220,
  ']': 221,
  '\'': 222
};

for (var f = 1; f < 20; f++) {
  CODES['f' + f] = 111 + f;
}

/**
 * Is hotkey?
 */

function isHotkey(hotkey, options, event) {
  if (options && !('byKey' in options)) {
    event = options;
    options = null;
  }

  if (!Array.isArray(hotkey)) {
    hotkey = [hotkey];
  }

  var array = hotkey.map(function (string) {
    return parseHotkey(string, options);
  });
  var check = function check(e) {
    return array.some(function (object) {
      return compareHotkey(object, e);
    });
  };
  var ret = event == null ? check : check(event);
  return ret;
}

function isCodeHotkey(hotkey, event) {
  return isHotkey(hotkey, event);
}

function isKeyHotkey(hotkey, event) {
  return isHotkey(hotkey, { byKey: true }, event);
}

/**
 * Parse.
 */

function parseHotkey(hotkey, options) {
  var byKey = options && options.byKey;
  var ret = {};

  // Special case to handle the `+` key since we use it as a separator.
  hotkey = hotkey.replace('++', '+add');
  var values = hotkey.split('+');
  var length = values.length;

  // Ensure that all the modifiers are set to false unless the hotkey has them.

  for (var k in MODIFIERS) {
    ret[MODIFIERS[k]] = false;
  }

  var _iteratorNormalCompletion = true;
  var _didIteratorError = false;
  var _iteratorError = undefined;

  try {
    for (var _iterator = values[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
      var value = _step.value;

      var optional = value.endsWith('?') && value.length > 1;

      if (optional) {
        value = value.slice(0, -1);
      }

      var name = toKeyName(value);
      var modifier = MODIFIERS[name];

      if (length === 1 || !modifier) {
        if (byKey) {
          ret.key = name;
        } else {
          ret.which = toKeyCode(value);
        }
      }

      if (modifier) {
        ret[modifier] = optional ? null : true;
      }
    }
  } catch (err) {
    _didIteratorError = true;
    _iteratorError = err;
  } finally {
    try {
      if (!_iteratorNormalCompletion && _iterator.return) {
        _iterator.return();
      }
    } finally {
      if (_didIteratorError) {
        throw _iteratorError;
      }
    }
  }

  return ret;
}

/**
 * Compare.
 */

function compareHotkey(object, event) {
  for (var key in object) {
    var expected = object[key];
    var actual = void 0;

    if (expected == null) {
      continue;
    }

    if (key === 'key' && event.key != null) {
      actual = event.key.toLowerCase();
    } else if (key === 'which') {
      actual = expected === 91 && event.which === 93 ? 91 : event.which;
    } else {
      actual = event[key];
    }

    if (actual == null && expected === false) {
      continue;
    }

    if (actual !== expected) {
      return false;
    }
  }

  return true;
}

/**
 * Utils.
 */

function toKeyCode(name) {
  name = toKeyName(name);
  var code = CODES[name] || name.toUpperCase().charCodeAt(0);
  return code;
}

function toKeyName(name) {
  name = name.toLowerCase();
  name = ALIASES[name] || name;
  return name;
}

/**
 * Export.
 */

exports.default = isHotkey;
exports.isHotkey = isHotkey;
exports.isCodeHotkey = isCodeHotkey;
exports.isKeyHotkey = isKeyHotkey;
exports.parseHotkey = parseHotkey;
exports.compareHotkey = compareHotkey;
exports.toKeyCode = toKeyCode;
exports.toKeyName = toKeyName;

/***/ }),

/***/ "../node_modules/js-cookie/src/js.cookie.js":
/*!**************************************************!*\
  !*** ../node_modules/js-cookie/src/js.cookie.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */
;(function (factory) {
	var registeredInModuleLoader;
	if (true) {
		!(__WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :
				__WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
		registeredInModuleLoader = true;
	}
	if (true) {
		module.exports = factory();
		registeredInModuleLoader = true;
	}
	if (!registeredInModuleLoader) {
		var OldCookies = window.Cookies;
		var api = window.Cookies = factory();
		api.noConflict = function () {
			window.Cookies = OldCookies;
			return api;
		};
	}
}(function () {
	function extend () {
		var i = 0;
		var result = {};
		for (; i < arguments.length; i++) {
			var attributes = arguments[ i ];
			for (var key in attributes) {
				result[key] = attributes[key];
			}
		}
		return result;
	}

	function decode (s) {
		return s.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);
	}

	function init (converter) {
		function api() {}

		function set (key, value, attributes) {
			if (typeof document === 'undefined') {
				return;
			}

			attributes = extend({
				path: '/'
			}, api.defaults, attributes);

			if (typeof attributes.expires === 'number') {
				attributes.expires = new Date(new Date() * 1 + attributes.expires * 864e+5);
			}

			// We're using "expires" because "max-age" is not supported by IE
			attributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';

			try {
				var result = JSON.stringify(value);
				if (/^[\{\[]/.test(result)) {
					value = result;
				}
			} catch (e) {}

			value = converter.write ?
				converter.write(value, key) :
				encodeURIComponent(String(value))
					.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);

			key = encodeURIComponent(String(key))
				.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent)
				.replace(/[\(\)]/g, escape);

			var stringifiedAttributes = '';
			for (var attributeName in attributes) {
				if (!attributes[attributeName]) {
					continue;
				}
				stringifiedAttributes += '; ' + attributeName;
				if (attributes[attributeName] === true) {
					continue;
				}

				// Considers RFC 6265 section 5.2:
				// ...
				// 3.  If the remaining unparsed-attributes contains a %x3B (";")
				//     character:
				// Consume the characters of the unparsed-attributes up to,
				// not including, the first %x3B (";") character.
				// ...
				stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];
			}

			return (document.cookie = key + '=' + value + stringifiedAttributes);
		}

		function get (key, json) {
			if (typeof document === 'undefined') {
				return;
			}

			var jar = {};
			// To prevent the for loop in the first place assign an empty array
			// in case there are no cookies at all.
			var cookies = document.cookie ? document.cookie.split('; ') : [];
			var i = 0;

			for (; i < cookies.length; i++) {
				var parts = cookies[i].split('=');
				var cookie = parts.slice(1).join('=');

				if (!json && cookie.charAt(0) === '"') {
					cookie = cookie.slice(1, -1);
				}

				try {
					var name = decode(parts[0]);
					cookie = (converter.read || converter)(cookie, name) ||
						decode(cookie);

					if (json) {
						try {
							cookie = JSON.parse(cookie);
						} catch (e) {}
					}

					jar[name] = cookie;

					if (key === name) {
						break;
					}
				} catch (e) {}
			}

			return key ? jar[key] : jar;
		}

		api.set = set;
		api.get = function (key) {
			return get(key, false /* read as raw */);
		};
		api.getJSON = function (key) {
			return get(key, true /* read as json */);
		};
		api.remove = function (key, attributes) {
			set(key, '', extend(attributes, {
				expires: -1
			}));
		};

		api.defaults = {};

		api.withConverter = init;

		return api;
	}

	return init(function () {});
}));


/***/ }),

/***/ "../node_modules/lodash.throttle/index.js":
/*!************************************************!*\
  !*** ../node_modules/lodash.throttle/index.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {/**
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="npm" -o ./`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */

/** Used as the `TypeError` message for "Functions" methods. */
var FUNC_ERROR_TEXT = 'Expected a function';

/** Used as references for various `Number` constants. */
var NAN = 0 / 0;

/** `Object#toString` result references. */
var symbolTag = '[object Symbol]';

/** Used to match leading and trailing whitespace. */
var reTrim = /^\s+|\s+$/g;

/** Used to detect bad signed hexadecimal string values. */
var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;

/** Used to detect binary string values. */
var reIsBinary = /^0b[01]+$/i;

/** Used to detect octal string values. */
var reIsOctal = /^0o[0-7]+$/i;

/** Built-in method references without a dependency on `root`. */
var freeParseInt = parseInt;

/** Detect free variable `global` from Node.js. */
var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;

/** Detect free variable `self`. */
var freeSelf = typeof self == 'object' && self && self.Object === Object && self;

/** Used as a reference to the global object. */
var root = freeGlobal || freeSelf || Function('return this')();

/** Used for built-in method references. */
var objectProto = Object.prototype;

/**
 * Used to resolve the
 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var objectToString = objectProto.toString;

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeMax = Math.max,
    nativeMin = Math.min;

/**
 * Gets the timestamp of the number of milliseconds that have elapsed since
 * the Unix epoch (1 January 1970 00:00:00 UTC).
 *
 * @static
 * @memberOf _
 * @since 2.4.0
 * @category Date
 * @returns {number} Returns the timestamp.
 * @example
 *
 * _.defer(function(stamp) {
 *   console.log(_.now() - stamp);
 * }, _.now());
 * // => Logs the number of milliseconds it took for the deferred invocation.
 */
var now = function() {
  return root.Date.now();
};

/**
 * Creates a debounced function that delays invoking `func` until after `wait`
 * milliseconds have elapsed since the last time the debounced function was
 * invoked. The debounced function comes with a `cancel` method to cancel
 * delayed `func` invocations and a `flush` method to immediately invoke them.
 * Provide `options` to indicate whether `func` should be invoked on the
 * leading and/or trailing edge of the `wait` timeout. The `func` is invoked
 * with the last arguments provided to the debounced function. Subsequent
 * calls to the debounced function return the result of the last `func`
 * invocation.
 *
 * **Note:** If `leading` and `trailing` options are `true`, `func` is
 * invoked on the trailing edge of the timeout only if the debounced function
 * is invoked more than once during the `wait` timeout.
 *
 * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred
 * until to the next tick, similar to `setTimeout` with a timeout of `0`.
 *
 * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)
 * for details over the differences between `_.debounce` and `_.throttle`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Function
 * @param {Function} func The function to debounce.
 * @param {number} [wait=0] The number of milliseconds to delay.
 * @param {Object} [options={}] The options object.
 * @param {boolean} [options.leading=false]
 *  Specify invoking on the leading edge of the timeout.
 * @param {number} [options.maxWait]
 *  The maximum time `func` is allowed to be delayed before it's invoked.
 * @param {boolean} [options.trailing=true]
 *  Specify invoking on the trailing edge of the timeout.
 * @returns {Function} Returns the new debounced function.
 * @example
 *
 * // Avoid costly calculations while the window size is in flux.
 * jQuery(window).on('resize', _.debounce(calculateLayout, 150));
 *
 * // Invoke `sendMail` when clicked, debouncing subsequent calls.
 * jQuery(element).on('click', _.debounce(sendMail, 300, {
 *   'leading': true,
 *   'trailing': false
 * }));
 *
 * // Ensure `batchLog` is invoked once after 1 second of debounced calls.
 * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });
 * var source = new EventSource('/stream');
 * jQuery(source).on('message', debounced);
 *
 * // Cancel the trailing debounced invocation.
 * jQuery(window).on('popstate', debounced.cancel);
 */
function debounce(func, wait, options) {
  var lastArgs,
      lastThis,
      maxWait,
      result,
      timerId,
      lastCallTime,
      lastInvokeTime = 0,
      leading = false,
      maxing = false,
      trailing = true;

  if (typeof func != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  wait = toNumber(wait) || 0;
  if (isObject(options)) {
    leading = !!options.leading;
    maxing = 'maxWait' in options;
    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;
    trailing = 'trailing' in options ? !!options.trailing : trailing;
  }

  function invokeFunc(time) {
    var args = lastArgs,
        thisArg = lastThis;

    lastArgs = lastThis = undefined;
    lastInvokeTime = time;
    result = func.apply(thisArg, args);
    return result;
  }

  function leadingEdge(time) {
    // Reset any `maxWait` timer.
    lastInvokeTime = time;
    // Start the timer for the trailing edge.
    timerId = setTimeout(timerExpired, wait);
    // Invoke the leading edge.
    return leading ? invokeFunc(time) : result;
  }

  function remainingWait(time) {
    var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime,
        result = wait - timeSinceLastCall;

    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;
  }

  function shouldInvoke(time) {
    var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime;

    // Either this is the first call, activity has stopped and we're at the
    // trailing edge, the system time has gone backwards and we're treating
    // it as the trailing edge, or we've hit the `maxWait` limit.
    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||
      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));
  }

  function timerExpired() {
    var time = now();
    if (shouldInvoke(time)) {
      return trailingEdge(time);
    }
    // Restart the timer.
    timerId = setTimeout(timerExpired, remainingWait(time));
  }

  function trailingEdge(time) {
    timerId = undefined;

    // Only invoke if we have `lastArgs` which means `func` has been
    // debounced at least once.
    if (trailing && lastArgs) {
      return invokeFunc(time);
    }
    lastArgs = lastThis = undefined;
    return result;
  }

  function cancel() {
    if (timerId !== undefined) {
      clearTimeout(timerId);
    }
    lastInvokeTime = 0;
    lastArgs = lastCallTime = lastThis = timerId = undefined;
  }

  function flush() {
    return timerId === undefined ? result : trailingEdge(now());
  }

  function debounced() {
    var time = now(),
        isInvoking = shouldInvoke(time);

    lastArgs = arguments;
    lastThis = this;
    lastCallTime = time;

    if (isInvoking) {
      if (timerId === undefined) {
        return leadingEdge(lastCallTime);
      }
      if (maxing) {
        // Handle invocations in a tight loop.
        timerId = setTimeout(timerExpired, wait);
        return invokeFunc(lastCallTime);
      }
    }
    if (timerId === undefined) {
      timerId = setTimeout(timerExpired, wait);
    }
    return result;
  }
  debounced.cancel = cancel;
  debounced.flush = flush;
  return debounced;
}

/**
 * Creates a throttled function that only invokes `func` at most once per
 * every `wait` milliseconds. The throttled function comes with a `cancel`
 * method to cancel delayed `func` invocations and a `flush` method to
 * immediately invoke them. Provide `options` to indicate whether `func`
 * should be invoked on the leading and/or trailing edge of the `wait`
 * timeout. The `func` is invoked with the last arguments provided to the
 * throttled function. Subsequent calls to the throttled function return the
 * result of the last `func` invocation.
 *
 * **Note:** If `leading` and `trailing` options are `true`, `func` is
 * invoked on the trailing edge of the timeout only if the throttled function
 * is invoked more than once during the `wait` timeout.
 *
 * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred
 * until to the next tick, similar to `setTimeout` with a timeout of `0`.
 *
 * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)
 * for details over the differences between `_.throttle` and `_.debounce`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Function
 * @param {Function} func The function to throttle.
 * @param {number} [wait=0] The number of milliseconds to throttle invocations to.
 * @param {Object} [options={}] The options object.
 * @param {boolean} [options.leading=true]
 *  Specify invoking on the leading edge of the timeout.
 * @param {boolean} [options.trailing=true]
 *  Specify invoking on the trailing edge of the timeout.
 * @returns {Function} Returns the new throttled function.
 * @example
 *
 * // Avoid excessively updating the position while scrolling.
 * jQuery(window).on('scroll', _.throttle(updatePosition, 100));
 *
 * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.
 * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });
 * jQuery(element).on('click', throttled);
 *
 * // Cancel the trailing throttled invocation.
 * jQuery(window).on('popstate', throttled.cancel);
 */
function throttle(func, wait, options) {
  var leading = true,
      trailing = true;

  if (typeof func != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  if (isObject(options)) {
    leading = 'leading' in options ? !!options.leading : leading;
    trailing = 'trailing' in options ? !!options.trailing : trailing;
  }
  return debounce(func, wait, {
    'leading': leading,
    'maxWait': wait,
    'trailing': trailing
  });
}

/**
 * Checks if `value` is the
 * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
 * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an object, else `false`.
 * @example
 *
 * _.isObject({});
 * // => true
 *
 * _.isObject([1, 2, 3]);
 * // => true
 *
 * _.isObject(_.noop);
 * // => true
 *
 * _.isObject(null);
 * // => false
 */
function isObject(value) {
  var type = typeof value;
  return !!value && (type == 'object' || type == 'function');
}

/**
 * Checks if `value` is object-like. A value is object-like if it's not `null`
 * and has a `typeof` result of "object".
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
 * @example
 *
 * _.isObjectLike({});
 * // => true
 *
 * _.isObjectLike([1, 2, 3]);
 * // => true
 *
 * _.isObjectLike(_.noop);
 * // => false
 *
 * _.isObjectLike(null);
 * // => false
 */
function isObjectLike(value) {
  return !!value && typeof value == 'object';
}

/**
 * Checks if `value` is classified as a `Symbol` primitive or object.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.
 * @example
 *
 * _.isSymbol(Symbol.iterator);
 * // => true
 *
 * _.isSymbol('abc');
 * // => false
 */
function isSymbol(value) {
  return typeof value == 'symbol' ||
    (isObjectLike(value) && objectToString.call(value) == symbolTag);
}

/**
 * Converts `value` to a number.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to process.
 * @returns {number} Returns the number.
 * @example
 *
 * _.toNumber(3.2);
 * // => 3.2
 *
 * _.toNumber(Number.MIN_VALUE);
 * // => 5e-324
 *
 * _.toNumber(Infinity);
 * // => Infinity
 *
 * _.toNumber('3.2');
 * // => 3.2
 */
function toNumber(value) {
  if (typeof value == 'number') {
    return value;
  }
  if (isSymbol(value)) {
    return NAN;
  }
  if (isObject(value)) {
    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;
    value = isObject(other) ? (other + '') : other;
  }
  if (typeof value != 'string') {
    return value === 0 ? value : +value;
  }
  value = value.replace(reTrim, '');
  var isBinary = reIsBinary.test(value);
  return (isBinary || reIsOctal.test(value))
    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)
    : (reIsBadHex.test(value) ? NAN : +value);
}

module.exports = throttle;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../next/dist/compiled/webpack/global.js */ "../node_modules/next/dist/compiled/webpack/global.js")))

/***/ }),

/***/ "../node_modules/nano-css/addon/__dev__/warnOnMissingDependencies.js":
/*!***************************************************************************!*\
  !*** ../node_modules/nano-css/addon/__dev__/warnOnMissingDependencies.js ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var pkgName = 'nano-css';

module.exports = function warnOnMissingDependencies (addon, renderer, deps) {
    var missing = [];

    for (var i = 0; i < deps.length; i++) {
        var name = deps[i];

        if (!renderer[name]) {
            missing.push(name);
        }
    }

    if (missing.length) {
        var str = 'Addon "' + addon + '" is missing the following dependencies:';

        for (var j = 0; j < missing.length; j++) {
            str += '\n require("' + pkgName + '/addon/' + missing[j] + '").addon(nano);';
        }

        throw new Error(str);
    }
};


/***/ }),

/***/ "../node_modules/nano-css/addon/cssom.js":
/*!***********************************************!*\
  !*** ../node_modules/nano-css/addon/cssom.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.addon = function (renderer) {
    // CSSOM support only browser environment.
    if (!renderer.client) return;

    if (true) {
        __webpack_require__(/*! ./__dev__/warnOnMissingDependencies */ "../node_modules/nano-css/addon/__dev__/warnOnMissingDependencies.js")('cssom', renderer, ['sh']);
    }

    // Style sheet for media queries.
    document.head.appendChild(renderer.msh = document.createElement('style'));

    renderer.createRule = function (selector, prelude) {
        var rawCss = selector + '{}';
        if (prelude) rawCss = prelude + '{' + rawCss + '}';
        var sheet = prelude ? renderer.msh.sheet : renderer.sh.sheet;
        var index = sheet.insertRule(rawCss, sheet.cssRules.length);
        var rule = (sheet.cssRules || sheet.rules)[index];

        // Keep track of `index` where rule was inserted in the sheet. This is
        // needed for rule deletion.
        rule.index = index;

        if (prelude) {
            // If rule has media query (it has prelude), move style (CSSStyleDeclaration)
            // object to the "top" to normalize it with a rule without the media
            // query, so that both rules have `.style` property available.
            var selectorRule = (rule.cssRules || rule.rules)[0];
            rule.style = selectorRule.style;
            rule.styleMap = selectorRule.styleMap;
        }

        return rule;
    };
};


/***/ }),

/***/ "../node_modules/nano-css/addon/vcssom.js":
/*!************************************************!*\
  !*** ../node_modules/nano-css/addon/vcssom.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var removeRule = __webpack_require__(/*! ./vcssom/removeRule */ "../node_modules/nano-css/addon/vcssom/removeRule.js").removeRule;

exports.addon = function (renderer) {
    // VCSSOM support only browser environment.
    if (!renderer.client) return;

    if (true) {
        __webpack_require__(/*! ./__dev__/warnOnMissingDependencies */ "../node_modules/nano-css/addon/__dev__/warnOnMissingDependencies.js")('cssom', renderer, ['createRule']); // cssom
    }

    var kebab = renderer.kebab;

    function VRule (selector, prelude) {
        this.rule = renderer.createRule(selector, prelude);
        this.decl = {};
    }
    VRule.prototype.diff = function (newDecl) {
        var oldDecl = this.decl;
        var style = this.rule.style;
        var property;
        for (property in oldDecl)
            if (newDecl[property] === undefined)
                style.removeProperty(property);
        for (property in newDecl)
            if (newDecl[property] !== oldDecl[property])
                style.setProperty(kebab(property), newDecl[property]);
        this.decl = newDecl;
    };
    VRule.prototype.del = function () {
        removeRule(this.rule);
    };

    function VSheet () {
        /**
         * {
         *   '<at-rule-prelude>': {
         *     '<selector>': {
         *       color: 'red
         *     }
         *   }
         * }
         */
        this.tree = {};
    }
    VSheet.prototype.diff = function (newTree) {
        var oldTree = this.tree;

        // Remove media queries not present in new tree.
        for (var prelude in oldTree) {
            if (newTree[prelude] === undefined) {
                var rules = oldTree[prelude];
                for (var selector in rules)
                    rules[selector].del();
            }
        }

        for (var prelude in newTree) {
            if (oldTree[prelude] === undefined) {
                // Whole media query is new.
                for (var selector in newTree[prelude]) {
                    var rule = new VRule(selector, prelude);
                    rule.diff(newTree[prelude][selector]);
                    newTree[prelude][selector] = rule;
                }
            } else {
                // Old tree already has rules with this media query.
                var oldRules = oldTree[prelude];
                var newRules = newTree[prelude];

                // Remove rules not present in new tree.
                for (var selector in oldRules)
                    if (!newRules[selector])
                        oldRules[selector].del();

                // Apply new rules.
                for (var selector in newRules) {
                    var rule = oldRules[selector];
                    if (rule) {
                        rule.diff(newRules[selector]);
                        newRules[selector] = rule;
                    } else {
                        rule = new VRule(selector, prelude);
                        rule.diff(newRules[selector]);
                        newRules[selector] = rule;
                    }
                }
            }
        }

        this.tree = newTree;
    };

    renderer.VRule = VRule;
    renderer.VSheet = VSheet;
};


/***/ }),

/***/ "../node_modules/nano-css/addon/vcssom/cssToTree.js":
/*!**********************************************************!*\
  !*** ../node_modules/nano-css/addon/vcssom/cssToTree.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function cssToTree (tree, css, selector, prelude) {
    var declarations = {};
    var hasDeclarations = false;
    var key, value;

    for (key in css) {
        value = css[key];
        if (typeof value !== 'object') {
            hasDeclarations = true;
            declarations[key] = value;
        }
    }

    if (hasDeclarations) {
        if (!tree[prelude]) tree[prelude] = {};
        tree[prelude][selector] = declarations;
    }

    for (key in css) {
        value = css[key];
        if (typeof value === 'object') {
            if (key[0] === '@') {
                cssToTree(tree, value, selector, key);
            } else {
                var hasCurrentSymbol = key.indexOf('&') > -1;
                var selectorParts = selector.split(',');
                if (hasCurrentSymbol) {
                    for (var i = 0; i < selectorParts.length; i++) {
                        selectorParts[i] = key.replace(/&/g, selectorParts[i]);
                    }
                } else {
                    for (var i = 0; i < selectorParts.length; i++) {
                        selectorParts[i] = selectorParts[i] + ' ' + key;
                    }
                }
                cssToTree(tree, value, selectorParts.join(','), prelude);
            }
        }
    }
};

exports.cssToTree = cssToTree;


/***/ }),

/***/ "../node_modules/nano-css/addon/vcssom/removeRule.js":
/*!***********************************************************!*\
  !*** ../node_modules/nano-css/addon/vcssom/removeRule.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function removeRule (rule) {
    var maxIndex = rule.index;
    var sh = rule.parentStyleSheet;
    var rules = sh.cssRules || sh.rules;
    maxIndex = Math.max(maxIndex, rules.length - 1);
    while (maxIndex >= 0) {
        if (rules[maxIndex] === rule) {
            sh.deleteRule(maxIndex);
            break;
        }
        maxIndex--;
    }
}

exports.removeRule = removeRule;


/***/ }),

/***/ "../node_modules/nano-css/index.js":
/*!*****************************************!*\
  !*** ../node_modules/nano-css/index.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var KEBAB_REGEX = /[A-Z]/g;

var hash = function (str) {
    var h = 5381, i = str.length;

    while (i) h = (h * 33) ^ str.charCodeAt(--i);

    return '_' + (h >>> 0).toString(36);
};

exports.create = function (config) {
    config = config || {};
    var assign = config.assign || Object.assign;
    var client = typeof window === 'object';

    // Check if we are really in browser environment.
    if (true) {
        if (client) {
            if ((typeof document !== 'object') || !document.getElementsByTagName('HTML')) {
                console.error(
                    'nano-css detected browser environment because of "window" global, but ' +
                    '"document" global seems to be defective.'
                );
            }
        }
    }

    var renderer = assign({
        raw: '',
        pfx: '_',
        client: client,
        assign: assign,
        stringify: JSON.stringify,
        kebab: function (prop) {
            return prop.replace(KEBAB_REGEX, '-$&').toLowerCase();
        },
        decl: function (key, value) {
            key = renderer.kebab(key);
            return key + ':' + value + ';';
        },
        hash: function (obj) {
            return hash(renderer.stringify(obj));
        },
        selector: function (parent, selector) {
            return parent + (selector[0] === ':' ? ''  : ' ') + selector;
        },
        putRaw: function (rawCssRule) {
            renderer.raw += rawCssRule;
        }
    }, config);

    if (renderer.client) {
        if (!renderer.sh)
            document.head.appendChild(renderer.sh = document.createElement('style'));

        if (true) {
            renderer.sh.setAttribute('data-nano-css-dev', '');

            // Test style sheet used in DEV mode to test if .insetRule() would throw.
            renderer.shTest = document.createElement('style');
            renderer.shTest.setAttribute('data-nano-css-dev-tests', '');
            document.head.appendChild(renderer.shTest);
        }

        renderer.putRaw = function (rawCssRule) {
            // .insertRule() is faster than .appendChild(), that's why we use it in PROD.
            // But CSS injected using .insertRule() is not displayed in Chrome Devtools,
            // that's why we use .appendChild in DEV.
            if (false) { var sheet; } else {
                // Test if .insertRule() works in dev mode. Unknown pseudo-selectors will throw when
                // .insertRule() is used, but .appendChild() will not throw.
                try {
                    renderer.shTest.sheet.insertRule(rawCssRule, renderer.shTest.sheet.cssRules.length);
                } catch (error) {
                    if (config.verbose) {
                        console.error(error);
                    }
                }

                // Insert pretty-printed CSS for dev mode.
                renderer.sh.appendChild(document.createTextNode(rawCssRule));
            }
        };
    }

    renderer.put = function (selector, decls, atrule) {
        var str = '';
        var prop, value;
        var postponed = [];

        for (prop in decls) {
            value = decls[prop];

            if ((value instanceof Object) && !(value instanceof Array)) {
                postponed.push(prop);
            } else {
                if (( true) && !renderer.sourcemaps) {
                    str += '    ' + renderer.decl(prop, value, selector, atrule) + '\n';
                } else {
                    str += renderer.decl(prop, value, selector, atrule);
                }
            }
        }

        if (str) {
            if (( true) && !renderer.sourcemaps) {
                str = '\n' + selector + ' {\n' + str + '}\n';
            } else {
                str = selector + '{' + str + '}';
            }
            renderer.putRaw(atrule ? atrule + '{' + str + '}' : str);
        }

        for (var i = 0; i < postponed.length; i++) {
            prop = postponed[i];

            if (prop[0] === '@' && prop !== '@font-face') {
                renderer.putAt(selector, decls[prop], prop);
            } else {
                renderer.put(renderer.selector(selector, prop), decls[prop], atrule);
            }
        }
    };

    renderer.putAt = renderer.put;

    return renderer;
};


/***/ }),

/***/ "../node_modules/react-draggable/build/cjs/Draggable.js":
/*!**************************************************************!*\
  !*** ../node_modules/react-draggable/build/cjs/Draggable.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
Object.defineProperty(exports, "DraggableCore", {
  enumerable: true,
  get: function get() {
    return _DraggableCore.default;
  }
});
exports.default = void 0;

var React = _interopRequireWildcard(__webpack_require__(/*! react */ "../node_modules/react/index.js"));

var _propTypes = _interopRequireDefault(__webpack_require__(/*! prop-types */ "../node_modules/prop-types/index.js"));

var _reactDom = _interopRequireDefault(__webpack_require__(/*! react-dom */ "../node_modules/react-dom/index.js"));

var _classnames = _interopRequireDefault(__webpack_require__(/*! classnames */ "../node_modules/react-draggable/node_modules/classnames/index.js"));

var _domFns = __webpack_require__(/*! ./utils/domFns */ "../node_modules/react-draggable/build/cjs/utils/domFns.js");

var _positionFns = __webpack_require__(/*! ./utils/positionFns */ "../node_modules/react-draggable/build/cjs/utils/positionFns.js");

var _shims = __webpack_require__(/*! ./utils/shims */ "../node_modules/react-draggable/build/cjs/utils/shims.js");

var _DraggableCore = _interopRequireDefault(__webpack_require__(/*! ./DraggableCore */ "../node_modules/react-draggable/build/cjs/DraggableCore.js"));

var _log = _interopRequireDefault(__webpack_require__(/*! ./utils/log */ "../node_modules/react-draggable/build/cjs/utils/log.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

//
// Define <Draggable>
//
var Draggable = /*#__PURE__*/function (_React$Component) {
  _inherits(Draggable, _React$Component);

  var _super = _createSuper(Draggable);

  _createClass(Draggable, null, [{
    key: "getDerivedStateFromProps",
    // React 16.3+
    // Arity (props, state)
    value: function getDerivedStateFromProps(_ref, _ref2) {
      var position = _ref.position;
      var prevPropsPosition = _ref2.prevPropsPosition;

      // Set x/y if a new position is provided in props that is different than the previous.
      if (position && (!prevPropsPosition || position.x !== prevPropsPosition.x || position.y !== prevPropsPosition.y)) {
        (0, _log.default)('Draggable: getDerivedStateFromProps %j', {
          position: position,
          prevPropsPosition: prevPropsPosition
        });
        return {
          x: position.x,
          y: position.y,
          prevPropsPosition: _objectSpread({}, position)
        };
      }

      return null;
    }
  }]);

  function Draggable(props
  /*: DraggableProps*/
  ) {
    var _this;

    _classCallCheck(this, Draggable);

    _this = _super.call(this, props);

    _defineProperty(_assertThisInitialized(_this), "onDragStart", function (e, coreData) {
      (0, _log.default)('Draggable: onDragStart: %j', coreData); // Short-circuit if user's callback killed it.

      var shouldStart = _this.props.onStart(e, (0, _positionFns.createDraggableData)(_assertThisInitialized(_this), coreData)); // Kills start event on core as well, so move handlers are never bound.


      if (shouldStart === false) return false;

      _this.setState({
        dragging: true,
        dragged: true
      });
    });

    _defineProperty(_assertThisInitialized(_this), "onDrag", function (e, coreData) {
      if (!_this.state.dragging) return false;
      (0, _log.default)('Draggable: onDrag: %j', coreData);
      var uiData = (0, _positionFns.createDraggableData)(_assertThisInitialized(_this), coreData);
      var newState
      /*: $Shape<DraggableState>*/
      = {
        x: uiData.x,
        y: uiData.y
      }; // Keep within bounds.

      if (_this.props.bounds) {
        // Save original x and y.
        var x = newState.x,
            y = newState.y; // Add slack to the values used to calculate bound position. This will ensure that if
        // we start removing slack, the element won't react to it right away until it's been
        // completely removed.

        newState.x += _this.state.slackX;
        newState.y += _this.state.slackY; // Get bound position. This will ceil/floor the x and y within the boundaries.

        var _getBoundPosition = (0, _positionFns.getBoundPosition)(_assertThisInitialized(_this), newState.x, newState.y),
            _getBoundPosition2 = _slicedToArray(_getBoundPosition, 2),
            newStateX = _getBoundPosition2[0],
            newStateY = _getBoundPosition2[1];

        newState.x = newStateX;
        newState.y = newStateY; // Recalculate slack by noting how much was shaved by the boundPosition handler.

        newState.slackX = _this.state.slackX + (x - newState.x);
        newState.slackY = _this.state.slackY + (y - newState.y); // Update the event we fire to reflect what really happened after bounds took effect.

        uiData.x = newState.x;
        uiData.y = newState.y;
        uiData.deltaX = newState.x - _this.state.x;
        uiData.deltaY = newState.y - _this.state.y;
      } // Short-circuit if user's callback killed it.


      var shouldUpdate = _this.props.onDrag(e, uiData);

      if (shouldUpdate === false) return false;

      _this.setState(newState);
    });

    _defineProperty(_assertThisInitialized(_this), "onDragStop", function (e, coreData) {
      if (!_this.state.dragging) return false; // Short-circuit if user's callback killed it.

      var shouldContinue = _this.props.onStop(e, (0, _positionFns.createDraggableData)(_assertThisInitialized(_this), coreData));

      if (shouldContinue === false) return false;
      (0, _log.default)('Draggable: onDragStop: %j', coreData);
      var newState
      /*: $Shape<DraggableState>*/
      = {
        dragging: false,
        slackX: 0,
        slackY: 0
      }; // If this is a controlled component, the result of this operation will be to
      // revert back to the old position. We expect a handler on `onDragStop`, at the least.

      var controlled = Boolean(_this.props.position);

      if (controlled) {
        var _this$props$position = _this.props.position,
            x = _this$props$position.x,
            y = _this$props$position.y;
        newState.x = x;
        newState.y = y;
      }

      _this.setState(newState);
    });

    _this.state = {
      // Whether or not we are currently dragging.
      dragging: false,
      // Whether or not we have been dragged before.
      dragged: false,
      // Current transform x and y.
      x: props.position ? props.position.x : props.defaultPosition.x,
      y: props.position ? props.position.y : props.defaultPosition.y,
      prevPropsPosition: _objectSpread({}, props.position),
      // Used for compensating for out-of-bounds drags
      slackX: 0,
      slackY: 0,
      // Can only determine if SVG after mounting
      isElementSVG: false
    };

    if (props.position && !(props.onDrag || props.onStop)) {
      // eslint-disable-next-line no-console
      console.warn('A `position` was applied to this <Draggable>, without drag handlers. This will make this ' + 'component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the ' + '`position` of this element.');
    }

    return _this;
  }

  _createClass(Draggable, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      // Check to see if the element passed is an instanceof SVGElement
      if (typeof window.SVGElement !== 'undefined' && this.findDOMNode() instanceof window.SVGElement) {
        this.setState({
          isElementSVG: true
        });
      }
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      this.setState({
        dragging: false
      }); // prevents invariant if unmounted while dragging
    } // React Strict Mode compatibility: if `nodeRef` is passed, we will use it instead of trying to find
    // the underlying DOM node ourselves. See the README for more information.

  }, {
    key: "findDOMNode",
    value: function findDOMNode()
    /*: ?HTMLElement*/
    {
      return this.props.nodeRef ? this.props.nodeRef.current : _reactDom.default.findDOMNode(this);
    }
  }, {
    key: "render",
    value: function render()
    /*: ReactElement<any>*/
    {
      var _classNames;

      var _this$props = this.props,
          axis = _this$props.axis,
          bounds = _this$props.bounds,
          children = _this$props.children,
          defaultPosition = _this$props.defaultPosition,
          defaultClassName = _this$props.defaultClassName,
          defaultClassNameDragging = _this$props.defaultClassNameDragging,
          defaultClassNameDragged = _this$props.defaultClassNameDragged,
          position = _this$props.position,
          positionOffset = _this$props.positionOffset,
          scale = _this$props.scale,
          draggableCoreProps = _objectWithoutProperties(_this$props, ["axis", "bounds", "children", "defaultPosition", "defaultClassName", "defaultClassNameDragging", "defaultClassNameDragged", "position", "positionOffset", "scale"]);

      var style = {};
      var svgTransform = null; // If this is controlled, we don't want to move it - unless it's dragging.

      var controlled = Boolean(position);
      var draggable = !controlled || this.state.dragging;
      var validPosition = position || defaultPosition;
      var transformOpts = {
        // Set left if horizontal drag is enabled
        x: (0, _positionFns.canDragX)(this) && draggable ? this.state.x : validPosition.x,
        // Set top if vertical drag is enabled
        y: (0, _positionFns.canDragY)(this) && draggable ? this.state.y : validPosition.y
      }; // If this element was SVG, we use the `transform` attribute.

      if (this.state.isElementSVG) {
        svgTransform = (0, _domFns.createSVGTransform)(transformOpts, positionOffset);
      } else {
        // Add a CSS transform to move the element around. This allows us to move the element around
        // without worrying about whether or not it is relatively or absolutely positioned.
        // If the item you are dragging already has a transform set, wrap it in a <span> so <Draggable>
        // has a clean slate.
        style = (0, _domFns.createCSSTransform)(transformOpts, positionOffset);
      } // Mark with class while dragging


      var className = (0, _classnames.default)(children.props.className || '', defaultClassName, (_classNames = {}, _defineProperty(_classNames, defaultClassNameDragging, this.state.dragging), _defineProperty(_classNames, defaultClassNameDragged, this.state.dragged), _classNames)); // Reuse the child provided
      // This makes it flexible to use whatever element is wanted (div, ul, etc)

      return /*#__PURE__*/React.createElement(_DraggableCore.default, _extends({}, draggableCoreProps, {
        onStart: this.onDragStart,
        onDrag: this.onDrag,
        onStop: this.onDragStop
      }), React.cloneElement(React.Children.only(children), {
        className: className,
        style: _objectSpread(_objectSpread({}, children.props.style), style),
        transform: svgTransform
      }));
    }
  }]);

  return Draggable;
}(React.Component);

exports.default = Draggable;

_defineProperty(Draggable, "displayName", 'Draggable');

_defineProperty(Draggable, "propTypes", _objectSpread(_objectSpread({}, _DraggableCore.default.propTypes), {}, {
  /**
   * `axis` determines which axis the draggable can move.
   *
   *  Note that all callbacks will still return data as normal. This only
   *  controls flushing to the DOM.
   *
   * 'both' allows movement horizontally and vertically.
   * 'x' limits movement to horizontal axis.
   * 'y' limits movement to vertical axis.
   * 'none' limits all movement.
   *
   * Defaults to 'both'.
   */
  axis: _propTypes.default.oneOf(['both', 'x', 'y', 'none']),

  /**
   * `bounds` determines the range of movement available to the element.
   * Available values are:
   *
   * 'parent' restricts movement within the Draggable's parent node.
   *
   * Alternatively, pass an object with the following properties, all of which are optional:
   *
   * {left: LEFT_BOUND, right: RIGHT_BOUND, bottom: BOTTOM_BOUND, top: TOP_BOUND}
   *
   * All values are in px.
   *
   * Example:
   *
   * ```jsx
   *   let App = React.createClass({
   *       render: function () {
   *         return (
   *            <Draggable bounds={{right: 300, bottom: 300}}>
   *              <div>Content</div>
   *           </Draggable>
   *         );
   *       }
   *   });
   * ```
   */
  bounds: _propTypes.default.oneOfType([_propTypes.default.shape({
    left: _propTypes.default.number,
    right: _propTypes.default.number,
    top: _propTypes.default.number,
    bottom: _propTypes.default.number
  }), _propTypes.default.string, _propTypes.default.oneOf([false])]),
  defaultClassName: _propTypes.default.string,
  defaultClassNameDragging: _propTypes.default.string,
  defaultClassNameDragged: _propTypes.default.string,

  /**
   * `defaultPosition` specifies the x and y that the dragged item should start at
   *
   * Example:
   *
   * ```jsx
   *      let App = React.createClass({
   *          render: function () {
   *              return (
   *                  <Draggable defaultPosition={{x: 25, y: 25}}>
   *                      <div>I start with transformX: 25px and transformY: 25px;</div>
   *                  </Draggable>
   *              );
   *          }
   *      });
   * ```
   */
  defaultPosition: _propTypes.default.shape({
    x: _propTypes.default.number,
    y: _propTypes.default.number
  }),
  positionOffset: _propTypes.default.shape({
    x: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]),
    y: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string])
  }),

  /**
   * `position`, if present, defines the current position of the element.
   *
   *  This is similar to how form elements in React work - if no `position` is supplied, the component
   *  is uncontrolled.
   *
   * Example:
   *
   * ```jsx
   *      let App = React.createClass({
   *          render: function () {
   *              return (
   *                  <Draggable position={{x: 25, y: 25}}>
   *                      <div>I start with transformX: 25px and transformY: 25px;</div>
   *                  </Draggable>
   *              );
   *          }
   *      });
   * ```
   */
  position: _propTypes.default.shape({
    x: _propTypes.default.number,
    y: _propTypes.default.number
  }),

  /**
   * These properties should be defined on the child, not here.
   */
  className: _shims.dontSetMe,
  style: _shims.dontSetMe,
  transform: _shims.dontSetMe
}));

_defineProperty(Draggable, "defaultProps", _objectSpread(_objectSpread({}, _DraggableCore.default.defaultProps), {}, {
  axis: 'both',
  bounds: false,
  defaultClassName: 'react-draggable',
  defaultClassNameDragging: 'react-draggable-dragging',
  defaultClassNameDragged: 'react-draggable-dragged',
  defaultPosition: {
    x: 0,
    y: 0
  },
  position: null,
  scale: 1
}));

/***/ }),

/***/ "../node_modules/react-draggable/build/cjs/DraggableCore.js":
/*!******************************************************************!*\
  !*** ../node_modules/react-draggable/build/cjs/DraggableCore.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var React = _interopRequireWildcard(__webpack_require__(/*! react */ "../node_modules/react/index.js"));

var _propTypes = _interopRequireDefault(__webpack_require__(/*! prop-types */ "../node_modules/prop-types/index.js"));

var _reactDom = _interopRequireDefault(__webpack_require__(/*! react-dom */ "../node_modules/react-dom/index.js"));

var _domFns = __webpack_require__(/*! ./utils/domFns */ "../node_modules/react-draggable/build/cjs/utils/domFns.js");

var _positionFns = __webpack_require__(/*! ./utils/positionFns */ "../node_modules/react-draggable/build/cjs/utils/positionFns.js");

var _shims = __webpack_require__(/*! ./utils/shims */ "../node_modules/react-draggable/build/cjs/utils/shims.js");

var _log = _interopRequireDefault(__webpack_require__(/*! ./utils/log */ "../node_modules/react-draggable/build/cjs/utils/log.js"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

// Simple abstraction for dragging events names.
var eventsFor = {
  touch: {
    start: 'touchstart',
    move: 'touchmove',
    stop: 'touchend'
  },
  mouse: {
    start: 'mousedown',
    move: 'mousemove',
    stop: 'mouseup'
  }
}; // Default to mouse events.

var dragEventFor = eventsFor.mouse;
/*:: type DraggableCoreState = {
  dragging: boolean,
  lastX: number,
  lastY: number,
  touchIdentifier: ?number
};*/

/*:: export type DraggableData = {
  node: HTMLElement,
  x: number, y: number,
  deltaX: number, deltaY: number,
  lastX: number, lastY: number,
};*/

/*:: export type DraggableEventHandler = (e: MouseEvent, data: DraggableData) => void;*/

/*:: export type ControlPosition = {x: number, y: number};*/

/*:: export type PositionOffsetControlPosition = {x: number|string, y: number|string};*/

/*:: export type DraggableCoreProps = {
  allowAnyClick: boolean,
  cancel: string,
  children: ReactElement<any>,
  disabled: boolean,
  enableUserSelectHack: boolean,
  offsetParent: HTMLElement,
  grid: [number, number],
  handle: string,
  nodeRef?: ?React.ElementRef<any>,
  onStart: DraggableEventHandler,
  onDrag: DraggableEventHandler,
  onStop: DraggableEventHandler,
  onMouseDown: (e: MouseEvent) => void,
  scale: number,
};*/

//
// Define <DraggableCore>.
//
// <DraggableCore> is for advanced usage of <Draggable>. It maintains minimal internal state so it can
// work well with libraries that require more control over the element.
//
var DraggableCore = /*#__PURE__*/function (_React$Component) {
  _inherits(DraggableCore, _React$Component);

  var _super = _createSuper(DraggableCore);

  function DraggableCore() {
    var _this;

    _classCallCheck(this, DraggableCore);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));

    _defineProperty(_assertThisInitialized(_this), "state", {
      dragging: false,
      // Used while dragging to determine deltas.
      lastX: NaN,
      lastY: NaN,
      touchIdentifier: null
    });

    _defineProperty(_assertThisInitialized(_this), "mounted", false);

    _defineProperty(_assertThisInitialized(_this), "handleDragStart", function (e) {
      // Make it possible to attach event handlers on top of this one.
      _this.props.onMouseDown(e); // Only accept left-clicks.


      if (!_this.props.allowAnyClick && typeof e.button === 'number' && e.button !== 0) return false; // Get nodes. Be sure to grab relative document (could be iframed)

      var thisNode = _this.findDOMNode();

      if (!thisNode || !thisNode.ownerDocument || !thisNode.ownerDocument.body) {
        throw new Error('<DraggableCore> not mounted on DragStart!');
      }

      var ownerDocument = thisNode.ownerDocument; // Short circuit if handle or cancel prop was provided and selector doesn't match.

      if (_this.props.disabled || !(e.target instanceof ownerDocument.defaultView.Node) || _this.props.handle && !(0, _domFns.matchesSelectorAndParentsTo)(e.target, _this.props.handle, thisNode) || _this.props.cancel && (0, _domFns.matchesSelectorAndParentsTo)(e.target, _this.props.cancel, thisNode)) {
        return;
      } // Prevent scrolling on mobile devices, like ipad/iphone.
      // Important that this is after handle/cancel.


      if (e.type === 'touchstart') e.preventDefault(); // Set touch identifier in component state if this is a touch event. This allows us to
      // distinguish between individual touches on multitouch screens by identifying which
      // touchpoint was set to this element.

      var touchIdentifier = (0, _domFns.getTouchIdentifier)(e);

      _this.setState({
        touchIdentifier: touchIdentifier
      }); // Get the current drag point from the event. This is used as the offset.


      var position = (0, _positionFns.getControlPosition)(e, touchIdentifier, _assertThisInitialized(_this));
      if (position == null) return; // not possible but satisfies flow

      var x = position.x,
          y = position.y; // Create an event object with all the data parents need to make a decision here.

      var coreEvent = (0, _positionFns.createCoreData)(_assertThisInitialized(_this), x, y);
      (0, _log.default)('DraggableCore: handleDragStart: %j', coreEvent); // Call event handler. If it returns explicit false, cancel.

      (0, _log.default)('calling', _this.props.onStart);

      var shouldUpdate = _this.props.onStart(e, coreEvent);

      if (shouldUpdate === false || _this.mounted === false) return; // Add a style to the body to disable user-select. This prevents text from
      // being selected all over the page.

      if (_this.props.enableUserSelectHack) (0, _domFns.addUserSelectStyles)(ownerDocument); // Initiate dragging. Set the current x and y as offsets
      // so we know how much we've moved during the drag. This allows us
      // to drag elements around even if they have been moved, without issue.

      _this.setState({
        dragging: true,
        lastX: x,
        lastY: y
      }); // Add events to the document directly so we catch when the user's mouse/touch moves outside of
      // this element. We use different events depending on whether or not we have detected that this
      // is a touch-capable device.


      (0, _domFns.addEvent)(ownerDocument, dragEventFor.move, _this.handleDrag);
      (0, _domFns.addEvent)(ownerDocument, dragEventFor.stop, _this.handleDragStop);
    });

    _defineProperty(_assertThisInitialized(_this), "handleDrag", function (e) {
      // Get the current drag point from the event. This is used as the offset.
      var position = (0, _positionFns.getControlPosition)(e, _this.state.touchIdentifier, _assertThisInitialized(_this));
      if (position == null) return;
      var x = position.x,
          y = position.y; // Snap to grid if prop has been provided

      if (Array.isArray(_this.props.grid)) {
        var deltaX = x - _this.state.lastX,
            deltaY = y - _this.state.lastY;

        var _snapToGrid = (0, _positionFns.snapToGrid)(_this.props.grid, deltaX, deltaY);

        var _snapToGrid2 = _slicedToArray(_snapToGrid, 2);

        deltaX = _snapToGrid2[0];
        deltaY = _snapToGrid2[1];
        if (!deltaX && !deltaY) return; // skip useless drag

        x = _this.state.lastX + deltaX, y = _this.state.lastY + deltaY;
      }

      var coreEvent = (0, _positionFns.createCoreData)(_assertThisInitialized(_this), x, y);
      (0, _log.default)('DraggableCore: handleDrag: %j', coreEvent); // Call event handler. If it returns explicit false, trigger end.

      var shouldUpdate = _this.props.onDrag(e, coreEvent);

      if (shouldUpdate === false || _this.mounted === false) {
        try {
          // $FlowIgnore
          _this.handleDragStop(new MouseEvent('mouseup'));
        } catch (err) {
          // Old browsers
          var event = ((document.createEvent('MouseEvents')
          /*: any*/
          )
          /*: MouseTouchEvent*/
          ); // I see why this insanity was deprecated
          // $FlowIgnore

          event.initMouseEvent('mouseup', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);

          _this.handleDragStop(event);
        }

        return;
      }

      _this.setState({
        lastX: x,
        lastY: y
      });
    });

    _defineProperty(_assertThisInitialized(_this), "handleDragStop", function (e) {
      if (!_this.state.dragging) return;
      var position = (0, _positionFns.getControlPosition)(e, _this.state.touchIdentifier, _assertThisInitialized(_this));
      if (position == null) return;
      var x = position.x,
          y = position.y;
      var coreEvent = (0, _positionFns.createCoreData)(_assertThisInitialized(_this), x, y); // Call event handler

      var shouldContinue = _this.props.onStop(e, coreEvent);

      if (shouldContinue === false || _this.mounted === false) return false;

      var thisNode = _this.findDOMNode();

      if (thisNode) {
        // Remove user-select hack
        if (_this.props.enableUserSelectHack) (0, _domFns.removeUserSelectStyles)(thisNode.ownerDocument);
      }

      (0, _log.default)('DraggableCore: handleDragStop: %j', coreEvent); // Reset the el.

      _this.setState({
        dragging: false,
        lastX: NaN,
        lastY: NaN
      });

      if (thisNode) {
        // Remove event handlers
        (0, _log.default)('DraggableCore: Removing handlers');
        (0, _domFns.removeEvent)(thisNode.ownerDocument, dragEventFor.move, _this.handleDrag);
        (0, _domFns.removeEvent)(thisNode.ownerDocument, dragEventFor.stop, _this.handleDragStop);
      }
    });

    _defineProperty(_assertThisInitialized(_this), "onMouseDown", function (e) {
      dragEventFor = eventsFor.mouse; // on touchscreen laptops we could switch back to mouse

      return _this.handleDragStart(e);
    });

    _defineProperty(_assertThisInitialized(_this), "onMouseUp", function (e) {
      dragEventFor = eventsFor.mouse;
      return _this.handleDragStop(e);
    });

    _defineProperty(_assertThisInitialized(_this), "onTouchStart", function (e) {
      // We're on a touch device now, so change the event handlers
      dragEventFor = eventsFor.touch;
      return _this.handleDragStart(e);
    });

    _defineProperty(_assertThisInitialized(_this), "onTouchEnd", function (e) {
      // We're on a touch device now, so change the event handlers
      dragEventFor = eventsFor.touch;
      return _this.handleDragStop(e);
    });

    return _this;
  }

  _createClass(DraggableCore, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      this.mounted = true; // Touch handlers must be added with {passive: false} to be cancelable.
      // https://developers.google.com/web/updates/2017/01/scrolling-intervention

      var thisNode = this.findDOMNode();

      if (thisNode) {
        (0, _domFns.addEvent)(thisNode, eventsFor.touch.start, this.onTouchStart, {
          passive: false
        });
      }
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      this.mounted = false; // Remove any leftover event handlers. Remove both touch and mouse handlers in case
      // some browser quirk caused a touch event to fire during a mouse move, or vice versa.

      var thisNode = this.findDOMNode();

      if (thisNode) {
        var ownerDocument = thisNode.ownerDocument;
        (0, _domFns.removeEvent)(ownerDocument, eventsFor.mouse.move, this.handleDrag);
        (0, _domFns.removeEvent)(ownerDocument, eventsFor.touch.move, this.handleDrag);
        (0, _domFns.removeEvent)(ownerDocument, eventsFor.mouse.stop, this.handleDragStop);
        (0, _domFns.removeEvent)(ownerDocument, eventsFor.touch.stop, this.handleDragStop);
        (0, _domFns.removeEvent)(thisNode, eventsFor.touch.start, this.onTouchStart, {
          passive: false
        });
        if (this.props.enableUserSelectHack) (0, _domFns.removeUserSelectStyles)(ownerDocument);
      }
    } // React Strict Mode compatibility: if `nodeRef` is passed, we will use it instead of trying to find
    // the underlying DOM node ourselves. See the README for more information.

  }, {
    key: "findDOMNode",
    value: function findDOMNode()
    /*: ?HTMLElement*/
    {
      return this.props.nodeRef ? this.props.nodeRef.current : _reactDom.default.findDOMNode(this);
    }
  }, {
    key: "render",
    value: function render() {
      // Reuse the child provided
      // This makes it flexible to use whatever element is wanted (div, ul, etc)
      return React.cloneElement(React.Children.only(this.props.children), {
        // Note: mouseMove handler is attached to document so it will still function
        // when the user drags quickly and leaves the bounds of the element.
        onMouseDown: this.onMouseDown,
        onMouseUp: this.onMouseUp,
        // onTouchStart is added on `componentDidMount` so they can be added with
        // {passive: false}, which allows it to cancel. See 
        // https://developers.google.com/web/updates/2017/01/scrolling-intervention
        onTouchEnd: this.onTouchEnd
      });
    }
  }]);

  return DraggableCore;
}(React.Component);

exports.default = DraggableCore;

_defineProperty(DraggableCore, "displayName", 'DraggableCore');

_defineProperty(DraggableCore, "propTypes", {
  /**
   * `allowAnyClick` allows dragging using any mouse button.
   * By default, we only accept the left button.
   *
   * Defaults to `false`.
   */
  allowAnyClick: _propTypes.default.bool,

  /**
   * `disabled`, if true, stops the <Draggable> from dragging. All handlers,
   * with the exception of `onMouseDown`, will not fire.
   */
  disabled: _propTypes.default.bool,

  /**
   * By default, we add 'user-select:none' attributes to the document body
   * to prevent ugly text selection during drag. If this is causing problems
   * for your app, set this to `false`.
   */
  enableUserSelectHack: _propTypes.default.bool,

  /**
   * `offsetParent`, if set, uses the passed DOM node to compute drag offsets
   * instead of using the parent node.
   */
  offsetParent: function offsetParent(props
  /*: DraggableCoreProps*/
  , propName
  /*: $Keys<DraggableCoreProps>*/
  ) {
    if (props[propName] && props[propName].nodeType !== 1) {
      throw new Error('Draggable\'s offsetParent must be a DOM Node.');
    }
  },

  /**
   * `grid` specifies the x and y that dragging should snap to.
   */
  grid: _propTypes.default.arrayOf(_propTypes.default.number),

  /**
   * `handle` specifies a selector to be used as the handle that initiates drag.
   *
   * Example:
   *
   * ```jsx
   *   let App = React.createClass({
   *       render: function () {
   *         return (
   *            <Draggable handle=".handle">
   *              <div>
   *                  <div className="handle">Click me to drag</div>
   *                  <div>This is some other content</div>
   *              </div>
   *           </Draggable>
   *         );
   *       }
   *   });
   * ```
   */
  handle: _propTypes.default.string,

  /**
   * `cancel` specifies a selector to be used to prevent drag initialization.
   *
   * Example:
   *
   * ```jsx
   *   let App = React.createClass({
   *       render: function () {
   *           return(
   *               <Draggable cancel=".cancel">
   *                   <div>
   *                     <div className="cancel">You can't drag from here</div>
   *                     <div>Dragging here works fine</div>
   *                   </div>
   *               </Draggable>
   *           );
   *       }
   *   });
   * ```
   */
  cancel: _propTypes.default.string,

  /* If running in React Strict mode, ReactDOM.findDOMNode() is deprecated.
   * Unfortunately, in order for <Draggable> to work properly, we need raw access
   * to the underlying DOM node. If you want to avoid the warning, pass a `nodeRef`
   * as in this example:
   *
   * function MyComponent() {
   *   const nodeRef = React.useRef(null);
   *   return (
   *     <Draggable nodeRef={nodeRef}>
   *       <div ref={nodeRef}>Example Target</div>
   *     </Draggable>
   *   );
   * }
   *
   * This can be used for arbitrarily nested components, so long as the ref ends up
   * pointing to the actual child DOM node and not a custom component.
   */
  nodeRef: _propTypes.default.object,

  /**
   * Called when dragging starts.
   * If this function returns the boolean false, dragging will be canceled.
   */
  onStart: _propTypes.default.func,

  /**
   * Called while dragging.
   * If this function returns the boolean false, dragging will be canceled.
   */
  onDrag: _propTypes.default.func,

  /**
   * Called when dragging stops.
   * If this function returns the boolean false, the drag will remain active.
   */
  onStop: _propTypes.default.func,

  /**
   * A workaround option which can be passed if onMouseDown needs to be accessed,
   * since it'll always be blocked (as there is internal use of onMouseDown)
   */
  onMouseDown: _propTypes.default.func,

  /**
   * `scale`, if set, applies scaling while dragging an element
   */
  scale: _propTypes.default.number,

  /**
   * These properties should be defined on the child, not here.
   */
  className: _shims.dontSetMe,
  style: _shims.dontSetMe,
  transform: _shims.dontSetMe
});

_defineProperty(DraggableCore, "defaultProps", {
  allowAnyClick: false,
  // by default only accept left click
  cancel: null,
  disabled: false,
  enableUserSelectHack: true,
  offsetParent: null,
  handle: null,
  grid: null,
  transform: null,
  onStart: function onStart() {},
  onDrag: function onDrag() {},
  onStop: function onStop() {},
  onMouseDown: function onMouseDown() {},
  scale: 1
});

/***/ }),

/***/ "../node_modules/react-draggable/build/cjs/cjs.js":
/*!********************************************************!*\
  !*** ../node_modules/react-draggable/build/cjs/cjs.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _require = __webpack_require__(/*! ./Draggable */ "../node_modules/react-draggable/build/cjs/Draggable.js"),
    Draggable = _require.default,
    DraggableCore = _require.DraggableCore; // Previous versions of this lib exported <Draggable> as the root export. As to no-// them, or TypeScript, we export *both* as the root and as 'default'.
// See https://github.com/mzabriskie/react-draggable/pull/254
// and https://github.com/mzabriskie/react-draggable/issues/266


module.exports = Draggable;
module.exports.default = Draggable;
module.exports.DraggableCore = DraggableCore;

/***/ }),

/***/ "../node_modules/react-draggable/build/cjs/utils/domFns.js":
/*!*****************************************************************!*\
  !*** ../node_modules/react-draggable/build/cjs/utils/domFns.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.matchesSelector = matchesSelector;
exports.matchesSelectorAndParentsTo = matchesSelectorAndParentsTo;
exports.addEvent = addEvent;
exports.removeEvent = removeEvent;
exports.outerHeight = outerHeight;
exports.outerWidth = outerWidth;
exports.innerHeight = innerHeight;
exports.innerWidth = innerWidth;
exports.offsetXYFromParent = offsetXYFromParent;
exports.createCSSTransform = createCSSTransform;
exports.createSVGTransform = createSVGTransform;
exports.getTranslation = getTranslation;
exports.getTouch = getTouch;
exports.getTouchIdentifier = getTouchIdentifier;
exports.addUserSelectStyles = addUserSelectStyles;
exports.removeUserSelectStyles = removeUserSelectStyles;
exports.addClassName = addClassName;
exports.removeClassName = removeClassName;

var _shims = __webpack_require__(/*! ./shims */ "../node_modules/react-draggable/build/cjs/utils/shims.js");

var _getPrefix = _interopRequireWildcard(__webpack_require__(/*! ./getPrefix */ "../node_modules/react-draggable/build/cjs/utils/getPrefix.js"));

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var matchesSelectorFunc = '';

function matchesSelector(el
/*: Node*/
, selector
/*: string*/
)
/*: boolean*/
{
  if (!matchesSelectorFunc) {
    matchesSelectorFunc = (0, _shims.findInArray)(['matches', 'webkitMatchesSelector', 'mozMatchesSelector', 'msMatchesSelector', 'oMatchesSelector'], function (method) {
      // $FlowIgnore: Doesn't think elements are indexable
      return (0, _shims.isFunction)(el[method]);
    });
  } // Might not be found entirely (not an Element?) - in that case, bail
  // $FlowIgnore: Doesn't think elements are indexable


  if (!(0, _shims.isFunction)(el[matchesSelectorFunc])) return false; // $FlowIgnore: Doesn't think elements are indexable

  return el[matchesSelectorFunc](selector);
} // Works up the tree to the draggable itself attempting to match selector.


function matchesSelectorAndParentsTo(el
/*: Node*/
, selector
/*: string*/
, baseNode
/*: Node*/
)
/*: boolean*/
{
  var node = el;

  do {
    if (matchesSelector(node, selector)) return true;
    if (node === baseNode) return false;
    node = node.parentNode;
  } while (node);

  return false;
}

function addEvent(el
/*: ?Node*/
, event
/*: string*/
, handler
/*: Function*/
, inputOptions
/*: Object*/
)
/*: void*/
{
  if (!el) return;

  var options = _objectSpread({
    capture: true
  }, inputOptions);

  if (el.addEventListener) {
    el.addEventListener(event, handler, options);
  } else if (el.attachEvent) {
    el.attachEvent('on' + event, handler);
  } else {
    // $FlowIgnore: Doesn't think elements are indexable
    el['on' + event] = handler;
  }
}

function removeEvent(el
/*: ?Node*/
, event
/*: string*/
, handler
/*: Function*/
, inputOptions
/*: Object*/
)
/*: void*/
{
  if (!el) return;

  var options = _objectSpread({
    capture: true
  }, inputOptions);

  if (el.removeEventListener) {
    el.removeEventListener(event, handler, options);
  } else if (el.detachEvent) {
    el.detachEvent('on' + event, handler);
  } else {
    // $FlowIgnore: Doesn't think elements are indexable
    el['on' + event] = null;
  }
}

function outerHeight(node
/*: HTMLElement*/
)
/*: number*/
{
  // This is deliberately excluding margin for our calculations, since we are using
  // offsetTop which is including margin. See getBoundPosition
  var height = node.clientHeight;
  var computedStyle = node.ownerDocument.defaultView.getComputedStyle(node);
  height += (0, _shims.int)(computedStyle.borderTopWidth);
  height += (0, _shims.int)(computedStyle.borderBottomWidth);
  return height;
}

function outerWidth(node
/*: HTMLElement*/
)
/*: number*/
{
  // This is deliberately excluding margin for our calculations, since we are using
  // offsetLeft which is including margin. See getBoundPosition
  var width = node.clientWidth;
  var computedStyle = node.ownerDocument.defaultView.getComputedStyle(node);
  width += (0, _shims.int)(computedStyle.borderLeftWidth);
  width += (0, _shims.int)(computedStyle.borderRightWidth);
  return width;
}

function innerHeight(node
/*: HTMLElement*/
)
/*: number*/
{
  var height = node.clientHeight;
  var computedStyle = node.ownerDocument.defaultView.getComputedStyle(node);
  height -= (0, _shims.int)(computedStyle.paddingTop);
  height -= (0, _shims.int)(computedStyle.paddingBottom);
  return height;
}

function innerWidth(node
/*: HTMLElement*/
)
/*: number*/
{
  var width = node.clientWidth;
  var computedStyle = node.ownerDocument.defaultView.getComputedStyle(node);
  width -= (0, _shims.int)(computedStyle.paddingLeft);
  width -= (0, _shims.int)(computedStyle.paddingRight);
  return width;
} // Get from offsetParent


function offsetXYFromParent(evt
/*: {clientX: number, clientY: number}*/
, offsetParent
/*: HTMLElement*/
, scale
/*: number*/
)
/*: ControlPosition*/
{
  var isBody = offsetParent === offsetParent.ownerDocument.body;
  var offsetParentRect = isBody ? {
    left: 0,
    top: 0
  } : offsetParent.getBoundingClientRect();
  var x = (evt.clientX + offsetParent.scrollLeft - offsetParentRect.left) / scale;
  var y = (evt.clientY + offsetParent.scrollTop - offsetParentRect.top) / scale;
  return {
    x: x,
    y: y
  };
}

function createCSSTransform(controlPos
/*: ControlPosition*/
, positionOffset
/*: PositionOffsetControlPosition*/
)
/*: Object*/
{
  var translation = getTranslation(controlPos, positionOffset, 'px');
  return _defineProperty({}, (0, _getPrefix.browserPrefixToKey)('transform', _getPrefix.default), translation);
}

function createSVGTransform(controlPos
/*: ControlPosition*/
, positionOffset
/*: PositionOffsetControlPosition*/
)
/*: string*/
{
  var translation = getTranslation(controlPos, positionOffset, '');
  return translation;
}

function getTranslation(_ref2, positionOffset
/*: PositionOffsetControlPosition*/
, unitSuffix
/*: string*/
)
/*: string*/
{
  var x = _ref2.x,
      y = _ref2.y;
  var translation = "translate(".concat(x).concat(unitSuffix, ",").concat(y).concat(unitSuffix, ")");

  if (positionOffset) {
    var defaultX = "".concat(typeof positionOffset.x === 'string' ? positionOffset.x : positionOffset.x + unitSuffix);
    var defaultY = "".concat(typeof positionOffset.y === 'string' ? positionOffset.y : positionOffset.y + unitSuffix);
    translation = "translate(".concat(defaultX, ", ").concat(defaultY, ")") + translation;
  }

  return translation;
}

function getTouch(e
/*: MouseTouchEvent*/
, identifier
/*: number*/
)
/*: ?{clientX: number, clientY: number}*/
{
  return e.targetTouches && (0, _shims.findInArray)(e.targetTouches, function (t) {
    return identifier === t.identifier;
  }) || e.changedTouches && (0, _shims.findInArray)(e.changedTouches, function (t) {
    return identifier === t.identifier;
  });
}

function getTouchIdentifier(e
/*: MouseTouchEvent*/
)
/*: ?number*/
{
  if (e.targetTouches && e.targetTouches[0]) return e.targetTouches[0].identifier;
  if (e.changedTouches && e.changedTouches[0]) return e.changedTouches[0].identifier;
} // User-select Hacks:
//
// Useful for preventing blue highlights all over everything when dragging.
// Note we're passing `document` b/c we could be iframed


function addUserSelectStyles(doc
/*: ?Document*/
) {
  if (!doc) return;
  var styleEl = doc.getElementById('react-draggable-style-el');

  if (!styleEl) {
    styleEl = doc.createElement('style');
    styleEl.type = 'text/css';
    styleEl.id = 'react-draggable-style-el';
    styleEl.innerHTML = '.react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n';
    styleEl.innerHTML += '.react-draggable-transparent-selection *::selection {all: inherit;}\n';
    doc.getElementsByTagName('head')[0].appendChild(styleEl);
  }

  if (doc.body) addClassName(doc.body, 'react-draggable-transparent-selection');
}

function removeUserSelectStyles(doc
/*: ?Document*/
) {
  if (!doc) return;

  try {
    if (doc.body) removeClassName(doc.body, 'react-draggable-transparent-selection'); // $FlowIgnore: IE

    if (doc.selection) {
      // $FlowIgnore: IE
      doc.selection.empty();
    } else {
      // Remove selection caused by scroll, unless it's a focused input
      // (we use doc.defaultView in case we're in an iframe)
      var selection = (doc.defaultView || window).getSelection();

      if (selection && selection.type !== 'Caret') {
        selection.removeAllRanges();
      }
    }
  } catch (e) {// probably IE
  }
}

function addClassName(el
/*: HTMLElement*/
, className
/*: string*/
) {
  if (el.classList) {
    el.classList.add(className);
  } else {
    if (!el.className.match(new RegExp("(?:^|\\s)".concat(className, "(?!\\S)")))) {
      el.className += " ".concat(className);
    }
  }
}

function removeClassName(el
/*: HTMLElement*/
, className
/*: string*/
) {
  if (el.classList) {
    el.classList.remove(className);
  } else {
    el.className = el.className.replace(new RegExp("(?:^|\\s)".concat(className, "(?!\\S)"), 'g'), '');
  }
}

/***/ }),

/***/ "../node_modules/react-draggable/build/cjs/utils/getPrefix.js":
/*!********************************************************************!*\
  !*** ../node_modules/react-draggable/build/cjs/utils/getPrefix.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getPrefix = getPrefix;
exports.browserPrefixToKey = browserPrefixToKey;
exports.browserPrefixToStyle = browserPrefixToStyle;
exports.default = void 0;
var prefixes = ['Moz', 'Webkit', 'O', 'ms'];

function getPrefix()
/*: string*/
{
  var prop
  /*: string*/
  = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'transform';
  // Checking specifically for 'window.document' is for pseudo-browser server-side
  // environments that define 'window' as the global context.
  // E.g. React-rails (see https://github.com/reactjs/react-rails/pull/84)
  if (typeof window === 'undefined' || typeof window.document === 'undefined') return '';
  var style = window.document.documentElement.style;
  if (prop in style) return '';

  for (var i = 0; i < prefixes.length; i++) {
    if (browserPrefixToKey(prop, prefixes[i]) in style) return prefixes[i];
  }

  return '';
}

function browserPrefixToKey(prop
/*: string*/
, prefix
/*: string*/
)
/*: string*/
{
  return prefix ? "".concat(prefix).concat(kebabToTitleCase(prop)) : prop;
}

function browserPrefixToStyle(prop
/*: string*/
, prefix
/*: string*/
)
/*: string*/
{
  return prefix ? "-".concat(prefix.toLowerCase(), "-").concat(prop) : prop;
}

function kebabToTitleCase(str
/*: string*/
)
/*: string*/
{
  var out = '';
  var shouldCapitalize = true;

  for (var i = 0; i < str.length; i++) {
    if (shouldCapitalize) {
      out += str[i].toUpperCase();
      shouldCapitalize = false;
    } else if (str[i] === '-') {
      shouldCapitalize = true;
    } else {
      out += str[i];
    }
  }

  return out;
} // Default export is the prefix itself, like 'Moz', 'Webkit', etc
// Note that you may have to re-test for certain things; for instance, Chrome 50
// can handle unprefixed `transform`, but not unprefixed `user-select`


var _default = getPrefix();

exports.default = _default;

/***/ }),

/***/ "../node_modules/react-draggable/build/cjs/utils/log.js":
/*!**************************************************************!*\
  !*** ../node_modules/react-draggable/build/cjs/utils/log.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = log;

/*eslint no-console:0*/
function log() {
  var _console;

  if (undefined) (_console = console).log.apply(_console, arguments);
}

/***/ }),

/***/ "../node_modules/react-draggable/build/cjs/utils/positionFns.js":
/*!**********************************************************************!*\
  !*** ../node_modules/react-draggable/build/cjs/utils/positionFns.js ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getBoundPosition = getBoundPosition;
exports.snapToGrid = snapToGrid;
exports.canDragX = canDragX;
exports.canDragY = canDragY;
exports.getControlPosition = getControlPosition;
exports.createCoreData = createCoreData;
exports.createDraggableData = createDraggableData;

var _shims = __webpack_require__(/*! ./shims */ "../node_modules/react-draggable/build/cjs/utils/shims.js");

var _domFns = __webpack_require__(/*! ./domFns */ "../node_modules/react-draggable/build/cjs/utils/domFns.js");

function getBoundPosition(draggable
/*: Draggable*/
, x
/*: number*/
, y
/*: number*/
)
/*: [number, number]*/
{
  // If no bounds, short-circuit and move on
  if (!draggable.props.bounds) return [x, y]; // Clone new bounds

  var bounds = draggable.props.bounds;
  bounds = typeof bounds === 'string' ? bounds : cloneBounds(bounds);
  var node = findDOMNode(draggable);

  if (typeof bounds === 'string') {
    var ownerDocument = node.ownerDocument;
    var ownerWindow = ownerDocument.defaultView;
    var boundNode;

    if (bounds === 'parent') {
      boundNode = node.parentNode;
    } else {
      boundNode = ownerDocument.querySelector(bounds);
    }

    if (!(boundNode instanceof ownerWindow.HTMLElement)) {
      throw new Error('Bounds selector "' + bounds + '" could not find an element.');
    }

    var nodeStyle = ownerWindow.getComputedStyle(node);
    var boundNodeStyle = ownerWindow.getComputedStyle(boundNode); // Compute bounds. This is a pain with padding and offsets but this gets it exactly right.

    bounds = {
      left: -node.offsetLeft + (0, _shims.int)(boundNodeStyle.paddingLeft) + (0, _shims.int)(nodeStyle.marginLeft),
      top: -node.offsetTop + (0, _shims.int)(boundNodeStyle.paddingTop) + (0, _shims.int)(nodeStyle.marginTop),
      right: (0, _domFns.innerWidth)(boundNode) - (0, _domFns.outerWidth)(node) - node.offsetLeft + (0, _shims.int)(boundNodeStyle.paddingRight) - (0, _shims.int)(nodeStyle.marginRight),
      bottom: (0, _domFns.innerHeight)(boundNode) - (0, _domFns.outerHeight)(node) - node.offsetTop + (0, _shims.int)(boundNodeStyle.paddingBottom) - (0, _shims.int)(nodeStyle.marginBottom)
    };
  } // Keep x and y below right and bottom limits...


  if ((0, _shims.isNum)(bounds.right)) x = Math.min(x, bounds.right);
  if ((0, _shims.isNum)(bounds.bottom)) y = Math.min(y, bounds.bottom); // But above left and top limits.

  if ((0, _shims.isNum)(bounds.left)) x = Math.max(x, bounds.left);
  if ((0, _shims.isNum)(bounds.top)) y = Math.max(y, bounds.top);
  return [x, y];
}

function snapToGrid(grid
/*: [number, number]*/
, pendingX
/*: number*/
, pendingY
/*: number*/
)
/*: [number, number]*/
{
  var x = Math.round(pendingX / grid[0]) * grid[0];
  var y = Math.round(pendingY / grid[1]) * grid[1];
  return [x, y];
}

function canDragX(draggable
/*: Draggable*/
)
/*: boolean*/
{
  return draggable.props.axis === 'both' || draggable.props.axis === 'x';
}

function canDragY(draggable
/*: Draggable*/
)
/*: boolean*/
{
  return draggable.props.axis === 'both' || draggable.props.axis === 'y';
} // Get {x, y} positions from event.


function getControlPosition(e
/*: MouseTouchEvent*/
, touchIdentifier
/*: ?number*/
, draggableCore
/*: DraggableCore*/
)
/*: ?ControlPosition*/
{
  var touchObj = typeof touchIdentifier === 'number' ? (0, _domFns.getTouch)(e, touchIdentifier) : null;
  if (typeof touchIdentifier === 'number' && !touchObj) return null; // not the right touch

  var node = findDOMNode(draggableCore); // User can provide an offsetParent if desired.

  var offsetParent = draggableCore.props.offsetParent || node.offsetParent || node.ownerDocument.body;
  return (0, _domFns.offsetXYFromParent)(touchObj || e, offsetParent, draggableCore.props.scale);
} // Create an data object exposed by <DraggableCore>'s events


function createCoreData(draggable
/*: DraggableCore*/
, x
/*: number*/
, y
/*: number*/
)
/*: DraggableData*/
{
  var state = draggable.state;
  var isStart = !(0, _shims.isNum)(state.lastX);
  var node = findDOMNode(draggable);

  if (isStart) {
    // If this is our first move, use the x and y as last coords.
    return {
      node: node,
      deltaX: 0,
      deltaY: 0,
      lastX: x,
      lastY: y,
      x: x,
      y: y
    };
  } else {
    // Otherwise calculate proper values.
    return {
      node: node,
      deltaX: x - state.lastX,
      deltaY: y - state.lastY,
      lastX: state.lastX,
      lastY: state.lastY,
      x: x,
      y: y
    };
  }
} // Create an data exposed by <Draggable>'s events


function createDraggableData(draggable
/*: Draggable*/
, coreData
/*: DraggableData*/
)
/*: DraggableData*/
{
  var scale = draggable.props.scale;
  return {
    node: coreData.node,
    x: draggable.state.x + coreData.deltaX / scale,
    y: draggable.state.y + coreData.deltaY / scale,
    deltaX: coreData.deltaX / scale,
    deltaY: coreData.deltaY / scale,
    lastX: draggable.state.x,
    lastY: draggable.state.y
  };
} // A lot faster than stringify/parse


function cloneBounds(bounds
/*: Bounds*/
)
/*: Bounds*/
{
  return {
    left: bounds.left,
    top: bounds.top,
    right: bounds.right,
    bottom: bounds.bottom
  };
}

function findDOMNode(draggable
/*: Draggable | DraggableCore*/
)
/*: HTMLElement*/
{
  var node = draggable.findDOMNode();

  if (!node) {
    throw new Error('<DraggableCore>: Unmounted during event!');
  } // $FlowIgnore we can't assert on HTMLElement due to tests... FIXME


  return node;
}

/***/ }),

/***/ "../node_modules/react-draggable/build/cjs/utils/shims.js":
/*!****************************************************************!*\
  !*** ../node_modules/react-draggable/build/cjs/utils/shims.js ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.findInArray = findInArray;
exports.isFunction = isFunction;
exports.isNum = isNum;
exports.int = int;
exports.dontSetMe = dontSetMe;

// @credits https://gist.github.com/rogozhnikoff/a43cfed27c41e4e68cdc
function findInArray(array
/*: Array<any> | TouchList*/
, callback
/*: Function*/
)
/*: any*/
{
  for (var i = 0, length = array.length; i < length; i++) {
    if (callback.apply(callback, [array[i], i, array])) return array[i];
  }
}

function isFunction(func
/*: any*/
)
/*: boolean %checks*/
{
  return typeof func === 'function' || Object.prototype.toString.call(func) === '[object Function]';
}

function isNum(num
/*: any*/
)
/*: boolean %checks*/
{
  return typeof num === 'number' && !isNaN(num);
}

function int(a
/*: string*/
)
/*: number*/
{
  return parseInt(a, 10);
}

function dontSetMe(props
/*: Object*/
, propName
/*: string*/
, componentName
/*: string*/
) {
  if (props[propName]) {
    return new Error("Invalid prop ".concat(propName, " passed to ").concat(componentName, " - do not set this, set it on the child."));
  }
}

/***/ }),

/***/ "../node_modules/react-draggable/node_modules/classnames/index.js":
/*!************************************************************************!*\
  !*** ../node_modules/react-draggable/node_modules/classnames/index.js ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
/* global define */

(function () {
	'use strict';

	var hasOwn = {}.hasOwnProperty;

	function classNames() {
		var classes = [];

		for (var i = 0; i < arguments.length; i++) {
			var arg = arguments[i];
			if (!arg) continue;

			var argType = typeof arg;

			if (argType === 'string' || argType === 'number') {
				classes.push(arg);
			} else if (Array.isArray(arg)) {
				if (arg.length) {
					var inner = classNames.apply(null, arg);
					if (inner) {
						classes.push(inner);
					}
				}
			} else if (argType === 'object') {
				if (arg.toString === Object.prototype.toString) {
					for (var key in arg) {
						if (hasOwn.call(arg, key) && arg[key]) {
							classes.push(key);
						}
					}
				} else {
					classes.push(arg.toString());
				}
			}
		}

		return classes.join(' ');
	}

	if ( true && module.exports) {
		classNames.default = classNames;
		module.exports = classNames;
	} else if (true) {
		// register as 'classnames', consistent with npm package name
		!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function () {
			return classNames;
		}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
	} else {}
}());


/***/ }),

/***/ "../node_modules/react-universal-interface/lib/addClassDecoratorSupport.js":
/*!*********************************************************************************!*\
  !*** ../node_modules/react-universal-interface/lib/addClassDecoratorSupport.js ***!
  \*********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var wrapInStatefulComponent_1 = tslib_1.__importDefault(__webpack_require__(/*! ./wrapInStatefulComponent */ "../node_modules/react-universal-interface/lib/wrapInStatefulComponent.js"));
var addClassDecoratorSupport = function (Comp) {
    var isSFC = !Comp.prototype;
    return !isSFC ? Comp : wrapInStatefulComponent_1.default(Comp);
};
exports.default = addClassDecoratorSupport;
//# sourceMappingURL=addClassDecoratorSupport.js.map

/***/ }),

/***/ "../node_modules/react-universal-interface/lib/createEnhancer.js":
/*!***********************************************************************!*\
  !*** ../node_modules/react-universal-interface/lib/createEnhancer.js ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.divWrapper = void 0;
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var React = tslib_1.__importStar(__webpack_require__(/*! react */ "../node_modules/react/index.js"));
var addClassDecoratorSupport_1 = tslib_1.__importDefault(__webpack_require__(/*! ./addClassDecoratorSupport */ "../node_modules/react-universal-interface/lib/addClassDecoratorSupport.js"));
var h = React.createElement;
var noWrap = function (Comp, propName, props, state) {
    var _a;
    return h(Comp, propName ? tslib_1.__assign((_a = {}, _a[propName] = state, _a), props) : tslib_1.__assign(tslib_1.__assign({}, state), props));
};
exports.divWrapper = function (Comp, propName, props, state) {
    return h('div', null, noWrap(Comp, propName, props, state));
};
var createEnhancer = function (Facc, prop, wrapper) {
    if (wrapper === void 0) { wrapper = noWrap; }
    var enhancer = function (Comp, propName, faccProps) {
        if (propName === void 0) { propName = prop; }
        if (faccProps === void 0) { faccProps = null; }
        var isClassDecoratorMethodCall = typeof Comp === 'string';
        if (isClassDecoratorMethodCall) {
            return function (Klass) { return enhancer(Klass, Comp || prop, propName); };
        }
        var Enhanced = function (props) {
            return h(Facc, faccProps, function (state) { return wrapper(Comp, propName, props, state); });
        };
        if (true) {
            Enhanced.displayName = (Facc.displayName || Facc.name) + "(" + (Comp.displayName || Comp.name) + ")";
        }
        return isClassDecoratorMethodCall ? addClassDecoratorSupport_1.default(Enhanced) : Enhanced;
    };
    return enhancer;
};
exports.default = createEnhancer;
//# sourceMappingURL=createEnhancer.js.map

/***/ }),

/***/ "../node_modules/react-universal-interface/lib/hookToRenderProp.js":
/*!*************************************************************************!*\
  !*** ../node_modules/react-universal-interface/lib/hookToRenderProp.js ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var render_1 = tslib_1.__importDefault(__webpack_require__(/*! ./render */ "../node_modules/react-universal-interface/lib/render.js"));
var defaultMapPropsToArgs = function (props) { return [props]; };
var hookToRenderProp = function (hook, mapPropsToArgs) {
    if (mapPropsToArgs === void 0) { mapPropsToArgs = defaultMapPropsToArgs; }
    return function (props) { return render_1.default(props, hook.apply(void 0, mapPropsToArgs(props))); };
};
exports.default = hookToRenderProp;
//# sourceMappingURL=hookToRenderProp.js.map

/***/ }),

/***/ "../node_modules/react-universal-interface/lib/index.js":
/*!**************************************************************!*\
  !*** ../node_modules/react-universal-interface/lib/index.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.hookToRenderProp = exports.createEnhancer = exports.render = void 0;
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var render_1 = tslib_1.__importDefault(__webpack_require__(/*! ./render */ "../node_modules/react-universal-interface/lib/render.js"));
exports.render = render_1.default;
var createEnhancer_1 = tslib_1.__importDefault(__webpack_require__(/*! ./createEnhancer */ "../node_modules/react-universal-interface/lib/createEnhancer.js"));
exports.createEnhancer = createEnhancer_1.default;
var hookToRenderProp_1 = tslib_1.__importDefault(__webpack_require__(/*! ./hookToRenderProp */ "../node_modules/react-universal-interface/lib/hookToRenderProp.js"));
exports.hookToRenderProp = hookToRenderProp_1.default;
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../node_modules/react-universal-interface/lib/render.js":
/*!***************************************************************!*\
  !*** ../node_modules/react-universal-interface/lib/render.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var react_1 = __webpack_require__(/*! react */ "../node_modules/react/index.js");
var isReact16Plus = parseInt(react_1.version.substr(0, react_1.version.indexOf('.'))) > 15;
var isFn = function (fn) { return typeof fn === 'function'; };
var render = function (props, data) {
    var more = [];
    for (var _i = 2; _i < arguments.length; _i++) {
        more[_i - 2] = arguments[_i];
    }
    if (true) {
        if (typeof props !== 'object') {
            throw new TypeError('renderChildren(props, data) first argument must be a props object.');
        }
        var children_1 = props.children, render_1 = props.render;
        if (isFn(children_1) && isFn(render_1)) {
            console.warn('Both "render" and "children" are specified for in a universal interface component. ' +
                'Children will be used.');
            console.trace();
        }
        if (typeof data !== 'object') {
            console.warn('Universal component interface normally expects data to be an object, ' +
                ("\"" + typeof data + "\" received."));
            console.trace();
        }
    }
    var render = props.render, _a = props.children, children = _a === void 0 ? render : _a, component = props.component, _b = props.comp, comp = _b === void 0 ? component : _b;
    if (isFn(children))
        return children.apply(void 0, tslib_1.__spreadArrays([data], more));
    if (comp) {
        return react_1.createElement(comp, data);
    }
    if (children instanceof Array)
        return isReact16Plus ? children : react_1.createElement.apply(void 0, tslib_1.__spreadArrays(['div', null], children));
    if (children && (children instanceof Object)) {
        if (true) {
            if (!children.type || ((typeof children.type !== 'string') && (typeof children.type !== 'function') && (typeof children.type !== 'symbol'))) {
                console.warn('Universal component interface received object as children, ' +
                    'expected React element, but received unexpected React "type".');
                console.trace();
            }
            if (typeof children.type === 'string')
                return children;
            return react_1.cloneElement(children, Object.assign({}, children.props, data));
        }
        else {}
    }
    return children || null;
};
exports.default = render;
//# sourceMappingURL=render.js.map

/***/ }),

/***/ "../node_modules/react-universal-interface/lib/wrapInStatefulComponent.js":
/*!********************************************************************************!*\
  !*** ../node_modules/react-universal-interface/lib/wrapInStatefulComponent.js ***!
  \********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var React = tslib_1.__importStar(__webpack_require__(/*! react */ "../node_modules/react/index.js"));
var wrapInStatefulComponent = function (Comp) {
    var Decorated = (function (_super) {
        tslib_1.__extends(class_1, _super);
        function class_1() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        class_1.prototype.render = function () {
            return Comp(this.props, this.context);
        };
        return class_1;
    }(React.Component));
    if (true) {
        Decorated.displayName = "Decorated(" + (Comp.displayName || Comp.name) + ")";
    }
    return Decorated;
};
exports.default = wrapInStatefulComponent;
//# sourceMappingURL=wrapInStatefulComponent.js.map

/***/ }),

/***/ "../node_modules/react-use/esm/factory/createBreakpoint.js":
/*!*****************************************************************!*\
  !*** ../node_modules/react-use/esm/factory/createBreakpoint.js ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc/util */ "../node_modules/react-use/esm/misc/util.js");


var createBreakpoint = function (breakpoints) {
    if (breakpoints === void 0) { breakpoints = { laptopL: 1440, laptop: 1024, tablet: 768 }; }
    return function () {
        var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(_misc_util__WEBPACK_IMPORTED_MODULE_1__["isBrowser"] ? window.innerWidth : 0), screen = _a[0], setScreen = _a[1];
        Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
            var setSideScreen = function () {
                setScreen(window.innerWidth);
            };
            setSideScreen();
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(window, 'resize', setSideScreen);
            return function () {
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(window, 'resize', setSideScreen);
            };
        });
        var sortedBreakpoints = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () { return Object.entries(breakpoints).sort(function (a, b) { return (a[1] >= b[1] ? 1 : -1); }); }, [breakpoints]);
        var result = sortedBreakpoints.reduce(function (acc, _a) {
            var name = _a[0], width = _a[1];
            if (screen >= width) {
                return name;
            }
            else {
                return acc;
            }
        }, sortedBreakpoints[0][0]);
        return result;
    };
};
/* harmony default export */ __webpack_exports__["default"] = (createBreakpoint);


/***/ }),

/***/ "../node_modules/react-use/esm/factory/createGlobalState.js":
/*!******************************************************************!*\
  !*** ../node_modules/react-use/esm/factory/createGlobalState.js ***!
  \******************************************************************/
/*! exports provided: createGlobalState, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createGlobalState", function() { return createGlobalState; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_hookState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc/hookState */ "../node_modules/react-use/esm/misc/hookState.js");
/* harmony import */ var _useEffectOnce__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../useEffectOnce */ "../node_modules/react-use/esm/useEffectOnce.js");
/* harmony import */ var _useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../useIsomorphicLayoutEffect */ "../node_modules/react-use/esm/useIsomorphicLayoutEffect.js");




function createGlobalState(initialState) {
    var store = {
        state: initialState instanceof Function ? initialState() : initialState,
        setState: function (nextState) {
            store.state = Object(_misc_hookState__WEBPACK_IMPORTED_MODULE_1__["resolveHookState"])(nextState, store.state);
            store.setters.forEach(function (setter) { return setter(store.state); });
        },
        setters: [],
    };
    return function () {
        var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(store.state), globalState = _a[0], stateSetter = _a[1];
        Object(_useEffectOnce__WEBPACK_IMPORTED_MODULE_2__["default"])(function () { return function () {
            store.setters = store.setters.filter(function (setter) { return setter !== stateSetter; });
        }; });
        Object(_useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_3__["default"])(function () {
            if (!store.setters.includes(stateSetter)) {
                store.setters.push(stateSetter);
            }
        });
        return [globalState, store.setState];
    };
}
/* harmony default export */ __webpack_exports__["default"] = (createGlobalState);


/***/ }),

/***/ "../node_modules/react-use/esm/factory/createHTMLMediaHook.js":
/*!********************************************************************!*\
  !*** ../node_modules/react-use/esm/factory/createHTMLMediaHook.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return createHTMLMediaHook; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _useSetState__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../useSetState */ "../node_modules/react-use/esm/useSetState.js");
/* harmony import */ var _misc_parseTimeRanges__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../misc/parseTimeRanges */ "../node_modules/react-use/esm/misc/parseTimeRanges.js");





function createHTMLMediaHook(tag) {
    return function (elOrProps) {
        var element;
        var props;
        if (react__WEBPACK_IMPORTED_MODULE_1__["isValidElement"](elOrProps)) {
            element = elOrProps;
            props = element.props;
        }
        else {
            props = elOrProps;
        }
        var _a = Object(_useSetState__WEBPACK_IMPORTED_MODULE_2__["default"])({
            buffered: [],
            time: 0,
            duration: 0,
            paused: true,
            muted: false,
            volume: 1,
            playing: false,
        }), state = _a[0], setState = _a[1];
        var ref = Object(react__WEBPACK_IMPORTED_MODULE_1__["useRef"])(null);
        var wrapEvent = function (userEvent, proxyEvent) {
            return function (event) {
                try {
                    proxyEvent && proxyEvent(event);
                }
                finally {
                    userEvent && userEvent(event);
                }
            };
        };
        var onPlay = function () { return setState({ paused: false }); };
        var onPlaying = function () { return setState({ playing: true }); };
        var onWaiting = function () { return setState({ playing: false }); };
        var onPause = function () { return setState({ paused: true, playing: false }); };
        var onVolumeChange = function () {
            var el = ref.current;
            if (!el) {
                return;
            }
            setState({
                muted: el.muted,
                volume: el.volume,
            });
        };
        var onDurationChange = function () {
            var el = ref.current;
            if (!el) {
                return;
            }
            var duration = el.duration, buffered = el.buffered;
            setState({
                duration: duration,
                buffered: Object(_misc_parseTimeRanges__WEBPACK_IMPORTED_MODULE_3__["default"])(buffered),
            });
        };
        var onTimeUpdate = function () {
            var el = ref.current;
            if (!el) {
                return;
            }
            setState({ time: el.currentTime });
        };
        var onProgress = function () {
            var el = ref.current;
            if (!el) {
                return;
            }
            setState({ buffered: Object(_misc_parseTimeRanges__WEBPACK_IMPORTED_MODULE_3__["default"])(el.buffered) });
        };
        if (element) {
            element = react__WEBPACK_IMPORTED_MODULE_1__["cloneElement"](element, Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ controls: false }, props), { ref: ref, onPlay: wrapEvent(props.onPlay, onPlay), onPlaying: wrapEvent(props.onPlaying, onPlaying), onWaiting: wrapEvent(props.onWaiting, onWaiting), onPause: wrapEvent(props.onPause, onPause), onVolumeChange: wrapEvent(props.onVolumeChange, onVolumeChange), onDurationChange: wrapEvent(props.onDurationChange, onDurationChange), onTimeUpdate: wrapEvent(props.onTimeUpdate, onTimeUpdate), onProgress: wrapEvent(props.onProgress, onProgress) }));
        }
        else {
            element = react__WEBPACK_IMPORTED_MODULE_1__["createElement"](tag, Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ controls: false }, props), { ref: ref, onPlay: wrapEvent(props.onPlay, onPlay), onPlaying: wrapEvent(props.onPlaying, onPlaying), onWaiting: wrapEvent(props.onWaiting, onWaiting), onPause: wrapEvent(props.onPause, onPause), onVolumeChange: wrapEvent(props.onVolumeChange, onVolumeChange), onDurationChange: wrapEvent(props.onDurationChange, onDurationChange), onTimeUpdate: wrapEvent(props.onTimeUpdate, onTimeUpdate), onProgress: wrapEvent(props.onProgress, onProgress) })); // TODO: fix this typing.
        }
        // Some browsers return `Promise` on `.play()` and may throw errors
        // if one tries to execute another `.play()` or `.pause()` while that
        // promise is resolving. So we prevent that with this lock.
        // See: https://bugs.chromium.org/p/chromium/issues/detail?id=593273
        var lockPlay = false;
        var controls = {
            play: function () {
                var el = ref.current;
                if (!el) {
                    return undefined;
                }
                if (!lockPlay) {
                    var promise = el.play();
                    var isPromise = typeof promise === 'object';
                    if (isPromise) {
                        lockPlay = true;
                        var resetLock = function () {
                            lockPlay = false;
                        };
                        promise.then(resetLock, resetLock);
                    }
                    return promise;
                }
                return undefined;
            },
            pause: function () {
                var el = ref.current;
                if (el && !lockPlay) {
                    return el.pause();
                }
            },
            seek: function (time) {
                var el = ref.current;
                if (!el || state.duration === undefined) {
                    return;
                }
                time = Math.min(state.duration, Math.max(0, time));
                el.currentTime = time;
            },
            volume: function (volume) {
                var el = ref.current;
                if (!el) {
                    return;
                }
                volume = Math.min(1, Math.max(0, volume));
                el.volume = volume;
                setState({ volume: volume });
            },
            mute: function () {
                var el = ref.current;
                if (!el) {
                    return;
                }
                el.muted = true;
            },
            unmute: function () {
                var el = ref.current;
                if (!el) {
                    return;
                }
                el.muted = false;
            },
        };
        Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () {
            var el = ref.current;
            if (!el) {
                if (true) {
                    if (tag === 'audio') {
                        console.error('useAudio() ref to <audio> element is empty at mount. ' +
                            'It seem you have not rendered the audio element, which it ' +
                            'returns as the first argument const [audio] = useAudio(...).');
                    }
                    else if (tag === 'video') {
                        console.error('useVideo() ref to <video> element is empty at mount. ' +
                            'It seem you have not rendered the video element, which it ' +
                            'returns as the first argument const [video] = useVideo(...).');
                    }
                }
                return;
            }
            setState({
                volume: el.volume,
                muted: el.muted,
                paused: el.paused,
            });
            // Start media, if autoPlay requested.
            if (props.autoPlay && el.paused) {
                controls.play();
            }
        }, [props.src]);
        return [element, state, controls, ref];
    };
}


/***/ }),

/***/ "../node_modules/react-use/esm/factory/createMemo.js":
/*!***********************************************************!*\
  !*** ../node_modules/react-use/esm/factory/createMemo.js ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var createMemo = function (fn) {
    return function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        return Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () { return fn.apply(void 0, args); }, args);
    };
};
/* harmony default export */ __webpack_exports__["default"] = (createMemo);


/***/ }),

/***/ "../node_modules/react-use/esm/factory/createReducer.js":
/*!**************************************************************!*\
  !*** ../node_modules/react-use/esm/factory/createReducer.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useUpdateEffect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../useUpdateEffect */ "../node_modules/react-use/esm/useUpdateEffect.js");


function composeMiddleware(chain) {
    return function (context, dispatch) {
        return chain.reduceRight(function (res, middleware) {
            return middleware(context)(res);
        }, dispatch);
    };
}
var createReducer = function () {
    var middlewares = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        middlewares[_i] = arguments[_i];
    }
    var composedMiddleware = composeMiddleware(middlewares);
    return function (reducer, initialState, initializer) {
        if (initializer === void 0) { initializer = function (value) { return value; }; }
        var ref = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(initializer(initialState));
        var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(ref.current), setState = _a[1];
        var dispatch = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function (action) {
            ref.current = reducer(ref.current, action);
            setState(ref.current);
            return action;
        }, [reducer]);
        var dispatchRef = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(composedMiddleware({
            getState: function () { return ref.current; },
            dispatch: function () {
                var args = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    args[_i] = arguments[_i];
                }
                return dispatchRef.current.apply(dispatchRef, args);
            },
        }, dispatch));
        Object(_useUpdateEffect__WEBPACK_IMPORTED_MODULE_1__["default"])(function () {
            dispatchRef.current = composedMiddleware({
                getState: function () { return ref.current; },
                dispatch: function () {
                    var args = [];
                    for (var _i = 0; _i < arguments.length; _i++) {
                        args[_i] = arguments[_i];
                    }
                    return dispatchRef.current.apply(dispatchRef, args);
                },
            }, dispatch);
        }, [dispatch]);
        return [ref.current, dispatchRef.current];
    };
};
/* harmony default export */ __webpack_exports__["default"] = (createReducer);


/***/ }),

/***/ "../node_modules/react-use/esm/factory/createReducerContext.js":
/*!*********************************************************************!*\
  !*** ../node_modules/react-use/esm/factory/createReducerContext.js ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var createReducerContext = function (reducer, defaultInitialState) {
    var context = Object(react__WEBPACK_IMPORTED_MODULE_0__["createContext"])(undefined);
    var providerFactory = function (props, children) { return Object(react__WEBPACK_IMPORTED_MODULE_0__["createElement"])(context.Provider, props, children); };
    var ReducerProvider = function (_a) {
        var children = _a.children, initialState = _a.initialState;
        var state = Object(react__WEBPACK_IMPORTED_MODULE_0__["useReducer"])(reducer, initialState !== undefined ? initialState : defaultInitialState);
        return providerFactory({ value: state }, children);
    };
    var useReducerContext = function () {
        var state = Object(react__WEBPACK_IMPORTED_MODULE_0__["useContext"])(context);
        if (state == null) {
            throw new Error("useReducerContext must be used inside a ReducerProvider.");
        }
        return state;
    };
    return [useReducerContext, ReducerProvider, context];
};
/* harmony default export */ __webpack_exports__["default"] = (createReducerContext);


/***/ }),

/***/ "../node_modules/react-use/esm/factory/createStateContext.js":
/*!*******************************************************************!*\
  !*** ../node_modules/react-use/esm/factory/createStateContext.js ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var createStateContext = function (defaultInitialValue) {
    var context = Object(react__WEBPACK_IMPORTED_MODULE_0__["createContext"])(undefined);
    var providerFactory = function (props, children) { return Object(react__WEBPACK_IMPORTED_MODULE_0__["createElement"])(context.Provider, props, children); };
    var StateProvider = function (_a) {
        var children = _a.children, initialValue = _a.initialValue;
        var state = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(initialValue !== undefined ? initialValue : defaultInitialValue);
        return providerFactory({ value: state }, children);
    };
    var useStateContext = function () {
        var state = Object(react__WEBPACK_IMPORTED_MODULE_0__["useContext"])(context);
        if (state == null) {
            throw new Error("useStateContext must be used inside a StateProvider.");
        }
        return state;
    };
    return [useStateContext, StateProvider, context];
};
/* harmony default export */ __webpack_exports__["default"] = (createStateContext);


/***/ }),

/***/ "../node_modules/react-use/esm/index.js":
/*!**********************************************!*\
  !*** ../node_modules/react-use/esm/index.js ***!
  \**********************************************/
/*! exports provided: createMemo, createReducerContext, createReducer, createStateContext, useAsync, useAsyncFn, useAsyncRetry, useAudio, useBattery, useBeforeUnload, useBoolean, useClickAway, useCookie, useCopyToClipboard, useCounter, useCss, useCustomCompareEffect, useDebounce, useDeepCompareEffect, useDefault, useDrop, useDropArea, useEffectOnce, useEnsuredForwardedRef, ensuredForwardRef, useEvent, useError, useFavicon, useFullscreen, useGeolocation, useGetSet, useGetSetState, useHarmonicIntervalFn, useHover, useHoverDirty, useIdle, useIntersection, useInterval, useIsomorphicLayoutEffect, useKey, createBreakpoint, useKeyPress, useKeyPressEvent, useLatest, useLifecycles, useList, useLocalStorage, useLocation, useLockBodyScroll, useLogger, useLongPress, useMap, useMedia, useMediaDevices, useMediatedState, useMethods, useMotion, useMount, useMountedState, useMouse, useMouseHovered, useMouseWheel, useNetworkState, useNumber, useObservable, useOrientation, usePageLeave, usePermission, usePrevious, usePreviousDistinct, usePromise, useQueue, useRaf, useRafLoop, useRafState, useSearchParam, useScratch, useScroll, useScrolling, useSessionStorage, useSetState, useShallowCompareEffect, useSize, useSlider, useSpeech, useStartTyping, useStateWithHistory, useStateList, useThrottle, useThrottleFn, useTimeout, useTimeoutFn, useTitle, useToggle, useTween, useUnmount, useUnmountPromise, useUpdate, useUpdateEffect, useUpsert, useVibrate, useVideo, useStateValidator, useScrollbarWidth, useMultiStateValidator, useWindowScroll, useWindowSize, useMeasure, useRendersCount, useFirstMountState, useSet, createGlobalState, useHash */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _factory_createMemo__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./factory/createMemo */ "../node_modules/react-use/esm/factory/createMemo.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createMemo", function() { return _factory_createMemo__WEBPACK_IMPORTED_MODULE_0__["default"]; });

/* harmony import */ var _factory_createReducerContext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./factory/createReducerContext */ "../node_modules/react-use/esm/factory/createReducerContext.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createReducerContext", function() { return _factory_createReducerContext__WEBPACK_IMPORTED_MODULE_1__["default"]; });

/* harmony import */ var _factory_createReducer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./factory/createReducer */ "../node_modules/react-use/esm/factory/createReducer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createReducer", function() { return _factory_createReducer__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _factory_createStateContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./factory/createStateContext */ "../node_modules/react-use/esm/factory/createStateContext.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createStateContext", function() { return _factory_createStateContext__WEBPACK_IMPORTED_MODULE_3__["default"]; });

/* harmony import */ var _useAsync__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useAsync */ "../node_modules/react-use/esm/useAsync.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useAsync", function() { return _useAsync__WEBPACK_IMPORTED_MODULE_4__["default"]; });

/* harmony import */ var _useAsyncFn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./useAsyncFn */ "../node_modules/react-use/esm/useAsyncFn.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useAsyncFn", function() { return _useAsyncFn__WEBPACK_IMPORTED_MODULE_5__["default"]; });

/* harmony import */ var _useAsyncRetry__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./useAsyncRetry */ "../node_modules/react-use/esm/useAsyncRetry.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useAsyncRetry", function() { return _useAsyncRetry__WEBPACK_IMPORTED_MODULE_6__["default"]; });

/* harmony import */ var _useAudio__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./useAudio */ "../node_modules/react-use/esm/useAudio.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useAudio", function() { return _useAudio__WEBPACK_IMPORTED_MODULE_7__["default"]; });

/* harmony import */ var _useBattery__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./useBattery */ "../node_modules/react-use/esm/useBattery.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useBattery", function() { return _useBattery__WEBPACK_IMPORTED_MODULE_8__["default"]; });

/* harmony import */ var _useBeforeUnload__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./useBeforeUnload */ "../node_modules/react-use/esm/useBeforeUnload.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useBeforeUnload", function() { return _useBeforeUnload__WEBPACK_IMPORTED_MODULE_9__["default"]; });

/* harmony import */ var _useBoolean__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./useBoolean */ "../node_modules/react-use/esm/useBoolean.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useBoolean", function() { return _useBoolean__WEBPACK_IMPORTED_MODULE_10__["default"]; });

/* harmony import */ var _useClickAway__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./useClickAway */ "../node_modules/react-use/esm/useClickAway.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useClickAway", function() { return _useClickAway__WEBPACK_IMPORTED_MODULE_11__["default"]; });

/* harmony import */ var _useCookie__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./useCookie */ "../node_modules/react-use/esm/useCookie.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useCookie", function() { return _useCookie__WEBPACK_IMPORTED_MODULE_12__["default"]; });

/* harmony import */ var _useCopyToClipboard__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./useCopyToClipboard */ "../node_modules/react-use/esm/useCopyToClipboard.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useCopyToClipboard", function() { return _useCopyToClipboard__WEBPACK_IMPORTED_MODULE_13__["default"]; });

/* harmony import */ var _useCounter__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./useCounter */ "../node_modules/react-use/esm/useCounter.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useCounter", function() { return _useCounter__WEBPACK_IMPORTED_MODULE_14__["default"]; });

/* harmony import */ var _useCss__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./useCss */ "../node_modules/react-use/esm/useCss.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useCss", function() { return _useCss__WEBPACK_IMPORTED_MODULE_15__["default"]; });

/* harmony import */ var _useCustomCompareEffect__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./useCustomCompareEffect */ "../node_modules/react-use/esm/useCustomCompareEffect.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useCustomCompareEffect", function() { return _useCustomCompareEffect__WEBPACK_IMPORTED_MODULE_16__["default"]; });

/* harmony import */ var _useDebounce__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./useDebounce */ "../node_modules/react-use/esm/useDebounce.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useDebounce", function() { return _useDebounce__WEBPACK_IMPORTED_MODULE_17__["default"]; });

/* harmony import */ var _useDeepCompareEffect__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./useDeepCompareEffect */ "../node_modules/react-use/esm/useDeepCompareEffect.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useDeepCompareEffect", function() { return _useDeepCompareEffect__WEBPACK_IMPORTED_MODULE_18__["default"]; });

/* harmony import */ var _useDefault__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./useDefault */ "../node_modules/react-use/esm/useDefault.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useDefault", function() { return _useDefault__WEBPACK_IMPORTED_MODULE_19__["default"]; });

/* harmony import */ var _useDrop__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./useDrop */ "../node_modules/react-use/esm/useDrop.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useDrop", function() { return _useDrop__WEBPACK_IMPORTED_MODULE_20__["default"]; });

/* harmony import */ var _useDropArea__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./useDropArea */ "../node_modules/react-use/esm/useDropArea.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useDropArea", function() { return _useDropArea__WEBPACK_IMPORTED_MODULE_21__["default"]; });

/* harmony import */ var _useEffectOnce__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./useEffectOnce */ "../node_modules/react-use/esm/useEffectOnce.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useEffectOnce", function() { return _useEffectOnce__WEBPACK_IMPORTED_MODULE_22__["default"]; });

/* harmony import */ var _useEnsuredForwardedRef__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./useEnsuredForwardedRef */ "../node_modules/react-use/esm/useEnsuredForwardedRef.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useEnsuredForwardedRef", function() { return _useEnsuredForwardedRef__WEBPACK_IMPORTED_MODULE_23__["default"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ensuredForwardRef", function() { return _useEnsuredForwardedRef__WEBPACK_IMPORTED_MODULE_23__["ensuredForwardRef"]; });

/* harmony import */ var _useEvent__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./useEvent */ "../node_modules/react-use/esm/useEvent.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useEvent", function() { return _useEvent__WEBPACK_IMPORTED_MODULE_24__["default"]; });

/* harmony import */ var _useError__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./useError */ "../node_modules/react-use/esm/useError.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useError", function() { return _useError__WEBPACK_IMPORTED_MODULE_25__["default"]; });

/* harmony import */ var _useFavicon__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./useFavicon */ "../node_modules/react-use/esm/useFavicon.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useFavicon", function() { return _useFavicon__WEBPACK_IMPORTED_MODULE_26__["default"]; });

/* harmony import */ var _useFullscreen__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./useFullscreen */ "../node_modules/react-use/esm/useFullscreen.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useFullscreen", function() { return _useFullscreen__WEBPACK_IMPORTED_MODULE_27__["default"]; });

/* harmony import */ var _useGeolocation__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./useGeolocation */ "../node_modules/react-use/esm/useGeolocation.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useGeolocation", function() { return _useGeolocation__WEBPACK_IMPORTED_MODULE_28__["default"]; });

/* harmony import */ var _useGetSet__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./useGetSet */ "../node_modules/react-use/esm/useGetSet.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useGetSet", function() { return _useGetSet__WEBPACK_IMPORTED_MODULE_29__["default"]; });

/* harmony import */ var _useGetSetState__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./useGetSetState */ "../node_modules/react-use/esm/useGetSetState.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useGetSetState", function() { return _useGetSetState__WEBPACK_IMPORTED_MODULE_30__["default"]; });

/* harmony import */ var _useHarmonicIntervalFn__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./useHarmonicIntervalFn */ "../node_modules/react-use/esm/useHarmonicIntervalFn.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useHarmonicIntervalFn", function() { return _useHarmonicIntervalFn__WEBPACK_IMPORTED_MODULE_31__["default"]; });

/* harmony import */ var _useHover__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./useHover */ "../node_modules/react-use/esm/useHover.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useHover", function() { return _useHover__WEBPACK_IMPORTED_MODULE_32__["default"]; });

/* harmony import */ var _useHoverDirty__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./useHoverDirty */ "../node_modules/react-use/esm/useHoverDirty.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useHoverDirty", function() { return _useHoverDirty__WEBPACK_IMPORTED_MODULE_33__["default"]; });

/* harmony import */ var _useIdle__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./useIdle */ "../node_modules/react-use/esm/useIdle.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useIdle", function() { return _useIdle__WEBPACK_IMPORTED_MODULE_34__["default"]; });

/* harmony import */ var _useIntersection__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./useIntersection */ "../node_modules/react-use/esm/useIntersection.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useIntersection", function() { return _useIntersection__WEBPACK_IMPORTED_MODULE_35__["default"]; });

/* harmony import */ var _useInterval__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./useInterval */ "../node_modules/react-use/esm/useInterval.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useInterval", function() { return _useInterval__WEBPACK_IMPORTED_MODULE_36__["default"]; });

/* harmony import */ var _useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./useIsomorphicLayoutEffect */ "../node_modules/react-use/esm/useIsomorphicLayoutEffect.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useIsomorphicLayoutEffect", function() { return _useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_37__["default"]; });

/* harmony import */ var _useKey__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./useKey */ "../node_modules/react-use/esm/useKey.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useKey", function() { return _useKey__WEBPACK_IMPORTED_MODULE_38__["default"]; });

/* harmony import */ var _factory_createBreakpoint__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./factory/createBreakpoint */ "../node_modules/react-use/esm/factory/createBreakpoint.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createBreakpoint", function() { return _factory_createBreakpoint__WEBPACK_IMPORTED_MODULE_39__["default"]; });

/* harmony import */ var _useKeyPress__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./useKeyPress */ "../node_modules/react-use/esm/useKeyPress.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useKeyPress", function() { return _useKeyPress__WEBPACK_IMPORTED_MODULE_40__["default"]; });

/* harmony import */ var _useKeyPressEvent__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./useKeyPressEvent */ "../node_modules/react-use/esm/useKeyPressEvent.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useKeyPressEvent", function() { return _useKeyPressEvent__WEBPACK_IMPORTED_MODULE_41__["default"]; });

/* harmony import */ var _useLatest__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./useLatest */ "../node_modules/react-use/esm/useLatest.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useLatest", function() { return _useLatest__WEBPACK_IMPORTED_MODULE_42__["default"]; });

/* harmony import */ var _useLifecycles__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./useLifecycles */ "../node_modules/react-use/esm/useLifecycles.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useLifecycles", function() { return _useLifecycles__WEBPACK_IMPORTED_MODULE_43__["default"]; });

/* harmony import */ var _useList__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ./useList */ "../node_modules/react-use/esm/useList.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useList", function() { return _useList__WEBPACK_IMPORTED_MODULE_44__["default"]; });

/* harmony import */ var _useLocalStorage__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ./useLocalStorage */ "../node_modules/react-use/esm/useLocalStorage.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useLocalStorage", function() { return _useLocalStorage__WEBPACK_IMPORTED_MODULE_45__["default"]; });

/* harmony import */ var _useLocation__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ./useLocation */ "../node_modules/react-use/esm/useLocation.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useLocation", function() { return _useLocation__WEBPACK_IMPORTED_MODULE_46__["default"]; });

/* harmony import */ var _useLockBodyScroll__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ./useLockBodyScroll */ "../node_modules/react-use/esm/useLockBodyScroll.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useLockBodyScroll", function() { return _useLockBodyScroll__WEBPACK_IMPORTED_MODULE_47__["default"]; });

/* harmony import */ var _useLogger__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ./useLogger */ "../node_modules/react-use/esm/useLogger.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useLogger", function() { return _useLogger__WEBPACK_IMPORTED_MODULE_48__["default"]; });

/* harmony import */ var _useLongPress__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! ./useLongPress */ "../node_modules/react-use/esm/useLongPress.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useLongPress", function() { return _useLongPress__WEBPACK_IMPORTED_MODULE_49__["default"]; });

/* harmony import */ var _useMap__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! ./useMap */ "../node_modules/react-use/esm/useMap.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useMap", function() { return _useMap__WEBPACK_IMPORTED_MODULE_50__["default"]; });

/* harmony import */ var _useMedia__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! ./useMedia */ "../node_modules/react-use/esm/useMedia.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useMedia", function() { return _useMedia__WEBPACK_IMPORTED_MODULE_51__["default"]; });

/* harmony import */ var _useMediaDevices__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! ./useMediaDevices */ "../node_modules/react-use/esm/useMediaDevices.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useMediaDevices", function() { return _useMediaDevices__WEBPACK_IMPORTED_MODULE_52__["default"]; });

/* harmony import */ var _useMediatedState__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! ./useMediatedState */ "../node_modules/react-use/esm/useMediatedState.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useMediatedState", function() { return _useMediatedState__WEBPACK_IMPORTED_MODULE_53__["useMediatedState"]; });

/* harmony import */ var _useMethods__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! ./useMethods */ "../node_modules/react-use/esm/useMethods.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useMethods", function() { return _useMethods__WEBPACK_IMPORTED_MODULE_54__["default"]; });

/* harmony import */ var _useMotion__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! ./useMotion */ "../node_modules/react-use/esm/useMotion.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useMotion", function() { return _useMotion__WEBPACK_IMPORTED_MODULE_55__["default"]; });

/* harmony import */ var _useMount__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! ./useMount */ "../node_modules/react-use/esm/useMount.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useMount", function() { return _useMount__WEBPACK_IMPORTED_MODULE_56__["default"]; });

/* harmony import */ var _useMountedState__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(/*! ./useMountedState */ "../node_modules/react-use/esm/useMountedState.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useMountedState", function() { return _useMountedState__WEBPACK_IMPORTED_MODULE_57__["default"]; });

/* harmony import */ var _useMouse__WEBPACK_IMPORTED_MODULE_58__ = __webpack_require__(/*! ./useMouse */ "../node_modules/react-use/esm/useMouse.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useMouse", function() { return _useMouse__WEBPACK_IMPORTED_MODULE_58__["default"]; });

/* harmony import */ var _useMouseHovered__WEBPACK_IMPORTED_MODULE_59__ = __webpack_require__(/*! ./useMouseHovered */ "../node_modules/react-use/esm/useMouseHovered.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useMouseHovered", function() { return _useMouseHovered__WEBPACK_IMPORTED_MODULE_59__["default"]; });

/* harmony import */ var _useMouseWheel__WEBPACK_IMPORTED_MODULE_60__ = __webpack_require__(/*! ./useMouseWheel */ "../node_modules/react-use/esm/useMouseWheel.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useMouseWheel", function() { return _useMouseWheel__WEBPACK_IMPORTED_MODULE_60__["default"]; });

/* harmony import */ var _useNetworkState__WEBPACK_IMPORTED_MODULE_61__ = __webpack_require__(/*! ./useNetworkState */ "../node_modules/react-use/esm/useNetworkState.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useNetworkState", function() { return _useNetworkState__WEBPACK_IMPORTED_MODULE_61__["default"]; });

/* harmony import */ var _useNumber__WEBPACK_IMPORTED_MODULE_62__ = __webpack_require__(/*! ./useNumber */ "../node_modules/react-use/esm/useNumber.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useNumber", function() { return _useNumber__WEBPACK_IMPORTED_MODULE_62__["default"]; });

/* harmony import */ var _useObservable__WEBPACK_IMPORTED_MODULE_63__ = __webpack_require__(/*! ./useObservable */ "../node_modules/react-use/esm/useObservable.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useObservable", function() { return _useObservable__WEBPACK_IMPORTED_MODULE_63__["default"]; });

/* harmony import */ var _useOrientation__WEBPACK_IMPORTED_MODULE_64__ = __webpack_require__(/*! ./useOrientation */ "../node_modules/react-use/esm/useOrientation.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useOrientation", function() { return _useOrientation__WEBPACK_IMPORTED_MODULE_64__["default"]; });

/* harmony import */ var _usePageLeave__WEBPACK_IMPORTED_MODULE_65__ = __webpack_require__(/*! ./usePageLeave */ "../node_modules/react-use/esm/usePageLeave.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "usePageLeave", function() { return _usePageLeave__WEBPACK_IMPORTED_MODULE_65__["default"]; });

/* harmony import */ var _usePermission__WEBPACK_IMPORTED_MODULE_66__ = __webpack_require__(/*! ./usePermission */ "../node_modules/react-use/esm/usePermission.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "usePermission", function() { return _usePermission__WEBPACK_IMPORTED_MODULE_66__["default"]; });

/* harmony import */ var _usePrevious__WEBPACK_IMPORTED_MODULE_67__ = __webpack_require__(/*! ./usePrevious */ "../node_modules/react-use/esm/usePrevious.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "usePrevious", function() { return _usePrevious__WEBPACK_IMPORTED_MODULE_67__["default"]; });

/* harmony import */ var _usePreviousDistinct__WEBPACK_IMPORTED_MODULE_68__ = __webpack_require__(/*! ./usePreviousDistinct */ "../node_modules/react-use/esm/usePreviousDistinct.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "usePreviousDistinct", function() { return _usePreviousDistinct__WEBPACK_IMPORTED_MODULE_68__["default"]; });

/* harmony import */ var _usePromise__WEBPACK_IMPORTED_MODULE_69__ = __webpack_require__(/*! ./usePromise */ "../node_modules/react-use/esm/usePromise.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "usePromise", function() { return _usePromise__WEBPACK_IMPORTED_MODULE_69__["default"]; });

/* harmony import */ var _useQueue__WEBPACK_IMPORTED_MODULE_70__ = __webpack_require__(/*! ./useQueue */ "../node_modules/react-use/esm/useQueue.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useQueue", function() { return _useQueue__WEBPACK_IMPORTED_MODULE_70__["default"]; });

/* harmony import */ var _useRaf__WEBPACK_IMPORTED_MODULE_71__ = __webpack_require__(/*! ./useRaf */ "../node_modules/react-use/esm/useRaf.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useRaf", function() { return _useRaf__WEBPACK_IMPORTED_MODULE_71__["default"]; });

/* harmony import */ var _useRafLoop__WEBPACK_IMPORTED_MODULE_72__ = __webpack_require__(/*! ./useRafLoop */ "../node_modules/react-use/esm/useRafLoop.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useRafLoop", function() { return _useRafLoop__WEBPACK_IMPORTED_MODULE_72__["default"]; });

/* harmony import */ var _useRafState__WEBPACK_IMPORTED_MODULE_73__ = __webpack_require__(/*! ./useRafState */ "../node_modules/react-use/esm/useRafState.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useRafState", function() { return _useRafState__WEBPACK_IMPORTED_MODULE_73__["default"]; });

/* harmony import */ var _useSearchParam__WEBPACK_IMPORTED_MODULE_74__ = __webpack_require__(/*! ./useSearchParam */ "../node_modules/react-use/esm/useSearchParam.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useSearchParam", function() { return _useSearchParam__WEBPACK_IMPORTED_MODULE_74__["default"]; });

/* harmony import */ var _useScratch__WEBPACK_IMPORTED_MODULE_75__ = __webpack_require__(/*! ./useScratch */ "../node_modules/react-use/esm/useScratch.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useScratch", function() { return _useScratch__WEBPACK_IMPORTED_MODULE_75__["default"]; });

/* harmony import */ var _useScroll__WEBPACK_IMPORTED_MODULE_76__ = __webpack_require__(/*! ./useScroll */ "../node_modules/react-use/esm/useScroll.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useScroll", function() { return _useScroll__WEBPACK_IMPORTED_MODULE_76__["default"]; });

/* harmony import */ var _useScrolling__WEBPACK_IMPORTED_MODULE_77__ = __webpack_require__(/*! ./useScrolling */ "../node_modules/react-use/esm/useScrolling.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useScrolling", function() { return _useScrolling__WEBPACK_IMPORTED_MODULE_77__["default"]; });

/* harmony import */ var _useSessionStorage__WEBPACK_IMPORTED_MODULE_78__ = __webpack_require__(/*! ./useSessionStorage */ "../node_modules/react-use/esm/useSessionStorage.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useSessionStorage", function() { return _useSessionStorage__WEBPACK_IMPORTED_MODULE_78__["default"]; });

/* harmony import */ var _useSetState__WEBPACK_IMPORTED_MODULE_79__ = __webpack_require__(/*! ./useSetState */ "../node_modules/react-use/esm/useSetState.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useSetState", function() { return _useSetState__WEBPACK_IMPORTED_MODULE_79__["default"]; });

/* harmony import */ var _useShallowCompareEffect__WEBPACK_IMPORTED_MODULE_80__ = __webpack_require__(/*! ./useShallowCompareEffect */ "../node_modules/react-use/esm/useShallowCompareEffect.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useShallowCompareEffect", function() { return _useShallowCompareEffect__WEBPACK_IMPORTED_MODULE_80__["default"]; });

/* harmony import */ var _useSize__WEBPACK_IMPORTED_MODULE_81__ = __webpack_require__(/*! ./useSize */ "../node_modules/react-use/esm/useSize.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useSize", function() { return _useSize__WEBPACK_IMPORTED_MODULE_81__["default"]; });

/* harmony import */ var _useSlider__WEBPACK_IMPORTED_MODULE_82__ = __webpack_require__(/*! ./useSlider */ "../node_modules/react-use/esm/useSlider.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useSlider", function() { return _useSlider__WEBPACK_IMPORTED_MODULE_82__["default"]; });

/* harmony import */ var _useSpeech__WEBPACK_IMPORTED_MODULE_83__ = __webpack_require__(/*! ./useSpeech */ "../node_modules/react-use/esm/useSpeech.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useSpeech", function() { return _useSpeech__WEBPACK_IMPORTED_MODULE_83__["default"]; });

/* harmony import */ var _useStartTyping__WEBPACK_IMPORTED_MODULE_84__ = __webpack_require__(/*! ./useStartTyping */ "../node_modules/react-use/esm/useStartTyping.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useStartTyping", function() { return _useStartTyping__WEBPACK_IMPORTED_MODULE_84__["default"]; });

/* harmony import */ var _useStateWithHistory__WEBPACK_IMPORTED_MODULE_85__ = __webpack_require__(/*! ./useStateWithHistory */ "../node_modules/react-use/esm/useStateWithHistory.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useStateWithHistory", function() { return _useStateWithHistory__WEBPACK_IMPORTED_MODULE_85__["useStateWithHistory"]; });

/* harmony import */ var _useStateList__WEBPACK_IMPORTED_MODULE_86__ = __webpack_require__(/*! ./useStateList */ "../node_modules/react-use/esm/useStateList.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useStateList", function() { return _useStateList__WEBPACK_IMPORTED_MODULE_86__["default"]; });

/* harmony import */ var _useThrottle__WEBPACK_IMPORTED_MODULE_87__ = __webpack_require__(/*! ./useThrottle */ "../node_modules/react-use/esm/useThrottle.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useThrottle", function() { return _useThrottle__WEBPACK_IMPORTED_MODULE_87__["default"]; });

/* harmony import */ var _useThrottleFn__WEBPACK_IMPORTED_MODULE_88__ = __webpack_require__(/*! ./useThrottleFn */ "../node_modules/react-use/esm/useThrottleFn.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useThrottleFn", function() { return _useThrottleFn__WEBPACK_IMPORTED_MODULE_88__["default"]; });

/* harmony import */ var _useTimeout__WEBPACK_IMPORTED_MODULE_89__ = __webpack_require__(/*! ./useTimeout */ "../node_modules/react-use/esm/useTimeout.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useTimeout", function() { return _useTimeout__WEBPACK_IMPORTED_MODULE_89__["default"]; });

/* harmony import */ var _useTimeoutFn__WEBPACK_IMPORTED_MODULE_90__ = __webpack_require__(/*! ./useTimeoutFn */ "../node_modules/react-use/esm/useTimeoutFn.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useTimeoutFn", function() { return _useTimeoutFn__WEBPACK_IMPORTED_MODULE_90__["default"]; });

/* harmony import */ var _useTitle__WEBPACK_IMPORTED_MODULE_91__ = __webpack_require__(/*! ./useTitle */ "../node_modules/react-use/esm/useTitle.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useTitle", function() { return _useTitle__WEBPACK_IMPORTED_MODULE_91__["default"]; });

/* harmony import */ var _useToggle__WEBPACK_IMPORTED_MODULE_92__ = __webpack_require__(/*! ./useToggle */ "../node_modules/react-use/esm/useToggle.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useToggle", function() { return _useToggle__WEBPACK_IMPORTED_MODULE_92__["default"]; });

/* harmony import */ var _useTween__WEBPACK_IMPORTED_MODULE_93__ = __webpack_require__(/*! ./useTween */ "../node_modules/react-use/esm/useTween.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useTween", function() { return _useTween__WEBPACK_IMPORTED_MODULE_93__["default"]; });

/* harmony import */ var _useUnmount__WEBPACK_IMPORTED_MODULE_94__ = __webpack_require__(/*! ./useUnmount */ "../node_modules/react-use/esm/useUnmount.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useUnmount", function() { return _useUnmount__WEBPACK_IMPORTED_MODULE_94__["default"]; });

/* harmony import */ var _useUnmountPromise__WEBPACK_IMPORTED_MODULE_95__ = __webpack_require__(/*! ./useUnmountPromise */ "../node_modules/react-use/esm/useUnmountPromise.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useUnmountPromise", function() { return _useUnmountPromise__WEBPACK_IMPORTED_MODULE_95__["default"]; });

/* harmony import */ var _useUpdate__WEBPACK_IMPORTED_MODULE_96__ = __webpack_require__(/*! ./useUpdate */ "../node_modules/react-use/esm/useUpdate.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useUpdate", function() { return _useUpdate__WEBPACK_IMPORTED_MODULE_96__["default"]; });

/* harmony import */ var _useUpdateEffect__WEBPACK_IMPORTED_MODULE_97__ = __webpack_require__(/*! ./useUpdateEffect */ "../node_modules/react-use/esm/useUpdateEffect.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useUpdateEffect", function() { return _useUpdateEffect__WEBPACK_IMPORTED_MODULE_97__["default"]; });

/* harmony import */ var _useUpsert__WEBPACK_IMPORTED_MODULE_98__ = __webpack_require__(/*! ./useUpsert */ "../node_modules/react-use/esm/useUpsert.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useUpsert", function() { return _useUpsert__WEBPACK_IMPORTED_MODULE_98__["default"]; });

/* harmony import */ var _useVibrate__WEBPACK_IMPORTED_MODULE_99__ = __webpack_require__(/*! ./useVibrate */ "../node_modules/react-use/esm/useVibrate.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useVibrate", function() { return _useVibrate__WEBPACK_IMPORTED_MODULE_99__["default"]; });

/* harmony import */ var _useVideo__WEBPACK_IMPORTED_MODULE_100__ = __webpack_require__(/*! ./useVideo */ "../node_modules/react-use/esm/useVideo.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useVideo", function() { return _useVideo__WEBPACK_IMPORTED_MODULE_100__["default"]; });

/* harmony import */ var _useStateValidator__WEBPACK_IMPORTED_MODULE_101__ = __webpack_require__(/*! ./useStateValidator */ "../node_modules/react-use/esm/useStateValidator.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useStateValidator", function() { return _useStateValidator__WEBPACK_IMPORTED_MODULE_101__["default"]; });

/* harmony import */ var _useScrollbarWidth__WEBPACK_IMPORTED_MODULE_102__ = __webpack_require__(/*! ./useScrollbarWidth */ "../node_modules/react-use/esm/useScrollbarWidth.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useScrollbarWidth", function() { return _useScrollbarWidth__WEBPACK_IMPORTED_MODULE_102__["useScrollbarWidth"]; });

/* harmony import */ var _useMultiStateValidator__WEBPACK_IMPORTED_MODULE_103__ = __webpack_require__(/*! ./useMultiStateValidator */ "../node_modules/react-use/esm/useMultiStateValidator.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useMultiStateValidator", function() { return _useMultiStateValidator__WEBPACK_IMPORTED_MODULE_103__["useMultiStateValidator"]; });

/* harmony import */ var _useWindowScroll__WEBPACK_IMPORTED_MODULE_104__ = __webpack_require__(/*! ./useWindowScroll */ "../node_modules/react-use/esm/useWindowScroll.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useWindowScroll", function() { return _useWindowScroll__WEBPACK_IMPORTED_MODULE_104__["default"]; });

/* harmony import */ var _useWindowSize__WEBPACK_IMPORTED_MODULE_105__ = __webpack_require__(/*! ./useWindowSize */ "../node_modules/react-use/esm/useWindowSize.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useWindowSize", function() { return _useWindowSize__WEBPACK_IMPORTED_MODULE_105__["default"]; });

/* harmony import */ var _useMeasure__WEBPACK_IMPORTED_MODULE_106__ = __webpack_require__(/*! ./useMeasure */ "../node_modules/react-use/esm/useMeasure.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useMeasure", function() { return _useMeasure__WEBPACK_IMPORTED_MODULE_106__["default"]; });

/* harmony import */ var _useRendersCount__WEBPACK_IMPORTED_MODULE_107__ = __webpack_require__(/*! ./useRendersCount */ "../node_modules/react-use/esm/useRendersCount.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useRendersCount", function() { return _useRendersCount__WEBPACK_IMPORTED_MODULE_107__["useRendersCount"]; });

/* harmony import */ var _useFirstMountState__WEBPACK_IMPORTED_MODULE_108__ = __webpack_require__(/*! ./useFirstMountState */ "../node_modules/react-use/esm/useFirstMountState.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useFirstMountState", function() { return _useFirstMountState__WEBPACK_IMPORTED_MODULE_108__["useFirstMountState"]; });

/* harmony import */ var _useSet__WEBPACK_IMPORTED_MODULE_109__ = __webpack_require__(/*! ./useSet */ "../node_modules/react-use/esm/useSet.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useSet", function() { return _useSet__WEBPACK_IMPORTED_MODULE_109__["default"]; });

/* harmony import */ var _factory_createGlobalState__WEBPACK_IMPORTED_MODULE_110__ = __webpack_require__(/*! ./factory/createGlobalState */ "../node_modules/react-use/esm/factory/createGlobalState.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createGlobalState", function() { return _factory_createGlobalState__WEBPACK_IMPORTED_MODULE_110__["createGlobalState"]; });

/* harmony import */ var _useHash__WEBPACK_IMPORTED_MODULE_111__ = __webpack_require__(/*! ./useHash */ "../node_modules/react-use/esm/useHash.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useHash", function() { return _useHash__WEBPACK_IMPORTED_MODULE_111__["useHash"]; });









































// not exported because of peer dependency
// export { default as useKeyboardJs } from './useKeyboardJs';












































// not exported because of peer dependency
// export { default as useSpring } from './useSpring';






























/***/ }),

/***/ "../node_modules/react-use/esm/misc/hookState.js":
/*!*******************************************************!*\
  !*** ../node_modules/react-use/esm/misc/hookState.js ***!
  \*******************************************************/
/*! exports provided: resolveHookState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "resolveHookState", function() { return resolveHookState; });
function resolveHookState(nextState, currentState) {
    if (typeof nextState === 'function') {
        return nextState.length ? nextState(currentState) : nextState();
    }
    return nextState;
}


/***/ }),

/***/ "../node_modules/react-use/esm/misc/isDeepEqual.js":
/*!*********************************************************!*\
  !*** ../node_modules/react-use/esm/misc/isDeepEqual.js ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var fast_deep_equal_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fast-deep-equal/react */ "../node_modules/fast-deep-equal/react.js");
/* harmony import */ var fast_deep_equal_react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fast_deep_equal_react__WEBPACK_IMPORTED_MODULE_0__);

/* harmony default export */ __webpack_exports__["default"] = (fast_deep_equal_react__WEBPACK_IMPORTED_MODULE_0___default.a);


/***/ }),

/***/ "../node_modules/react-use/esm/misc/parseTimeRanges.js":
/*!*************************************************************!*\
  !*** ../node_modules/react-use/esm/misc/parseTimeRanges.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return parseTimeRanges; });
function parseTimeRanges(ranges) {
    var result = [];
    for (var i = 0; i < ranges.length; i++) {
        result.push({
            start: ranges.start(i),
            end: ranges.end(i),
        });
    }
    return result;
}


/***/ }),

/***/ "../node_modules/react-use/esm/misc/util.js":
/*!**************************************************!*\
  !*** ../node_modules/react-use/esm/misc/util.js ***!
  \**************************************************/
/*! exports provided: noop, on, off, isBrowser, isNavigator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "noop", function() { return noop; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "on", function() { return on; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "off", function() { return off; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isBrowser", function() { return isBrowser; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isNavigator", function() { return isNavigator; });
var noop = function () { };
function on(obj) {
    var args = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        args[_i - 1] = arguments[_i];
    }
    if (obj && obj.addEventListener) {
        obj.addEventListener.apply(obj, args);
    }
}
function off(obj) {
    var args = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        args[_i - 1] = arguments[_i];
    }
    if (obj && obj.removeEventListener) {
        obj.removeEventListener.apply(obj, args);
    }
}
var isBrowser = typeof window !== 'undefined';
var isNavigator = typeof navigator !== 'undefined';


/***/ }),

/***/ "../node_modules/react-use/esm/useAsync.js":
/*!*************************************************!*\
  !*** ../node_modules/react-use/esm/useAsync.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useAsync; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useAsyncFn__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useAsyncFn */ "../node_modules/react-use/esm/useAsyncFn.js");


function useAsync(fn, deps) {
    if (deps === void 0) { deps = []; }
    var _a = Object(_useAsyncFn__WEBPACK_IMPORTED_MODULE_1__["default"])(fn, deps, {
        loading: true,
    }), state = _a[0], callback = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        callback();
    }, [callback]);
    return state;
}


/***/ }),

/***/ "../node_modules/react-use/esm/useAsyncFn.js":
/*!***************************************************!*\
  !*** ../node_modules/react-use/esm/useAsyncFn.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useAsyncFn; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _useMountedState__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useMountedState */ "../node_modules/react-use/esm/useMountedState.js");



function useAsyncFn(fn, deps, initialState) {
    if (deps === void 0) { deps = []; }
    if (initialState === void 0) { initialState = { loading: false }; }
    var lastCallId = Object(react__WEBPACK_IMPORTED_MODULE_1__["useRef"])(0);
    var isMounted = Object(_useMountedState__WEBPACK_IMPORTED_MODULE_2__["default"])();
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(initialState), state = _a[0], set = _a[1];
    var callback = Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])(function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        var callId = ++lastCallId.current;
        if (!state.loading) {
            set(function (prevState) { return (Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, prevState), { loading: true })); });
        }
        return fn.apply(void 0, args).then(function (value) {
            isMounted() && callId === lastCallId.current && set({ value: value, loading: false });
            return value;
        }, function (error) {
            isMounted() && callId === lastCallId.current && set({ error: error, loading: false });
            return error;
        });
    }, deps);
    return [state, callback];
}


/***/ }),

/***/ "../node_modules/react-use/esm/useAsyncRetry.js":
/*!******************************************************!*\
  !*** ../node_modules/react-use/esm/useAsyncRetry.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _useAsync__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useAsync */ "../node_modules/react-use/esm/useAsync.js");



var useAsyncRetry = function (fn, deps) {
    if (deps === void 0) { deps = []; }
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(0), attempt = _a[0], setAttempt = _a[1];
    var state = Object(_useAsync__WEBPACK_IMPORTED_MODULE_2__["default"])(fn, Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__spreadArrays"])(deps, [attempt]));
    var stateLoading = state.loading;
    var retry = Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])(function () {
        if (stateLoading) {
            if (true) {
                console.log('You are calling useAsyncRetry hook retry() method while loading in progress, this is a no-op.');
            }
            return;
        }
        setAttempt(function (currentAttempt) { return currentAttempt + 1; });
    }, Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__spreadArrays"])(deps, [stateLoading]));
    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, state), { retry: retry });
};
/* harmony default export */ __webpack_exports__["default"] = (useAsyncRetry);


/***/ }),

/***/ "../node_modules/react-use/esm/useAudio.js":
/*!*************************************************!*\
  !*** ../node_modules/react-use/esm/useAudio.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _factory_createHTMLMediaHook__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./factory/createHTMLMediaHook */ "../node_modules/react-use/esm/factory/createHTMLMediaHook.js");

var useAudio = Object(_factory_createHTMLMediaHook__WEBPACK_IMPORTED_MODULE_0__["default"])('audio');
/* harmony default export */ __webpack_exports__["default"] = (useAudio);


/***/ }),

/***/ "../node_modules/react-use/esm/useBattery.js":
/*!***************************************************!*\
  !*** ../node_modules/react-use/esm/useBattery.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");
/* harmony import */ var _misc_isDeepEqual__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc/isDeepEqual */ "../node_modules/react-use/esm/misc/isDeepEqual.js");



var nav = _misc_util__WEBPACK_IMPORTED_MODULE_1__["isNavigator"] ? navigator : undefined;
var isBatteryApiSupported = nav && typeof nav.getBattery === 'function';
function useBatteryMock() {
    return { isSupported: false };
}
function useBattery() {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])({ isSupported: true, fetched: false }), state = _a[0], setState = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var isMounted = true;
        var battery = null;
        var handleChange = function () {
            if (!isMounted || !battery) {
                return;
            }
            var newState = {
                isSupported: true,
                fetched: true,
                level: battery.level,
                charging: battery.charging,
                dischargingTime: battery.dischargingTime,
                chargingTime: battery.chargingTime,
            };
            !Object(_misc_isDeepEqual__WEBPACK_IMPORTED_MODULE_2__["default"])(state, newState) && setState(newState);
        };
        nav.getBattery().then(function (bat) {
            if (!isMounted) {
                return;
            }
            battery = bat;
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(battery, 'chargingchange', handleChange);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(battery, 'chargingtimechange', handleChange);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(battery, 'dischargingtimechange', handleChange);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(battery, 'levelchange', handleChange);
            handleChange();
        });
        return function () {
            isMounted = false;
            if (battery) {
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(battery, 'chargingchange', handleChange);
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(battery, 'chargingtimechange', handleChange);
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(battery, 'dischargingtimechange', handleChange);
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(battery, 'levelchange', handleChange);
            }
        };
    }, []);
    return state;
}
/* harmony default export */ __webpack_exports__["default"] = (isBatteryApiSupported ? useBattery : useBatteryMock);


/***/ }),

/***/ "../node_modules/react-use/esm/useBeforeUnload.js":
/*!********************************************************!*\
  !*** ../node_modules/react-use/esm/useBeforeUnload.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var useBeforeUnload = function (enabled, message) {
    if (enabled === void 0) { enabled = true; }
    var handler = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function (event) {
        var finalEnabled = typeof enabled === 'function' ? enabled() : true;
        if (!finalEnabled) {
            return;
        }
        event.preventDefault();
        if (message) {
            event.returnValue = message;
        }
        return message;
    }, [enabled, message]);
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (!enabled) {
            return;
        }
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(window, 'beforeunload', handler);
        return function () { return Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(window, 'beforeunload', handler); };
    }, [enabled, handler]);
};
/* harmony default export */ __webpack_exports__["default"] = (useBeforeUnload);


/***/ }),

/***/ "../node_modules/react-use/esm/useBoolean.js":
/*!***************************************************!*\
  !*** ../node_modules/react-use/esm/useBoolean.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _useToggle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./useToggle */ "../node_modules/react-use/esm/useToggle.js");

/* harmony default export */ __webpack_exports__["default"] = (_useToggle__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "../node_modules/react-use/esm/useClickAway.js":
/*!*****************************************************!*\
  !*** ../node_modules/react-use/esm/useClickAway.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var defaultEvents = ['mousedown', 'touchstart'];
var useClickAway = function (ref, onClickAway, events) {
    if (events === void 0) { events = defaultEvents; }
    var savedCallback = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(onClickAway);
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        savedCallback.current = onClickAway;
    }, [onClickAway]);
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var handler = function (event) {
            var el = ref.current;
            el && !el.contains(event.target) && savedCallback.current(event);
        };
        for (var _i = 0, events_1 = events; _i < events_1.length; _i++) {
            var eventName = events_1[_i];
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(document, eventName, handler);
        }
        return function () {
            for (var _i = 0, events_2 = events; _i < events_2.length; _i++) {
                var eventName = events_2[_i];
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(document, eventName, handler);
            }
        };
    }, [events, ref]);
};
/* harmony default export */ __webpack_exports__["default"] = (useClickAway);


/***/ }),

/***/ "../node_modules/react-use/esm/useCookie.js":
/*!**************************************************!*\
  !*** ../node_modules/react-use/esm/useCookie.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js-cookie */ "../node_modules/js-cookie/src/js.cookie.js");
/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(js_cookie__WEBPACK_IMPORTED_MODULE_1__);


var useCookie = function (cookieName) {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(function () { return js_cookie__WEBPACK_IMPORTED_MODULE_1___default.a.get(cookieName) || null; }), value = _a[0], setValue = _a[1];
    var updateCookie = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function (newValue, options) {
        js_cookie__WEBPACK_IMPORTED_MODULE_1___default.a.set(cookieName, newValue, options);
        setValue(newValue);
    }, [cookieName]);
    var deleteCookie = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function () {
        js_cookie__WEBPACK_IMPORTED_MODULE_1___default.a.remove(cookieName);
        setValue(null);
    }, [cookieName]);
    return [value, updateCookie, deleteCookie];
};
/* harmony default export */ __webpack_exports__["default"] = (useCookie);


/***/ }),

/***/ "../node_modules/react-use/esm/useCopyToClipboard.js":
/*!***********************************************************!*\
  !*** ../node_modules/react-use/esm/useCopyToClipboard.js ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var copy_to_clipboard__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! copy-to-clipboard */ "../node_modules/copy-to-clipboard/index.js");
/* harmony import */ var copy_to_clipboard__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(copy_to_clipboard__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _useMountedState__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useMountedState */ "../node_modules/react-use/esm/useMountedState.js");
/* harmony import */ var _useSetState__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useSetState */ "../node_modules/react-use/esm/useSetState.js");




var useCopyToClipboard = function () {
    var isMounted = Object(_useMountedState__WEBPACK_IMPORTED_MODULE_2__["default"])();
    var _a = Object(_useSetState__WEBPACK_IMPORTED_MODULE_3__["default"])({
        value: undefined,
        error: undefined,
        noUserInteraction: true,
    }), state = _a[0], setState = _a[1];
    var copyToClipboard = Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])(function (value) {
        if (!isMounted()) {
            return;
        }
        var noUserInteraction;
        var normalizedValue;
        try {
            // only strings and numbers casted to strings can be copied to clipboard
            if (typeof value !== 'string' && typeof value !== 'number') {
                var error = new Error("Cannot copy typeof " + typeof value + " to clipboard, must be a string");
                if (true)
                    console.error(error);
                setState({
                    value: value,
                    error: error,
                    noUserInteraction: true,
                });
                return;
            }
            // empty strings are also considered invalid
            else if (value === '') {
                var error = new Error("Cannot copy empty string to clipboard.");
                if (true)
                    console.error(error);
                setState({
                    value: value,
                    error: error,
                    noUserInteraction: true,
                });
                return;
            }
            normalizedValue = value.toString();
            noUserInteraction = copy_to_clipboard__WEBPACK_IMPORTED_MODULE_0___default()(normalizedValue);
            setState({
                value: normalizedValue,
                error: undefined,
                noUserInteraction: noUserInteraction,
            });
        }
        catch (error) {
            setState({
                value: normalizedValue,
                error: error,
                noUserInteraction: noUserInteraction,
            });
        }
    }, []);
    return [state, copyToClipboard];
};
/* harmony default export */ __webpack_exports__["default"] = (useCopyToClipboard);


/***/ }),

/***/ "../node_modules/react-use/esm/useCounter.js":
/*!***************************************************!*\
  !*** ../node_modules/react-use/esm/useCounter.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useCounter; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useGetSet__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useGetSet */ "../node_modules/react-use/esm/useGetSet.js");
/* harmony import */ var _misc_hookState__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc/hookState */ "../node_modules/react-use/esm/misc/hookState.js");



function useCounter(initialValue, max, min) {
    if (initialValue === void 0) { initialValue = 0; }
    if (max === void 0) { max = null; }
    if (min === void 0) { min = null; }
    var init = Object(_misc_hookState__WEBPACK_IMPORTED_MODULE_2__["resolveHookState"])(initialValue);
    typeof init !== 'number' &&
        console.error('initialValue has to be a number, got ' + typeof initialValue);
    if (typeof min === 'number') {
        init = Math.max(init, min);
    }
    else if (min !== null) {
        console.error('min has to be a number, got ' + typeof min);
    }
    if (typeof max === 'number') {
        init = Math.min(init, max);
    }
    else if (max !== null) {
        console.error('max has to be a number, got ' + typeof max);
    }
    var _a = Object(_useGetSet__WEBPACK_IMPORTED_MODULE_1__["default"])(init), get = _a[0], setInternal = _a[1];
    return [
        get(),
        Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () {
            var set = function (newState) {
                var prevState = get();
                var rState = Object(_misc_hookState__WEBPACK_IMPORTED_MODULE_2__["resolveHookState"])(newState, prevState);
                if (prevState !== rState) {
                    if (typeof min === 'number') {
                        rState = Math.max(rState, min);
                    }
                    if (typeof max === 'number') {
                        rState = Math.min(rState, max);
                    }
                    prevState !== rState && setInternal(rState);
                }
            };
            return {
                get: get,
                set: set,
                inc: function (delta) {
                    if (delta === void 0) { delta = 1; }
                    var rDelta = Object(_misc_hookState__WEBPACK_IMPORTED_MODULE_2__["resolveHookState"])(delta, get());
                    if (typeof rDelta !== 'number') {
                        console.error('delta has to be a number or function returning a number, got ' + typeof rDelta);
                    }
                    set(function (num) { return num + rDelta; });
                },
                dec: function (delta) {
                    if (delta === void 0) { delta = 1; }
                    var rDelta = Object(_misc_hookState__WEBPACK_IMPORTED_MODULE_2__["resolveHookState"])(delta, get());
                    if (typeof rDelta !== 'number') {
                        console.error('delta has to be a number or function returning a number, got ' + typeof rDelta);
                    }
                    set(function (num) { return num - rDelta; });
                },
                reset: function (value) {
                    if (value === void 0) { value = init; }
                    var rValue = Object(_misc_hookState__WEBPACK_IMPORTED_MODULE_2__["resolveHookState"])(value, get());
                    if (typeof rValue !== 'number') {
                        console.error('value has to be a number or function returning a number, got ' + typeof rValue);
                    }
                    // eslint-disable-next-line react-hooks/exhaustive-deps
                    init = rValue;
                    set(rValue);
                },
            };
        }, [init, min, max]),
    ];
}


/***/ }),

/***/ "../node_modules/react-use/esm/useCss.js":
/*!***********************************************!*\
  !*** ../node_modules/react-use/esm/useCss.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var nano_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nano-css */ "../node_modules/nano-css/index.js");
/* harmony import */ var nano_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(nano_css__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var nano_css_addon_cssom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! nano-css/addon/cssom */ "../node_modules/nano-css/addon/cssom.js");
/* harmony import */ var nano_css_addon_cssom__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(nano_css_addon_cssom__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var nano_css_addon_vcssom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! nano-css/addon/vcssom */ "../node_modules/nano-css/addon/vcssom.js");
/* harmony import */ var nano_css_addon_vcssom__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(nano_css_addon_vcssom__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var nano_css_addon_vcssom_cssToTree__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! nano-css/addon/vcssom/cssToTree */ "../node_modules/nano-css/addon/vcssom/cssToTree.js");
/* harmony import */ var nano_css_addon_vcssom_cssToTree__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(nano_css_addon_vcssom_cssToTree__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./useIsomorphicLayoutEffect */ "../node_modules/react-use/esm/useIsomorphicLayoutEffect.js");






var nano = Object(nano_css__WEBPACK_IMPORTED_MODULE_0__["create"])();
Object(nano_css_addon_cssom__WEBPACK_IMPORTED_MODULE_1__["addon"])(nano);
Object(nano_css_addon_vcssom__WEBPACK_IMPORTED_MODULE_2__["addon"])(nano);
var counter = 0;
var useCss = function (css) {
    var className = Object(react__WEBPACK_IMPORTED_MODULE_4__["useMemo"])(function () { return 'react-use-css-' + (counter++).toString(36); }, []);
    var sheet = Object(react__WEBPACK_IMPORTED_MODULE_4__["useMemo"])(function () { return new nano.VSheet(); }, []);
    Object(_useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_5__["default"])(function () {
        var tree = {};
        Object(nano_css_addon_vcssom_cssToTree__WEBPACK_IMPORTED_MODULE_3__["cssToTree"])(tree, css, '.' + className, '');
        sheet.diff(tree);
        return function () {
            sheet.diff({});
        };
    });
    return className;
};
/* harmony default export */ __webpack_exports__["default"] = (useCss);


/***/ }),

/***/ "../node_modules/react-use/esm/useCustomCompareEffect.js":
/*!***************************************************************!*\
  !*** ../node_modules/react-use/esm/useCustomCompareEffect.js ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var isPrimitive = function (val) { return val !== Object(val); };
var useCustomCompareEffect = function (effect, deps, depsEqual) {
    if (true) {
        if (!(deps instanceof Array) || !deps.length) {
            console.warn('`useCustomCompareEffect` should not be used with no dependencies. Use React.useEffect instead.');
        }
        if (deps.every(isPrimitive)) {
            console.warn('`useCustomCompareEffect` should not be used with dependencies that are all primitive values. Use React.useEffect instead.');
        }
        if (typeof depsEqual !== 'function') {
            console.warn('`useCustomCompareEffect` should be used with depsEqual callback for comparing deps list');
        }
    }
    var ref = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(undefined);
    if (!ref.current || !depsEqual(deps, ref.current)) {
        ref.current = deps;
    }
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(effect, ref.current);
};
/* harmony default export */ __webpack_exports__["default"] = (useCustomCompareEffect);


/***/ }),

/***/ "../node_modules/react-use/esm/useDebounce.js":
/*!****************************************************!*\
  !*** ../node_modules/react-use/esm/useDebounce.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useDebounce; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useTimeoutFn__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useTimeoutFn */ "../node_modules/react-use/esm/useTimeoutFn.js");


function useDebounce(fn, ms, deps) {
    if (ms === void 0) { ms = 0; }
    if (deps === void 0) { deps = []; }
    var _a = Object(_useTimeoutFn__WEBPACK_IMPORTED_MODULE_1__["default"])(fn, ms), isReady = _a[0], cancel = _a[1], reset = _a[2];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(reset, deps);
    return [isReady, cancel];
}


/***/ }),

/***/ "../node_modules/react-use/esm/useDeepCompareEffect.js":
/*!*************************************************************!*\
  !*** ../node_modules/react-use/esm/useDeepCompareEffect.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _useCustomCompareEffect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./useCustomCompareEffect */ "../node_modules/react-use/esm/useCustomCompareEffect.js");
/* harmony import */ var _misc_isDeepEqual__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/isDeepEqual */ "../node_modules/react-use/esm/misc/isDeepEqual.js");


var isPrimitive = function (val) { return val !== Object(val); };
var useDeepCompareEffect = function (effect, deps) {
    if (true) {
        if (!(deps instanceof Array) || !deps.length) {
            console.warn('`useDeepCompareEffect` should not be used with no dependencies. Use React.useEffect instead.');
        }
        if (deps.every(isPrimitive)) {
            console.warn('`useDeepCompareEffect` should not be used with dependencies that are all primitive values. Use React.useEffect instead.');
        }
    }
    Object(_useCustomCompareEffect__WEBPACK_IMPORTED_MODULE_0__["default"])(effect, deps, _misc_isDeepEqual__WEBPACK_IMPORTED_MODULE_1__["default"]);
};
/* harmony default export */ __webpack_exports__["default"] = (useDeepCompareEffect);


/***/ }),

/***/ "../node_modules/react-use/esm/useDefault.js":
/*!***************************************************!*\
  !*** ../node_modules/react-use/esm/useDefault.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var useDefault = function (defaultValue, initialValue) {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(initialValue), value = _a[0], setValue = _a[1];
    if (value === undefined || value === null) {
        return [defaultValue, setValue];
    }
    return [value, setValue];
};
/* harmony default export */ __webpack_exports__["default"] = (useDefault);


/***/ }),

/***/ "../node_modules/react-use/esm/useDrop.js":
/*!************************************************!*\
  !*** ../node_modules/react-use/esm/useDrop.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");



var createProcess = function (options) { return function (dataTransfer, event) {
    var uri = dataTransfer.getData('text/uri-list');
    if (uri) {
        (options.onUri || _misc_util__WEBPACK_IMPORTED_MODULE_2__["noop"])(uri, event);
        return;
    }
    if (dataTransfer.files && dataTransfer.files.length) {
        (options.onFiles || _misc_util__WEBPACK_IMPORTED_MODULE_2__["noop"])(Array.from(dataTransfer.files), event);
        return;
    }
    if (event.clipboardData) {
        var text = event.clipboardData.getData('text');
        (options.onText || _misc_util__WEBPACK_IMPORTED_MODULE_2__["noop"])(text, event);
        return;
    }
}; };
var useDrop = function (options, args) {
    if (options === void 0) { options = {}; }
    if (args === void 0) { args = []; }
    var onFiles = options.onFiles, onText = options.onText, onUri = options.onUri;
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(false), over = _a[0], setOverRaw = _a[1];
    var setOver = Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])(setOverRaw, []);
    var process = Object(react__WEBPACK_IMPORTED_MODULE_1__["useMemo"])(function () { return createProcess(options); }, [onFiles, onText, onUri]);
    Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () {
        var onDragOver = function (event) {
            event.preventDefault();
            setOver(true);
        };
        var onDragEnter = function (event) {
            event.preventDefault();
            setOver(true);
        };
        var onDragLeave = function () {
            setOver(false);
        };
        var onDragExit = function () {
            setOver(false);
        };
        var onDrop = function (event) {
            event.preventDefault();
            setOver(false);
            process(event.dataTransfer, event);
        };
        var onPaste = function (event) {
            process(event.clipboardData, event);
        };
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["on"])(document, 'dragover', onDragOver);
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["on"])(document, 'dragenter', onDragEnter);
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["on"])(document, 'dragleave', onDragLeave);
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["on"])(document, 'dragexit', onDragExit);
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["on"])(document, 'drop', onDrop);
        if (onText) {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["on"])(document, 'paste', onPaste);
        }
        return function () {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["off"])(document, 'dragover', onDragOver);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["off"])(document, 'dragenter', onDragEnter);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["off"])(document, 'dragleave', onDragLeave);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["off"])(document, 'dragexit', onDragExit);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["off"])(document, 'drop', onDrop);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["off"])(document, 'paste', onPaste);
        };
    }, Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__spreadArrays"])([process], args));
    return { over: over };
};
/* harmony default export */ __webpack_exports__["default"] = (useDrop);


/***/ }),

/***/ "../node_modules/react-use/esm/useDropArea.js":
/*!****************************************************!*\
  !*** ../node_modules/react-use/esm/useDropArea.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useMountedState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useMountedState */ "../node_modules/react-use/esm/useMountedState.js");
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");



/*
const defaultState: DropAreaState = {
  over: false,
};
*/
var createProcess = function (options, mounted) { return function (dataTransfer, event) {
    var uri = dataTransfer.getData('text/uri-list');
    if (uri) {
        (options.onUri || _misc_util__WEBPACK_IMPORTED_MODULE_2__["noop"])(uri, event);
        return;
    }
    if (dataTransfer.files && dataTransfer.files.length) {
        (options.onFiles || _misc_util__WEBPACK_IMPORTED_MODULE_2__["noop"])(Array.from(dataTransfer.files), event);
        return;
    }
    if (dataTransfer.items && dataTransfer.items.length) {
        dataTransfer.items[0].getAsString(function (text) {
            if (mounted) {
                (options.onText || _misc_util__WEBPACK_IMPORTED_MODULE_2__["noop"])(text, event);
            }
        });
    }
}; };
var createBond = function (process, setOver) { return ({
    onDragOver: function (event) {
        event.preventDefault();
    },
    onDragEnter: function (event) {
        event.preventDefault();
        setOver(true);
    },
    onDragLeave: function () {
        setOver(false);
    },
    onDrop: function (event) {
        event.preventDefault();
        event.persist();
        setOver(false);
        process(event.dataTransfer, event);
    },
    onPaste: function (event) {
        event.persist();
        process(event.clipboardData, event);
    },
}); };
var useDropArea = function (options) {
    if (options === void 0) { options = {}; }
    var onFiles = options.onFiles, onText = options.onText, onUri = options.onUri;
    var isMounted = Object(_useMountedState__WEBPACK_IMPORTED_MODULE_1__["default"])();
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(false), over = _a[0], setOver = _a[1];
    var process = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () { return createProcess(options, isMounted()); }, [onFiles, onText, onUri]);
    var bond = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () { return createBond(process, setOver); }, [process, setOver]);
    return [bond, { over: over }];
};
/* harmony default export */ __webpack_exports__["default"] = (useDropArea);


/***/ }),

/***/ "../node_modules/react-use/esm/useEffectOnce.js":
/*!******************************************************!*\
  !*** ../node_modules/react-use/esm/useEffectOnce.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var useEffectOnce = function (effect) {
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(effect, []);
};
/* harmony default export */ __webpack_exports__["default"] = (useEffectOnce);


/***/ }),

/***/ "../node_modules/react-use/esm/useEnsuredForwardedRef.js":
/*!***************************************************************!*\
  !*** ../node_modules/react-use/esm/useEnsuredForwardedRef.js ***!
  \***************************************************************/
/*! exports provided: default, ensuredForwardRef */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useEnsuredForwardedRef; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ensuredForwardRef", function() { return ensuredForwardRef; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

function useEnsuredForwardedRef(forwardedRef) {
    var ensuredRef = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(forwardedRef && forwardedRef.current);
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (!forwardedRef) {
            return;
        }
        forwardedRef.current = ensuredRef.current;
    }, [forwardedRef]);
    return ensuredRef;
}
function ensuredForwardRef(Component) {
    return Object(react__WEBPACK_IMPORTED_MODULE_0__["forwardRef"])(function (props, ref) {
        var ensuredRef = useEnsuredForwardedRef(ref);
        return Component(props, ensuredRef);
    });
}


/***/ }),

/***/ "../node_modules/react-use/esm/useError.js":
/*!*************************************************!*\
  !*** ../node_modules/react-use/esm/useError.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var useError = function () {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(null), error = _a[0], setError = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (error) {
            throw error;
        }
    }, [error]);
    var dispatchError = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function (err) {
        setError(err);
    }, []);
    return dispatchError;
};
/* harmony default export */ __webpack_exports__["default"] = (useError);


/***/ }),

/***/ "../node_modules/react-use/esm/useEvent.js":
/*!*************************************************!*\
  !*** ../node_modules/react-use/esm/useEvent.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var defaultTarget = _misc_util__WEBPACK_IMPORTED_MODULE_1__["isBrowser"] ? window : null;
var isListenerType1 = function (target) {
    return !!target.addEventListener;
};
var isListenerType2 = function (target) {
    return !!target.on;
};
var useEvent = function (name, handler, target, options) {
    if (target === void 0) { target = defaultTarget; }
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (!handler) {
            return;
        }
        if (!target) {
            return;
        }
        if (isListenerType1(target)) {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(target, name, handler, options);
        }
        else if (isListenerType2(target)) {
            target.on(name, handler, options);
        }
        return function () {
            if (isListenerType1(target)) {
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(target, name, handler, options);
            }
            else if (isListenerType2(target)) {
                target.off(name, handler, options);
            }
        };
    }, [name, handler, target, JSON.stringify(options)]);
};
/* harmony default export */ __webpack_exports__["default"] = (useEvent);


/***/ }),

/***/ "../node_modules/react-use/esm/useFavicon.js":
/*!***************************************************!*\
  !*** ../node_modules/react-use/esm/useFavicon.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var useFavicon = function (href) {
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var link = document.querySelector("link[rel*='icon']") || document.createElement('link');
        link.type = 'image/x-icon';
        link.rel = 'shortcut icon';
        link.href = href;
        document.getElementsByTagName('head')[0].appendChild(link);
    }, [href]);
};
/* harmony default export */ __webpack_exports__["default"] = (useFavicon);


/***/ }),

/***/ "../node_modules/react-use/esm/useFirstMountState.js":
/*!***********************************************************!*\
  !*** ../node_modules/react-use/esm/useFirstMountState.js ***!
  \***********************************************************/
/*! exports provided: useFirstMountState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useFirstMountState", function() { return useFirstMountState; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

function useFirstMountState() {
    var isFirst = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(true);
    if (isFirst.current) {
        isFirst.current = false;
        return true;
    }
    return isFirst.current;
}


/***/ }),

/***/ "../node_modules/react-use/esm/useFullscreen.js":
/*!******************************************************!*\
  !*** ../node_modules/react-use/esm/useFullscreen.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var screenfull__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! screenfull */ "../node_modules/screenfull/dist/screenfull.js");
/* harmony import */ var screenfull__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(screenfull__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useIsomorphicLayoutEffect */ "../node_modules/react-use/esm/useIsomorphicLayoutEffect.js");
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");




var useFullscreen = function (ref, enabled, options) {
    if (options === void 0) { options = {}; }
    var video = options.video, _a = options.onClose, onClose = _a === void 0 ? _misc_util__WEBPACK_IMPORTED_MODULE_3__["noop"] : _a;
    var _b = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(enabled), isFullscreen = _b[0], setIsFullscreen = _b[1];
    Object(_useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_2__["default"])(function () {
        if (!enabled) {
            return;
        }
        if (!ref.current) {
            return;
        }
        var onWebkitEndFullscreen = function () {
            if (video === null || video === void 0 ? void 0 : video.current) {
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_3__["off"])(video.current, 'webkitendfullscreen', onWebkitEndFullscreen);
            }
            onClose();
        };
        var onChange = function () {
            if (screenfull__WEBPACK_IMPORTED_MODULE_1___default.a.isEnabled) {
                var isScreenfullFullscreen = screenfull__WEBPACK_IMPORTED_MODULE_1___default.a.isFullscreen;
                setIsFullscreen(isScreenfullFullscreen);
                if (!isScreenfullFullscreen) {
                    onClose();
                }
            }
        };
        if (screenfull__WEBPACK_IMPORTED_MODULE_1___default.a.isEnabled) {
            try {
                screenfull__WEBPACK_IMPORTED_MODULE_1___default.a.request(ref.current);
                setIsFullscreen(true);
            }
            catch (error) {
                onClose(error);
                setIsFullscreen(false);
            }
            screenfull__WEBPACK_IMPORTED_MODULE_1___default.a.on('change', onChange);
        }
        else if (video && video.current && video.current.webkitEnterFullscreen) {
            video.current.webkitEnterFullscreen();
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_3__["on"])(video.current, 'webkitendfullscreen', onWebkitEndFullscreen);
            setIsFullscreen(true);
        }
        else {
            onClose();
            setIsFullscreen(false);
        }
        return function () {
            setIsFullscreen(false);
            if (screenfull__WEBPACK_IMPORTED_MODULE_1___default.a.isEnabled) {
                try {
                    screenfull__WEBPACK_IMPORTED_MODULE_1___default.a.off('change', onChange);
                    screenfull__WEBPACK_IMPORTED_MODULE_1___default.a.exit();
                }
                catch (_a) { }
            }
            else if (video && video.current && video.current.webkitExitFullscreen) {
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_3__["off"])(video.current, 'webkitendfullscreen', onWebkitEndFullscreen);
                video.current.webkitExitFullscreen();
            }
        };
    }, [enabled, video, ref]);
    return isFullscreen;
};
/* harmony default export */ __webpack_exports__["default"] = (useFullscreen);


/***/ }),

/***/ "../node_modules/react-use/esm/useGeolocation.js":
/*!*******************************************************!*\
  !*** ../node_modules/react-use/esm/useGeolocation.js ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var useGeolocation = function (options) {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])({
        loading: true,
        accuracy: null,
        altitude: null,
        altitudeAccuracy: null,
        heading: null,
        latitude: null,
        longitude: null,
        speed: null,
        timestamp: Date.now(),
    }), state = _a[0], setState = _a[1];
    var mounted = true;
    var watchId;
    var onEvent = function (event) {
        if (mounted) {
            setState({
                loading: false,
                accuracy: event.coords.accuracy,
                altitude: event.coords.altitude,
                altitudeAccuracy: event.coords.altitudeAccuracy,
                heading: event.coords.heading,
                latitude: event.coords.latitude,
                longitude: event.coords.longitude,
                speed: event.coords.speed,
                timestamp: event.timestamp,
            });
        }
    };
    var onEventError = function (error) {
        return mounted && setState(function (oldState) { return (Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, oldState), { loading: false, error: error })); });
    };
    Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () {
        navigator.geolocation.getCurrentPosition(onEvent, onEventError, options);
        watchId = navigator.geolocation.watchPosition(onEvent, onEventError, options);
        return function () {
            mounted = false;
            navigator.geolocation.clearWatch(watchId);
        };
    }, []);
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (useGeolocation);


/***/ }),

/***/ "../node_modules/react-use/esm/useGetSet.js":
/*!**************************************************!*\
  !*** ../node_modules/react-use/esm/useGetSet.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useGetSet; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useUpdate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useUpdate */ "../node_modules/react-use/esm/useUpdate.js");
/* harmony import */ var _misc_hookState__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc/hookState */ "../node_modules/react-use/esm/misc/hookState.js");



function useGetSet(initialState) {
    var state = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(Object(_misc_hookState__WEBPACK_IMPORTED_MODULE_2__["resolveHookState"])(initialState));
    var update = Object(_useUpdate__WEBPACK_IMPORTED_MODULE_1__["default"])();
    return Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () { return [
        function () { return state.current; },
        function (newState) {
            state.current = Object(_misc_hookState__WEBPACK_IMPORTED_MODULE_2__["resolveHookState"])(newState, state.current);
            update();
        },
    ]; }, []);
}


/***/ }),

/***/ "../node_modules/react-use/esm/useGetSetState.js":
/*!*******************************************************!*\
  !*** ../node_modules/react-use/esm/useGetSetState.js ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _useUpdate__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useUpdate */ "../node_modules/react-use/esm/useUpdate.js");



var useGetSetState = function (initialState) {
    if (initialState === void 0) { initialState = {}; }
    if (true) {
        if (typeof initialState !== 'object') {
            console.error('useGetSetState initial state must be an object.');
        }
    }
    var update = Object(_useUpdate__WEBPACK_IMPORTED_MODULE_2__["default"])();
    var state = Object(react__WEBPACK_IMPORTED_MODULE_1__["useRef"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, initialState));
    var get = Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])(function () { return state.current; }, []);
    var set = Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])(function (patch) {
        if (!patch) {
            return;
        }
        if (true) {
            if (typeof patch !== 'object') {
                console.error('useGetSetState setter patch must be an object.');
            }
        }
        Object.assign(state.current, patch);
        update();
    }, []);
    return [get, set];
};
/* harmony default export */ __webpack_exports__["default"] = (useGetSetState);


/***/ }),

/***/ "../node_modules/react-use/esm/useHarmonicIntervalFn.js":
/*!**************************************************************!*\
  !*** ../node_modules/react-use/esm/useHarmonicIntervalFn.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var set_harmonic_interval__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! set-harmonic-interval */ "../node_modules/set-harmonic-interval/lib/index.esm.js");


var useHarmonicIntervalFn = function (fn, delay) {
    if (delay === void 0) { delay = 0; }
    var latestCallback = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(function () { });
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        latestCallback.current = fn;
    });
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (delay !== null) {
            var interval_1 = Object(set_harmonic_interval__WEBPACK_IMPORTED_MODULE_1__["setHarmonicInterval"])(function () { return latestCallback.current(); }, delay);
            return function () { return Object(set_harmonic_interval__WEBPACK_IMPORTED_MODULE_1__["clearHarmonicInterval"])(interval_1); };
        }
        return undefined;
    }, [delay]);
};
/* harmony default export */ __webpack_exports__["default"] = (useHarmonicIntervalFn);


/***/ }),

/***/ "../node_modules/react-use/esm/useHash.js":
/*!************************************************!*\
  !*** ../node_modules/react-use/esm/useHash.js ***!
  \************************************************/
/*! exports provided: useHash */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useHash", function() { return useHash; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useLifecycles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useLifecycles */ "../node_modules/react-use/esm/useLifecycles.js");
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");



/**
 * read and write url hash, response to url hash change
 */
var useHash = function () {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(function () { return window.location.hash; }), hash = _a[0], setHash = _a[1];
    var onHashChange = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function () {
        setHash(window.location.hash);
    }, []);
    Object(_useLifecycles__WEBPACK_IMPORTED_MODULE_1__["default"])(function () {
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["on"])(window, 'hashchange', onHashChange);
    }, function () {
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["off"])(window, 'hashchange', onHashChange);
    });
    var _setHash = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function (newHash) {
        if (newHash !== hash) {
            window.location.hash = newHash;
        }
    }, [hash]);
    return [hash, _setHash];
};


/***/ }),

/***/ "../node_modules/react-use/esm/useHover.js":
/*!*************************************************!*\
  !*** ../node_modules/react-use/esm/useHover.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var useState = react__WEBPACK_IMPORTED_MODULE_0__["useState"];
var useHover = function (element) {
    var _a = useState(false), state = _a[0], setState = _a[1];
    var onMouseEnter = function (originalOnMouseEnter) { return function (event) {
        (originalOnMouseEnter || _misc_util__WEBPACK_IMPORTED_MODULE_1__["noop"])(event);
        setState(true);
    }; };
    var onMouseLeave = function (originalOnMouseLeave) { return function (event) {
        (originalOnMouseLeave || _misc_util__WEBPACK_IMPORTED_MODULE_1__["noop"])(event);
        setState(false);
    }; };
    if (typeof element === 'function') {
        element = element(state);
    }
    var el = react__WEBPACK_IMPORTED_MODULE_0__["cloneElement"](element, {
        onMouseEnter: onMouseEnter(element.props.onMouseEnter),
        onMouseLeave: onMouseLeave(element.props.onMouseLeave),
    });
    return [el, state];
};
/* harmony default export */ __webpack_exports__["default"] = (useHover);


/***/ }),

/***/ "../node_modules/react-use/esm/useHoverDirty.js":
/*!******************************************************!*\
  !*** ../node_modules/react-use/esm/useHoverDirty.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


// kudos: https://usehooks.com/
var useHoverDirty = function (ref, enabled) {
    if (enabled === void 0) { enabled = true; }
    if (true) {
        if (typeof ref !== 'object' || typeof ref.current === 'undefined') {
            console.error('useHoverDirty expects a single ref argument.');
        }
    }
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(false), value = _a[0], setValue = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var onMouseOver = function () { return setValue(true); };
        var onMouseOut = function () { return setValue(false); };
        if (enabled && ref && ref.current) {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(ref.current, 'mouseover', onMouseOver);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(ref.current, 'mouseout', onMouseOut);
        }
        // fixes react-hooks/exhaustive-deps warning about stale ref elements
        var current = ref.current;
        return function () {
            if (enabled && current) {
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(current, 'mouseover', onMouseOver);
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(current, 'mouseout', onMouseOut);
            }
        };
    }, [enabled, ref]);
    return value;
};
/* harmony default export */ __webpack_exports__["default"] = (useHoverDirty);


/***/ }),

/***/ "../node_modules/react-use/esm/useIdle.js":
/*!************************************************!*\
  !*** ../node_modules/react-use/esm/useIdle.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var throttle_debounce__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! throttle-debounce */ "../node_modules/throttle-debounce/esm/index.js");
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");



var defaultEvents = ['mousemove', 'mousedown', 'resize', 'keydown', 'touchstart', 'wheel'];
var oneMinute = 60e3;
var useIdle = function (ms, initialState, events) {
    if (ms === void 0) { ms = oneMinute; }
    if (initialState === void 0) { initialState = false; }
    if (events === void 0) { events = defaultEvents; }
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(initialState), state = _a[0], setState = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var mounted = true;
        var timeout;
        var localState = state;
        var set = function (newState) {
            if (mounted) {
                localState = newState;
                setState(newState);
            }
        };
        var onEvent = Object(throttle_debounce__WEBPACK_IMPORTED_MODULE_1__["throttle"])(50, function () {
            if (localState) {
                set(false);
            }
            clearTimeout(timeout);
            timeout = setTimeout(function () { return set(true); }, ms);
        });
        var onVisibility = function () {
            if (!document.hidden) {
                onEvent();
            }
        };
        for (var i = 0; i < events.length; i++) {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["on"])(window, events[i], onEvent);
        }
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["on"])(document, 'visibilitychange', onVisibility);
        timeout = setTimeout(function () { return set(true); }, ms);
        return function () {
            mounted = false;
            for (var i = 0; i < events.length; i++) {
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["off"])(window, events[i], onEvent);
            }
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["off"])(document, 'visibilitychange', onVisibility);
        };
    }, [ms, events]);
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (useIdle);


/***/ }),

/***/ "../node_modules/react-use/esm/useIntersection.js":
/*!********************************************************!*\
  !*** ../node_modules/react-use/esm/useIntersection.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var useIntersection = function (ref, options) {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(null), intersectionObserverEntry = _a[0], setIntersectionObserverEntry = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (ref.current && typeof IntersectionObserver === 'function') {
            var handler = function (entries) {
                setIntersectionObserverEntry(entries[0]);
            };
            var observer_1 = new IntersectionObserver(handler, options);
            observer_1.observe(ref.current);
            return function () {
                setIntersectionObserverEntry(null);
                observer_1.disconnect();
            };
        }
        return function () { };
    }, [ref.current, options.threshold, options.root, options.rootMargin]);
    return intersectionObserverEntry;
};
/* harmony default export */ __webpack_exports__["default"] = (useIntersection);


/***/ }),

/***/ "../node_modules/react-use/esm/useInterval.js":
/*!****************************************************!*\
  !*** ../node_modules/react-use/esm/useInterval.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var useInterval = function (callback, delay) {
    var savedCallback = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(function () { });
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        savedCallback.current = callback;
    });
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (delay !== null) {
            var interval_1 = setInterval(function () { return savedCallback.current(); }, delay || 0);
            return function () { return clearInterval(interval_1); };
        }
        return undefined;
    }, [delay]);
};
/* harmony default export */ __webpack_exports__["default"] = (useInterval);


/***/ }),

/***/ "../node_modules/react-use/esm/useIsomorphicLayoutEffect.js":
/*!******************************************************************!*\
  !*** ../node_modules/react-use/esm/useIsomorphicLayoutEffect.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var useIsomorphicLayoutEffect = _misc_util__WEBPACK_IMPORTED_MODULE_1__["isBrowser"] ? react__WEBPACK_IMPORTED_MODULE_0__["useLayoutEffect"] : react__WEBPACK_IMPORTED_MODULE_0__["useEffect"];
/* harmony default export */ __webpack_exports__["default"] = (useIsomorphicLayoutEffect);


/***/ }),

/***/ "../node_modules/react-use/esm/useKey.js":
/*!***********************************************!*\
  !*** ../node_modules/react-use/esm/useKey.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useEvent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useEvent */ "../node_modules/react-use/esm/useEvent.js");
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");



var createKeyPredicate = function (keyFilter) {
    return typeof keyFilter === 'function'
        ? keyFilter
        : typeof keyFilter === 'string'
            ? function (event) { return event.key === keyFilter; }
            : keyFilter
                ? function () { return true; }
                : function () { return false; };
};
var useKey = function (key, fn, opts, deps) {
    if (fn === void 0) { fn = _misc_util__WEBPACK_IMPORTED_MODULE_2__["noop"]; }
    if (opts === void 0) { opts = {}; }
    if (deps === void 0) { deps = [key]; }
    var _a = opts.event, event = _a === void 0 ? 'keydown' : _a, target = opts.target, options = opts.options;
    var useMemoHandler = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () {
        var predicate = createKeyPredicate(key);
        var handler = function (handlerEvent) {
            if (predicate(handlerEvent)) {
                return fn(handlerEvent);
            }
        };
        return handler;
    }, deps);
    Object(_useEvent__WEBPACK_IMPORTED_MODULE_1__["default"])(event, useMemoHandler, target, options);
};
/* harmony default export */ __webpack_exports__["default"] = (useKey);


/***/ }),

/***/ "../node_modules/react-use/esm/useKeyPress.js":
/*!****************************************************!*\
  !*** ../node_modules/react-use/esm/useKeyPress.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useKey__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useKey */ "../node_modules/react-use/esm/useKey.js");


var useKeyPress = function (keyFilter) {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])([false, null]), state = _a[0], set = _a[1];
    Object(_useKey__WEBPACK_IMPORTED_MODULE_1__["default"])(keyFilter, function (event) { return set([true, event]); }, { event: 'keydown' }, [state]);
    Object(_useKey__WEBPACK_IMPORTED_MODULE_1__["default"])(keyFilter, function (event) { return set([false, event]); }, { event: 'keyup' }, [state]);
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (useKeyPress);


/***/ }),

/***/ "../node_modules/react-use/esm/useKeyPressEvent.js":
/*!*********************************************************!*\
  !*** ../node_modules/react-use/esm/useKeyPressEvent.js ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _useKeyPress__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./useKeyPress */ "../node_modules/react-use/esm/useKeyPress.js");
/* harmony import */ var _useUpdateEffect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useUpdateEffect */ "../node_modules/react-use/esm/useUpdateEffect.js");


var useKeyPressEvent = function (key, keydown, keyup, useKeyPress) {
    if (useKeyPress === void 0) { useKeyPress = _useKeyPress__WEBPACK_IMPORTED_MODULE_0__["default"]; }
    var _a = useKeyPress(key), pressed = _a[0], event = _a[1];
    Object(_useUpdateEffect__WEBPACK_IMPORTED_MODULE_1__["default"])(function () {
        if (!pressed && keyup) {
            keyup(event);
        }
        else if (pressed && keydown) {
            keydown(event);
        }
    }, [pressed]);
};
/* harmony default export */ __webpack_exports__["default"] = (useKeyPressEvent);


/***/ }),

/***/ "../node_modules/react-use/esm/useLatest.js":
/*!**************************************************!*\
  !*** ../node_modules/react-use/esm/useLatest.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var useLatest = function (value) {
    var ref = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(value);
    ref.current = value;
    return ref;
};
/* harmony default export */ __webpack_exports__["default"] = (useLatest);


/***/ }),

/***/ "../node_modules/react-use/esm/useLifecycles.js":
/*!******************************************************!*\
  !*** ../node_modules/react-use/esm/useLifecycles.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var useLifecycles = function (mount, unmount) {
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (mount) {
            mount();
        }
        return function () {
            if (unmount) {
                unmount();
            }
        };
    }, []);
};
/* harmony default export */ __webpack_exports__["default"] = (useLifecycles);


/***/ }),

/***/ "../node_modules/react-use/esm/useList.js":
/*!************************************************!*\
  !*** ../node_modules/react-use/esm/useList.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useUpdate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useUpdate */ "../node_modules/react-use/esm/useUpdate.js");
/* harmony import */ var _misc_hookState__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc/hookState */ "../node_modules/react-use/esm/misc/hookState.js");



function useList(initialList) {
    if (initialList === void 0) { initialList = []; }
    var list = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(Object(_misc_hookState__WEBPACK_IMPORTED_MODULE_2__["resolveHookState"])(initialList));
    var update = Object(_useUpdate__WEBPACK_IMPORTED_MODULE_1__["default"])();
    var actions = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () {
        var a = {
            set: function (newList) {
                list.current = Object(_misc_hookState__WEBPACK_IMPORTED_MODULE_2__["resolveHookState"])(newList, list.current);
                update();
            },
            push: function () {
                var items = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    items[_i] = arguments[_i];
                }
                items.length && actions.set(function (curr) { return curr.concat(items); });
            },
            updateAt: function (index, item) {
                actions.set(function (curr) {
                    var arr = curr.slice();
                    arr[index] = item;
                    return arr;
                });
            },
            insertAt: function (index, item) {
                actions.set(function (curr) {
                    var arr = curr.slice();
                    index > arr.length ? (arr[index] = item) : arr.splice(index, 0, item);
                    return arr;
                });
            },
            update: function (predicate, newItem) {
                actions.set(function (curr) { return curr.map(function (item) { return (predicate(item, newItem) ? newItem : item); }); });
            },
            updateFirst: function (predicate, newItem) {
                var index = list.current.findIndex(function (item) { return predicate(item, newItem); });
                index >= 0 && actions.updateAt(index, newItem);
            },
            upsert: function (predicate, newItem) {
                var index = list.current.findIndex(function (item) { return predicate(item, newItem); });
                index >= 0 ? actions.updateAt(index, newItem) : actions.push(newItem);
            },
            sort: function (compareFn) {
                actions.set(function (curr) { return curr.slice().sort(compareFn); });
            },
            filter: function (callbackFn, thisArg) {
                actions.set(function (curr) { return curr.slice().filter(callbackFn, thisArg); });
            },
            removeAt: function (index) {
                actions.set(function (curr) {
                    var arr = curr.slice();
                    arr.splice(index, 1);
                    return arr;
                });
            },
            clear: function () {
                actions.set([]);
            },
            reset: function () {
                actions.set(Object(_misc_hookState__WEBPACK_IMPORTED_MODULE_2__["resolveHookState"])(initialList).slice());
            },
        };
        /**
         * @deprecated Use removeAt method instead
         */
        a.remove = a.removeAt;
        return a;
    }, []);
    return [list.current, actions];
}
/* harmony default export */ __webpack_exports__["default"] = (useList);


/***/ }),

/***/ "../node_modules/react-use/esm/useLocalStorage.js":
/*!********************************************************!*\
  !*** ../node_modules/react-use/esm/useLocalStorage.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var useLocalStorage = function (key, initialValue, options) {
    if (!_misc_util__WEBPACK_IMPORTED_MODULE_1__["isBrowser"]) {
        return [initialValue, _misc_util__WEBPACK_IMPORTED_MODULE_1__["noop"], _misc_util__WEBPACK_IMPORTED_MODULE_1__["noop"]];
    }
    if (!key) {
        throw new Error('useLocalStorage key may not be falsy');
    }
    var deserializer = options
        ? options.raw
            ? function (value) { return value; }
            : options.deserializer
        : JSON.parse;
    // eslint-disable-next-line react-hooks/rules-of-hooks
    var initializer = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(function (key) {
        try {
            var serializer = options ? (options.raw ? String : options.serializer) : JSON.stringify;
            var localStorageValue = localStorage.getItem(key);
            if (localStorageValue !== null) {
                return deserializer(localStorageValue);
            }
            else {
                initialValue && localStorage.setItem(key, serializer(initialValue));
                return initialValue;
            }
        }
        catch (_a) {
            // If user is in private mode or has storage restriction
            // localStorage can throw. JSON.parse and JSON.stringify
            // can throw, too.
            return initialValue;
        }
    });
    // eslint-disable-next-line react-hooks/rules-of-hooks
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(function () { return initializer.current(key); }), state = _a[0], setState = _a[1];
    // eslint-disable-next-line react-hooks/rules-of-hooks
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useLayoutEffect"])(function () { return setState(initializer.current(key)); }, [key]);
    // eslint-disable-next-line react-hooks/rules-of-hooks
    var set = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function (valOrFunc) {
        try {
            var newState = typeof valOrFunc === 'function' ? valOrFunc(state) : valOrFunc;
            if (typeof newState === 'undefined')
                return;
            var value = void 0;
            if (options)
                if (options.raw)
                    if (typeof newState === 'string')
                        value = newState;
                    else
                        value = JSON.stringify(newState);
                else if (options.serializer)
                    value = options.serializer(newState);
                else
                    value = JSON.stringify(newState);
            else
                value = JSON.stringify(newState);
            localStorage.setItem(key, value);
            setState(deserializer(value));
        }
        catch (_a) {
            // If user is in private mode or has storage restriction
            // localStorage can throw. Also JSON.stringify can throw.
        }
    }, [key, setState]);
    // eslint-disable-next-line react-hooks/rules-of-hooks
    var remove = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function () {
        try {
            localStorage.removeItem(key);
            setState(undefined);
        }
        catch (_a) {
            // If user is in private mode or has storage restriction
            // localStorage can throw.
        }
    }, [key, setState]);
    return [state, set, remove];
};
/* harmony default export */ __webpack_exports__["default"] = (useLocalStorage);


/***/ }),

/***/ "../node_modules/react-use/esm/useLocation.js":
/*!****************************************************!*\
  !*** ../node_modules/react-use/esm/useLocation.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var patchHistoryMethod = function (method) {
    var history = window.history;
    var original = history[method];
    history[method] = function (state) {
        var result = original.apply(this, arguments);
        var event = new Event(method.toLowerCase());
        event.state = state;
        window.dispatchEvent(event);
        return result;
    };
};
if (_misc_util__WEBPACK_IMPORTED_MODULE_1__["isBrowser"]) {
    patchHistoryMethod('pushState');
    patchHistoryMethod('replaceState');
}
var useLocationServer = function () { return ({
    trigger: 'load',
    length: 1,
}); };
var buildState = function (trigger) {
    var _a = window.history, state = _a.state, length = _a.length;
    var _b = window.location, hash = _b.hash, host = _b.host, hostname = _b.hostname, href = _b.href, origin = _b.origin, pathname = _b.pathname, port = _b.port, protocol = _b.protocol, search = _b.search;
    return {
        trigger: trigger,
        state: state,
        length: length,
        hash: hash,
        host: host,
        hostname: hostname,
        href: href,
        origin: origin,
        pathname: pathname,
        port: port,
        protocol: protocol,
        search: search,
    };
};
var useLocationBrowser = function () {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(buildState('load')), state = _a[0], setState = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var onPopstate = function () { return setState(buildState('popstate')); };
        var onPushstate = function () { return setState(buildState('pushstate')); };
        var onReplacestate = function () { return setState(buildState('replacestate')); };
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(window, 'popstate', onPopstate);
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(window, 'pushstate', onPushstate);
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(window, 'replacestate', onReplacestate);
        return function () {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(window, 'popstate', onPopstate);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(window, 'pushstate', onPushstate);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(window, 'replacestate', onReplacestate);
        };
    }, []);
    return state;
};
var hasEventConstructor = typeof Event === 'function';
/* harmony default export */ __webpack_exports__["default"] = (_misc_util__WEBPACK_IMPORTED_MODULE_1__["isBrowser"] && hasEventConstructor ? useLocationBrowser : useLocationServer);


/***/ }),

/***/ "../node_modules/react-use/esm/useLockBodyScroll.js":
/*!**********************************************************!*\
  !*** ../node_modules/react-use/esm/useLockBodyScroll.js ***!
  \**********************************************************/
/*! exports provided: getClosestBody, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getClosestBody", function() { return getClosestBody; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


function getClosestBody(el) {
    if (!el) {
        return null;
    }
    else if (el.tagName === 'BODY') {
        return el;
    }
    else if (el.tagName === 'IFRAME') {
        var document_1 = el.contentDocument;
        return document_1 ? document_1.body : null;
    }
    else if (!el.offsetParent) {
        return null;
    }
    return getClosestBody(el.offsetParent);
}
function preventDefault(rawEvent) {
    var e = rawEvent || window.event;
    // Do not prevent if the event has more than one touch (usually meaning this is a multi touch gesture like pinch to zoom).
    if (e.touches.length > 1)
        return true;
    if (e.preventDefault)
        e.preventDefault();
    return false;
}
var isIosDevice = _misc_util__WEBPACK_IMPORTED_MODULE_1__["isBrowser"] &&
    window.navigator &&
    window.navigator.platform &&
    /iP(ad|hone|od)/.test(window.navigator.platform);
var bodies = new Map();
var doc = typeof document === 'object' ? document : undefined;
var documentListenerAdded = false;
/* harmony default export */ __webpack_exports__["default"] = (!doc
    ? function useLockBodyMock(_locked, _elementRef) {
        if (_locked === void 0) { _locked = true; }
    }
    : function useLockBody(locked, elementRef) {
        if (locked === void 0) { locked = true; }
        var bodyRef = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(doc.body);
        elementRef = elementRef || bodyRef;
        var lock = function (body) {
            var bodyInfo = bodies.get(body);
            if (!bodyInfo) {
                bodies.set(body, { counter: 1, initialOverflow: body.style.overflow });
                if (isIosDevice) {
                    if (!documentListenerAdded) {
                        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(document, 'touchmove', preventDefault, { passive: false });
                        documentListenerAdded = true;
                    }
                }
                else {
                    body.style.overflow = 'hidden';
                }
            }
            else {
                bodies.set(body, {
                    counter: bodyInfo.counter + 1,
                    initialOverflow: bodyInfo.initialOverflow,
                });
            }
        };
        var unlock = function (body) {
            var bodyInfo = bodies.get(body);
            if (bodyInfo) {
                if (bodyInfo.counter === 1) {
                    bodies.delete(body);
                    if (isIosDevice) {
                        body.ontouchmove = null;
                        if (documentListenerAdded) {
                            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(document, 'touchmove', preventDefault);
                            documentListenerAdded = false;
                        }
                    }
                    else {
                        body.style.overflow = bodyInfo.initialOverflow;
                    }
                }
                else {
                    bodies.set(body, {
                        counter: bodyInfo.counter - 1,
                        initialOverflow: bodyInfo.initialOverflow,
                    });
                }
            }
        };
        Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
            var body = getClosestBody(elementRef.current);
            if (!body) {
                return;
            }
            if (locked) {
                lock(body);
            }
            else {
                unlock(body);
            }
        }, [locked, elementRef.current]);
        // clean up, on un-mount
        Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
            var body = getClosestBody(elementRef.current);
            if (!body) {
                return;
            }
            return function () {
                unlock(body);
            };
        }, []);
    });


/***/ }),

/***/ "../node_modules/react-use/esm/useLogger.js":
/*!**************************************************!*\
  !*** ../node_modules/react-use/esm/useLogger.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _useEffectOnce__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useEffectOnce */ "../node_modules/react-use/esm/useEffectOnce.js");
/* harmony import */ var _useUpdateEffect__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useUpdateEffect */ "../node_modules/react-use/esm/useUpdateEffect.js");



var useLogger = function (componentName) {
    var rest = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        rest[_i - 1] = arguments[_i];
    }
    Object(_useEffectOnce__WEBPACK_IMPORTED_MODULE_1__["default"])(function () {
        console.log.apply(console, Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__spreadArrays"])([componentName + " mounted"], rest));
        return function () { return console.log(componentName + " unmounted"); };
    });
    Object(_useUpdateEffect__WEBPACK_IMPORTED_MODULE_2__["default"])(function () {
        console.log.apply(console, Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__spreadArrays"])([componentName + " updated"], rest));
    });
};
/* harmony default export */ __webpack_exports__["default"] = (useLogger);


/***/ }),

/***/ "../node_modules/react-use/esm/useLongPress.js":
/*!*****************************************************!*\
  !*** ../node_modules/react-use/esm/useLongPress.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var isTouchEvent = function (ev) {
    return 'touches' in ev;
};
var preventDefault = function (ev) {
    if (!isTouchEvent(ev))
        return;
    if (ev.touches.length < 2 && ev.preventDefault) {
        ev.preventDefault();
    }
};
var useLongPress = function (callback, _a) {
    var _b = _a === void 0 ? {} : _a, _c = _b.isPreventDefault, isPreventDefault = _c === void 0 ? true : _c, _d = _b.delay, delay = _d === void 0 ? 300 : _d;
    var timeout = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])();
    var target = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])();
    var start = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function (event) {
        // prevent ghost click on mobile devices
        if (isPreventDefault && event.target) {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(event.target, 'touchend', preventDefault, { passive: false });
            target.current = event.target;
        }
        timeout.current = setTimeout(function () { return callback(event); }, delay);
    }, [callback, delay, isPreventDefault]);
    var clear = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function () {
        // clearTimeout and removeEventListener
        timeout.current && clearTimeout(timeout.current);
        if (isPreventDefault && target.current) {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(target.current, 'touchend', preventDefault);
        }
    }, [isPreventDefault]);
    return {
        onMouseDown: function (e) { return start(e); },
        onTouchStart: function (e) { return start(e); },
        onMouseUp: clear,
        onMouseLeave: clear,
        onTouchEnd: clear,
    };
};
/* harmony default export */ __webpack_exports__["default"] = (useLongPress);


/***/ }),

/***/ "../node_modules/react-use/esm/useMap.js":
/*!***********************************************!*\
  !*** ../node_modules/react-use/esm/useMap.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var useMap = function (initialMap) {
    if (initialMap === void 0) { initialMap = {}; }
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(initialMap), map = _a[0], set = _a[1];
    var stableActions = Object(react__WEBPACK_IMPORTED_MODULE_1__["useMemo"])(function () { return ({
        set: function (key, entry) {
            set(function (prevMap) {
                var _a;
                return (Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, prevMap), (_a = {}, _a[key] = entry, _a)));
            });
        },
        setAll: function (newMap) {
            set(newMap);
        },
        remove: function (key) {
            set(function (prevMap) {
                var _a = prevMap, _b = key, omit = _a[_b], rest = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__rest"])(_a, [typeof _b === "symbol" ? _b : _b + ""]);
                return rest;
            });
        },
        reset: function () { return set(initialMap); },
    }); }, [set]);
    var utils = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ get: Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])(function (key) { return map[key]; }, [map]) }, stableActions);
    return [map, utils];
};
/* harmony default export */ __webpack_exports__["default"] = (useMap);


/***/ }),

/***/ "../node_modules/react-use/esm/useMeasure.js":
/*!***************************************************!*\
  !*** ../node_modules/react-use/esm/useMeasure.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useIsomorphicLayoutEffect */ "../node_modules/react-use/esm/useIsomorphicLayoutEffect.js");
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");



var defaultState = {
    x: 0,
    y: 0,
    width: 0,
    height: 0,
    top: 0,
    left: 0,
    bottom: 0,
    right: 0,
};
function useMeasure() {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(null), element = _a[0], ref = _a[1];
    var _b = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(defaultState), rect = _b[0], setRect = _b[1];
    var observer = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () {
        return new window.ResizeObserver(function (entries) {
            if (entries[0]) {
                var _a = entries[0].contentRect, x = _a.x, y = _a.y, width = _a.width, height = _a.height, top_1 = _a.top, left = _a.left, bottom = _a.bottom, right = _a.right;
                setRect({ x: x, y: y, width: width, height: height, top: top_1, left: left, bottom: bottom, right: right });
            }
        });
    }, []);
    Object(_useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_1__["default"])(function () {
        if (!element)
            return;
        observer.observe(element);
        return function () {
            observer.disconnect();
        };
    }, [element]);
    return [ref, rect];
}
/* harmony default export */ __webpack_exports__["default"] = (_misc_util__WEBPACK_IMPORTED_MODULE_2__["isBrowser"] && typeof window.ResizeObserver !== 'undefined'
    ? useMeasure
    : (function () { return [_misc_util__WEBPACK_IMPORTED_MODULE_2__["noop"], defaultState]; }));


/***/ }),

/***/ "../node_modules/react-use/esm/useMedia.js":
/*!*************************************************!*\
  !*** ../node_modules/react-use/esm/useMedia.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var useMedia = function (query, defaultState) {
    if (defaultState === void 0) { defaultState = false; }
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(_misc_util__WEBPACK_IMPORTED_MODULE_1__["isBrowser"] ? function () { return window.matchMedia(query).matches; } : defaultState), state = _a[0], setState = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var mounted = true;
        var mql = window.matchMedia(query);
        var onChange = function () {
            if (!mounted) {
                return;
            }
            setState(!!mql.matches);
        };
        mql.addListener(onChange);
        setState(mql.matches);
        return function () {
            mounted = false;
            mql.removeListener(onChange);
        };
    }, [query]);
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (useMedia);


/***/ }),

/***/ "../node_modules/react-use/esm/useMediaDevices.js":
/*!********************************************************!*\
  !*** ../node_modules/react-use/esm/useMediaDevices.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var useMediaDevices = function () {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])({}), state = _a[0], setState = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var mounted = true;
        var onChange = function () {
            navigator.mediaDevices
                .enumerateDevices()
                .then(function (devices) {
                if (mounted) {
                    setState({
                        devices: devices.map(function (_a) {
                            var deviceId = _a.deviceId, groupId = _a.groupId, kind = _a.kind, label = _a.label;
                            return ({
                                deviceId: deviceId,
                                groupId: groupId,
                                kind: kind,
                                label: label,
                            });
                        }),
                    });
                }
            })
                .catch(_misc_util__WEBPACK_IMPORTED_MODULE_1__["noop"]);
        };
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(navigator.mediaDevices, 'devicechange', onChange);
        onChange();
        return function () {
            mounted = false;
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(navigator.mediaDevices, 'devicechange', onChange);
        };
    }, []);
    return state;
};
var useMediaDevicesMock = function () { return ({}); };
/* harmony default export */ __webpack_exports__["default"] = (_misc_util__WEBPACK_IMPORTED_MODULE_1__["isNavigator"] && !!navigator.mediaDevices ? useMediaDevices : useMediaDevicesMock);


/***/ }),

/***/ "../node_modules/react-use/esm/useMediatedState.js":
/*!*********************************************************!*\
  !*** ../node_modules/react-use/esm/useMediatedState.js ***!
  \*********************************************************/
/*! exports provided: useMediatedState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useMediatedState", function() { return useMediatedState; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

function useMediatedState(mediator, initialState) {
    var mediatorFn = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(mediator);
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(initialState), state = _a[0], setMediatedState = _a[1];
    var setState = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function (newState) {
        if (mediatorFn.current.length === 2) {
            mediatorFn.current(newState, setMediatedState);
        }
        else {
            setMediatedState(mediatorFn.current(newState));
        }
    }, [state]);
    return [state, setState];
}


/***/ }),

/***/ "../node_modules/react-use/esm/useMethods.js":
/*!***************************************************!*\
  !*** ../node_modules/react-use/esm/useMethods.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var useMethods = function (createMethods, initialState) {
    var reducer = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () { return function (reducerState, action) {
        var _a;
        return (_a = createMethods(reducerState))[action.type].apply(_a, action.payload);
    }; }, [createMethods]);
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useReducer"])(reducer, initialState), state = _a[0], dispatch = _a[1];
    var wrappedMethods = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () {
        var actionTypes = Object.keys(createMethods(initialState));
        return actionTypes.reduce(function (acc, type) {
            acc[type] = function () {
                var payload = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    payload[_i] = arguments[_i];
                }
                return dispatch({ type: type, payload: payload });
            };
            return acc;
        }, {});
    }, [createMethods, initialState]);
    return [state, wrappedMethods];
};
/* harmony default export */ __webpack_exports__["default"] = (useMethods);


/***/ }),

/***/ "../node_modules/react-use/esm/useMotion.js":
/*!**************************************************!*\
  !*** ../node_modules/react-use/esm/useMotion.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var defaultState = {
    acceleration: {
        x: null,
        y: null,
        z: null,
    },
    accelerationIncludingGravity: {
        x: null,
        y: null,
        z: null,
    },
    rotationRate: {
        alpha: null,
        beta: null,
        gamma: null,
    },
    interval: 16,
};
var useMotion = function (initialState) {
    if (initialState === void 0) { initialState = defaultState; }
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(initialState), state = _a[0], setState = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var handler = function (event) {
            var acceleration = event.acceleration, accelerationIncludingGravity = event.accelerationIncludingGravity, rotationRate = event.rotationRate, interval = event.interval;
            setState({
                acceleration: {
                    x: acceleration.x,
                    y: acceleration.y,
                    z: acceleration.z,
                },
                accelerationIncludingGravity: {
                    x: accelerationIncludingGravity.x,
                    y: accelerationIncludingGravity.y,
                    z: accelerationIncludingGravity.z,
                },
                rotationRate: {
                    alpha: rotationRate.alpha,
                    beta: rotationRate.beta,
                    gamma: rotationRate.gamma,
                },
                interval: interval,
            });
        };
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(window, 'devicemotion', handler);
        return function () {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(window, 'devicemotion', handler);
        };
    }, []);
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (useMotion);


/***/ }),

/***/ "../node_modules/react-use/esm/useMount.js":
/*!*************************************************!*\
  !*** ../node_modules/react-use/esm/useMount.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _useEffectOnce__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./useEffectOnce */ "../node_modules/react-use/esm/useEffectOnce.js");

var useMount = function (fn) {
    Object(_useEffectOnce__WEBPACK_IMPORTED_MODULE_0__["default"])(function () {
        fn();
    });
};
/* harmony default export */ __webpack_exports__["default"] = (useMount);


/***/ }),

/***/ "../node_modules/react-use/esm/useMountedState.js":
/*!********************************************************!*\
  !*** ../node_modules/react-use/esm/useMountedState.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useMountedState; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

function useMountedState() {
    var mountedRef = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(false);
    var get = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function () { return mountedRef.current; }, []);
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        mountedRef.current = true;
        return function () {
            mountedRef.current = false;
        };
    }, []);
    return get;
}


/***/ }),

/***/ "../node_modules/react-use/esm/useMouse.js":
/*!*************************************************!*\
  !*** ../node_modules/react-use/esm/useMouse.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useRafState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useRafState */ "../node_modules/react-use/esm/useRafState.js");
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");



var useMouse = function (ref) {
    if (true) {
        if (typeof ref !== 'object' || typeof ref.current === 'undefined') {
            console.error('useMouse expects a single ref argument.');
        }
    }
    var _a = Object(_useRafState__WEBPACK_IMPORTED_MODULE_1__["default"])({
        docX: 0,
        docY: 0,
        posX: 0,
        posY: 0,
        elX: 0,
        elY: 0,
        elH: 0,
        elW: 0,
    }), state = _a[0], setState = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var moveHandler = function (event) {
            if (ref && ref.current) {
                var _a = ref.current.getBoundingClientRect(), left = _a.left, top_1 = _a.top, elW = _a.width, elH = _a.height;
                var posX = left + window.pageXOffset;
                var posY = top_1 + window.pageYOffset;
                var elX = event.pageX - posX;
                var elY = event.pageY - posY;
                setState({
                    docX: event.pageX,
                    docY: event.pageY,
                    posX: posX,
                    posY: posY,
                    elX: elX,
                    elY: elY,
                    elH: elH,
                    elW: elW,
                });
            }
        };
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["on"])(document, 'mousemove', moveHandler);
        return function () {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["off"])(document, 'mousemove', moveHandler);
        };
    }, [ref]);
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (useMouse);


/***/ }),

/***/ "../node_modules/react-use/esm/useMouseHovered.js":
/*!********************************************************!*\
  !*** ../node_modules/react-use/esm/useMouseHovered.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _useHoverDirty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./useHoverDirty */ "../node_modules/react-use/esm/useHoverDirty.js");
/* harmony import */ var _useMouse__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useMouse */ "../node_modules/react-use/esm/useMouse.js");


var nullRef = { current: null };
var useMouseHovered = function (ref, options) {
    if (options === void 0) { options = {}; }
    var whenHovered = !!options.whenHovered;
    var bound = !!options.bound;
    var isHovered = Object(_useHoverDirty__WEBPACK_IMPORTED_MODULE_0__["default"])(ref, whenHovered);
    var state = Object(_useMouse__WEBPACK_IMPORTED_MODULE_1__["default"])(whenHovered && !isHovered ? nullRef : ref);
    if (bound) {
        state.elX = Math.max(0, Math.min(state.elX, state.elW));
        state.elY = Math.max(0, Math.min(state.elY, state.elH));
    }
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (useMouseHovered);


/***/ }),

/***/ "../node_modules/react-use/esm/useMouseWheel.js":
/*!******************************************************!*\
  !*** ../node_modules/react-use/esm/useMouseWheel.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


/* harmony default export */ __webpack_exports__["default"] = (function () {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(0), mouseWheelScrolled = _a[0], setMouseWheelScrolled = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var updateScroll = function (e) {
            setMouseWheelScrolled(e.deltaY + mouseWheelScrolled);
        };
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(window, 'wheel', updateScroll, false);
        return function () { return Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(window, 'wheel', updateScroll); };
    });
    return mouseWheelScrolled;
});


/***/ }),

/***/ "../node_modules/react-use/esm/useMultiStateValidator.js":
/*!***************************************************************!*\
  !*** ../node_modules/react-use/esm/useMultiStateValidator.js ***!
  \***************************************************************/
/*! exports provided: useMultiStateValidator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useMultiStateValidator", function() { return useMultiStateValidator; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

function useMultiStateValidator(states, validator, initialValidity) {
    if (initialValidity === void 0) { initialValidity = [undefined]; }
    if (typeof states !== 'object') {
        throw new Error('states expected to be an object or array, got ' + typeof states);
    }
    var validatorInner = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(validator);
    var statesInner = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(states);
    validatorInner.current = validator;
    statesInner.current = states;
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(initialValidity), validity = _a[0], setValidity = _a[1];
    var validate = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function () {
        if (validatorInner.current.length >= 2) {
            validatorInner.current(statesInner.current, setValidity);
        }
        else {
            setValidity(validatorInner.current(statesInner.current));
        }
    }, [setValidity]);
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        validate();
    }, Object.values(states));
    return [validity, validate];
}


/***/ }),

/***/ "../node_modules/react-use/esm/useNetworkState.js":
/*!********************************************************!*\
  !*** ../node_modules/react-use/esm/useNetworkState.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useNetworkState; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var nav = _misc_util__WEBPACK_IMPORTED_MODULE_1__["isNavigator"] ? navigator : undefined;
var conn = nav && (nav.connection || nav.mozConnection || nav.webkitConnection);
function getConnectionState(previousState) {
    var online = nav === null || nav === void 0 ? void 0 : nav.onLine;
    var previousOnline = previousState === null || previousState === void 0 ? void 0 : previousState.online;
    return {
        online: online,
        previous: previousOnline,
        since: online !== previousOnline ? new Date() : previousState === null || previousState === void 0 ? void 0 : previousState.since,
        downlink: conn === null || conn === void 0 ? void 0 : conn.downlink,
        downlinkMax: conn === null || conn === void 0 ? void 0 : conn.downlinkMax,
        effectiveType: conn === null || conn === void 0 ? void 0 : conn.effectiveType,
        rtt: conn === null || conn === void 0 ? void 0 : conn.rtt,
        saveData: conn === null || conn === void 0 ? void 0 : conn.saveData,
        type: conn === null || conn === void 0 ? void 0 : conn.type,
    };
}
function useNetworkState(initialState) {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(initialState !== null && initialState !== void 0 ? initialState : getConnectionState), state = _a[0], setState = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var handleStateChange = function () {
            setState(getConnectionState);
        };
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(window, 'online', handleStateChange, { passive: true });
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(window, 'offline', handleStateChange, { passive: true });
        if (conn) {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(conn, 'change', handleStateChange, { passive: true });
        }
        return function () {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(window, 'online', handleStateChange);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(window, 'offline', handleStateChange);
            if (conn) {
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(conn, 'change', handleStateChange);
            }
        };
    }, []);
    return state;
}


/***/ }),

/***/ "../node_modules/react-use/esm/useNumber.js":
/*!**************************************************!*\
  !*** ../node_modules/react-use/esm/useNumber.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _useCounter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./useCounter */ "../node_modules/react-use/esm/useCounter.js");

/* harmony default export */ __webpack_exports__["default"] = (_useCounter__WEBPACK_IMPORTED_MODULE_0__["default"]);


/***/ }),

/***/ "../node_modules/react-use/esm/useObservable.js":
/*!******************************************************!*\
  !*** ../node_modules/react-use/esm/useObservable.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useIsomorphicLayoutEffect */ "../node_modules/react-use/esm/useIsomorphicLayoutEffect.js");


function useObservable(observable$, initialValue) {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(initialValue), value = _a[0], update = _a[1];
    Object(_useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_1__["default"])(function () {
        var s = observable$.subscribe(update);
        return function () { return s.unsubscribe(); };
    }, [observable$]);
    return value;
}
/* harmony default export */ __webpack_exports__["default"] = (useObservable);


/***/ }),

/***/ "../node_modules/react-use/esm/useOrientation.js":
/*!*******************************************************!*\
  !*** ../node_modules/react-use/esm/useOrientation.js ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var defaultState = {
    angle: 0,
    type: 'landscape-primary',
};
var useOrientation = function (initialState) {
    if (initialState === void 0) { initialState = defaultState; }
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(initialState), state = _a[0], setState = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var screen = window.screen;
        var mounted = true;
        var onChange = function () {
            if (mounted) {
                var orientation_1 = screen.orientation;
                if (orientation_1) {
                    var angle = orientation_1.angle, type = orientation_1.type;
                    setState({ angle: angle, type: type });
                }
                else if (window.orientation !== undefined) {
                    setState({
                        angle: typeof window.orientation === 'number' ? window.orientation : 0,
                        type: '',
                    });
                }
                else {
                    setState(initialState);
                }
            }
        };
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(window, 'orientationchange', onChange);
        onChange();
        return function () {
            mounted = false;
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(window, 'orientationchange', onChange);
        };
    }, []);
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (useOrientation);


/***/ }),

/***/ "../node_modules/react-use/esm/usePageLeave.js":
/*!*****************************************************!*\
  !*** ../node_modules/react-use/esm/usePageLeave.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var usePageLeave = function (onPageLeave, args) {
    if (args === void 0) { args = []; }
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (!onPageLeave) {
            return;
        }
        var handler = function (event) {
            event = event ? event : window.event;
            var from = event.relatedTarget || event.toElement;
            if (!from || from.nodeName === 'HTML') {
                onPageLeave();
            }
        };
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(document, 'mouseout', handler);
        return function () {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(document, 'mouseout', handler);
        };
    }, args);
};
/* harmony default export */ __webpack_exports__["default"] = (usePageLeave);


/***/ }),

/***/ "../node_modules/react-use/esm/usePermission.js":
/*!******************************************************!*\
  !*** ../node_modules/react-use/esm/usePermission.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


// const usePermission = <T extends PermissionDescriptor>(permissionDesc: T): IState => {
var usePermission = function (permissionDesc) {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(''), state = _a[0], setState = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var mounted = true;
        var permissionStatus = null;
        var onChange = function () {
            if (!mounted) {
                return;
            }
            setState(function () { var _a; return (_a = permissionStatus === null || permissionStatus === void 0 ? void 0 : permissionStatus.state) !== null && _a !== void 0 ? _a : ''; });
        };
        navigator.permissions
            .query(permissionDesc)
            .then(function (status) {
            permissionStatus = status;
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(permissionStatus, 'change', onChange);
            onChange();
        })
            .catch(_misc_util__WEBPACK_IMPORTED_MODULE_1__["noop"]);
        return function () {
            permissionStatus && Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(permissionStatus, 'change', onChange);
            mounted = false;
            permissionStatus = null;
        };
    }, [permissionDesc]);
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (usePermission);


/***/ }),

/***/ "../node_modules/react-use/esm/usePrevious.js":
/*!****************************************************!*\
  !*** ../node_modules/react-use/esm/usePrevious.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return usePrevious; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

function usePrevious(state) {
    var ref = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])();
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        ref.current = state;
    });
    return ref.current;
}


/***/ }),

/***/ "../node_modules/react-use/esm/usePreviousDistinct.js":
/*!************************************************************!*\
  !*** ../node_modules/react-use/esm/usePreviousDistinct.js ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return usePreviousDistinct; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useFirstMountState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useFirstMountState */ "../node_modules/react-use/esm/useFirstMountState.js");


var strictEquals = function (prev, next) { return prev === next; };
function usePreviousDistinct(value, compare) {
    if (compare === void 0) { compare = strictEquals; }
    var prevRef = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])();
    var curRef = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(value);
    var isFirstMount = Object(_useFirstMountState__WEBPACK_IMPORTED_MODULE_1__["useFirstMountState"])();
    if (!isFirstMount && !compare(curRef.current, value)) {
        prevRef.current = curRef.current;
        curRef.current = value;
    }
    return prevRef.current;
}


/***/ }),

/***/ "../node_modules/react-use/esm/usePromise.js":
/*!***************************************************!*\
  !*** ../node_modules/react-use/esm/usePromise.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useMountedState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useMountedState */ "../node_modules/react-use/esm/useMountedState.js");


var usePromise = function () {
    var isMounted = Object(_useMountedState__WEBPACK_IMPORTED_MODULE_1__["default"])();
    return Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function (promise) {
        return new Promise(function (resolve, reject) {
            var onValue = function (value) {
                isMounted() && resolve(value);
            };
            var onError = function (error) {
                isMounted() && reject(error);
            };
            promise.then(onValue, onError);
        });
    }, []);
};
/* harmony default export */ __webpack_exports__["default"] = (usePromise);


/***/ }),

/***/ "../node_modules/react-use/esm/useQueue.js":
/*!*************************************************!*\
  !*** ../node_modules/react-use/esm/useQueue.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var useQueue = function (initialValue) {
    if (initialValue === void 0) { initialValue = []; }
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(initialValue), state = _a[0], set = _a[1];
    return {
        add: function (value) {
            set(function (queue) { return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__spreadArrays"])(queue, [value]); });
        },
        remove: function () {
            var result;
            set(function (_a) {
                var first = _a[0], rest = _a.slice(1);
                result = first;
                return rest;
            });
            return result;
        },
        get first() {
            return state[0];
        },
        get last() {
            return state[state.length - 1];
        },
        get size() {
            return state.length;
        },
    };
};
/* harmony default export */ __webpack_exports__["default"] = (useQueue);


/***/ }),

/***/ "../node_modules/react-use/esm/useRaf.js":
/*!***********************************************!*\
  !*** ../node_modules/react-use/esm/useRaf.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useIsomorphicLayoutEffect */ "../node_modules/react-use/esm/useIsomorphicLayoutEffect.js");


var useRaf = function (ms, delay) {
    if (ms === void 0) { ms = 1e12; }
    if (delay === void 0) { delay = 0; }
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(0), elapsed = _a[0], set = _a[1];
    Object(_useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_1__["default"])(function () {
        var raf;
        var timerStop;
        var start;
        var onFrame = function () {
            var time = Math.min(1, (Date.now() - start) / ms);
            set(time);
            loop();
        };
        var loop = function () {
            raf = requestAnimationFrame(onFrame);
        };
        var onStart = function () {
            timerStop = setTimeout(function () {
                cancelAnimationFrame(raf);
                set(1);
            }, ms);
            start = Date.now();
            loop();
        };
        var timerDelay = setTimeout(onStart, delay);
        return function () {
            clearTimeout(timerStop);
            clearTimeout(timerDelay);
            cancelAnimationFrame(raf);
        };
    }, [ms, delay]);
    return elapsed;
};
/* harmony default export */ __webpack_exports__["default"] = (useRaf);


/***/ }),

/***/ "../node_modules/react-use/esm/useRafLoop.js":
/*!***************************************************!*\
  !*** ../node_modules/react-use/esm/useRafLoop.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useRafLoop; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

function useRafLoop(callback, initiallyActive) {
    if (initiallyActive === void 0) { initiallyActive = true; }
    var raf = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(null);
    var rafActivity = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(false);
    var rafCallback = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(callback);
    rafCallback.current = callback;
    var step = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function (time) {
        if (rafActivity.current) {
            rafCallback.current(time);
            raf.current = requestAnimationFrame(step);
        }
    }, []);
    var result = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () {
        return [
            function () {
                // stop
                if (rafActivity.current) {
                    rafActivity.current = false;
                    raf.current && cancelAnimationFrame(raf.current);
                }
            },
            function () {
                // start
                if (!rafActivity.current) {
                    rafActivity.current = true;
                    raf.current = requestAnimationFrame(step);
                }
            },
            function () { return rafActivity.current; },
        ];
    }, []);
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (initiallyActive) {
            result[1]();
        }
        return result[0];
        // eslint-disable-next-line react-hooks/exhaustive-deps
    }, []);
    return result;
}


/***/ }),

/***/ "../node_modules/react-use/esm/useRafState.js":
/*!****************************************************!*\
  !*** ../node_modules/react-use/esm/useRafState.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useUnmount__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useUnmount */ "../node_modules/react-use/esm/useUnmount.js");


var useRafState = function (initialState) {
    var frame = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(0);
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(initialState), state = _a[0], setState = _a[1];
    var setRafState = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function (value) {
        cancelAnimationFrame(frame.current);
        frame.current = requestAnimationFrame(function () {
            setState(value);
        });
    }, []);
    Object(_useUnmount__WEBPACK_IMPORTED_MODULE_1__["default"])(function () {
        cancelAnimationFrame(frame.current);
    });
    return [state, setRafState];
};
/* harmony default export */ __webpack_exports__["default"] = (useRafState);


/***/ }),

/***/ "../node_modules/react-use/esm/useRendersCount.js":
/*!********************************************************!*\
  !*** ../node_modules/react-use/esm/useRendersCount.js ***!
  \********************************************************/
/*! exports provided: useRendersCount */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useRendersCount", function() { return useRendersCount; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

function useRendersCount() {
    return ++Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(0).current;
}


/***/ }),

/***/ "../node_modules/react-use/esm/useScratch.js":
/*!***************************************************!*\
  !*** ../node_modules/react-use/esm/useScratch.js ***!
  \***************************************************/
/*! exports provided: ScratchSensor, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ScratchSensor", function() { return ScratchSensor; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_universal_interface__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-universal-interface */ "../node_modules/react-universal-interface/lib/index.js");
/* harmony import */ var react_universal_interface__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_universal_interface__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _useLatest__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useLatest */ "../node_modules/react-use/esm/useLatest.js");
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");





var useScratch = function (params) {
    if (params === void 0) { params = {}; }
    var disabled = params.disabled;
    var paramsRef = Object(_useLatest__WEBPACK_IMPORTED_MODULE_3__["default"])(params);
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])({ isScratching: false }), state = _a[0], setState = _a[1];
    var refState = Object(react__WEBPACK_IMPORTED_MODULE_1__["useRef"])(state);
    var refScratching = Object(react__WEBPACK_IMPORTED_MODULE_1__["useRef"])(false);
    var refAnimationFrame = Object(react__WEBPACK_IMPORTED_MODULE_1__["useRef"])(null);
    var _b = Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(null), el = _b[0], setEl = _b[1];
    Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () {
        if (disabled)
            return;
        if (!el)
            return;
        var onMoveEvent = function (docX, docY) {
            cancelAnimationFrame(refAnimationFrame.current);
            refAnimationFrame.current = requestAnimationFrame(function () {
                var _a = el.getBoundingClientRect(), left = _a.left, top = _a.top;
                var elX = left + window.scrollX;
                var elY = top + window.scrollY;
                var x = docX - elX;
                var y = docY - elY;
                setState(function (oldState) {
                    var newState = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, oldState), { dx: x - (oldState.x || 0), dy: y - (oldState.y || 0), end: Date.now(), isScratching: true });
                    refState.current = newState;
                    (paramsRef.current.onScratch || _misc_util__WEBPACK_IMPORTED_MODULE_4__["noop"])(newState);
                    return newState;
                });
            });
        };
        var onMouseMove = function (event) {
            onMoveEvent(event.pageX, event.pageY);
        };
        var onTouchMove = function (event) {
            onMoveEvent(event.changedTouches[0].pageX, event.changedTouches[0].pageY);
        };
        var onMouseUp;
        var onTouchEnd;
        var stopScratching = function () {
            if (!refScratching.current)
                return;
            refScratching.current = false;
            refState.current = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, refState.current), { isScratching: false });
            (paramsRef.current.onScratchEnd || _misc_util__WEBPACK_IMPORTED_MODULE_4__["noop"])(refState.current);
            setState({ isScratching: false });
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["off"])(window, 'mousemove', onMouseMove);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["off"])(window, 'touchmove', onTouchMove);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["off"])(window, 'mouseup', onMouseUp);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["off"])(window, 'touchend', onTouchEnd);
        };
        onMouseUp = stopScratching;
        onTouchEnd = stopScratching;
        var startScratching = function (docX, docY) {
            if (!refScratching.current)
                return;
            var _a = el.getBoundingClientRect(), left = _a.left, top = _a.top;
            var elX = left + window.scrollX;
            var elY = top + window.scrollY;
            var x = docX - elX;
            var y = docY - elY;
            var time = Date.now();
            var newState = {
                isScratching: true,
                start: time,
                end: time,
                docX: docX,
                docY: docY,
                x: x,
                y: y,
                dx: 0,
                dy: 0,
                elH: el.offsetHeight,
                elW: el.offsetWidth,
                elX: elX,
                elY: elY,
            };
            refState.current = newState;
            (paramsRef.current.onScratchStart || _misc_util__WEBPACK_IMPORTED_MODULE_4__["noop"])(newState);
            setState(newState);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["on"])(window, 'mousemove', onMouseMove);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["on"])(window, 'touchmove', onTouchMove);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["on"])(window, 'mouseup', onMouseUp);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["on"])(window, 'touchend', onTouchEnd);
        };
        var onMouseDown = function (event) {
            refScratching.current = true;
            startScratching(event.pageX, event.pageY);
        };
        var onTouchStart = function (event) {
            refScratching.current = true;
            startScratching(event.changedTouches[0].pageX, event.changedTouches[0].pageY);
        };
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["on"])(el, 'mousedown', onMouseDown);
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["on"])(el, 'touchstart', onTouchStart);
        return function () {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["off"])(el, 'mousedown', onMouseDown);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["off"])(el, 'touchstart', onTouchStart);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["off"])(window, 'mousemove', onMouseMove);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["off"])(window, 'touchmove', onTouchMove);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["off"])(window, 'mouseup', onMouseUp);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_4__["off"])(window, 'touchend', onTouchEnd);
            if (refAnimationFrame.current)
                cancelAnimationFrame(refAnimationFrame.current);
            refAnimationFrame.current = null;
            refScratching.current = false;
            refState.current = { isScratching: false };
            setState(refState.current);
        };
    }, [el, disabled, paramsRef]);
    return [setEl, state];
};
var ScratchSensor = function (props) {
    var children = props.children, params = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__rest"])(props, ["children"]);
    var _a = useScratch(params), ref = _a[0], state = _a[1];
    var element = Object(react_universal_interface__WEBPACK_IMPORTED_MODULE_2__["render"])(props, state);
    return Object(react__WEBPACK_IMPORTED_MODULE_1__["cloneElement"])(element, Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, element.props), { ref: function (el) {
            if (element.props.ref) {
                if (typeof element.props.ref === 'object')
                    element.props.ref.current = el;
                if (typeof element.props.ref === 'function')
                    element.props.ref(el);
            }
            ref(el);
        } }));
};
/* harmony default export */ __webpack_exports__["default"] = (useScratch);


/***/ }),

/***/ "../node_modules/react-use/esm/useScroll.js":
/*!**************************************************!*\
  !*** ../node_modules/react-use/esm/useScroll.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useRafState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useRafState */ "../node_modules/react-use/esm/useRafState.js");
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");



var useScroll = function (ref) {
    if (true) {
        if (typeof ref !== 'object' || typeof ref.current === 'undefined') {
            console.error('`useScroll` expects a single ref argument.');
        }
    }
    var _a = Object(_useRafState__WEBPACK_IMPORTED_MODULE_1__["default"])({
        x: 0,
        y: 0,
    }), state = _a[0], setState = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var handler = function () {
            if (ref.current) {
                setState({
                    x: ref.current.scrollLeft,
                    y: ref.current.scrollTop,
                });
            }
        };
        if (ref.current) {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["on"])(ref.current, 'scroll', handler, {
                capture: false,
                passive: true,
            });
        }
        return function () {
            if (ref.current) {
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["off"])(ref.current, 'scroll', handler);
            }
        };
    }, [ref]);
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (useScroll);


/***/ }),

/***/ "../node_modules/react-use/esm/useScrollbarWidth.js":
/*!**********************************************************!*\
  !*** ../node_modules/react-use/esm/useScrollbarWidth.js ***!
  \**********************************************************/
/*! exports provided: useScrollbarWidth */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useScrollbarWidth", function() { return useScrollbarWidth; });
/* harmony import */ var _xobotyi_scrollbar_width__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @xobotyi/scrollbar-width */ "../node_modules/@xobotyi/scrollbar-width/dist/index.esm.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


function useScrollbarWidth() {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(Object(_xobotyi_scrollbar_width__WEBPACK_IMPORTED_MODULE_0__["scrollbarWidth"])()), sbw = _a[0], setSbw = _a[1];
    // this needed to ensure the scrollbar width in case hook called before the DOM is ready
    Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () {
        if (typeof sbw !== 'undefined') {
            return;
        }
        var raf = requestAnimationFrame(function () {
            setSbw(Object(_xobotyi_scrollbar_width__WEBPACK_IMPORTED_MODULE_0__["scrollbarWidth"])());
        });
        return function () { return cancelAnimationFrame(raf); };
    }, []);
    return sbw;
}


/***/ }),

/***/ "../node_modules/react-use/esm/useScrolling.js":
/*!*****************************************************!*\
  !*** ../node_modules/react-use/esm/useScrolling.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var useScrolling = function (ref) {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(false), scrolling = _a[0], setScrolling = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (ref.current) {
            var scrollingTimeout_1;
            var handleScrollEnd_1 = function () {
                setScrolling(false);
            };
            var handleScroll_1 = function () {
                setScrolling(true);
                clearTimeout(scrollingTimeout_1);
                scrollingTimeout_1 = setTimeout(function () { return handleScrollEnd_1(); }, 150);
            };
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(ref.current, 'scroll', handleScroll_1, false);
            return function () {
                if (ref.current) {
                    Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(ref.current, 'scroll', handleScroll_1, false);
                }
            };
        }
        return function () { };
    }, [ref]);
    return scrolling;
};
/* harmony default export */ __webpack_exports__["default"] = (useScrolling);


/***/ }),

/***/ "../node_modules/react-use/esm/useSearchParam.js":
/*!*******************************************************!*\
  !*** ../node_modules/react-use/esm/useSearchParam.js ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var getValue = function (search, param) { return new URLSearchParams(search).get(param); };
var useSearchParam = function (param) {
    var location = window.location;
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(function () { return getValue(location.search, param); }), value = _a[0], setValue = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var onChange = function () {
            setValue(getValue(location.search, param));
        };
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(window, 'popstate', onChange);
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(window, 'pushstate', onChange);
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(window, 'replacestate', onChange);
        return function () {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(window, 'popstate', onChange);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(window, 'pushstate', onChange);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(window, 'replacestate', onChange);
        };
    }, []);
    return value;
};
var useSearchParamServer = function () { return null; };
/* harmony default export */ __webpack_exports__["default"] = (_misc_util__WEBPACK_IMPORTED_MODULE_1__["isBrowser"] ? useSearchParam : useSearchParamServer);


/***/ }),

/***/ "../node_modules/react-use/esm/useSessionStorage.js":
/*!**********************************************************!*\
  !*** ../node_modules/react-use/esm/useSessionStorage.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var useSessionStorage = function (key, initialValue, raw) {
    if (!_misc_util__WEBPACK_IMPORTED_MODULE_1__["isBrowser"]) {
        return [initialValue, function () { }];
    }
    // eslint-disable-next-line react-hooks/rules-of-hooks
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(function () {
        try {
            var sessionStorageValue = sessionStorage.getItem(key);
            if (typeof sessionStorageValue !== 'string') {
                sessionStorage.setItem(key, raw ? String(initialValue) : JSON.stringify(initialValue));
                return initialValue;
            }
            else {
                return raw ? sessionStorageValue : JSON.parse(sessionStorageValue || 'null');
            }
        }
        catch (_a) {
            // If user is in private mode or has storage restriction
            // sessionStorage can throw. JSON.parse and JSON.stringify
            // cat throw, too.
            return initialValue;
        }
    }), state = _a[0], setState = _a[1];
    // eslint-disable-next-line react-hooks/rules-of-hooks
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        try {
            var serializedState = raw ? String(state) : JSON.stringify(state);
            sessionStorage.setItem(key, serializedState);
        }
        catch (_a) {
            // If user is in private mode or has storage restriction
            // sessionStorage can throw. Also JSON.stringify can throw.
        }
    });
    return [state, setState];
};
/* harmony default export */ __webpack_exports__["default"] = (useSessionStorage);


/***/ }),

/***/ "../node_modules/react-use/esm/useSet.js":
/*!***********************************************!*\
  !*** ../node_modules/react-use/esm/useSet.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var useSet = function (initialSet) {
    if (initialSet === void 0) { initialSet = new Set(); }
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(initialSet), set = _a[0], setSet = _a[1];
    var stableActions = Object(react__WEBPACK_IMPORTED_MODULE_1__["useMemo"])(function () {
        var add = function (item) { return setSet(function (prevSet) { return new Set(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__spreadArrays"])(Array.from(prevSet), [item])); }); };
        var remove = function (item) {
            return setSet(function (prevSet) { return new Set(Array.from(prevSet).filter(function (i) { return i !== item; })); });
        };
        var toggle = function (item) {
            return setSet(function (prevSet) {
                return prevSet.has(item)
                    ? new Set(Array.from(prevSet).filter(function (i) { return i !== item; }))
                    : new Set(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__spreadArrays"])(Array.from(prevSet), [item]));
            });
        };
        return { add: add, remove: remove, toggle: toggle, reset: function () { return setSet(initialSet); } };
    }, [setSet]);
    var utils = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ has: Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])(function (item) { return set.has(item); }, [set]) }, stableActions);
    return [set, utils];
};
/* harmony default export */ __webpack_exports__["default"] = (useSet);


/***/ }),

/***/ "../node_modules/react-use/esm/useSetState.js":
/*!****************************************************!*\
  !*** ../node_modules/react-use/esm/useSetState.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var useSetState = function (initialState) {
    if (initialState === void 0) { initialState = {}; }
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(initialState), state = _a[0], set = _a[1];
    var setState = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function (patch) {
        set(function (prevState) {
            return Object.assign({}, prevState, patch instanceof Function ? patch(prevState) : patch);
        });
    }, []);
    return [state, setState];
};
/* harmony default export */ __webpack_exports__["default"] = (useSetState);


/***/ }),

/***/ "../node_modules/react-use/esm/useShallowCompareEffect.js":
/*!****************************************************************!*\
  !*** ../node_modules/react-use/esm/useShallowCompareEffect.js ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var fast_shallow_equal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fast-shallow-equal */ "../node_modules/fast-shallow-equal/index.js");
/* harmony import */ var fast_shallow_equal__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fast_shallow_equal__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useCustomCompareEffect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useCustomCompareEffect */ "../node_modules/react-use/esm/useCustomCompareEffect.js");


var isPrimitive = function (val) { return val !== Object(val); };
var shallowEqualDepsList = function (prevDeps, nextDeps) {
    return prevDeps.every(function (dep, index) { return Object(fast_shallow_equal__WEBPACK_IMPORTED_MODULE_0__["equal"])(dep, nextDeps[index]); });
};
var useShallowCompareEffect = function (effect, deps) {
    if (true) {
        if (!(deps instanceof Array) || !deps.length) {
            console.warn('`useShallowCompareEffect` should not be used with no dependencies. Use React.useEffect instead.');
        }
        if (deps.every(isPrimitive)) {
            console.warn('`useShallowCompareEffect` should not be used with dependencies that are all primitive values. Use React.useEffect instead.');
        }
    }
    Object(_useCustomCompareEffect__WEBPACK_IMPORTED_MODULE_1__["default"])(effect, deps, shallowEqualDepsList);
};
/* harmony default export */ __webpack_exports__["default"] = (useShallowCompareEffect);


/***/ }),

/***/ "../node_modules/react-use/esm/useSize.js":
/*!************************************************!*\
  !*** ../node_modules/react-use/esm/useSize.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");



var useState = react__WEBPACK_IMPORTED_MODULE_1__["useState"], useEffect = react__WEBPACK_IMPORTED_MODULE_1__["useEffect"], useRef = react__WEBPACK_IMPORTED_MODULE_1__["useRef"];
var DRAF = function (callback) { return setTimeout(callback, 35); };
var useSize = function (element, _a) {
    var _b = _a === void 0 ? {} : _a, _c = _b.width, width = _c === void 0 ? Infinity : _c, _d = _b.height, height = _d === void 0 ? Infinity : _d;
    if (!_misc_util__WEBPACK_IMPORTED_MODULE_2__["isBrowser"]) {
        return [
            typeof element === 'function' ? element({ width: width, height: height }) : element,
            { width: width, height: height },
        ];
    }
    // eslint-disable-next-line react-hooks/rules-of-hooks
    var _e = useState({ width: width, height: height }), state = _e[0], setState = _e[1];
    if (typeof element === 'function') {
        element = element(state);
    }
    var style = element.props.style || {};
    // eslint-disable-next-line react-hooks/rules-of-hooks
    var ref = useRef(null);
    var window = null;
    var setSize = function () {
        var iframe = ref.current;
        var size = iframe
            ? {
                width: iframe.offsetWidth,
                height: iframe.offsetHeight,
            }
            : { width: width, height: height };
        setState(size);
    };
    var onWindow = function (windowToListenOn) {
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["on"])(windowToListenOn, 'resize', setSize);
        DRAF(setSize);
    };
    // eslint-disable-next-line react-hooks/rules-of-hooks
    useEffect(function () {
        var iframe = ref.current;
        if (!iframe) {
            // iframe will be undefined if component is already unmounted
            return;
        }
        if (iframe.contentWindow) {
            window = iframe.contentWindow;
            onWindow(window);
        }
        else {
            var onLoad_1 = function () {
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["on"])(iframe, 'load', onLoad_1);
                window = iframe.contentWindow;
                onWindow(window);
            };
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["off"])(iframe, 'load', onLoad_1);
        }
        return function () {
            if (window && window.removeEventListener) {
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["off"])(window, 'resize', setSize);
            }
        };
    }, []);
    style.position = 'relative';
    var sized = react__WEBPACK_IMPORTED_MODULE_1__["cloneElement"].apply(react__WEBPACK_IMPORTED_MODULE_1__, Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__spreadArrays"])([element, { style: style }], Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__spreadArrays"])([
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]('iframe', {
            ref: ref,
            style: {
                background: 'transparent',
                border: 'none',
                height: '100%',
                left: 0,
                position: 'absolute',
                top: 0,
                width: '100%',
                zIndex: -1,
            },
        })
    ], react__WEBPACK_IMPORTED_MODULE_1__["Children"].toArray(element.props.children))));
    return [sized, state];
};
/* harmony default export */ __webpack_exports__["default"] = (useSize);


/***/ }),

/***/ "../node_modules/react-use/esm/useSlider.js":
/*!**************************************************!*\
  !*** ../node_modules/react-use/esm/useSlider.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");
/* harmony import */ var _useMountedState__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useMountedState */ "../node_modules/react-use/esm/useMountedState.js");
/* harmony import */ var _useSetState__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useSetState */ "../node_modules/react-use/esm/useSetState.js");




var useSlider = function (ref, options) {
    if (options === void 0) { options = {}; }
    var isMounted = Object(_useMountedState__WEBPACK_IMPORTED_MODULE_2__["default"])();
    var isSliding = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(false);
    var valueRef = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(0);
    var frame = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(0);
    var _a = Object(_useSetState__WEBPACK_IMPORTED_MODULE_3__["default"])({
        isSliding: false,
        value: 0,
    }), state = _a[0], setState = _a[1];
    valueRef.current = state.value;
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (_misc_util__WEBPACK_IMPORTED_MODULE_1__["isBrowser"]) {
            var styles = options.styles === undefined ? true : options.styles;
            var reverse_1 = options.reverse === undefined ? false : options.reverse;
            if (ref.current && styles) {
                ref.current.style.userSelect = 'none';
            }
            var startScrubbing_1 = function () {
                if (!isSliding.current && isMounted()) {
                    (options.onScrubStart || _misc_util__WEBPACK_IMPORTED_MODULE_1__["noop"])();
                    isSliding.current = true;
                    setState({ isSliding: true });
                    bindEvents_1();
                }
            };
            var stopScrubbing_1 = function () {
                if (isSliding.current && isMounted()) {
                    (options.onScrubStop || _misc_util__WEBPACK_IMPORTED_MODULE_1__["noop"])(valueRef.current);
                    isSliding.current = false;
                    setState({ isSliding: false });
                    unbindEvents_1();
                }
            };
            var onMouseDown_1 = function (event) {
                startScrubbing_1();
                onMouseMove_1(event);
            };
            var onMouseMove_1 = options.vertical
                ? function (event) { return onScrub_1(event.clientY); }
                : function (event) { return onScrub_1(event.clientX); };
            var onTouchStart_1 = function (event) {
                startScrubbing_1();
                onTouchMove_1(event);
            };
            var onTouchMove_1 = options.vertical
                ? function (event) { return onScrub_1(event.changedTouches[0].clientY); }
                : function (event) { return onScrub_1(event.changedTouches[0].clientX); };
            var bindEvents_1 = function () {
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(document, 'mousemove', onMouseMove_1);
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(document, 'mouseup', stopScrubbing_1);
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(document, 'touchmove', onTouchMove_1);
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(document, 'touchend', stopScrubbing_1);
            };
            var unbindEvents_1 = function () {
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(document, 'mousemove', onMouseMove_1);
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(document, 'mouseup', stopScrubbing_1);
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(document, 'touchmove', onTouchMove_1);
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(document, 'touchend', stopScrubbing_1);
            };
            var onScrub_1 = function (clientXY) {
                cancelAnimationFrame(frame.current);
                frame.current = requestAnimationFrame(function () {
                    if (isMounted() && ref.current) {
                        var rect = ref.current.getBoundingClientRect();
                        var pos = options.vertical ? rect.top : rect.left;
                        var length_1 = options.vertical ? rect.height : rect.width;
                        // Prevent returning 0 when element is hidden by CSS
                        if (!length_1) {
                            return;
                        }
                        var value = (clientXY - pos) / length_1;
                        if (value > 1) {
                            value = 1;
                        }
                        else if (value < 0) {
                            value = 0;
                        }
                        if (reverse_1) {
                            value = 1 - value;
                        }
                        setState({
                            value: value,
                        });
                        (options.onScrub || _misc_util__WEBPACK_IMPORTED_MODULE_1__["noop"])(value);
                    }
                });
            };
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(ref.current, 'mousedown', onMouseDown_1);
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(ref.current, 'touchstart', onTouchStart_1);
            return function () {
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(ref.current, 'mousedown', onMouseDown_1);
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(ref.current, 'touchstart', onTouchStart_1);
            };
        }
        else {
            return undefined;
        }
    }, [ref, options.vertical]);
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (useSlider);


/***/ }),

/***/ "../node_modules/react-use/esm/useSpeech.js":
/*!**************************************************!*\
  !*** ../node_modules/react-use/esm/useSpeech.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var Status;
(function (Status) {
    Status[Status["init"] = 0] = "init";
    Status[Status["play"] = 1] = "play";
    Status[Status["pause"] = 2] = "pause";
    Status[Status["end"] = 3] = "end";
})(Status || (Status = {}));
var useSpeech = function (text, options) {
    var mounted = Object(react__WEBPACK_IMPORTED_MODULE_1__["useRef"])(false);
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(function () {
        var _a = options.voice || {}, _b = _a.lang, lang = _b === void 0 ? 'default' : _b, _c = _a.name, name = _c === void 0 ? '' : _c;
        return {
            isPlaying: false,
            status: Status[Status.init],
            lang: options.lang || 'default',
            voiceInfo: { lang: lang, name: name },
            rate: options.rate || 1,
            pitch: options.pitch || 1,
            volume: options.volume || 1,
        };
    }), state = _a[0], setState = _a[1];
    var handlePlay = Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])(function () {
        if (!mounted.current) {
            return;
        }
        setState(function (preState) {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, preState), { isPlaying: true, status: Status[Status.play] });
        });
    }, []);
    var handlePause = Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])(function () {
        if (!mounted.current) {
            return;
        }
        setState(function (preState) {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, preState), { isPlaying: false, status: Status[Status.pause] });
        });
    }, []);
    var handleEnd = Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])(function () {
        if (!mounted.current) {
            return;
        }
        setState(function (preState) {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, preState), { isPlaying: false, status: Status[Status.end] });
        });
    }, []);
    Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () {
        mounted.current = true;
        var utterance = new SpeechSynthesisUtterance(text);
        options.lang && (utterance.lang = options.lang);
        options.voice && (utterance.voice = options.voice);
        utterance.rate = options.rate || 1;
        utterance.pitch = options.pitch || 1;
        utterance.volume = options.volume || 1;
        utterance.onstart = handlePlay;
        utterance.onpause = handlePause;
        utterance.onresume = handlePlay;
        utterance.onend = handleEnd;
        window.speechSynthesis.speak(utterance);
        return function () {
            mounted.current = false;
        };
    }, []);
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (useSpeech);


/***/ }),

/***/ "../node_modules/react-use/esm/useStartTyping.js":
/*!*******************************************************!*\
  !*** ../node_modules/react-use/esm/useStartTyping.js ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./useIsomorphicLayoutEffect */ "../node_modules/react-use/esm/useIsomorphicLayoutEffect.js");
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var isFocusedElementEditable = function () {
    var activeElement = document.activeElement, body = document.body;
    if (!activeElement) {
        return false;
    }
    // If not element has focus, we assume it is not editable, too.
    if (activeElement === body) {
        return false;
    }
    // Assume <input> and <textarea> elements are editable.
    switch (activeElement.tagName) {
        case 'INPUT':
        case 'TEXTAREA':
            return true;
    }
    // Check if any other focused element id editable.
    return activeElement.hasAttribute('contenteditable');
};
var isTypedCharGood = function (_a) {
    var keyCode = _a.keyCode, metaKey = _a.metaKey, ctrlKey = _a.ctrlKey, altKey = _a.altKey;
    if (metaKey || ctrlKey || altKey) {
        return false;
    }
    // 0...9
    if (keyCode >= 48 && keyCode <= 57) {
        return true;
    }
    // a...z
    if (keyCode >= 65 && keyCode <= 90) {
        return true;
    }
    // All other keys.
    return false;
};
var useStartTyping = function (onStartTyping) {
    Object(_useIsomorphicLayoutEffect__WEBPACK_IMPORTED_MODULE_0__["default"])(function () {
        var keydown = function (event) {
            !isFocusedElementEditable() && isTypedCharGood(event) && onStartTyping(event);
        };
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(document, 'keydown', keydown);
        return function () {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(document, 'keydown', keydown);
        };
    }, []);
};
/* harmony default export */ __webpack_exports__["default"] = (useStartTyping);


/***/ }),

/***/ "../node_modules/react-use/esm/useStateList.js":
/*!*****************************************************!*\
  !*** ../node_modules/react-use/esm/useStateList.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useStateList; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _useMountedState__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useMountedState */ "../node_modules/react-use/esm/useMountedState.js");
/* harmony import */ var _useUpdate__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useUpdate */ "../node_modules/react-use/esm/useUpdate.js");
/* harmony import */ var _useUpdateEffect__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useUpdateEffect */ "../node_modules/react-use/esm/useUpdateEffect.js");





function useStateList(stateSet) {
    if (stateSet === void 0) { stateSet = []; }
    var isMounted = Object(_useMountedState__WEBPACK_IMPORTED_MODULE_2__["default"])();
    var update = Object(_useUpdate__WEBPACK_IMPORTED_MODULE_3__["default"])();
    var index = Object(react__WEBPACK_IMPORTED_MODULE_1__["useRef"])(0);
    // If new state list is shorter that before - switch to the last element
    Object(_useUpdateEffect__WEBPACK_IMPORTED_MODULE_4__["default"])(function () {
        if (stateSet.length <= index.current) {
            index.current = stateSet.length - 1;
            update();
        }
    }, [stateSet.length]);
    var actions = Object(react__WEBPACK_IMPORTED_MODULE_1__["useMemo"])(function () { return ({
        next: function () { return actions.setStateAt(index.current + 1); },
        prev: function () { return actions.setStateAt(index.current - 1); },
        setStateAt: function (newIndex) {
            // do nothing on unmounted component
            if (!isMounted())
                return;
            // do nothing on empty states list
            if (!stateSet.length)
                return;
            // in case new index is equal current - do nothing
            if (newIndex === index.current)
                return;
            // it gives the ability to travel through the left and right borders.
            // 4ex: if list contains 5 elements, attempt to set index 9 will bring use to 5th element
            // in case of negative index it will start counting from the right, so -17 will bring us to 4th element
            index.current =
                newIndex >= 0
                    ? newIndex % stateSet.length
                    : stateSet.length + (newIndex % stateSet.length);
            update();
        },
        setState: function (state) {
            // do nothing on unmounted component
            if (!isMounted())
                return;
            var newIndex = stateSet.length ? stateSet.indexOf(state) : -1;
            if (newIndex === -1) {
                throw new Error("State '" + state + "' is not a valid state (does not exist in state list)");
            }
            index.current = newIndex;
            update();
        },
    }); }, [stateSet]);
    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({ state: stateSet[index.current], currentIndex: index.current }, actions);
}


/***/ }),

/***/ "../node_modules/react-use/esm/useStateValidator.js":
/*!**********************************************************!*\
  !*** ../node_modules/react-use/esm/useStateValidator.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useStateValidator; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

function useStateValidator(state, validator, initialState) {
    if (initialState === void 0) { initialState = [undefined]; }
    var validatorInner = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(validator);
    var stateInner = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(state);
    validatorInner.current = validator;
    stateInner.current = state;
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(initialState), validity = _a[0], setValidity = _a[1];
    var validate = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function () {
        if (validatorInner.current.length >= 2) {
            validatorInner.current(stateInner.current, setValidity);
        }
        else {
            setValidity(validatorInner.current(stateInner.current));
        }
    }, [setValidity]);
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        validate();
    }, [state]);
    return [validity, validate];
}


/***/ }),

/***/ "../node_modules/react-use/esm/useStateWithHistory.js":
/*!************************************************************!*\
  !*** ../node_modules/react-use/esm/useStateWithHistory.js ***!
  \************************************************************/
/*! exports provided: useStateWithHistory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useStateWithHistory", function() { return useStateWithHistory; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useFirstMountState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useFirstMountState */ "../node_modules/react-use/esm/useFirstMountState.js");
/* harmony import */ var _misc_hookState__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc/hookState */ "../node_modules/react-use/esm/misc/hookState.js");



function useStateWithHistory(initialState, capacity, initialHistory) {
    if (capacity === void 0) { capacity = 10; }
    if (capacity < 1) {
        throw new Error("Capacity has to be greater than 1, got '" + capacity + "'");
    }
    var isFirstMount = Object(_useFirstMountState__WEBPACK_IMPORTED_MODULE_1__["useFirstMountState"])();
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(initialState), state = _a[0], innerSetState = _a[1];
    var history = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])((initialHistory !== null && initialHistory !== void 0 ? initialHistory : []));
    var historyPosition = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(0);
    // do the states manipulation only on first mount, no sense to load re-renders with useless calculations
    if (isFirstMount) {
        if (history.current.length) {
            // if last element of history !== initial - push initial to history
            if (history.current[history.current.length - 1] !== initialState) {
                history.current.push(initialState);
            }
            // if initial history bigger that capacity - crop the first elements out
            if (history.current.length > capacity) {
                history.current = history.current.slice(history.current.length - capacity);
            }
        }
        else {
            // initiate the history with initial state
            history.current.push(initialState);
        }
        historyPosition.current = history.current.length && history.current.length - 1;
    }
    var setState = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function (newState) {
        innerSetState(function (currentState) {
            newState = Object(_misc_hookState__WEBPACK_IMPORTED_MODULE_2__["resolveHookState"])(newState, currentState);
            // is state has changed
            if (newState !== currentState) {
                // if current position is not the last - pop element to the right
                if (historyPosition.current < history.current.length - 1) {
                    history.current = history.current.slice(0, historyPosition.current + 1);
                }
                historyPosition.current = history.current.push(newState) - 1;
                // if capacity is reached - shift first elements
                if (history.current.length > capacity) {
                    history.current = history.current.slice(history.current.length - capacity);
                }
            }
            return newState;
        });
    }, [state, capacity]);
    var historyState = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () { return ({
        history: history.current,
        position: historyPosition.current,
        capacity: capacity,
        back: function (amount) {
            if (amount === void 0) { amount = 1; }
            // don't do anything if we already at the left border
            if (!historyPosition.current) {
                return;
            }
            innerSetState(function () {
                historyPosition.current -= Math.min(amount, historyPosition.current);
                return history.current[historyPosition.current];
            });
        },
        forward: function (amount) {
            if (amount === void 0) { amount = 1; }
            // don't do anything if we already at the right border
            if (historyPosition.current === history.current.length - 1) {
                return;
            }
            innerSetState(function () {
                historyPosition.current = Math.min(historyPosition.current + amount, history.current.length - 1);
                return history.current[historyPosition.current];
            });
        },
        go: function (position) {
            if (position === historyPosition.current) {
                return;
            }
            innerSetState(function () {
                historyPosition.current =
                    position < 0
                        ? Math.max(history.current.length + position, 0)
                        : Math.min(history.current.length - 1, position);
                return history.current[historyPosition.current];
            });
        },
    }); }, [state]);
    return [state, setState, historyState];
}


/***/ }),

/***/ "../node_modules/react-use/esm/useThrottle.js":
/*!****************************************************!*\
  !*** ../node_modules/react-use/esm/useThrottle.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useUnmount__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useUnmount */ "../node_modules/react-use/esm/useUnmount.js");


var useThrottle = function (value, ms) {
    if (ms === void 0) { ms = 200; }
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(value), state = _a[0], setState = _a[1];
    var timeout = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])();
    var nextValue = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(null);
    var hasNextValue = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(0);
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (!timeout.current) {
            setState(value);
            var timeoutCallback_1 = function () {
                if (hasNextValue.current) {
                    hasNextValue.current = false;
                    setState(nextValue.current);
                    timeout.current = setTimeout(timeoutCallback_1, ms);
                }
                else {
                    timeout.current = undefined;
                }
            };
            timeout.current = setTimeout(timeoutCallback_1, ms);
        }
        else {
            nextValue.current = value;
            hasNextValue.current = true;
        }
    }, [value]);
    Object(_useUnmount__WEBPACK_IMPORTED_MODULE_1__["default"])(function () {
        timeout.current && clearTimeout(timeout.current);
    });
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (useThrottle);


/***/ }),

/***/ "../node_modules/react-use/esm/useThrottleFn.js":
/*!******************************************************!*\
  !*** ../node_modules/react-use/esm/useThrottleFn.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useUnmount__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useUnmount */ "../node_modules/react-use/esm/useUnmount.js");


var useThrottleFn = function (fn, ms, args) {
    if (ms === void 0) { ms = 200; }
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(null), state = _a[0], setState = _a[1];
    var timeout = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])();
    var nextArgs = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])();
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (!timeout.current) {
            setState(fn.apply(void 0, args));
            var timeoutCallback_1 = function () {
                if (nextArgs.current) {
                    setState(fn.apply(void 0, nextArgs.current));
                    nextArgs.current = undefined;
                    timeout.current = setTimeout(timeoutCallback_1, ms);
                }
                else {
                    timeout.current = undefined;
                }
            };
            timeout.current = setTimeout(timeoutCallback_1, ms);
        }
        else {
            nextArgs.current = args;
        }
    }, args);
    Object(_useUnmount__WEBPACK_IMPORTED_MODULE_1__["default"])(function () {
        timeout.current && clearTimeout(timeout.current);
    });
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (useThrottleFn);


/***/ }),

/***/ "../node_modules/react-use/esm/useTimeout.js":
/*!***************************************************!*\
  !*** ../node_modules/react-use/esm/useTimeout.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useTimeout; });
/* harmony import */ var _useTimeoutFn__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./useTimeoutFn */ "../node_modules/react-use/esm/useTimeoutFn.js");
/* harmony import */ var _useUpdate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useUpdate */ "../node_modules/react-use/esm/useUpdate.js");


function useTimeout(ms) {
    if (ms === void 0) { ms = 0; }
    var update = Object(_useUpdate__WEBPACK_IMPORTED_MODULE_1__["default"])();
    return Object(_useTimeoutFn__WEBPACK_IMPORTED_MODULE_0__["default"])(update, ms);
}


/***/ }),

/***/ "../node_modules/react-use/esm/useTimeoutFn.js":
/*!*****************************************************!*\
  !*** ../node_modules/react-use/esm/useTimeoutFn.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useTimeoutFn; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

function useTimeoutFn(fn, ms) {
    if (ms === void 0) { ms = 0; }
    var ready = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(false);
    var timeout = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])();
    var callback = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(fn);
    var isReady = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function () { return ready.current; }, []);
    var set = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function () {
        ready.current = false;
        timeout.current && clearTimeout(timeout.current);
        timeout.current = setTimeout(function () {
            ready.current = true;
            callback.current();
        }, ms);
    }, [ms]);
    var clear = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function () {
        ready.current = null;
        timeout.current && clearTimeout(timeout.current);
    }, []);
    // update ref when function changes
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        callback.current = fn;
    }, [fn]);
    // set on mount, clear on unmount
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        set();
        return clear;
    }, [ms]);
    return [isReady, clear, set];
}


/***/ }),

/***/ "../node_modules/react-use/esm/useTitle.js":
/*!*************************************************!*\
  !*** ../node_modules/react-use/esm/useTitle.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var DEFAULT_USE_TITLE_OPTIONS = {
    restoreOnUnmount: false,
};
function useTitle(title, options) {
    if (options === void 0) { options = DEFAULT_USE_TITLE_OPTIONS; }
    var prevTitleRef = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(document.title);
    if (document.title !== title)
        document.title = title;
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (options && options.restoreOnUnmount) {
            return function () {
                document.title = prevTitleRef.current;
            };
        }
        else {
            return;
        }
    }, []);
}
/* harmony default export */ __webpack_exports__["default"] = (typeof document !== 'undefined' ? useTitle : function (_title) { });


/***/ }),

/***/ "../node_modules/react-use/esm/useToggle.js":
/*!**************************************************!*\
  !*** ../node_modules/react-use/esm/useToggle.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var toggleReducer = function (state, nextValue) {
    return typeof nextValue === 'boolean' ? nextValue : !state;
};
var useToggle = function (initialValue) {
    return Object(react__WEBPACK_IMPORTED_MODULE_0__["useReducer"])(toggleReducer, initialValue);
};
/* harmony default export */ __webpack_exports__["default"] = (useToggle);


/***/ }),

/***/ "../node_modules/react-use/esm/useTween.js":
/*!*************************************************!*\
  !*** ../node_modules/react-use/esm/useTween.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var ts_easing__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ts-easing */ "../node_modules/ts-easing/lib/index.js");
/* harmony import */ var ts_easing__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(ts_easing__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useRaf__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useRaf */ "../node_modules/react-use/esm/useRaf.js");


var useTween = function (easingName, ms, delay) {
    if (easingName === void 0) { easingName = 'inCirc'; }
    if (ms === void 0) { ms = 200; }
    if (delay === void 0) { delay = 0; }
    var fn = ts_easing__WEBPACK_IMPORTED_MODULE_0__["easing"][easingName];
    var t = Object(_useRaf__WEBPACK_IMPORTED_MODULE_1__["default"])(ms, delay);
    if (true) {
        if (typeof fn !== 'function') {
            console.error('useTween() expected "easingName" property to be a valid easing function name, like:' +
                '"' +
                Object.keys(ts_easing__WEBPACK_IMPORTED_MODULE_0__["easing"]).join('", "') +
                '".');
            console.trace();
            return 0;
        }
    }
    return fn(t);
};
/* harmony default export */ __webpack_exports__["default"] = (useTween);


/***/ }),

/***/ "../node_modules/react-use/esm/useUnmount.js":
/*!***************************************************!*\
  !*** ../node_modules/react-use/esm/useUnmount.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useEffectOnce__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useEffectOnce */ "../node_modules/react-use/esm/useEffectOnce.js");


var useUnmount = function (fn) {
    var fnRef = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(fn);
    // update the ref each render so if it change the newest callback will be invoked
    fnRef.current = fn;
    Object(_useEffectOnce__WEBPACK_IMPORTED_MODULE_1__["default"])(function () { return function () { return fnRef.current(); }; });
};
/* harmony default export */ __webpack_exports__["default"] = (useUnmount);


/***/ }),

/***/ "../node_modules/react-use/esm/useUnmountPromise.js":
/*!**********************************************************!*\
  !*** ../node_modules/react-use/esm/useUnmountPromise.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useEffectOnce__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useEffectOnce */ "../node_modules/react-use/esm/useEffectOnce.js");


var useUnmountPromise = function () {
    var refUnmounted = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(false);
    Object(_useEffectOnce__WEBPACK_IMPORTED_MODULE_1__["default"])(function () { return function () {
        refUnmounted.current = true;
    }; });
    var wrapper = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () {
        var race = function (promise, onError) {
            var newPromise = new Promise(function (resolve, reject) {
                promise.then(function (result) {
                    if (!refUnmounted.current)
                        resolve(result);
                }, function (error) {
                    if (!refUnmounted.current)
                        reject(error);
                    else if (onError)
                        onError(error);
                    else
                        console.error('useUnmountPromise', error);
                });
            });
            return newPromise;
        };
        return race;
    }, []);
    return wrapper;
};
/* harmony default export */ __webpack_exports__["default"] = (useUnmountPromise);


/***/ }),

/***/ "../node_modules/react-use/esm/useUpdate.js":
/*!**************************************************!*\
  !*** ../node_modules/react-use/esm/useUpdate.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useUpdate; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var updateReducer = function (num) { return (num + 1) % 1000000; };
function useUpdate() {
    var _a = Object(react__WEBPACK_IMPORTED_MODULE_0__["useReducer"])(updateReducer, 0), update = _a[1];
    return update;
}


/***/ }),

/***/ "../node_modules/react-use/esm/useUpdateEffect.js":
/*!********************************************************!*\
  !*** ../node_modules/react-use/esm/useUpdateEffect.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useFirstMountState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useFirstMountState */ "../node_modules/react-use/esm/useFirstMountState.js");


var useUpdateEffect = function (effect, deps) {
    var isFirstMount = Object(_useFirstMountState__WEBPACK_IMPORTED_MODULE_1__["useFirstMountState"])();
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (!isFirstMount) {
            return effect();
        }
    }, deps);
};
/* harmony default export */ __webpack_exports__["default"] = (useUpdateEffect);


/***/ }),

/***/ "../node_modules/react-use/esm/useUpsert.js":
/*!**************************************************!*\
  !*** ../node_modules/react-use/esm/useUpsert.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return useUpsert; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
/* harmony import */ var _useList__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useList */ "../node_modules/react-use/esm/useList.js");


/**
 * @deprecated Use `useList` hook's upsert action instead
 */
function useUpsert(predicate, initialList) {
    if (initialList === void 0) { initialList = []; }
    var _a = Object(_useList__WEBPACK_IMPORTED_MODULE_1__["default"])(initialList), list = _a[0], listActions = _a[1];
    return [
        list,
        Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, listActions), { upsert: function (newItem) {
                listActions.upsert(predicate, newItem);
            } }),
    ];
}


/***/ }),

/***/ "../node_modules/react-use/esm/useVibrate.js":
/*!***************************************************!*\
  !*** ../node_modules/react-use/esm/useVibrate.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");


var isVibrationApiSupported = _misc_util__WEBPACK_IMPORTED_MODULE_1__["isNavigator"] && 'vibrate' in navigator;
function useVibrate(enabled, pattern, loop) {
    if (enabled === void 0) { enabled = true; }
    if (pattern === void 0) { pattern = [1000, 1000]; }
    if (loop === void 0) { loop = true; }
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var interval;
        if (enabled) {
            navigator.vibrate(pattern);
            if (loop) {
                var duration = pattern instanceof Array ? pattern.reduce(function (a, b) { return a + b; }) : pattern;
                interval = setInterval(function () {
                    navigator.vibrate(pattern);
                }, duration);
            }
        }
        return function () {
            if (enabled) {
                navigator.vibrate(0);
                if (loop) {
                    clearInterval(interval);
                }
            }
        };
    }, [enabled]);
}
/* harmony default export */ __webpack_exports__["default"] = (isVibrationApiSupported ? useVibrate : _misc_util__WEBPACK_IMPORTED_MODULE_1__["noop"]);


/***/ }),

/***/ "../node_modules/react-use/esm/useVideo.js":
/*!*************************************************!*\
  !*** ../node_modules/react-use/esm/useVideo.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _factory_createHTMLMediaHook__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./factory/createHTMLMediaHook */ "../node_modules/react-use/esm/factory/createHTMLMediaHook.js");

var useVideo = Object(_factory_createHTMLMediaHook__WEBPACK_IMPORTED_MODULE_0__["default"])('video');
/* harmony default export */ __webpack_exports__["default"] = (useVideo);


/***/ }),

/***/ "../node_modules/react-use/esm/useWindowScroll.js":
/*!********************************************************!*\
  !*** ../node_modules/react-use/esm/useWindowScroll.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");
/* harmony import */ var _useRafState__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useRafState */ "../node_modules/react-use/esm/useRafState.js");



var useWindowScroll = function () {
    var _a = Object(_useRafState__WEBPACK_IMPORTED_MODULE_2__["default"])(function () { return ({
        x: _misc_util__WEBPACK_IMPORTED_MODULE_1__["isBrowser"] ? window.pageXOffset : 0,
        y: _misc_util__WEBPACK_IMPORTED_MODULE_1__["isBrowser"] ? window.pageYOffset : 0,
    }); }), state = _a[0], setState = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var handler = function () {
            setState(function (state) {
                var pageXOffset = window.pageXOffset, pageYOffset = window.pageYOffset;
                //Check state for change, return same state if no change happened to prevent rerender
                //(see useState/setState documentation). useState/setState is used internally in useRafState/setState.
                return state.x !== pageXOffset || state.y !== pageYOffset
                    ? {
                        x: pageXOffset,
                        y: pageYOffset,
                    }
                    : state;
            });
        };
        //We have to update window scroll at mount, before subscription.
        //Window scroll may be changed between render and effect handler.
        handler();
        Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["on"])(window, 'scroll', handler, {
            capture: false,
            passive: true,
        });
        return function () {
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_1__["off"])(window, 'scroll', handler);
        };
    }, []);
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (useWindowScroll);


/***/ }),

/***/ "../node_modules/react-use/esm/useWindowSize.js":
/*!******************************************************!*\
  !*** ../node_modules/react-use/esm/useWindowSize.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _useRafState__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./useRafState */ "../node_modules/react-use/esm/useRafState.js");
/* harmony import */ var _misc_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc/util */ "../node_modules/react-use/esm/misc/util.js");



var useWindowSize = function (initialWidth, initialHeight) {
    if (initialWidth === void 0) { initialWidth = Infinity; }
    if (initialHeight === void 0) { initialHeight = Infinity; }
    var _a = Object(_useRafState__WEBPACK_IMPORTED_MODULE_1__["default"])({
        width: _misc_util__WEBPACK_IMPORTED_MODULE_2__["isBrowser"] ? window.innerWidth : initialWidth,
        height: _misc_util__WEBPACK_IMPORTED_MODULE_2__["isBrowser"] ? window.innerHeight : initialHeight,
    }), state = _a[0], setState = _a[1];
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (_misc_util__WEBPACK_IMPORTED_MODULE_2__["isBrowser"]) {
            var handler_1 = function () {
                setState({
                    width: window.innerWidth,
                    height: window.innerHeight,
                });
            };
            Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["on"])(window, 'resize', handler_1);
            return function () {
                Object(_misc_util__WEBPACK_IMPORTED_MODULE_2__["off"])(window, 'resize', handler_1);
            };
        }
    }, []);
    return state;
};
/* harmony default export */ __webpack_exports__["default"] = (useWindowSize);


/***/ }),

/***/ "../node_modules/screenfull/dist/screenfull.js":
/*!*****************************************************!*\
  !*** ../node_modules/screenfull/dist/screenfull.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/*!
* screenfull
* v5.1.0 - 2020-12-24
* (c) Sindre Sorhus; MIT License
*/
(function () {
	'use strict';

	var document = typeof window !== 'undefined' && typeof window.document !== 'undefined' ? window.document : {};
	var isCommonjs =  true && module.exports;

	var fn = (function () {
		var val;

		var fnMap = [
			[
				'requestFullscreen',
				'exitFullscreen',
				'fullscreenElement',
				'fullscreenEnabled',
				'fullscreenchange',
				'fullscreenerror'
			],
			// New WebKit
			[
				'webkitRequestFullscreen',
				'webkitExitFullscreen',
				'webkitFullscreenElement',
				'webkitFullscreenEnabled',
				'webkitfullscreenchange',
				'webkitfullscreenerror'

			],
			// Old WebKit
			[
				'webkitRequestFullScreen',
				'webkitCancelFullScreen',
				'webkitCurrentFullScreenElement',
				'webkitCancelFullScreen',
				'webkitfullscreenchange',
				'webkitfullscreenerror'

			],
			[
				'mozRequestFullScreen',
				'mozCancelFullScreen',
				'mozFullScreenElement',
				'mozFullScreenEnabled',
				'mozfullscreenchange',
				'mozfullscreenerror'
			],
			[
				'msRequestFullscreen',
				'msExitFullscreen',
				'msFullscreenElement',
				'msFullscreenEnabled',
				'MSFullscreenChange',
				'MSFullscreenError'
			]
		];

		var i = 0;
		var l = fnMap.length;
		var ret = {};

		for (; i < l; i++) {
			val = fnMap[i];
			if (val && val[1] in document) {
				for (i = 0; i < val.length; i++) {
					ret[fnMap[0][i]] = val[i];
				}
				return ret;
			}
		}

		return false;
	})();

	var eventNameMap = {
		change: fn.fullscreenchange,
		error: fn.fullscreenerror
	};

	var screenfull = {
		request: function (element, options) {
			return new Promise(function (resolve, reject) {
				var onFullScreenEntered = function () {
					this.off('change', onFullScreenEntered);
					resolve();
				}.bind(this);

				this.on('change', onFullScreenEntered);

				element = element || document.documentElement;

				var returnPromise = element[fn.requestFullscreen](options);

				if (returnPromise instanceof Promise) {
					returnPromise.then(onFullScreenEntered).catch(reject);
				}
			}.bind(this));
		},
		exit: function () {
			return new Promise(function (resolve, reject) {
				if (!this.isFullscreen) {
					resolve();
					return;
				}

				var onFullScreenExit = function () {
					this.off('change', onFullScreenExit);
					resolve();
				}.bind(this);

				this.on('change', onFullScreenExit);

				var returnPromise = document[fn.exitFullscreen]();

				if (returnPromise instanceof Promise) {
					returnPromise.then(onFullScreenExit).catch(reject);
				}
			}.bind(this));
		},
		toggle: function (element, options) {
			return this.isFullscreen ? this.exit() : this.request(element, options);
		},
		onchange: function (callback) {
			this.on('change', callback);
		},
		onerror: function (callback) {
			this.on('error', callback);
		},
		on: function (event, callback) {
			var eventName = eventNameMap[event];
			if (eventName) {
				document.addEventListener(eventName, callback, false);
			}
		},
		off: function (event, callback) {
			var eventName = eventNameMap[event];
			if (eventName) {
				document.removeEventListener(eventName, callback, false);
			}
		},
		raw: fn
	};

	if (!fn) {
		if (isCommonjs) {
			module.exports = {isEnabled: false};
		} else {
			window.screenfull = {isEnabled: false};
		}

		return;
	}

	Object.defineProperties(screenfull, {
		isFullscreen: {
			get: function () {
				return Boolean(document[fn.fullscreenElement]);
			}
		},
		element: {
			enumerable: true,
			get: function () {
				return document[fn.fullscreenElement];
			}
		},
		isEnabled: {
			enumerable: true,
			get: function () {
				// Coerce to boolean in case of old WebKit
				return Boolean(document[fn.fullscreenEnabled]);
			}
		}
	});

	if (isCommonjs) {
		module.exports = screenfull;
	} else {
		window.screenfull = screenfull;
	}
})();


/***/ }),

/***/ "../node_modules/set-harmonic-interval/lib/index.esm.js":
/*!**************************************************************!*\
  !*** ../node_modules/set-harmonic-interval/lib/index.esm.js ***!
  \**************************************************************/
/*! exports provided: clearHarmonicInterval, setHarmonicInterval */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clearHarmonicInterval", function() { return clearHarmonicInterval; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setHarmonicInterval", function() { return setHarmonicInterval; });
var counter = 0;
var buckets = {};
var setHarmonicInterval = function (fn, ms) {
    var _a;
    var id = counter++;
    if (buckets[ms]) {
        buckets[ms].listeners[id] = fn;
    }
    else {
        var timer = setInterval(function () {
            var listeners = buckets[ms].listeners;
            var didThrow = false;
            var lastError;
            for (var _i = 0, _a = Object.values(listeners); _i < _a.length; _i++) {
                var listener = _a[_i];
                try {
                    listener();
                }
                catch (error) {
                    didThrow = true;
                    lastError = error;
                }
            }
            if (didThrow)
                throw lastError;
        }, ms);
        buckets[ms] = {
            ms: ms,
            timer: timer,
            listeners: (_a = {},
                _a[id] = fn,
                _a),
        };
    }
    return {
        bucket: buckets[ms],
        id: id,
    };
};
var clearHarmonicInterval = function (_a) {
    var bucket = _a.bucket, id = _a.id;
    delete bucket.listeners[id];
    var hasListeners = false;
    for (var listener in bucket.listeners) {
        hasListeners = true;
        break;
    }
    if (!hasListeners) {
        clearInterval(bucket.timer);
        delete buckets[bucket.ms];
    }
};




/***/ }),

/***/ "../node_modules/throttle-debounce/esm/index.js":
/*!******************************************************!*\
  !*** ../node_modules/throttle-debounce/esm/index.js ***!
  \******************************************************/
/*! exports provided: debounce, throttle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "debounce", function() { return debounce; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "throttle", function() { return throttle; });
/* eslint-disable no-undefined,no-param-reassign,no-shadow */

/**
 * Throttle execution of a function. Especially useful for rate limiting
 * execution of handlers on events like resize and scroll.
 *
 * @param  {number}    delay -          A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.
 * @param  {boolean}   [noTrailing] -   Optional, defaults to false. If noTrailing is true, callback will only execute every `delay` milliseconds while the
 *                                    throttled-function is being called. If noTrailing is false or unspecified, callback will be executed one final time
 *                                    after the last throttled-function call. (After the throttled-function has not been called for `delay` milliseconds,
 *                                    the internal counter is reset).
 * @param  {Function}  callback -       A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,
 *                                    to `callback` when the throttled-function is executed.
 * @param  {boolean}   [debounceMode] - If `debounceMode` is true (at begin), schedule `clear` to execute after `delay` ms. If `debounceMode` is false (at end),
 *                                    schedule `callback` to execute after `delay` ms.
 *
 * @returns {Function}  A new, throttled, function.
 */
function throttle (delay, noTrailing, callback, debounceMode) {
  /*
   * After wrapper has stopped being called, this timeout ensures that
   * `callback` is executed at the proper times in `throttle` and `end`
   * debounce modes.
   */
  var timeoutID;
  var cancelled = false; // Keep track of the last time `callback` was executed.

  var lastExec = 0; // Function to clear existing timeout

  function clearExistingTimeout() {
    if (timeoutID) {
      clearTimeout(timeoutID);
    }
  } // Function to cancel next exec


  function cancel() {
    clearExistingTimeout();
    cancelled = true;
  } // `noTrailing` defaults to falsy.


  if (typeof noTrailing !== 'boolean') {
    debounceMode = callback;
    callback = noTrailing;
    noTrailing = undefined;
  }
  /*
   * The `wrapper` function encapsulates all of the throttling / debouncing
   * functionality and when executed will limit the rate at which `callback`
   * is executed.
   */


  function wrapper() {
    for (var _len = arguments.length, arguments_ = new Array(_len), _key = 0; _key < _len; _key++) {
      arguments_[_key] = arguments[_key];
    }

    var self = this;
    var elapsed = Date.now() - lastExec;

    if (cancelled) {
      return;
    } // Execute `callback` and update the `lastExec` timestamp.


    function exec() {
      lastExec = Date.now();
      callback.apply(self, arguments_);
    }
    /*
     * If `debounceMode` is true (at begin) this is used to clear the flag
     * to allow future `callback` executions.
     */


    function clear() {
      timeoutID = undefined;
    }

    if (debounceMode && !timeoutID) {
      /*
       * Since `wrapper` is being called for the first time and
       * `debounceMode` is true (at begin), execute `callback`.
       */
      exec();
    }

    clearExistingTimeout();

    if (debounceMode === undefined && elapsed > delay) {
      /*
       * In throttle mode, if `delay` time has been exceeded, execute
       * `callback`.
       */
      exec();
    } else if (noTrailing !== true) {
      /*
       * In trailing throttle mode, since `delay` time has not been
       * exceeded, schedule `callback` to execute `delay` ms after most
       * recent execution.
       *
       * If `debounceMode` is true (at begin), schedule `clear` to execute
       * after `delay` ms.
       *
       * If `debounceMode` is false (at end), schedule `callback` to
       * execute after `delay` ms.
       */
      timeoutID = setTimeout(debounceMode ? clear : exec, debounceMode === undefined ? delay - elapsed : delay);
    }
  }

  wrapper.cancel = cancel; // Return the wrapper function.

  return wrapper;
}

/* eslint-disable no-undefined */
/**
 * Debounce execution of a function. Debouncing, unlike throttling,
 * guarantees that a function is only executed a single time, either at the
 * very beginning of a series of calls, or at the very end.
 *
 * @param  {number}   delay -         A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.
 * @param  {boolean}  [atBegin] -     Optional, defaults to false. If atBegin is false or unspecified, callback will only be executed `delay` milliseconds
 *                                  after the last debounced-function call. If atBegin is true, callback will be executed only at the first debounced-function call.
 *                                  (After the throttled-function has not been called for `delay` milliseconds, the internal counter is reset).
 * @param  {Function} callback -      A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,
 *                                  to `callback` when the debounced-function is executed.
 *
 * @returns {Function} A new, debounced function.
 */

function debounce (delay, atBegin, callback) {
  return callback === undefined ? throttle(delay, atBegin, false) : throttle(delay, callback, atBegin !== false);
}


//# sourceMappingURL=index.js.map


/***/ }),

/***/ "../node_modules/toggle-selection/index.js":
/*!*************************************************!*\
  !*** ../node_modules/toggle-selection/index.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {


module.exports = function () {
  var selection = document.getSelection();
  if (!selection.rangeCount) {
    return function () {};
  }
  var active = document.activeElement;

  var ranges = [];
  for (var i = 0; i < selection.rangeCount; i++) {
    ranges.push(selection.getRangeAt(i));
  }

  switch (active.tagName.toUpperCase()) { // .toUpperCase handles XHTML
    case 'INPUT':
    case 'TEXTAREA':
      active.blur();
      break;

    default:
      active = null;
      break;
  }

  selection.removeAllRanges();
  return function () {
    selection.type === 'Caret' &&
    selection.removeAllRanges();

    if (!selection.rangeCount) {
      ranges.forEach(function(range) {
        selection.addRange(range);
      });
    }

    active &&
    active.focus();
  };
};


/***/ }),

/***/ "../node_modules/ts-easing/lib/index.js":
/*!**********************************************!*\
  !*** ../node_modules/ts-easing/lib/index.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.easing = {
    // No easing, no acceleration
    linear: function (t) { return t; },
    // Accelerates fast, then slows quickly towards end.
    quadratic: function (t) { return t * (-(t * t) * t + 4 * t * t - 6 * t + 4); },
    // Overshoots over 1 and then returns to 1 towards end.
    cubic: function (t) { return t * (4 * t * t - 9 * t + 6); },
    // Overshoots over 1 multiple times - wiggles around 1.
    elastic: function (t) { return t * (33 * t * t * t * t - 106 * t * t * t + 126 * t * t - 67 * t + 15); },
    // Accelerating from zero velocity
    inQuad: function (t) { return t * t; },
    // Decelerating to zero velocity
    outQuad: function (t) { return t * (2 - t); },
    // Acceleration until halfway, then deceleration
    inOutQuad: function (t) { return t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t; },
    // Accelerating from zero velocity
    inCubic: function (t) { return t * t * t; },
    // Decelerating to zero velocity
    outCubic: function (t) { return (--t) * t * t + 1; },
    // Acceleration until halfway, then deceleration
    inOutCubic: function (t) { return t < .5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1; },
    // Accelerating from zero velocity
    inQuart: function (t) { return t * t * t * t; },
    // Decelerating to zero velocity
    outQuart: function (t) { return 1 - (--t) * t * t * t; },
    // Acceleration until halfway, then deceleration
    inOutQuart: function (t) { return t < .5 ? 8 * t * t * t * t : 1 - 8 * (--t) * t * t * t; },
    // Accelerating from zero velocity
    inQuint: function (t) { return t * t * t * t * t; },
    // Decelerating to zero velocity
    outQuint: function (t) { return 1 + (--t) * t * t * t * t; },
    // Acceleration until halfway, then deceleration
    inOutQuint: function (t) { return t < .5 ? 16 * t * t * t * t * t : 1 + 16 * (--t) * t * t * t * t; },
    // Accelerating from zero velocity
    inSine: function (t) { return -Math.cos(t * (Math.PI / 2)) + 1; },
    // Decelerating to zero velocity
    outSine: function (t) { return Math.sin(t * (Math.PI / 2)); },
    // Accelerating until halfway, then decelerating
    inOutSine: function (t) { return -(Math.cos(Math.PI * t) - 1) / 2; },
    // Exponential accelerating from zero velocity
    inExpo: function (t) { return Math.pow(2, 10 * (t - 1)); },
    // Exponential decelerating to zero velocity
    outExpo: function (t) { return -Math.pow(2, -10 * t) + 1; },
    // Exponential accelerating until halfway, then decelerating
    inOutExpo: function (t) {
        t /= .5;
        if (t < 1)
            return Math.pow(2, 10 * (t - 1)) / 2;
        t--;
        return (-Math.pow(2, -10 * t) + 2) / 2;
    },
    // Circular accelerating from zero velocity
    inCirc: function (t) { return -Math.sqrt(1 - t * t) + 1; },
    // Circular decelerating to zero velocity Moves VERY fast at the beginning and
    // then quickly slows down in the middle. This tween can actually be used
    // in continuous transitions where target value changes all the time,
    // because of the very quick start, it hides the jitter between target value changes.
    outCirc: function (t) { return Math.sqrt(1 - (t = t - 1) * t); },
    // Circular acceleration until halfway, then deceleration
    inOutCirc: function (t) {
        t /= .5;
        if (t < 1)
            return -(Math.sqrt(1 - t * t) - 1) / 2;
        t -= 2;
        return (Math.sqrt(1 - t * t) + 1) / 2;
    }
};


/***/ }),

/***/ "../packages/editor/lib-es/core/Provider/CallbacksProvider.js":
/*!********************************************************************!*\
  !*** ../packages/editor/lib-es/core/Provider/CallbacksProvider.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utils_deepEquals__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/deepEquals */ "../packages/editor/lib-es/core/utils/deepEquals.js");
/* harmony import */ var _components_hooks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hooks */ "../packages/editor/lib-es/core/components/hooks/index.js");
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};



var CallbacksProvider = function (_a) {
    var children = _a.children, callbacks = __rest(_a, ["children"]);
    var lastCallbacks = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])();
    var isEqual = lastCallbacks.current
        ? Object(_utils_deepEquals__WEBPACK_IMPORTED_MODULE_1__["default"])(lastCallbacks.current, callbacks)
        : false;
    if (!isEqual) {
        lastCallbacks.current = callbacks;
    }
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_hooks__WEBPACK_IMPORTED_MODULE_2__["CallbacksContext"].Provider, { value: lastCallbacks.current }, children));
};
/* harmony default export */ __webpack_exports__["default"] = (CallbacksProvider);
//# sourceMappingURL=CallbacksProvider.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/Provider/DndProvider.js":
/*!**************************************************************!*\
  !*** ../packages/editor/lib-es/core/Provider/DndProvider.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_dnd__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dnd */ "../node_modules/react-dnd/dist/esm/index.js");
/* harmony import */ var _components_hooks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hooks */ "../packages/editor/lib-es/core/components/hooks/index.js");



var DndProvider = function (_a) {
    var children = _a.children;
    var dndBackend = Object(_components_hooks__WEBPACK_IMPORTED_MODULE_2__["useOption"])('dndBackend');
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_dnd__WEBPACK_IMPORTED_MODULE_1__["DndProvider"], { backend: dndBackend }, children);
};
/* harmony default export */ __webpack_exports__["default"] = (DndProvider);
//# sourceMappingURL=DndProvider.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/Provider/EditorStoreProvider.js":
/*!**********************************************************************!*\
  !*** ../packages/editor/lib-es/core/Provider/EditorStoreProvider.js ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _actions_value__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../actions/value */ "../packages/editor/lib-es/core/actions/value.js");
/* harmony import */ var _components_hooks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hooks */ "../packages/editor/lib-es/core/components/hooks/index.js");
/* harmony import */ var _EditorStore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../EditorStore */ "../packages/editor/lib-es/core/EditorStore.js");
/* harmony import */ var _migrations_migrate__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../migrations/migrate */ "../packages/editor/lib-es/core/migrations/migrate.js");
/* harmony import */ var _migrations_serialzeValue__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../migrations/serialzeValue */ "../packages/editor/lib-es/core/migrations/serialzeValue.js");
/* harmony import */ var _reducer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../reducer */ "../packages/editor/lib-es/core/reducer/index.js");
/* harmony import */ var _reduxConnect__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../reduxConnect */ "../packages/editor/lib-es/core/reduxConnect.js");
/* harmony import */ var _utils_deepEquals__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/deepEquals */ "../packages/editor/lib-es/core/utils/deepEquals.js");
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};
var __spreadArray = (undefined && undefined.__spreadArray) || function (to, from, pack) {
    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
        if (ar || !(i in from)) {
            if (!ar) ar = Array.prototype.slice.call(from, 0, i);
            ar[i] = from[i];
        }
    }
    return to.concat(ar || Array.prototype.slice.call(from));
};









var EditorStoreProvider = function (_a) {
    var children = _a.children, lang = _a.lang, value = _a.value;
    var cellPlugins = Object(_components_hooks__WEBPACK_IMPORTED_MODULE_2__["useRenderOption"])('cellPlugins');
    var middleware = Object(_components_hooks__WEBPACK_IMPORTED_MODULE_2__["useOption"])('middleware');
    var onChangeLang = Object(_components_hooks__WEBPACK_IMPORTED_MODULE_2__["useCallbackOption"])('onChangeLang');
    var onChange = Object(_components_hooks__WEBPACK_IMPORTED_MODULE_2__["useCallbackOption"])('onChange');
    var storeFromOptions = Object(_components_hooks__WEBPACK_IMPORTED_MODULE_2__["useOption"])('store');
    var editorStore = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () {
        var store = new _EditorStore__WEBPACK_IMPORTED_MODULE_3__["default"]({
            initialState: Object(_reducer__WEBPACK_IMPORTED_MODULE_6__["initialState"])(Object(_migrations_migrate__WEBPACK_IMPORTED_MODULE_4__["migrateValue"])(value, {
                cellPlugins: cellPlugins,
                lang: lang,
            }), lang),
            store: storeFromOptions,
            middleware: middleware,
        });
        return store;
    }, __spreadArray([storeFromOptions], __read(middleware), false));
    var lastValueRef = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])(value);
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var oldLang = lang;
        var handleChanges = function () {
            // notify outsiders to new language, when chagned in ui
            var newLang = editorStore.store.getState().reactPage.settings.lang;
            if (newLang !== oldLang || newLang !== lang) {
                oldLang = newLang;
                onChangeLang === null || onChangeLang === void 0 ? void 0 : onChangeLang(newLang);
            }
            if (!onChange) {
                return;
            }
            //console.time('calculate notifiy on change');
            var currentValue = editorStore.store.getState().reactPage.values.present;
            if (!currentValue) {
                // console.timeEnd('calculate notifiy on change');
                return;
            }
            var serializedValue = Object(_migrations_serialzeValue__WEBPACK_IMPORTED_MODULE_5__["serialzeValue"])(currentValue, cellPlugins);
            var serializedEqual = Object(_utils_deepEquals__WEBPACK_IMPORTED_MODULE_8__["default"])(lastValueRef.current, serializedValue);
            if (serializedEqual) {
                //    console.timeEnd('calculate notifiy on change');
                return;
            }
            lastValueRef.current = serializedValue;
            //   console.timeEnd('calculate notifiy on change');
            onChange(serializedValue);
        };
        var unsubscribe = editorStore.store.subscribe(handleChanges);
        return function () {
            unsubscribe();
        };
    }, [editorStore, onChange, cellPlugins]);
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        var equal = Object(_utils_deepEquals__WEBPACK_IMPORTED_MODULE_8__["default"])(value, lastValueRef.current);
        // value changed from outside
        if (!equal) {
            lastValueRef.current = value;
            var migratedValue = Object(_migrations_migrate__WEBPACK_IMPORTED_MODULE_4__["migrateValue"])(value, {
                cellPlugins: cellPlugins,
                lang: lang,
            });
            editorStore.store.dispatch(Object(_actions_value__WEBPACK_IMPORTED_MODULE_1__["updateValue"])(migratedValue));
        }
    }, [value, cellPlugins, lang]);
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        // if changed from outside
        editorStore.setLang(lang);
    }, [editorStore, lang]);
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_reduxConnect__WEBPACK_IMPORTED_MODULE_7__["ReduxProvider"], { store: editorStore.store },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_EditorStore__WEBPACK_IMPORTED_MODULE_3__["EditorContext"].Provider, { value: editorStore }, children)));
};
/* harmony default export */ __webpack_exports__["default"] = (EditorStoreProvider);
//# sourceMappingURL=EditorStoreProvider.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/Provider/OptionsProvider.js":
/*!******************************************************************!*\
  !*** ../packages/editor/lib-es/core/Provider/OptionsProvider.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utils_deepEquals__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/deepEquals */ "../packages/editor/lib-es/core/utils/deepEquals.js");
/* harmony import */ var _components_hooks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hooks */ "../packages/editor/lib-es/core/components/hooks/index.js");
/* harmony import */ var _defaultOptions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../defaultOptions */ "../packages/editor/lib-es/core/defaultOptions.js");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};




/*
we memoize the options, so that if you access them, you won't get a fresh object every time.
*/
var OptionsProvider = function (_a) {
    var children = _a.children, options = __rest(_a, ["children"]);
    var lastOptions = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])();
    var fullOptions = __assign(__assign({}, _defaultOptions__WEBPACK_IMPORTED_MODULE_3__["DEFAULT_OPTIONS"]), options);
    var isEqual = lastOptions.current
        ? Object(_utils_deepEquals__WEBPACK_IMPORTED_MODULE_1__["default"])(lastOptions.current, fullOptions)
        : false;
    if (!isEqual) {
        lastOptions.current = fullOptions;
    }
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_hooks__WEBPACK_IMPORTED_MODULE_2__["OptionsContext"].Provider, { value: lastOptions.current }, children));
};
/* harmony default export */ __webpack_exports__["default"] = (OptionsProvider);
//# sourceMappingURL=OptionsProvider.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/Provider/RenderOptionsProvider.js":
/*!************************************************************************!*\
  !*** ../packages/editor/lib-es/core/Provider/RenderOptionsProvider.js ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utils_deepEquals__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/deepEquals */ "../packages/editor/lib-es/core/utils/deepEquals.js");
/* harmony import */ var _components_hooks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/hooks */ "../packages/editor/lib-es/core/components/hooks/index.js");
/* harmony import */ var _defaultOptions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../defaultOptions */ "../packages/editor/lib-es/core/defaultOptions.js");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};




/*
we memoize the RenderOptions, so that if you access them, you won't get a fresh object every time.

*/
var RenderOptionsProvider = function (_a) {
    var children = _a.children, renderOptions = __rest(_a, ["children"]);
    var lastRenderOptions = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])();
    var fullRenderOptions = __assign(__assign({}, _defaultOptions__WEBPACK_IMPORTED_MODULE_3__["DEFAULT_RENDER_OPTIONS"]), renderOptions);
    var isEqual = lastRenderOptions.current
        ? Object(_utils_deepEquals__WEBPACK_IMPORTED_MODULE_1__["default"])(lastRenderOptions.current, fullRenderOptions)
        : false;
    if (!isEqual) {
        lastRenderOptions.current = fullRenderOptions;
    }
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_hooks__WEBPACK_IMPORTED_MODULE_2__["RenderOptionsContext"].Provider, { value: lastRenderOptions.current }, children));
};
/* harmony default export */ __webpack_exports__["default"] = (RenderOptionsProvider);
//# sourceMappingURL=RenderOptionsProvider.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/Provider/index.js":
/*!********************************************************!*\
  !*** ../packages/editor/lib-es/core/Provider/index.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _DndProvider__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DndProvider */ "../packages/editor/lib-es/core/Provider/DndProvider.js");
/* harmony import */ var _components_BlurGate__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/BlurGate */ "../packages/editor/lib-es/core/components/BlurGate.js");
/* harmony import */ var _CallbacksProvider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./CallbacksProvider */ "../packages/editor/lib-es/core/Provider/CallbacksProvider.js");
/* harmony import */ var _EditorStoreProvider__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./EditorStoreProvider */ "../packages/editor/lib-es/core/Provider/EditorStoreProvider.js");
/* harmony import */ var _OptionsProvider__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./OptionsProvider */ "../packages/editor/lib-es/core/Provider/OptionsProvider.js");
/* harmony import */ var _RenderOptionsProvider__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./RenderOptionsProvider */ "../packages/editor/lib-es/core/Provider/RenderOptionsProvider.js");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};







var Provider = function (_a) {
    var lang = _a.lang, value = _a.value, _b = _a.children, children = _b === void 0 ? [] : _b, renderOptions = _a.renderOptions, callbacks = _a.callbacks, options = _a.options;
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_OptionsProvider__WEBPACK_IMPORTED_MODULE_5__["default"], __assign({}, options),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_RenderOptionsProvider__WEBPACK_IMPORTED_MODULE_6__["default"], __assign({}, renderOptions),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_CallbacksProvider__WEBPACK_IMPORTED_MODULE_3__["default"], __assign({}, callbacks),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_DndProvider__WEBPACK_IMPORTED_MODULE_1__["default"], null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_EditorStoreProvider__WEBPACK_IMPORTED_MODULE_4__["default"], { lang: lang, value: value },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_BlurGate__WEBPACK_IMPORTED_MODULE_2__["default"], null, children)))))));
};
/* harmony default export */ __webpack_exports__["default"] = (Provider);
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/components/BlurGate.js":
/*!*************************************************************!*\
  !*** ../packages/editor/lib-es/core/components/BlurGate.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _actions_display__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../actions/display */ "../packages/editor/lib-es/core/actions/display.js");
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./hooks */ "../packages/editor/lib-es/core/components/hooks/index.js");



// this might break in future, but its better than nothing
// eslint-disable-next-line @typescript-eslint/no-explicit-any
function findReactElement(node) {
    for (var key in node) {
        if (key.startsWith('__reactInternalInstance$') ||
            key.startsWith('__reactFiber$') // react 17
        ) {
            return node[key];
        }
    }
    return null;
}
// we go up the reac-tree. This works even through portals, which would not be possible with traversing the dom tree!
var isInSameTree = function (parent, child) {
    if (!parent) {
        return false;
    }
    var element = findReactElement(child);
    while (element) {
        if (element.stateNode === parent) {
            return true;
        }
        element = element.return;
    }
    return false;
};
var useBlurAll = function (_a) {
    var _b = _a.defaultMode, defaultMode = _b === void 0 ? _actions_display__WEBPACK_IMPORTED_MODULE_1__["DISPLAY_MODE_EDIT"] : _b, disabled = _a.disabled;
    var ref = react__WEBPACK_IMPORTED_MODULE_0___default.a.useRef();
    var blurAllCells = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useBlurAllCells"])();
    var setMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useSetMode"])();
    var isInsertMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useIsInsertMode"])();
    Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {
        if (disabled) {
            return;
        }
        if (!ref.current) {
            return;
        }
        if (!document && !document.body) {
            return;
        }
        var onMouseDown = function (e) {
            if (!isInSameTree(ref.current, e.target)) {
                blurAllCells();
                // set us in default mode if current mode is "insert"
                if (isInsertMode) {
                    setMode(defaultMode);
                }
            }
        };
        document.body.addEventListener('mousedown', onMouseDown);
        return function () {
            document.body.removeEventListener('mousedown', onMouseDown);
        };
    }, [ref.current, disabled, isInsertMode, setMode, blurAllCells]);
    return ref;
};
var BlurGate = function (_a) {
    var children = _a.children;
    var defaultMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useOption"])('blurGateDefaultMode');
    var disabled = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useOption"])('blurGateDisabled');
    var ref = useBlurAll({ defaultMode: defaultMode, disabled: disabled });
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { ref: ref }, children);
};
/* harmony default export */ __webpack_exports__["default"] = (BlurGate);
//# sourceMappingURL=BlurGate.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/components/Cell/Draggable/index.js":
/*!*************************************************************************!*\
  !*** ../packages/editor/lib-es/core/components/Cell/Draggable/index.js ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! classnames */ "../packages/editor/node_modules/classnames/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../hooks */ "../packages/editor/lib-es/core/components/hooks/index.js");
/* harmony import */ var _useDragHandle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useDragHandle */ "../packages/editor/lib-es/core/components/Cell/Draggable/useDragHandle.js");
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};




var DefaultSmallHandle = function (_a) {
    var onClick = _a.onClick;
    return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "react-page-cell-draggable-overlay-handle", onClick: onClick },
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "react-page-cell-draggable-overlay-handle-icon" })));
};
var Draggable = function (_a) {
    var _b;
    var _c;
    var isLeaf = _a.isLeaf, children = _a.children, nodeId = _a.nodeId;
    var cell = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useCell"])(nodeId);
    var _d = __read(Object(_useDragHandle__WEBPACK_IMPORTED_MODULE_3__["useDragHandle"])(nodeId), 3), isDragging = _d[0], dragRef = _d[1], previewElement = _d[2];
    var focus = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useFocusCell"])(nodeId);
    var isLayoutMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useIsLayoutMode"])();
    var allowMoveInEditMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useOption"])('allowMoveInEditMode');
    var components = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useOption"])('components');
    var ResizeHandle = (_c = components === null || components === void 0 ? void 0 : components.EditModeResizeHandle) !== null && _c !== void 0 ? _c : DefaultSmallHandle;
    return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
        previewElement,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { ref: isLayoutMode ? dragRef : undefined, style: {
                height: '100%',
            }, className: classnames__WEBPACK_IMPORTED_MODULE_0___default()({
                'react-page-cell-draggable-in-edit': !isLayoutMode && allowMoveInEditMode,
                'react-page-cell-draggable': isLayoutMode,
                'react-page-cell-draggable-is-dragging': isDragging,
            }) },
            isLayoutMode ? (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { onClick: function (e) {
                    var mode = e.metaKey || e.ctrlKey ? 'add' : 'replace';
                    focus(false, mode);
                }, className: classnames__WEBPACK_IMPORTED_MODULE_0___default()((_b = {
                        'react-page-cell-draggable-overlay': isLayoutMode
                    },
                    _b["react-page-cell-draggable-inline-" + cell.inline] = cell.inline,
                    _b['react-page-cell-draggable-leaf'] = isLeaf,
                    _b)) })) : allowMoveInEditMode ? (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { ref: dragRef },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(ResizeHandle, { onClick: focus }))) : null,
            children)));
};
/* harmony default export */ __webpack_exports__["default"] = (Draggable);
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/components/Cell/Droppable/helper/dnd.js":
/*!******************************************************************************!*\
  !*** ../packages/editor/lib-es/core/components/Cell/Droppable/helper/dnd.js ***!
  \******************************************************************************/
/*! exports provided: onHover, onDrop */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "onHover", function() { return onHover; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "onDrop", function() { return onDrop; });
/* harmony import */ var lodash_throttle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash.throttle */ "../node_modules/lodash.throttle/index.js");
/* harmony import */ var lodash_throttle__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_throttle__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _helper_throttle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../helper/throttle */ "../packages/editor/lib-es/core/helper/throttle/index.js");
/* harmony import */ var _service_hover_input__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../service/hover/input */ "../packages/editor/lib-es/core/service/hover/input.js");
/* harmony import */ var _service_logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../service/logger */ "../packages/editor/lib-es/core/service/logger/index.js");




var last = { hoverId: '', dragId: '' };
var shouldClear = function (hoverId, dragId) {
    if (hoverId === last.hoverId && dragId === last.dragId) {
        return false;
    }
    last = { hoverId: hoverId, dragId: dragId };
    return true;
};
var onHover = lodash_throttle__WEBPACK_IMPORTED_MODULE_0___default()(function (target, monitor, element, actions, cellPlugins) {
    var drag = monitor.getItem();
    if (!drag || !target) {
        // item undefined, happens when throttle triggers after drop
        return;
    }
    if (drag.cell.id === target.id) {
        // If hovering over itself, do nothing
        if (shouldClear(target.id, drag.cell.id)) {
            actions.clear();
        }
        return;
    }
    else if (!monitor.isOver({ shallow: true })) {
        // If hovering over ancestor cell, do nothing (we are going to propagate later in the tree anyways)
        return;
    }
    else if (target.ancestorIds.includes(drag.cell.id)) {
        if (shouldClear(target.id, drag.cell.id)) {
            actions.clear();
        }
        return;
    }
    else if (!target.id) {
        // If hovering over something that isn't a cell or hasn't an id, do nothing. Should be an edge case
        _service_logger__WEBPACK_IMPORTED_MODULE_3__["default"].warn('Canceled cell drop, no id given.', target, drag);
        return;
    }
    last = { hoverId: target.id, dragId: drag.cell.id };
    Object(_service_hover_input__WEBPACK_IMPORTED_MODULE_2__["computeAndDispatchHover"])(target, drag.cell, monitor, element, actions, cellPlugins);
}, _helper_throttle__WEBPACK_IMPORTED_MODULE_1__["delay"], { leading: false });
var onDrop = function (target, monitor, element, actions, cellPlugins) {
    var drag = monitor.getItem();
    if (monitor.didDrop() || !monitor.isOver({ shallow: true }) || !target) {
        // If the item drop occurred deeper down the tree, don't do anything
        return;
    }
    else if (drag.cell.id === target.id) {
        // If the item being dropped on itself do nothing
        actions.cancelCellDrag();
        return;
    }
    else if (target.ancestorIds.includes(drag.cell.id)) {
        // If hovering over a child of itself, don't propagate further
        actions.cancelCellDrag();
        return;
    }
    last = { hoverId: target.id, dragId: drag.cell.id };
    Object(_service_hover_input__WEBPACK_IMPORTED_MODULE_2__["computeAndDispatchInsert"])(target, drag.cell, monitor, element, actions, cellPlugins);
};
//# sourceMappingURL=dnd.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/components/Cell/Droppable/index.js":
/*!*************************************************************************!*\
  !*** ../packages/editor/lib-es/core/components/Cell/Droppable/index.js ***!
  \*************************************************************************/
/*! exports provided: useCellDrop, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useCellDrop", function() { return useCellDrop; });
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! classnames */ "../packages/editor/node_modules/classnames/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_dnd__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-dnd */ "../node_modules/react-dnd/dist/esm/index.js");
/* harmony import */ var _reduxConnect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../reduxConnect */ "../packages/editor/lib-es/core/reduxConnect.js");
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../hooks */ "../packages/editor/lib-es/core/components/hooks/index.js");
/* harmony import */ var _helper_dnd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./helper/dnd */ "../packages/editor/lib-es/core/components/Cell/Droppable/helper/dnd.js");
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};






var useCellDrop = function (nodeId) {
    var _a;
    var ref = react__WEBPACK_IMPORTED_MODULE_1___default.a.useRef(null);
    var hoverTarget = Object(_hooks__WEBPACK_IMPORTED_MODULE_4__["useNodeAsHoverTarget"])(nodeId);
    var targetParentNodeId = (_a = hoverTarget === null || hoverTarget === void 0 ? void 0 : hoverTarget.ancestorIds) === null || _a === void 0 ? void 0 : _a[0];
    var checkIfAllowed = Object(_hooks__WEBPACK_IMPORTED_MODULE_4__["useCellIsAllowedHere"])(targetParentNodeId);
    var plugin = Object(_hooks__WEBPACK_IMPORTED_MODULE_4__["usePluginOfCell"])(nodeId);
    var cellPlugins = Object(_hooks__WEBPACK_IMPORTED_MODULE_4__["useAllCellPluginsForNode"])(targetParentNodeId);
    var hoverActions = Object(_hooks__WEBPACK_IMPORTED_MODULE_4__["useHoverActions"])();
    var dropActions = Object(_hooks__WEBPACK_IMPORTED_MODULE_4__["useDropActions"])(targetParentNodeId);
    var isHoveringOverThis = Object(_reduxConnect__WEBPACK_IMPORTED_MODULE_3__["useSelector"])(function (state) { var _a; return ((_a = state.reactPage.hover) === null || _a === void 0 ? void 0 : _a.nodeId) === nodeId; });
    var _b = __read(Object(react_dnd__WEBPACK_IMPORTED_MODULE_2__["useDrop"])({
        accept: 'cell',
        canDrop: function (item) {
            // check if plugin is allowed here
            if (!checkIfAllowed(item)) {
                return false;
            }
            if (plugin === null || plugin === void 0 ? void 0 : plugin.allowNeighbour) {
                if (!plugin.allowNeighbour(item.cell)) {
                    return false;
                }
            }
            return (item.cell.id !== nodeId &&
                !(hoverTarget === null || hoverTarget === void 0 ? void 0 : hoverTarget.ancestorIds.includes(item.cell.id)));
        },
        collect: function (monitor) { return ({
            isOver: monitor.isOver(),
            isAllowed: checkIfAllowed(monitor.getItem()),
        }); },
        hover: function (item, monitor) {
            if (plugin === null || plugin === void 0 ? void 0 : plugin.allowNeighbour) {
                if (!plugin.allowNeighbour(item.cell)) {
                    return false;
                }
            }
            Object(_helper_dnd__WEBPACK_IMPORTED_MODULE_5__["onHover"])(hoverTarget, monitor, ref.current, hoverActions, cellPlugins);
        },
        drop: function (item, monitor) {
            Object(_helper_dnd__WEBPACK_IMPORTED_MODULE_5__["onDrop"])(hoverTarget, monitor, ref.current, dropActions, cellPlugins);
        },
    }), 2), _c = _b[0], isOver = _c.isOver, isAllowed = _c.isAllowed, dropRef = _b[1];
    Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () {
        if (!isOver && isHoveringOverThis) {
            hoverActions.clear();
        }
    }, [isOver, isHoveringOverThis, hoverActions.clear]);
    // see https://github.com/react-dnd/react-dnd/issues/1955
    var attach = Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])(function (domElement) {
        dropRef(domElement);
        ref.current = domElement;
        // use dom element here for measuring
    }, [dropRef]);
    return [attach, isAllowed];
};
var Droppable = function (props) {
    var _a;
    var isLayoutMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_4__["useIsLayoutMode"])();
    var isInsertMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_4__["useIsInsertMode"])();
    var _b = __read(useCellDrop(props.nodeId), 2), attach = _b[0], isAllowed = _b[1];
    var hoverPosition = Object(_hooks__WEBPACK_IMPORTED_MODULE_4__["useNodeHoverPosition"])(props.nodeId);
    var allowMoveInEditMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_4__["useOption"])('allowMoveInEditMode');
    var hasPlugin = Object(_hooks__WEBPACK_IMPORTED_MODULE_4__["useCellHasPlugin"])(props.nodeId);
    var cellSpacingY = Object(_hooks__WEBPACK_IMPORTED_MODULE_4__["useCellSpacing"])().y;
    var needVerticalMargin = !props.isLeaf && !hasPlugin;
    if (!(isLayoutMode || isInsertMode) && !allowMoveInEditMode) {
        return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: 'react-page-cell-droppable-container' }, props.children));
    }
    return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { ref: attach, style: {
            height: '100%',
        }, className: "react-page-cell-droppable" },
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { style: {
                position: 'absolute',
                pointerEvents: 'none',
                top: needVerticalMargin ? cellSpacingY / 2 + "px" : 0,
                left: 0,
                bottom: needVerticalMargin ? cellSpacingY / 2 + "px" : 0,
                right: 0,
            }, className: classnames__WEBPACK_IMPORTED_MODULE_0___default()((_a = {
                    'react-page-cell-droppable-not-allowed': !isAllowed,
                    'react-page-cell-droppable-is-over-current': isAllowed && hoverPosition
                },
                _a["react-page-cell-droppable-is-over-" + hoverPosition] = isAllowed && hoverPosition,
                _a['react-page-cell-droppable-leaf'] = props.isLeaf,
                _a)) }),
        props.children));
};
/* harmony default export */ __webpack_exports__["default"] = (Droppable);
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/components/Cell/ErrorCell/index.js":
/*!*************************************************************************!*\
  !*** ../packages/editor/lib-es/core/components/Cell/ErrorCell/index.js ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../hooks */ "../packages/editor/lib-es/core/components/hooks/index.js");


var ErrorCell = function (_a) {
    var nodeId = _a.nodeId, error = _a.error;
    var isEditMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_1__["useIsEditMode"])();
    var removeCell = Object(_hooks__WEBPACK_IMPORTED_MODULE_1__["useRemoveCell"])(nodeId);
    var t = Object(_hooks__WEBPACK_IMPORTED_MODULE_1__["useUiTranslator"])().t;
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "react-page-cell-error" },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("strong", null, t('An error occurred!')),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("small", null,
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("dl", null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("dt", null, t('Cause:')),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("dd", null, error.message),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("dt", null, t('Cell:')),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("dd", null, nodeId))),
        isEditMode ? (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button", { onClick: function () { return removeCell(); } }, t('Remove'))) : null));
};
/* harmony default export */ __webpack_exports__["default"] = (ErrorCell);
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/components/Cell/Handle/index.js":
/*!**********************************************************************!*\
  !*** ../packages/editor/lib-es/core/components/Cell/Handle/index.js ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! classnames */ "../packages/editor/node_modules/classnames/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../hooks */ "../packages/editor/lib-es/core/components/hooks/index.js");
/* harmony import */ var _Draggable_useDragHandle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Draggable/useDragHandle */ "../packages/editor/lib-es/core/components/Cell/Draggable/useDragHandle.js");
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};




var Handle = function (_a) {
    var nodeId = _a.nodeId;
    var allowMoveInEditMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useOption"])('allowMoveInEditMode');
    var isLayoutMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useIsLayoutMode"])();
    var dragEnabled = allowMoveInEditMode || isLayoutMode;
    var _b = __read(Object(_Draggable_useDragHandle__WEBPACK_IMPORTED_MODULE_3__["useDragHandle"])(nodeId, dragEnabled), 3), isDragging = _b[0], dragRef = _b[1], previewElement = _b[2];
    var focus = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useFocusCell"])(nodeId);
    var plugin = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["usePluginOfCell"])(nodeId);
    var t = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useUiTranslator"])().t;
    if (!plugin) {
        return null;
    }
    return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
        previewElement,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: classnames__WEBPACK_IMPORTED_MODULE_0___default()('react-page-cell-handle', {
                'react-page-cell-handle-drag-enabled': dragEnabled,
                'react-page-cell-handle-is-dragging': isDragging,
            }), ref: dragRef, onClick: function (e) {
                var mode = e.metaKey || e.ctrlKey ? 'add' : 'replace';
                focus(false, mode);
            } }, t((plugin === null || plugin === void 0 ? void 0 : plugin.title) || (plugin === null || plugin === void 0 ? void 0 : plugin.text)))));
};
/* harmony default export */ __webpack_exports__["default"] = (react__WEBPACK_IMPORTED_MODULE_1___default.a.memo(Handle));
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/components/Cell/Inner/index.js":
/*!*********************************************************************!*\
  !*** ../packages/editor/lib-es/core/components/Cell/Inner/index.js ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utils_getCellSpacing__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utils/getCellSpacing */ "../packages/editor/lib-es/core/utils/getCellSpacing.js");
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../hooks */ "../packages/editor/lib-es/core/components/hooks/index.js");
/* harmony import */ var _Row__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../Row */ "../packages/editor/lib-es/core/components/Row/index.js");
/* harmony import */ var _Draggable__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Draggable */ "../packages/editor/lib-es/core/components/Cell/Draggable/index.js");
/* harmony import */ var _Droppable__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../Droppable */ "../packages/editor/lib-es/core/components/Cell/Droppable/index.js");
/* harmony import */ var _InsertNew__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../InsertNew */ "../packages/editor/lib-es/core/components/Cell/InsertNew.js");
/* harmony import */ var _PluginComponent__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../PluginComponent */ "../packages/editor/lib-es/core/components/Cell/PluginComponent/index.js");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};








var Inner = function (_a) {
    var _b, _c, _d;
    var nodeId = _a.nodeId;
    var isPreviewMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useIsPreviewMode"])();
    var isEditMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useIsEditMode"])();
    var cellShouldHavePlugin = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useCellHasPlugin"])(nodeId);
    var plugin = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["usePluginOfCell"])(nodeId);
    var setEditMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useSetEditMode"])();
    var focus = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useFocusCell"])(nodeId);
    var focused = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useIsFocused"])(nodeId);
    var childrenIds = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useNodeChildrenIds"])(nodeId);
    var cellSpacingY = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useCellSpacing"])().y;
    var ref = react__WEBPACK_IMPORTED_MODULE_0___default.a.useRef();
    var hasChildren = childrenIds.length > 0;
    var data = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useCellData"])(nodeId);
    var pluginCellSpacing = Object(_utils_getCellSpacing__WEBPACK_IMPORTED_MODULE_1__["getPluginCellSpacing"])(plugin, data);
    var _e = __read(Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useCellSpacingProvider"])(pluginCellSpacing), 2), Provider = _e[0], providerValue = _e[1];
    if (typeof pluginCellSpacing !== 'undefined' && pluginCellSpacing != null) {
        cellSpacingY = Object(_utils_getCellSpacing__WEBPACK_IMPORTED_MODULE_1__["normalizeCellSpacing"])(pluginCellSpacing).y;
    }
    var onClick = react__WEBPACK_IMPORTED_MODULE_0___default.a.useCallback(function (e) {
        var _a;
        var target = e.target;
        // check whether the click was inside cell-inner, but not inside a nested cell
        if (!focused &&
            isEditMode &&
            // this arrives when they stop resizing
            !((_a = target.classList) === null || _a === void 0 ? void 0 : _a.contains('react-page-row')) &&
            (target === null || target === void 0 ? void 0 : target.closest) &&
            target.closest('.react-page-cell-inner') === ref.current &&
            target.closest('.react-page-cell.react-page-cell-has-plugin') ===
                ref.current.closest('.react-page-cell')) {
            var mode = e.metaKey || e.ctrlKey ? 'add' : 'replace';
            focus(false, mode);
            setEditMode();
        }
    }, [focus, focused, isEditMode, setEditMode]);
    var insertAllowed = ((_b = plugin === null || plugin === void 0 ? void 0 : plugin.childConstraints) === null || _b === void 0 ? void 0 : _b.maxChildren)
        ? ((_c = plugin === null || plugin === void 0 ? void 0 : plugin.childConstraints) === null || _c === void 0 ? void 0 : _c.maxChildren) > childrenIds.length
        : true;
    var innerDivProps = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useCellInnerDivStylingProps"])(nodeId);
    var children = childrenIds.map(function (id) { return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Row__WEBPACK_IMPORTED_MODULE_3__["default"], { nodeId: id, key: id }); });
    var components = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useOption"])('components');
    var InsertNewWithDefault = (_d = components === null || components === void 0 ? void 0 : components.InsertNew) !== null && _d !== void 0 ? _d : _InsertNew__WEBPACK_IMPORTED_MODULE_6__["default"];
    if (!cellShouldHavePlugin) {
        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Droppable__WEBPACK_IMPORTED_MODULE_5__["default"], { nodeId: nodeId }, children);
    }
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Droppable__WEBPACK_IMPORTED_MODULE_5__["default"], { nodeId: nodeId, isLeaf: !hasChildren },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Draggable__WEBPACK_IMPORTED_MODULE_4__["default"], { nodeId: nodeId, isLeaf: !hasChildren },
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", __assign({ onClick: !isPreviewMode ? onClick : undefined, tabIndex: -1, ref: ref }, innerDivProps),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_PluginComponent__WEBPACK_IMPORTED_MODULE_7__["default"], { nodeId: nodeId, hasChildren: hasChildren },
                    hasChildren ? (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Provider, { value: providerValue },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { style: cellSpacingY !== 0
                                ? { margin: -cellSpacingY / 2 + "px 0" }
                                : undefined }, children))) : (children),
                    insertAllowed ? (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(InsertNewWithDefault, { parentCellId: nodeId, childrenIds: childrenIds })) : null)))));
};
/* harmony default export */ __webpack_exports__["default"] = (react__WEBPACK_IMPORTED_MODULE_0___default.a.memo(Inner));
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/components/Cell/InsertNew.js":
/*!*******************************************************************!*\
  !*** ../packages/editor/lib-es/core/components/Cell/InsertNew.js ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_dnd__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dnd */ "../node_modules/react-dnd/dist/esm/index.js");
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../hooks */ "../packages/editor/lib-es/core/components/hooks/index.js");
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};



var InsertNew = function (_a) {
    var parentCellId = _a.parentCellId;
    var setInsertMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useSetInsertMode"])();
    var insertNew = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useInsertNew"])(parentCellId);
    var isPreviewMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useIsPreviewMode"])();
    var isLayoutMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useIsLayoutMode"])();
    var setReferenceNodeId = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useSetDisplayReferenceNodeId"])();
    var checkIfAllowed = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useCellIsAllowedHere"])(parentCellId);
    var _b = __read(Object(react_dnd__WEBPACK_IMPORTED_MODULE_1__["useDrop"])({
        accept: 'cell',
        canDrop: function (item) {
            return checkIfAllowed(item);
        },
        collect: function (monitor) { return ({
            isOver: monitor.isOver(),
            isAllowed: checkIfAllowed(monitor.getItem()),
        }); },
        drop: function (item, monitor) {
            // fallback drop
            if (!monitor.didDrop()) {
                insertNew(item.cell);
            }
        },
    }), 2), _c = _b[0], isOver = _c.isOver, isAllowed = _c.isAllowed, dropRef = _b[1];
    if (isPreviewMode)
        return null;
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { ref: dropRef, className: 'react-page-cell-insert-new' + (isOver && isAllowed ? ' hover' : ''), style: {
            pointerEvents: 'all',
            zIndex: isLayoutMode ? 10 : 1,
            overflow: 'hidden',
            width: '50%',
            minWidth: 120,
            margin: 'auto',
            cursor: isOver && !isAllowed ? 'not-allowed' : 'pointer',
        }, onClick: function (e) {
            e.stopPropagation();
            setReferenceNodeId(parentCellId);
            setInsertMode();
        } }));
};
/* harmony default export */ __webpack_exports__["default"] = (react__WEBPACK_IMPORTED_MODULE_0___default.a.memo(InsertNew));
//# sourceMappingURL=InsertNew.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/components/Cell/MoveActions/index.js":
/*!***************************************************************************!*\
  !*** ../packages/editor/lib-es/core/components/Cell/MoveActions/index.js ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _ui_moveButtons__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../ui/moveButtons */ "../packages/editor/lib-es/ui/moveButtons/index.js");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};


var baseStyle = {
    position: 'absolute',
    margin: 0,
};
var MARGIN = 10;
var MoveActions = function (_a) {
    var nodeId = _a.nodeId;
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "react-page-cell-move-actions", style: __assign({ left: 0, right: 0, bottom: 0, top: 0, zIndex: 100, pointerEvents: 'none' }, baseStyle) },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_ui_moveButtons__WEBPACK_IMPORTED_MODULE_1__["MoveUp"], { nodeId: nodeId, style: __assign(__assign({}, baseStyle), { top: MARGIN, left: '50%', transform: 'translateX(-50%)' }) }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_ui_moveButtons__WEBPACK_IMPORTED_MODULE_1__["MoveLeft"], { nodeId: nodeId, style: __assign(__assign({}, baseStyle), { left: MARGIN, top: '50%', transform: 'translateY(-50%)' }) }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_ui_moveButtons__WEBPACK_IMPORTED_MODULE_1__["MoveRight"], { nodeId: nodeId, style: __assign(__assign({}, baseStyle), { right: MARGIN, top: '50%', transform: 'translateY(-50%)' }) }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_ui_moveButtons__WEBPACK_IMPORTED_MODULE_1__["MoveDown"], { nodeId: nodeId, style: __assign(__assign({}, baseStyle), { bottom: MARGIN, left: '50%', transform: 'translateX(-50%)' }) })));
};
/* harmony default export */ __webpack_exports__["default"] = (MoveActions);
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/components/Cell/PluginComponent/index.js":
/*!*******************************************************************************!*\
  !*** ../packages/editor/lib-es/core/components/Cell/PluginComponent/index.js ***!
  \*******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../ui */ "../packages/editor/lib-es/ui/index.js");
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../hooks */ "../packages/editor/lib-es/core/components/hooks/index.js");
/* harmony import */ var _PluginControls__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../PluginControls */ "../packages/editor/lib-es/core/components/Cell/PluginControls/index.js");
/* harmony import */ var _PluginMissing__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../PluginMissing */ "../packages/editor/lib-es/core/components/Cell/PluginMissing.js");
/* harmony import */ var _NoopProvider__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../NoopProvider */ "../packages/editor/lib-es/core/components/Cell/NoopProvider.js");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};






var PluginComponent = function (_a) {
    var _b, _c, _d;
    var nodeId = _a.nodeId, children = _a.children, hasChildren = _a.hasChildren;
    var lang = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useLang"])();
    var components = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useOption"])('components');
    var CustomPluginMissing = components === null || components === void 0 ? void 0 : components.CellPluginMissing;
    var isPreviewMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useIsPreviewMode"])();
    var isEditMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useIsEditMode"])();
    var _e = __read(Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useDebouncedCellData"])(nodeId), 2), data = _e[0], onChange = _e[1];
    var pluginId = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useCellProps"])(nodeId, function (c) { var _a; return (_a = c.plugin) === null || _a === void 0 ? void 0 : _a.id; });
    var plugin = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["usePluginOfCell"])(nodeId);
    var focused = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useIsExclusivlyFocused"])(nodeId);
    var hasInlineNeighbour = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useCellProps"])(nodeId, function (c) { return c.hasInlineNeighbour; });
    var Renderer = plugin === null || plugin === void 0 ? void 0 : plugin.Renderer;
    var Missing = CustomPluginMissing !== null && CustomPluginMissing !== void 0 ? CustomPluginMissing : _PluginMissing__WEBPACK_IMPORTED_MODULE_4__["default"];
    var Provider = (_b = plugin === null || plugin === void 0 ? void 0 : plugin.Provider) !== null && _b !== void 0 ? _b : _NoopProvider__WEBPACK_IMPORTED_MODULE_5__["default"];
    var remove = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useRemoveCell"])(nodeId);
    var Toolbar = (_c = components === null || components === void 0 ? void 0 : components.BottomToolbar) !== null && _c !== void 0 ? _c : _ui__WEBPACK_IMPORTED_MODULE_1__["BottomToolbar"];
    var componentProps = Object(react__WEBPACK_IMPORTED_MODULE_0__["useMemo"])(function () { return ({
        nodeId: nodeId,
        lang: lang,
        data: data,
        pluginConfig: plugin,
        focused: isEditMode && focused,
        readOnly: !isEditMode,
        onChange: onChange,
        isEditMode: isEditMode,
        isPreviewMode: isPreviewMode,
        remove: remove,
    }); }, [
        nodeId,
        lang,
        data,
        plugin,
        isEditMode,
        focused,
        onChange,
        isEditMode,
        isPreviewMode,
        remove,
    ]);
    // In case of non-zero cell spacing, nested layouts (layout plugins with children) should have their
    // margin collapsing functionality off. The simplest solution is to use display:flex for the below wrapping <div>.
    // This however is not compatible with inline elements flotation, so if a cell has inline neighbors, we are going
    // to have to keep display:block style. Layout plugins with inline cell support will have to take care of
    // margin collapsing internally on their own.
    var display = hasInlineNeighbour
        ? {}
        : {
            display: 'flex',
            flexDirection: 'column',
        };
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Provider, __assign({}, componentProps),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { style: __assign(__assign({}, display), { height: '100%', pointerEvents: !isPreviewMode &&
                        plugin &&
                        !(plugin === null || plugin === void 0 ? void 0 : plugin.allowClickInside) &&
                        !hasChildren
                        ? 'none'
                        : undefined }) }, Renderer ? (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Renderer, __assign({}, componentProps), children)) : pluginId ? (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Missing, __assign({}, componentProps, { pluginId: pluginId }))) : (children)),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Toolbar, { nodeId: nodeId, open: focused, dark: (_d = plugin === null || plugin === void 0 ? void 0 : plugin.bottomToolbar) === null || _d === void 0 ? void 0 : _d.dark, pluginControls: isEditMode && (plugin === null || plugin === void 0 ? void 0 : plugin.controls) ? (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_PluginControls__WEBPACK_IMPORTED_MODULE_3__["default"], { componentProps: componentProps, controls: plugin === null || plugin === void 0 ? void 0 : plugin.controls })) : null }))));
};
/* harmony default export */ __webpack_exports__["default"] = (PluginComponent);
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/components/Cell/PluginControls/index.js":
/*!******************************************************************************!*\
  !*** ../packages/editor/lib-es/core/components/Cell/PluginControls/index.js ***!
  \******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @material-ui/core */ "../node_modules/@material-ui/core/esm/index.js");
/* harmony import */ var _material_ui_styles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @material-ui/styles */ "../node_modules/@material-ui/styles/esm/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../ui */ "../packages/editor/lib-es/ui/index.js");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};




var StyledTab = Object(_material_ui_styles__WEBPACK_IMPORTED_MODULE_1__["withStyles"])(function () { return ({
    wrapper: {
        alignItems: 'flex-start',
    },
}); })(_material_ui_core__WEBPACK_IMPORTED_MODULE_0__["Tab"]);
var StyledTabs = Object(_material_ui_styles__WEBPACK_IMPORTED_MODULE_1__["withStyles"])(function (theme) { return ({
    root: {
        marginTop: -12,
        marginBottom: -12,
        marginLeft: -24,
        alignItems: 'flex-start',
        backgroundColor: theme.palette.background.default,
    },
}); })(_material_ui_core__WEBPACK_IMPORTED_MODULE_0__["Tabs"]);
var ControlsList = react__WEBPACK_IMPORTED_MODULE_2___default.a.memo(function (_a) {
    var _b;
    var controls = _a.controls, componentProps = _a.componentProps;
    var _c = __read(Object(react__WEBPACK_IMPORTED_MODULE_2__["useState"])(0), 2), tab = _c[0], setTab = _c[1];
    var activeControls = (_b = controls[tab]) === null || _b === void 0 ? void 0 : _b.controls;
    return (react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", { style: {
            display: 'flex',
            flexDirection: 'row',
        } },
        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(StyledTabs, { value: tab, onChange: function (e, v) { return setTab(v); }, orientation: "vertical", variant: "scrollable" }, controls.map(function (t, index) { return (react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(StyledTab, { label: t.title, key: index })); })),
        activeControls ? (react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", { style: {
                flex: 1,
                marginLeft: 24,
                display: 'flex',
            } },
            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(Controls, { controls: activeControls, componentProps: componentProps }))) : null));
});
var Controls = react__WEBPACK_IMPORTED_MODULE_2___default.a.memo(function (_a) {
    var controls = _a.controls, componentProps = _a.componentProps;
    var pluginControls = null;
    if (Array.isArray(controls)) {
        return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(ControlsList, { componentProps: componentProps, controls: controls });
    }
    if ((controls === null || controls === void 0 ? void 0 : controls.type) === 'custom') {
        var Component = controls.Component;
        pluginControls = react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(Component, __assign({}, componentProps, controls));
    }
    else if ((controls === null || controls === void 0 ? void 0 : controls.type) === 'autoform') {
        pluginControls = react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_ui__WEBPACK_IMPORTED_MODULE_3__["AutoformControls"], __assign({}, componentProps, controls));
    }
    return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", { style: { overflow: 'auto', flex: 1 } }, pluginControls);
});
var PluginControls = function (_a) {
    var controls = _a.controls, componentProps = _a.componentProps;
    return (react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", { style: {
            maxHeight: '50vh',
            // if it has tabs, stretch to avoid jumping tabs
            width: Array.isArray(controls) ? '100vw' : undefined,
            maxWidth: '100%',
            display: 'flex',
        } },
        react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(Controls, { controls: controls, componentProps: componentProps })));
};
/* harmony default export */ __webpack_exports__["default"] = (react__WEBPACK_IMPORTED_MODULE_2___default.a.memo(PluginControls));
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/components/Cell/PluginMissing.js":
/*!***********************************************************************!*\
  !*** ../packages/editor/lib-es/core/components/Cell/PluginMissing.js ***!
  \***********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};

var PluginMissing = function (_a) {
    var children = _a.children, props = __rest(_a, ["children"]);
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null,
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { style: {
                backgroundColor: 'red',
                padding: '8px',
                border: '1px solid black',
                margin: '2px',
                overflowX: 'scroll',
            } },
            "The requested plugin `",
            props.pluginId,
            "` could not be found.",
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button", { onClick: props.remove }, "Delete Plugin"),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("pre", null, JSON.stringify(props, null, 2))),
        children));
};
/* harmony default export */ __webpack_exports__["default"] = (PluginMissing);
//# sourceMappingURL=PluginMissing.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/components/Cell/index.js":
/*!***************************************************************!*\
  !*** ../packages/editor/lib-es/core/components/Cell/index.js ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! classnames */ "../packages/editor/node_modules/classnames/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_getCellStylingProps__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/getCellStylingProps */ "../packages/editor/lib-es/core/utils/getCellStylingProps.js");
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../hooks */ "../packages/editor/lib-es/core/components/hooks/index.js");
/* harmony import */ var _ErrorCell__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ErrorCell */ "../packages/editor/lib-es/core/components/Cell/ErrorCell/index.js");
/* harmony import */ var _Handle__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Handle */ "../packages/editor/lib-es/core/components/Cell/Handle/index.js");
/* harmony import */ var _Inner__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Inner */ "../packages/editor/lib-es/core/components/Cell/Inner/index.js");
/* harmony import */ var _MoveActions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./MoveActions */ "../packages/editor/lib-es/core/components/Cell/MoveActions/index.js");
/* harmony import */ var _utils_scrollIntoViewWithOffset__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./utils/scrollIntoViewWithOffset */ "../packages/editor/lib-es/core/components/Cell/utils/scrollIntoViewWithOffset.js");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();









var CellErrorGate = /** @class */ (function (_super) {
    __extends(class_1, _super);
    function class_1() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.state = {
            error: null,
        };
        return _this;
    }
    class_1.prototype.componentDidCatch = function (error) {
        this.setState({ error: error });
    };
    class_1.prototype.render = function () {
        if (this.state.error) {
            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ErrorCell__WEBPACK_IMPORTED_MODULE_4__["default"], { nodeId: this.props.nodeId, error: this.state.error });
        }
        return this.props.children;
    };
    return class_1;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component));
var Cell = function (_a) {
    var _b;
    var nodeId = _a.nodeId, measureRef = _a.measureRef;
    var focused = Object(_hooks__WEBPACK_IMPORTED_MODULE_3__["useIsFocused"])(nodeId);
    var _c = Object(_hooks__WEBPACK_IMPORTED_MODULE_3__["useCellProps"])(nodeId, function (_a) {
        var inline = _a.inline, hasInlineNeighbour = _a.hasInlineNeighbour, isDraft = _a.isDraft, isDraftI18n = _a.isDraftI18n, size = _a.size;
        return ({
            inline: inline,
            hasInlineNeighbour: hasInlineNeighbour,
            isDraft: isDraft,
            isDraftI18n: isDraftI18n,
            size: size,
        });
    }), inline = _c.inline, hasInlineNeighbour = _c.hasInlineNeighbour, isDraft = _c.isDraft, isDraftI18n = _c.isDraftI18n, size = _c.size;
    var lang = Object(_hooks__WEBPACK_IMPORTED_MODULE_3__["useLang"])();
    var isPreviewMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_3__["useIsPreviewMode"])();
    var isResizeMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_3__["useIsResizeMode"])();
    var isLayoutMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_3__["useIsLayoutMode"])();
    var isInsertMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_3__["useIsInsertMode"])();
    var multiNodesSelected = Object(_hooks__WEBPACK_IMPORTED_MODULE_3__["useAllFocusedNodeIds"])().length > 1;
    var hasChildren = Object(_hooks__WEBPACK_IMPORTED_MODULE_3__["useNodeHasChildren"])(nodeId);
    var showMoveButtons = Object(_hooks__WEBPACK_IMPORTED_MODULE_3__["useOption"])('showMoveButtonsInLayoutMode');
    var hasPlugin = Object(_hooks__WEBPACK_IMPORTED_MODULE_3__["useCellHasPlugin"])(nodeId);
    var _d = Object(_hooks__WEBPACK_IMPORTED_MODULE_3__["useCellSpacing"])(), cellSpacingX = _d.x, cellSpacingY = _d.y;
    var needVerticalPadding = !hasChildren || hasPlugin;
    var isDraftInLang = (_b = isDraftI18n === null || isDraftI18n === void 0 ? void 0 : isDraftI18n[lang]) !== null && _b !== void 0 ? _b : isDraft;
    var ref = react__WEBPACK_IMPORTED_MODULE_1___default.a.useRef();
    var setReferenceNodeId = Object(_hooks__WEBPACK_IMPORTED_MODULE_3__["useSetDisplayReferenceNodeId"])();
    var onClick = Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])(function (e) {
        if (isInsertMode) {
            e.stopPropagation();
            setReferenceNodeId(nodeId);
        }
    }, [nodeId, isInsertMode, setReferenceNodeId]);
    Object(_hooks__WEBPACK_IMPORTED_MODULE_3__["useScrollToViewEffect"])(nodeId, function () {
        if (ref.current)
            Object(_utils_scrollIntoViewWithOffset__WEBPACK_IMPORTED_MODULE_8__["default"])(ref.current, 120); // 120 is just a sane default, we might make int configurable in the future
    }, [ref.current]);
    if (isDraftInLang && isPreviewMode) {
        return null;
    }
    var cellOuterStlye = cellSpacingY !== 0 || cellSpacingX !== 0
        ? {
            padding: (needVerticalPadding ? cellSpacingY / 2 : 0) + "px " + cellSpacingX / 2 + "px",
        }
        : undefined;
    return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { style: cellOuterStlye, ref: ref, className: Object(_utils_getCellStylingProps__WEBPACK_IMPORTED_MODULE_2__["getCellOuterDivClassName"])({
            hasChildren: hasChildren,
            hasInlineNeighbour: hasInlineNeighbour,
            size: size,
            inline: inline,
        }) +
            ' ' +
            classnames__WEBPACK_IMPORTED_MODULE_0___default()({
                'react-page-cell-has-plugin': hasPlugin,
                'react-page-cell-focused': focused,
                'react-page-cell-is-draft': isDraftInLang,
                'react-page-cell-bring-to-front': !isResizeMode && !isLayoutMode && inline, // inline must not be active for resize/layout
            }), onClick: onClick },
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Handle__WEBPACK_IMPORTED_MODULE_5__["default"], { nodeId: nodeId }),
        showMoveButtons &&
            isLayoutMode &&
            !hasChildren &&
            !multiNodesSelected ? (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_MoveActions__WEBPACK_IMPORTED_MODULE_7__["default"], { nodeId: nodeId })) : null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { ref: measureRef, style: {
                height: '100%',
                boxSizing: 'border-box',
            } },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(CellErrorGate, { nodeId: nodeId },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Inner__WEBPACK_IMPORTED_MODULE_6__["default"], { nodeId: nodeId })))));
};
/* harmony default export */ __webpack_exports__["default"] = (react__WEBPACK_IMPORTED_MODULE_1___default.a.memo(Cell));
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/components/Cell/utils/scrollIntoViewWithOffset.js":
/*!****************************************************************************************!*\
  !*** ../packages/editor/lib-es/core/components/Cell/utils/scrollIntoViewWithOffset.js ***!
  \****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (element, offset, behavior) {
    if (offset === void 0) { offset = 0; }
    if (behavior === void 0) { behavior = 'smooth'; }
    if (!element) {
        return;
    }
    var bodyRect = document.body.getBoundingClientRect().top;
    var elementRect = element.getBoundingClientRect().top;
    var elementPosition = elementRect - bodyRect;
    var offsetPosition = elementPosition - offset;
    window.scrollTo({
        top: offsetPosition,
        behavior: behavior,
    });
});
//# sourceMappingURL=scrollIntoViewWithOffset.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/components/Editable/FallbackDropArea.js":
/*!******************************************************************************!*\
  !*** ../packages/editor/lib-es/core/components/Editable/FallbackDropArea.js ***!
  \******************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_dnd__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dnd */ "../node_modules/react-dnd/dist/esm/index.js");
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../hooks */ "../packages/editor/lib-es/core/components/hooks/index.js");
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};




var FallbackDropArea = function (_a) {
    var children = _a.children;
    var insertNew = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useInsertNew"])();
    var isAllowed = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useCellIsAllowedHere"])();
    var _b = __read(Object(react_dnd__WEBPACK_IMPORTED_MODULE_1__["useDrop"])({
        accept: 'cell',
        canDrop: function (item) { return isAllowed(item); },
        drop: function (item, monitor) {
            // fallback drop
            if (!monitor.didDrop()) {
                insertNew(item.cell);
            }
        },
    }), 2), dropRef = _b[1];
    var setReference = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useSetDisplayReferenceNodeId"])();
    var clearReference = Object(react__WEBPACK_IMPORTED_MODULE_0__["useCallback"])(function (e) {
        var _a;
        // if click was on the root, clear reference
        if ((_a = e.target.classList) === null || _a === void 0 ? void 0 : _a.contains('react-page-editable'))
            setReference(null);
    }, [setReference]);
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { ref: dropRef, onClick: clearReference }, children));
};
/* harmony default export */ __webpack_exports__["default"] = (FallbackDropArea);
//# sourceMappingURL=FallbackDropArea.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/components/Editable/Inner/Rows.js":
/*!************************************************************************!*\
  !*** ../packages/editor/lib-es/core/components/Editable/Inner/Rows.js ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Cell_InsertNew__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Cell/InsertNew */ "../packages/editor/lib-es/core/components/Cell/InsertNew.js");
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../hooks */ "../packages/editor/lib-es/core/components/hooks/index.js");
/* harmony import */ var _Row__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../Row */ "../packages/editor/lib-es/core/components/Row/index.js");




var Rows = function () {
    var _a;
    var rowIds = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useValueNode"])(function (editable) {
        var _a, _b;
        return ({
            rowIds: (_b = (_a = editable === null || editable === void 0 ? void 0 : editable.rows) === null || _a === void 0 ? void 0 : _a.map(function (c) { return c.id; })) !== null && _b !== void 0 ? _b : [],
        });
    }).rowIds;
    var childConstraints = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useOption"])('childConstraints');
    var components = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useOption"])('components');
    var cellSpacingY = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useCellSpacing"])().y;
    var insertAllowed = (childConstraints === null || childConstraints === void 0 ? void 0 : childConstraints.maxChildren)
        ? (childConstraints === null || childConstraints === void 0 ? void 0 : childConstraints.maxChildren) > rowIds.length
        : true;
    var InsertNewWithDefault = (_a = components === null || components === void 0 ? void 0 : components.InsertNew) !== null && _a !== void 0 ? _a : _Cell_InsertNew__WEBPACK_IMPORTED_MODULE_1__["default"];
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null,
        rowIds.length > 0 ? (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { style: cellSpacingY !== 0
                ? { margin: -cellSpacingY / 2 + "px 0" }
                : undefined }, rowIds.map(function (id) { return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Row__WEBPACK_IMPORTED_MODULE_3__["default"], { nodeId: id, key: id })); }))) : null,
        insertAllowed ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(InsertNewWithDefault, { childrenIds: rowIds }) : null));
};
/* harmony default export */ __webpack_exports__["default"] = (react__WEBPACK_IMPORTED_MODULE_0___default.a.memo(Rows));
//# sourceMappingURL=Rows.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/components/Editable/Inner/index.js":
/*!*************************************************************************!*\
  !*** ../packages/editor/lib-es/core/components/Editable/Inner/index.js ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../hooks */ "../packages/editor/lib-es/core/components/hooks/index.js");
/* harmony import */ var _hooks_useKeepScrollPosition__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../hooks/useKeepScrollPosition */ "../packages/editor/lib-es/core/components/Editable/hooks/useKeepScrollPosition.js");
/* harmony import */ var _Rows__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Rows */ "../packages/editor/lib-es/core/components/Editable/Inner/Rows.js");




var Inner = function () {
    var _a;
    var mode = Object(_hooks__WEBPACK_IMPORTED_MODULE_1__["useDisplayMode"])();
    var ref = Object(react__WEBPACK_IMPORTED_MODULE_0__["useRef"])();
    var zoom = Object(_hooks__WEBPACK_IMPORTED_MODULE_1__["useZoom"])();
    Object(_hooks_useKeepScrollPosition__WEBPACK_IMPORTED_MODULE_2__["useKeepScrollPosition"])(ref);
    var rect = (_a = ref.current) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect();
    var zoomTransformOriginY = window.innerHeight / 2 - (rect === null || rect === void 0 ? void 0 : rect.top);
    var offsetPercent = zoomTransformOriginY / (rect === null || rect === void 0 ? void 0 : rect.height);
    var backdropPercent = 50 * (1 - zoom);
    var left = backdropPercent + '%';
    var right = 100 - backdropPercent + '%';
    var top = backdropPercent * offsetPercent * 2 + '%';
    var bottom = 100 - backdropPercent * (1 - offsetPercent) * 2 + '%';
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { ref: ref, style: {
            position: 'relative',
        } },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { style: {
                opacity: zoom < 1 ? 1 : 0,
                position: 'absolute',
                top: 0,
                left: 0,
                right: 0,
                bottom: 0,
                transition: '0.6s',
                clipPath: "polygon(0% 0%, 0% 100%, " + left + " 100%, " + left + " " + top + ", " + right + " " + top + ", " + right + " " + bottom + ", " + left + " " + bottom + ", " + left + " 100%, 100% 100%, 100% 0%)",
                background: "url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16  ' viewBox='0 0 8 8'%3E%3Cg fill='%23c5c5c5' fill-opacity='0.4'%3E%3Cpath fill-rule='evenodd' d='M0 0h4v4H0V0zm4 4h4v4H4V4z'/%3E%3C/g%3E%3C/svg%3E\")",
            } }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { style: {
                transformOrigin: "center " + zoomTransformOriginY + "px",
                transform: "scale(" + zoom + ")",
                transition: '0.6s',
            }, className: 'react-page-editable react-page-editable-mode-' + mode },
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Rows__WEBPACK_IMPORTED_MODULE_3__["default"], null))));
};
/* harmony default export */ __webpack_exports__["default"] = (react__WEBPACK_IMPORTED_MODULE_0___default.a.memo(Inner));
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/components/Editable/hooks/useKeepScrollPosition.js":
/*!*****************************************************************************************!*\
  !*** ../packages/editor/lib-es/core/components/Editable/hooks/useKeepScrollPosition.js ***!
  \*****************************************************************************************/
/*! exports provided: useKeepScrollPosition */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useKeepScrollPosition", function() { return useKeepScrollPosition; });
/* harmony import */ var lodash_throttle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash.throttle */ "../node_modules/lodash.throttle/index.js");
/* harmony import */ var lodash_throttle__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_throttle__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _Cell_utils_scrollIntoViewWithOffset__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../Cell/utils/scrollIntoViewWithOffset */ "../packages/editor/lib-es/core/components/Cell/utils/scrollIntoViewWithOffset.js");
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../hooks */ "../packages/editor/lib-es/core/components/hooks/index.js");




function isElementInViewport(el) {
    var rect = el.getBoundingClientRect();
    return (rect.top >= 0 &&
        rect.left >= 0 &&
        rect.bottom <=
            (window.innerHeight ||
                document.documentElement.clientHeight) /*or $(window).height() */ &&
        rect.right <=
            (window.innerWidth ||
                document.documentElement.clientWidth) /*or $(window).width() */);
}
var useKeepScrollPosition = function (ref) {
    var mode = Object(_hooks__WEBPACK_IMPORTED_MODULE_3__["useDisplayMode"])();
    var firstElementInViewPortref = react__WEBPACK_IMPORTED_MODULE_1___default.a.useRef();
    Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () {
        var onScroll = lodash_throttle__WEBPACK_IMPORTED_MODULE_0___default()(function () {
            if (ref.current) {
                var firstInViewport = Array.prototype.find.call(ref.current.getElementsByClassName('react-page-cell'), function (cell) { return isElementInViewport(cell); });
                if (firstInViewport) {
                    firstElementInViewPortref.current = {
                        el: firstInViewport,
                        topOffset: firstInViewport.getBoundingClientRect().top,
                    };
                }
                else {
                    firstElementInViewPortref.current = null;
                }
            }
        }, 600);
        window.addEventListener('scroll', onScroll);
        return function () {
            window.removeEventListener('scroll', onScroll);
        };
    }, []);
    Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () {
        if (firstElementInViewPortref.current) {
            var _a = firstElementInViewPortref.current, el_1 = _a.el, topOffset_1 = _a.topOffset;
            setTimeout(function () {
                Object(_Cell_utils_scrollIntoViewWithOffset__WEBPACK_IMPORTED_MODULE_2__["default"])(el_1, topOffset_1, 'auto');
            }, 0);
        }
    }, [mode]);
};
//# sourceMappingURL=useKeepScrollPosition.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/components/Editable/index.js":
/*!*******************************************************************!*\
  !*** ../packages/editor/lib-es/core/components/Editable/index.js ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _FallbackDropArea__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FallbackDropArea */ "../packages/editor/lib-es/core/components/Editable/FallbackDropArea.js");
/* harmony import */ var _Inner__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Inner */ "../packages/editor/lib-es/core/components/Editable/Inner/index.js");



var Editable = function () {
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_FallbackDropArea__WEBPACK_IMPORTED_MODULE_1__["default"], null,
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Inner__WEBPACK_IMPORTED_MODULE_2__["default"], null)));
};
/* harmony default export */ __webpack_exports__["default"] = (react__WEBPACK_IMPORTED_MODULE_0___default.a.memo(Editable));
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/components/HotKey/GlobalHotKeys.js":
/*!*************************************************************************!*\
  !*** ../packages/editor/lib-es/core/components/HotKey/GlobalHotKeys.js ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var is_hotkey__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! is-hotkey */ "../node_modules/is-hotkey/lib/index.js");
/* harmony import */ var is_hotkey__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(is_hotkey__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _core_utils_objIsNode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/utils/objIsNode */ "../packages/editor/lib-es/core/utils/objIsNode.js");
/* harmony import */ var _types_node__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../types/node */ "../packages/editor/lib-es/core/types/node.js");
/* harmony import */ var _utils_ancestorTree__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/ancestorTree */ "../packages/editor/lib-es/core/utils/ancestorTree.js");
/* harmony import */ var _utils_cloneWithNewIds__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/cloneWithNewIds */ "../packages/editor/lib-es/core/utils/cloneWithNewIds.js");
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../hooks */ "../packages/editor/lib-es/core/components/hooks/index.js");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};







var lastFocused = null;
var GlobalHotKeys = function (_a) {
    var focusRef = _a.focusRef;
    var editor = Object(_hooks__WEBPACK_IMPORTED_MODULE_6__["useEditorStore"])();
    var undo = Object(_hooks__WEBPACK_IMPORTED_MODULE_6__["useUndo"])();
    var redo = Object(_hooks__WEBPACK_IMPORTED_MODULE_6__["useRedo"])();
    var setInsertMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_6__["useSetInsertMode"])();
    var isEditMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_6__["useIsEditMode"])();
    var blurAllCells = Object(_hooks__WEBPACK_IMPORTED_MODULE_6__["useBlurAllCells"])();
    var focusedNodeIds = Object(_hooks__WEBPACK_IMPORTED_MODULE_6__["useAllFocusedNodeIds"])();
    var someCellIsFocused = focusedNodeIds.length > 0;
    var focusedNodeId = Object(_hooks__WEBPACK_IMPORTED_MODULE_6__["useFocusedNodeId"])();
    var focusParentId = Object(_hooks__WEBPACK_IMPORTED_MODULE_6__["useParentCellId"])(focusedNodeId);
    var plugins = Object(_hooks__WEBPACK_IMPORTED_MODULE_6__["useAllCellPluginsForNode"])(focusParentId);
    var focusCell = Object(_hooks__WEBPACK_IMPORTED_MODULE_6__["useFocusCellById"])();
    var removeCells = Object(_hooks__WEBPACK_IMPORTED_MODULE_6__["useRemoveMultipleNodeIds"])();
    var insertAfter = Object(_hooks__WEBPACK_IMPORTED_MODULE_6__["useInsertAfter"])();
    var isInsertMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_6__["useIsInsertMode"])();
    var setEditMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_6__["useSetEditMode"])();
    var delegateToFoundPlugin = Object(react__WEBPACK_IMPORTED_MODULE_1__["useCallback"])(function (event, nodeId, handlerName, defaultHandler) { return __awaiter(void 0, void 0, void 0, function () {
        var node, plugin, e_1;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    node = editor.getNode(nodeId);
                    plugin = plugins.find(function (p) { var _a, _b; return p.id === ((_b = (_a = node) === null || _a === void 0 ? void 0 : _a.plugin) === null || _b === void 0 ? void 0 : _b.id); });
                    _a.label = 1;
                case 1:
                    _a.trys.push([1, 5, , 6]);
                    if (!(isEditMode && node && plugin[handlerName])) return [3 /*break*/, 3];
                    return [4 /*yield*/, plugin[handlerName](event, node)];
                case 2:
                    _a.sent();
                    _a.label = 3;
                case 3: 
                // if the plugin handler resolve or there is no, they do not handle it, so do the default
                return [4 /*yield*/, defaultHandler(event, node)];
                case 4:
                    // if the plugin handler resolve or there is no, they do not handle it, so do the default
                    _a.sent();
                    return [3 /*break*/, 6];
                case 5:
                    e_1 = _a.sent();
                    if (e_1) {
                        // tslint:disable-next-line:no-console
                        console.error(e_1);
                    }
                    return [3 /*break*/, 6];
                case 6: return [2 /*return*/];
            }
        });
    }); }, [editor, isEditMode]);
    var handlers = Object(react__WEBPACK_IMPORTED_MODULE_1__["useMemo"])(function () {
        var handleCopy = function (deleteAfter) {
            var _a;
            var _b;
            if (deleteAfter === void 0) { deleteAfter = false; }
            // copy cell, unless text is selected
            if (((_b = window.getSelection()) === null || _b === void 0 ? void 0 : _b.type) !== 'Range' &&
                (focusedNodeIds === null || focusedNodeIds === void 0 ? void 0 : focusedNodeIds.length) > 0) {
                var node = Object(_utils_ancestorTree__WEBPACK_IMPORTED_MODULE_4__["getCommonAncestorTree"])(editor, focusedNodeIds);
                var cell = Object(_utils_cloneWithNewIds__WEBPACK_IMPORTED_MODULE_5__["cloneAsCell"])(node);
                var type = 'text/plain'; // json is not supported
                var blob = new Blob([JSON.stringify(cell)], { type: type });
                // eslint-disable-next-line @typescript-eslint/no-explicit-any
                var data = [new ClipboardItem((_a = {}, _a[type] = blob, _a))];
                navigator.clipboard.write(data);
                if (deleteAfter) {
                    removeCells(focusedNodeIds);
                }
            }
        };
        return [
            {
                hotkeys: ['Escape'],
                handler: function () {
                    if (someCellIsFocused) {
                        blurAllCells();
                    }
                    if (isInsertMode) {
                        setEditMode();
                    }
                },
            },
            {
                hotkeys: ['mod+z'],
                handler: function () {
                    undo();
                },
            },
            {
                hotkeys: ['mod+c'],
                handler: function () {
                    handleCopy(false);
                },
            },
            {
                hotkeys: ['mod+x'],
                handler: function () {
                    handleCopy(true);
                },
            },
            {
                hotkeys: ['mod+v'],
                handler: function () { return __awaiter(void 0, void 0, void 0, function () {
                    var node, _a, _b, commonAncestorNode, insertAfterNodeId, e_2;
                    return __generator(this, function (_c) {
                        switch (_c.label) {
                            case 0:
                                _c.trys.push([0, 2, , 3]);
                                _b = (_a = JSON).parse;
                                return [4 /*yield*/, navigator.clipboard.readText()];
                            case 1:
                                node = _b.apply(_a, [_c.sent()]);
                                if (Object(_core_utils_objIsNode__WEBPACK_IMPORTED_MODULE_2__["objIsNode"])(node)) {
                                    commonAncestorNode = focusedNodeIds.length > 0
                                        ? Object(_utils_ancestorTree__WEBPACK_IMPORTED_MODULE_4__["getCommonAncestorTree"])(editor, focusedNodeIds)
                                        : null;
                                    insertAfterNodeId = commonAncestorNode
                                        ? Object(_types_node__WEBPACK_IMPORTED_MODULE_3__["isRow"])(commonAncestorNode)
                                            ? commonAncestorNode.cells.length === 1 // if it has just one cell, add below this cell. if it has multiple, add below this row
                                                ? commonAncestorNode.cells[0].id
                                                : commonAncestorNode.id
                                            : commonAncestorNode.rows[commonAncestorNode.rows.length - 1] // if common ancestor is a cell (usually the root cell, add below last row)
                                                .id
                                        : null;
                                    insertAfter(node, insertAfterNodeId);
                                }
                                return [3 /*break*/, 3];
                            case 2:
                                e_2 = _c.sent();
                                return [3 /*break*/, 3];
                            case 3: return [2 /*return*/];
                        }
                    });
                }); },
            },
            {
                hotkeys: ['ctrl+shift+z', 'ctrl+y', 'command+shift+z', 'command+y'],
                handler: function () {
                    redo();
                },
            },
            {
                hotkeys: ['alt+del', 'alt+backspace'],
                handler: function (event) {
                    delegateToFoundPlugin(event, focusedNodeId, 'handleRemoveHotKey', function () {
                        removeCells(focusedNodeIds);
                    });
                },
            },
        ];
    }, [
        focusedNodeId,
        focusedNodeIds,
        someCellIsFocused,
        blurAllCells,
        focusCell,
        removeCells,
        setEditMode,
        setInsertMode,
    ]);
    Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () {
        // when we have multiple instances, we try to send the event only to the right one
        // we do a little trick with a global variable (instead of requiring a wrapping context)
        lastFocused = focusRef.current;
        var keyHandler = function (event) {
            if (lastFocused !== focusRef.current)
                return;
            var matchingHandler = handlers.find(function (handler) {
                return handler.hotkeys.some(function (hotkey) { return is_hotkey__WEBPACK_IMPORTED_MODULE_0___default()(hotkey, event); });
            });
            matchingHandler === null || matchingHandler === void 0 ? void 0 : matchingHandler.handler(event);
        };
        document.addEventListener('keydown', keyHandler);
        var focusHandler = function () {
            lastFocused = focusRef.current;
        };
        focusRef.current.addEventListener('click', focusHandler);
        focusRef.current.addEventListener('mouseenter', focusHandler);
        return function () {
            var _a, _b;
            document.removeEventListener('keydown', keyHandler);
            (_a = focusRef.current) === null || _a === void 0 ? void 0 : _a.removeEventListener('mouseenter', focusHandler);
            (_b = focusRef.current) === null || _b === void 0 ? void 0 : _b.removeEventListener('click', focusHandler);
            if (lastFocused === focusRef.current) {
                lastFocused = null;
            }
        };
    }, [handlers, someCellIsFocused, isEditMode, focusRef]);
    return null;
};
/* harmony default export */ __webpack_exports__["default"] = (GlobalHotKeys);
//# sourceMappingURL=GlobalHotKeys.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/components/Row/Droppable/index.js":
/*!************************************************************************!*\
  !*** ../packages/editor/lib-es/core/components/Row/Droppable/index.js ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _Cell_Droppable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../Cell/Droppable */ "../packages/editor/lib-es/core/components/Cell/Droppable/index.js");
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../hooks */ "../packages/editor/lib-es/core/components/hooks/index.js");
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};



var Droppable = function (_a) {
    var children = _a.children, nodeId = _a.nodeId;
    var isLayoutMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useIsLayoutMode"])();
    var isInsertMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_2__["useIsInsertMode"])();
    var _b = __read(Object(_Cell_Droppable__WEBPACK_IMPORTED_MODULE_1__["useCellDrop"])(nodeId), 2), ref = _b[0], isAllowed = _b[1];
    if (!(isLayoutMode || isInsertMode)) {
        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "react-page-row-droppable-container" }, children);
    }
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { ref: ref, className: "react-page-row-droppable" }, children));
};
/* harmony default export */ __webpack_exports__["default"] = (Droppable);
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/components/Row/ResizableRowCell.js":
/*!*************************************************************************!*\
  !*** ../packages/editor/lib-es/core/components/Row/ResizableRowCell.js ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_draggable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-draggable */ "../node_modules/react-draggable/build/cjs/cjs.js");
/* harmony import */ var react_draggable__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_draggable__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_use__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-use */ "../node_modules/react-use/esm/index.js");
/* harmony import */ var _Cell__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Cell */ "../packages/editor/lib-es/core/components/Cell/index.js");
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../hooks */ "../packages/editor/lib-es/core/components/hooks/index.js");
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};





var ResizableRowCell = function (_a) {
    var nodeId = _a.nodeId, rowWidth = _a.rowWidth, rowHasInlineChildrenPosition = _a.rowHasInlineChildrenPosition, isLast = _a.isLast, offset = _a.offset, size = _a.size, maxSize = _a.maxSize;
    var stepWidth = rowWidth / 12; // we're going to keep it a real number to preserve some precision
    var allowResizeInEditMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_4__["useOption"])('allowResizeInEditMode');
    var isResizeMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_4__["useIsResizeMode"])();
    var isEditMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_4__["useIsEditMode"])();
    var isPreviewMode = Object(_hooks__WEBPACK_IMPORTED_MODULE_4__["useIsPreviewMode"])();
    var resize = Object(_hooks__WEBPACK_IMPORTED_MODULE_4__["useResizeCell"])(nodeId);
    var _b = __read(Object(react_use__WEBPACK_IMPORTED_MODULE_2__["useMeasure"])(), 2), ref = _b[0], cellHeight = _b[1].height;
    var cellSpacingY = Object(_hooks__WEBPACK_IMPORTED_MODULE_4__["useCellSpacing"])().y;
    var showResizeHandle = !isPreviewMode &&
        !isLast &&
        (isResizeMode || (allowResizeInEditMode && isEditMode));
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null,
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Cell__WEBPACK_IMPORTED_MODULE_3__["default"], { nodeId: nodeId, measureRef: ref }),
        showResizeHandle ? (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_draggable__WEBPACK_IMPORTED_MODULE_1___default.a, { bounds: {
                top: 0,
                bottom: 0,
                left: Math.round(stepWidth),
                right: Math.round(rowWidth - stepWidth),
            }, position: {
                x: rowHasInlineChildrenPosition === 'right'
                    ? Math.round(stepWidth * (12 - offset))
                    : Math.round(stepWidth * offset),
                y: 0,
            }, axis: "x", onDrag: function (e, data) {
                var diff = Math.round(data.deltaX / stepWidth);
                var newSize = rowHasInlineChildrenPosition === 'right'
                    ? size - diff
                    : size + diff;
                if (newSize > 0 && newSize <= maxSize)
                    resize(newSize);
            }, grid: [Math.round(stepWidth), 0] },
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "resize-handle", style: {
                    // fix floating style
                    height: rowHasInlineChildrenPosition ? cellHeight : 'auto',
                    margin: cellSpacingY !== 0 ? cellSpacingY / 2 + "px 0" : undefined,
                }, onClick: function (e) { return e.stopPropagation(); } }))) : null));
};
/* harmony default export */ __webpack_exports__["default"] = (react__WEBPACK_IMPORTED_MODULE_0___default.a.memo(ResizableRowCell));
//# sourceMappingURL=ResizableRowCell.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/components/Row/index.js":
/*!**************************************************************!*\
  !*** ../packages/editor/lib-es/core/components/Row/index.js ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! classnames */ "../packages/editor/node_modules/classnames/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_use__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-use */ "../node_modules/react-use/esm/index.js");
/* harmony import */ var _types_node__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../types/node */ "../packages/editor/lib-es/core/types/node.js");
/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../hooks */ "../packages/editor/lib-es/core/components/hooks/index.js");
/* harmony import */ var _Droppable__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Droppable */ "../packages/editor/lib-es/core/components/Row/Droppable/index.js");
/* harmony import */ var _ResizableRowCell__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ResizableRowCell */ "../packages/editor/lib-es/core/components/Row/ResizableRowCell.js");
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};
var __spreadArray = (undefined && undefined.__spreadArray) || function (to, from, pack) {
    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
        if (ar || !(i in from)) {
            if (!ar) ar = Array.prototype.slice.call(from, 0, i);
            ar[i] = from[i];
        }
    }
    return to.concat(ar || Array.prototype.slice.call(from));
};







var reduceToIdAndSizeArray = function (acc, node, index, array) {
    var _a, _b;
    var nextNode = array[index + 1];
    var size = Object(_types_node__WEBPACK_IMPORTED_MODULE_3__["isRow"])(node) ? 12 : node.size;
    var nextSize = !nextNode || Object(_types_node__WEBPACK_IMPORTED_MODULE_3__["isRow"])(nextNode) ? 0 : nextNode.size;
    var offset = size + ((_b = (_a = acc[index - 1]) === null || _a === void 0 ? void 0 : _a.offset) !== null && _b !== void 0 ? _b : 0);
    return __spreadArray(__spreadArray([], __read(acc), false), [
        {
            id: node.id,
            size: size,
            maxSize: size + nextSize - 1,
            offset: offset,
        },
    ], false);
};
var Row = function (_a) {
    var _b;
    var nodeId = _a.nodeId;
    var _c = __read(Object(react_use__WEBPACK_IMPORTED_MODULE_2__["useMeasure"])(), 2), ref = _c[0], rowWidth = _c[1].width;
    var hoverPosition = Object(_hooks__WEBPACK_IMPORTED_MODULE_4__["useNodeHoverPosition"])(nodeId);
    var childrenWithOffsets = Object(_hooks__WEBPACK_IMPORTED_MODULE_4__["useNodeProps"])(nodeId, function (node) {
        var _a, _b, _c, _d;
        return Object(_types_node__WEBPACK_IMPORTED_MODULE_3__["isRow"])(node)
            ? (_b = (_a = node.cells) === null || _a === void 0 ? void 0 : _a.reduce(reduceToIdAndSizeArray, [])) !== null && _b !== void 0 ? _b : []
            : (_d = (_c = node.rows) === null || _c === void 0 ? void 0 : _c.reduce(reduceToIdAndSizeArray, [])) !== null && _d !== void 0 ? _d : [];
    });
    var rowHasInlineChildrenPosition = Object(_hooks__WEBPACK_IMPORTED_MODULE_4__["useNodeProps"])(nodeId, function (node) { var _a; return Object(_types_node__WEBPACK_IMPORTED_MODULE_3__["isRow"])(node) && node.cells.length === 2 && ((_a = node.cells[0]) === null || _a === void 0 ? void 0 : _a.inline); });
    var _d = Object(_hooks__WEBPACK_IMPORTED_MODULE_4__["useCellSpacing"])(), cellSpacingX = _d.x, cellSpacingY = _d.y;
    return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_Droppable__WEBPACK_IMPORTED_MODULE_5__["default"], { nodeId: nodeId },
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { ref: ref, className: classnames__WEBPACK_IMPORTED_MODULE_0___default()('react-page-row', {
                'react-page-row-has-floating-children': Boolean(rowHasInlineChildrenPosition),
            }), style: {
                position: 'relative',
                margin: cellSpacingX !== 0 ? "0 " + -cellSpacingX / 2 + "px" : undefined,
            } },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { style: {
                    position: 'absolute',
                    pointerEvents: 'none',
                    top: cellSpacingY / 2 + "px",
                    left: cellSpacingX / 2 + "px",
                    bottom: cellSpacingY / 2 + "px",
                    right: cellSpacingX / 2 + "px",
                }, className: classnames__WEBPACK_IMPORTED_MODULE_0___default()((_b = {
                        'react-page-row-is-hovering-this': Boolean(hoverPosition)
                    },
                    _b["react-page-row-is-hovering-" + (hoverPosition || '')] = Boolean(hoverPosition),
                    _b)) }),
            childrenWithOffsets.map(function (_a, index) {
                var offset = _a.offset, id = _a.id, size = _a.size, maxSize = _a.maxSize;
                return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ResizableRowCell__WEBPACK_IMPORTED_MODULE_6__["default"], { key: id, isLast: index === childrenWithOffsets.length - 1, rowWidth: rowWidth, nodeId: id, rowHasInlineChildrenPosition: rowHasInlineChildrenPosition, offset: offset, size: size, maxSize: maxSize }));
            }))));
};
/* harmony default export */ __webpack_exports__["default"] = (react__WEBPACK_IMPORTED_MODULE_1___default.a.memo(Row));
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/helper/throttle/index.js":
/*!***************************************************************!*\
  !*** ../packages/editor/lib-es/core/helper/throttle/index.js ***!
  \***************************************************************/
/*! exports provided: delay */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "delay", function() { return delay; });
/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../const */ "../packages/editor/lib-es/core/const.js");

var delay = _const__WEBPACK_IMPORTED_MODULE_0__["isProduction"] ? 40 : 60;
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/migrations/serialzeValue.js":
/*!******************************************************************!*\
  !*** ../packages/editor/lib-es/core/migrations/serialzeValue.js ***!
  \******************************************************************/
/*! exports provided: serialzeValue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "serialzeValue", function() { return serialzeValue; });
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __rest = (undefined && undefined.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
var serializeRow = function (r, cellPlugins) {
    return __assign(__assign({}, r), { cells: r.cells.map(function (c) { return serializeCell(c, cellPlugins); }) });
};
var serializeCell = function (c, cellPlugins) {
    var _a;
    var pluginDef = c.plugin;
    var pluginFound = pluginDef
        ? cellPlugins.find(function (p) { return p.id === pluginDef.id; })
        : null;
    var transformData = function (dataIn) {
        return (pluginFound === null || pluginFound === void 0 ? void 0 : pluginFound.serialize) ? pluginFound.serialize(dataIn) : dataIn;
    };
    var dataI18n = c.dataI18n
        ? Object.keys(c.dataI18n).reduce(function (acc, lang) {
            var _a;
            var _b;
            return (__assign(__assign({}, acc), (_a = {}, _a[lang] = transformData((_b = c.dataI18n) === null || _b === void 0 ? void 0 : _b[lang]), _a)));
        }, {})
        : null;
    return __assign(__assign({}, c), { rows: (_a = c.rows) === null || _a === void 0 ? void 0 : _a.map(function (r) { return serializeRow(r, cellPlugins); }), dataI18n: dataI18n });
};
var serialzeValue = function (_a, plugins) {
    var rows = _a.rows, rest = __rest(_a, ["rows"]);
    return __assign(__assign({}, rest), { rows: rows.map(function (c) { return serializeRow(c, plugins); }) });
};
//# sourceMappingURL=serialzeValue.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/service/hover/computeHover.js":
/*!********************************************************************!*\
  !*** ../packages/editor/lib-es/core/service/hover/computeHover.js ***!
  \********************************************************************/
/*! exports provided: classes, computeHover, computeLevel, CALLBACK_LIST */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "classes", function() { return classes; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeHover", function() { return computeHover; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeLevel", function() { return computeLevel; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CALLBACK_LIST", function() { return CALLBACK_LIST; });
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../types */ "../packages/editor/lib-es/core/types/index.js");
/* harmony import */ var _utils_deepEquals__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/deepEquals */ "../packages/editor/lib-es/core/utils/deepEquals.js");
/* harmony import */ var _logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../logger */ "../packages/editor/lib-es/core/service/logger/index.js");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var _a;



/**
 * NO (None): No drop zone.
 *
 * Corners are counted clockwise, beginning top left
 * C1 (Corner top left): Position decided by top left corner function
 * C2 (Corner top right): Position decided by top right corner function
 * C3 (Corner bottom right): Position decided by bottom right corner function
 * C4 (Corner bottom left): Position decided by bottom left corner function
 *
 * Above:
 * AH (Above here): above, same level
 * AA (Above of self or some ancestor): Above, compute active level using classification functions, e.g. log, sin, mx + t
 *
 * Below:
 * BH (Below here)
 * BA (Below of self or some ancestor)
 *
 * Left of:
 * LH (Left of here)
 * LA (Left of self or some ancestor)
 *
 * Right of:
 * RH (Right of here)
 * RA (Right of self or some ancestor)
 *
 * Inside / inline
 * IL (Inline left)
 * IR (Inline right)
 */
var classes = {
    NO: 0,
    C1: 10,
    C2: 11,
    C3: 12,
    C4: 13,
    AH: 200,
    AA: 201,
    BH: 210,
    BA: 211,
    LH: 220,
    LA: 221,
    RH: 230,
    RA: 231,
    IL: 300,
    IR: 301,
};
var c = classes;
/**
 * A list of matrices that are used to define the callback function.
 *
 * @type {{10x10: *[], 10x10-no-inline: *[]}}
 */
var MATRIX_LIST = {
    '10x10': [
        [c.C1, c.AA, c.AA, c.AA, c.AA, c.AA, c.AA, c.AA, c.AA, c.C2],
        [c.LA, c.IL, c.IL, c.IL, c.AH, c.AH, c.IR, c.IR, c.IR, c.RA],
        [c.LA, c.IL, c.IL, c.IL, c.AH, c.AH, c.IR, c.IR, c.IR, c.RA],
        [c.LA, c.IL, c.IL, c.IL, c.AH, c.AH, c.IR, c.IR, c.IR, c.RA],
        [c.LA, c.LH, c.LH, c.LH, c.C1, c.C2, c.RH, c.RH, c.RH, c.RA],
        [c.LA, c.LH, c.LH, c.LH, c.C4, c.C3, c.RH, c.RH, c.RH, c.RA],
        [c.LA, c.LH, c.LH, c.C4, c.BH, c.BH, c.C3, c.IR, c.RH, c.RA],
        [c.LA, c.LH, c.C4, c.BH, c.BH, c.BH, c.BH, c.C3, c.RH, c.RA],
        [c.LA, c.C4, c.BH, c.BH, c.BH, c.BH, c.BH, c.BH, c.C3, c.RA],
        [c.C4, c.BA, c.BA, c.BA, c.BA, c.BA, c.BA, c.BA, c.BA, c.C3],
    ],
    '10x10-no-inline': [
        [c.C1, c.AA, c.AA, c.AA, c.AA, c.AA, c.AA, c.AA, c.AA, c.C2],
        [c.LA, c.C1, c.AH, c.AH, c.AH, c.AH, c.AH, c.AH, c.C2, c.RA],
        [c.LA, c.LH, c.C1, c.AH, c.AH, c.AH, c.AH, c.C2, c.RH, c.RA],
        [c.LA, c.LH, c.LH, c.C1, c.AH, c.AH, c.C2, c.RH, c.RH, c.RA],
        [c.LA, c.LH, c.LH, c.LH, c.C1, c.C2, c.RH, c.RH, c.RH, c.RA],
        [c.LA, c.LH, c.LH, c.LH, c.C4, c.C3, c.RH, c.RH, c.RH, c.RA],
        [c.LA, c.LH, c.LH, c.C4, c.BH, c.BH, c.C3, c.RH, c.RH, c.RA],
        [c.LA, c.LH, c.C4, c.BH, c.BH, c.BH, c.BH, c.C3, c.RH, c.RA],
        [c.LA, c.C4, c.BH, c.BH, c.BH, c.BH, c.BH, c.BH, c.C3, c.RA],
        [c.C4, c.BA, c.BA, c.BA, c.BA, c.BA, c.BA, c.BA, c.BA, c.C3],
    ],
};
/**
 * Computes the average width and height for cells in a room.
 *
 * @param room
 * @param matrix
 * @returns {{x: number, y: number}}
 */
var getRoomScale = function (_a) {
    var room = _a.room, matrix = _a.matrix;
    var rows = matrix.length;
    var cells = matrix[0].length;
    var scalingX = room.width / cells;
    var scalingY = room.height / rows;
    return {
        x: scalingX,
        y: scalingY,
    };
};
/**
 * Returns the index of the hover cell.
 *
 * @param mouse
 * @param scale
 */
var getMouseHoverCell = function (_a) {
    var mouse = _a.mouse, scale = _a.scale;
    return ({
        cell: Math.floor(mouse.x / scale.x),
        row: Math.floor(mouse.y / scale.y),
    });
};
/**
 * Used for caching.
 */
var last = { '10x10': null, '10x10-no-inline': null };
var computeHover = function (drag, hover, actions, _a) {
    var _b, _c;
    var room = _a.room, mouse = _a.mouse, cellPlugins = _a.cellPlugins;
    var allowInlineNeighbours = (_c = (_b = cellPlugins.find(function (p) { return p.id === hover.pluginId; })) === null || _b === void 0 ? void 0 : _b.allowInlineNeighbours) !== null && _c !== void 0 ? _c : false;
    var matrixName = "10x10" + (allowInlineNeighbours ? '' : '-no-inline');
    var matrix = MATRIX_LIST[matrixName];
    var scale = getRoomScale({ room: room, matrix: matrix });
    var hoverCell = getMouseHoverCell({ mouse: mouse, scale: scale });
    var rows = matrix.length;
    var cells = matrix[0].length;
    if (hoverCell.row >= rows) {
        hoverCell.row = rows - 1;
    }
    else if (hoverCell.row < 0) {
        hoverCell.row = 0;
    }
    if (hoverCell.cell >= cells) {
        hoverCell.cell = cells - 1;
    }
    else if (hoverCell.cell < 0) {
        hoverCell.cell = 0;
    }
    var cell = matrix[hoverCell.row][hoverCell.cell];
    if (!CALLBACK_LIST[cell]) {
        _logger__WEBPACK_IMPORTED_MODULE_2__["default"].error('Matrix callback not found.', {
            room: room,
            mouse: mouse,
            matrix: matrix,
            scale: scale,
            hoverCell: hoverCell,
            rows: rows,
            cells: cells,
        });
        return;
    }
    var all = {
        item: drag.id,
        hover: hover.id,
        actions: actions,
        ctx: {
            room: room,
            mouse: mouse,
            position: hoverCell,
            size: { rows: rows, cells: cells },
            scale: scale,
        },
    };
    if (Object(_utils_deepEquals__WEBPACK_IMPORTED_MODULE_1__["default"])(all, last[matrixName])) {
        return;
    }
    last[matrixName] = all;
    return CALLBACK_LIST[cell](drag, hover, actions, {
        room: room,
        mouse: mouse,
        position: hoverCell,
        size: { rows: rows, cells: cells },
        cellPlugins: cellPlugins,
        scale: scale,
    });
};
/**
 * Return the mouse position relative to the cell.
 */
var relativeMousePosition = function (_a) {
    var mouse = _a.mouse, position = _a.position, scale = _a.scale;
    return ({
        x: Math.round(mouse.x - position.cell * scale.x),
        y: Math.round(mouse.y - position.row * scale.y),
    });
};
/**
 * Computes the drop level based on the mouse position and the cell width.
 */
var computeLevel = function (_a) {
    var size = _a.size, levels = _a.levels, position = _a.position;
    if (size <= (levels + 1) * 2) {
        return Math.round(position / (size / levels));
    }
    var spare = size - (levels + 1) * 2;
    var steps = [0];
    var current = spare;
    for (var i = 0; i <= levels; i++) {
        steps.push(steps[i] + current / 2);
        current /= 2;
        if (position >= steps[i] + i * 2 && position < steps[i + 1] + (i + 1) * 2) {
            return i;
        }
    }
    return levels;
};
/**
 * Computes the horizontal drop level based on the mouse position.
 *
 * @param mouse
 * @param position
 * @param hover
 * @param scale
 * @param level
 * @param inv returns the inverse drop level. Usually true for left and above drop level computation.
 * @returns number
 */
var computeHorizontal = function (_a, inv) {
    var mouse = _a.mouse, position = _a.position, hover = _a.hover, scale = _a.scale, level = _a.level;
    if (inv === void 0) { inv = false; }
    var x = relativeMousePosition({ mouse: mouse, position: position, scale: scale }).x;
    var at = computeLevel({ size: scale.x, position: x, levels: level });
    if (Object(_types__WEBPACK_IMPORTED_MODULE_0__["isRow"])(hover)) {
        // Is row, always opt for lowest level
        return level;
    }
    // If the hovered element is an inline element, level 0 would be directly besides it which doesn't work.
    // Set it to 1 instead.
    if (hover.inline && at === 0) {
        at = 1;
    }
    return inv ? level - at : at;
};
/**
 * Computes the vertical drop level based on the mouse position.
 *
 * @returns number
 */
var computeVertical = function (_a, inv) {
    var level = _a.level, mouse = _a.mouse, hover = _a.hover, position = _a.position, scale = _a.scale;
    if (inv === void 0) { inv = false; }
    var y = relativeMousePosition({ mouse: mouse, position: position, scale: scale }).y;
    var at = computeLevel({ size: scale.y, position: y, levels: level });
    if (Object(_types__WEBPACK_IMPORTED_MODULE_0__["isRow"])(hover)) {
        // Is row, always opt for lowest level
        return level;
    }
    // If the hovered element is an inline element, level 0 would be directly besides it which doesn't work.
    // Set it to 1 instead.
    if (hover.inline && at === 0) {
        at = 1;
    }
    return inv ? level - at : at;
};
var getDropLevel = function (hover) {
    return !Object(_types__WEBPACK_IMPORTED_MODULE_0__["isRow"])(hover) && hover.inline ? 1 : 0;
};
/**
 * A list of callbacks.
 */
var CALLBACK_LIST = (_a = {},
    _a[c.NO] = function (item, hover, _a) {
        var clear = _a.clear;
        return clear();
    },
    /* corners */
    _a[c.C1] = function (item, hover, _a, ctx) {
        var leftOf = _a.leftOf, above = _a.above;
        var mouse = relativeMousePosition(ctx);
        var level = getDropLevel(hover);
        if (mouse.x < mouse.y) {
            return leftOf(item, hover, { level: level });
        }
        above(item, hover, { level: level });
    },
    _a[c.C2] = function (item, hover, _a, ctx) {
        var rightOf = _a.rightOf, above = _a.above;
        var mouse = relativeMousePosition(ctx);
        var level = getDropLevel(hover);
        if (mouse.x > mouse.y) {
            return rightOf(item, hover, { level: level });
        }
        above(item, hover, { level: level });
    },
    _a[c.C3] = function (item, hover, _a, ctx) {
        var rightOf = _a.rightOf, below = _a.below;
        var mouse = relativeMousePosition(ctx);
        var level = getDropLevel(hover);
        if (mouse.x > mouse.y) {
            return rightOf(item, hover, { level: level });
        }
        below(item, hover, { level: level });
    },
    _a[c.C4] = function (item, hover, _a, ctx) {
        var leftOf = _a.leftOf, below = _a.below;
        var mouse = relativeMousePosition(ctx);
        var level = getDropLevel(hover);
        if (mouse.x < mouse.y) {
            return leftOf(item, hover, { level: level });
        }
        below(item, hover, { level: level });
    },
    /* heres */
    _a[c.AH] = function (item, hover, _a) {
        var above = _a.above;
        var level = getDropLevel(hover);
        above(item, hover, { level: level });
    },
    _a[c.BH] = function (item, hover, _a) {
        var below = _a.below;
        var level = getDropLevel(hover);
        below(item, hover, { level: level });
    },
    _a[c.LH] = function (item, hover, _a) {
        var leftOf = _a.leftOf;
        var level = getDropLevel(hover);
        leftOf(item, hover, { level: level });
    },
    _a[c.RH] = function (item, hover, _a) {
        var rightOf = _a.rightOf;
        var level = getDropLevel(hover);
        rightOf(item, hover, { level: level });
    },
    /* ancestors */
    _a[c.AA] = function (item, hover, _a, ctx) {
        var above = _a.above;
        return above(item, hover, {
            level: computeVertical(__assign(__assign({}, ctx), { hover: hover, level: hover.levels.above }), true),
        });
    },
    _a[c.BA] = function (item, hover, _a, ctx) {
        var below = _a.below;
        return below(item, hover, {
            level: computeVertical(__assign(__assign({}, ctx), { hover: hover, level: hover.levels.below })),
        });
    },
    _a[c.LA] = function (item, hover, _a, ctx) {
        var leftOf = _a.leftOf;
        return leftOf(item, hover, {
            level: computeHorizontal(__assign(__assign({}, ctx), { hover: hover, level: hover.levels.left }), true),
        });
    },
    _a[c.RA] = function (item, hover, _a, ctx) {
        var rightOf = _a.rightOf;
        return rightOf(item, hover, {
            level: computeHorizontal(__assign(__assign({}, ctx), { hover: hover, level: hover.levels.right })),
        });
    },
    /* inline */
    _a[c.IL] = function (item, hover, _a, _b) {
        var _c;
        var inlineLeft = _a.inlineLeft, leftOf = _a.leftOf;
        var cellPlugins = _b.cellPlugins;
        if (Object(_types__WEBPACK_IMPORTED_MODULE_0__["isRow"])(item) || Object(_types__WEBPACK_IMPORTED_MODULE_0__["isRow"])(hover)) {
            return;
        }
        var inline = hover.inline, hasInlineNeighbour = hover.hasInlineNeighbour;
        var plugin = cellPlugins.find(function (p) {
            var _a;
            return p.id ===
                (typeof item.plugin === 'string' ? item.plugin : (_a = item.plugin) === null || _a === void 0 ? void 0 : _a.id);
        });
        var isInlineable = (_c = plugin === null || plugin === void 0 ? void 0 : plugin.isInlineable) !== null && _c !== void 0 ? _c : false;
        if (inline || !isInlineable) {
            return leftOf(item, hover, { level: 2 });
        }
        if (hasInlineNeighbour && hasInlineNeighbour !== item.id) {
            return leftOf(item, hover, { level: 2 });
        }
        if (hasInlineNeighbour &&
            hasInlineNeighbour === item.id &&
            item.inline === 'left') {
            return leftOf(item, hover, { level: 2 });
        }
        inlineLeft(item, hover);
    },
    _a[c.IR] = function (item, hover, _a, _b) {
        var _c;
        var inlineRight = _a.inlineRight, rightOf = _a.rightOf;
        var cellPlugins = _b.cellPlugins;
        if (Object(_types__WEBPACK_IMPORTED_MODULE_0__["isRow"])(item) || Object(_types__WEBPACK_IMPORTED_MODULE_0__["isRow"])(hover)) {
            return;
        }
        var inline = hover.inline, hasInlineNeighbour = hover.hasInlineNeighbour;
        var plugin = cellPlugins.find(function (p) {
            var _a;
            return p.id ===
                (typeof item.plugin === 'string' ? item.plugin : (_a = item.plugin) === null || _a === void 0 ? void 0 : _a.id);
        });
        var isInlineable = (_c = plugin === null || plugin === void 0 ? void 0 : plugin.isInlineable) !== null && _c !== void 0 ? _c : false;
        if (inline || !isInlineable) {
            return rightOf(item, hover, { level: 2 });
        }
        if (hasInlineNeighbour && hasInlineNeighbour !== item.id) {
            return rightOf(item, hover, { level: 2 });
        }
        if (hasInlineNeighbour &&
            hasInlineNeighbour === item.id &&
            item.inline === 'right') {
            return rightOf(item, hover, { level: 2 });
        }
        inlineRight(item, hover);
    },
    _a);
//# sourceMappingURL=computeHover.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/service/hover/input.js":
/*!*************************************************************!*\
  !*** ../packages/editor/lib-es/core/service/hover/input.js ***!
  \*************************************************************/
/*! exports provided: computeAndDispatchInsert, computeAndDispatchHover */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeAndDispatchInsert", function() { return computeAndDispatchInsert; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeAndDispatchHover", function() { return computeAndDispatchHover; });
/* harmony import */ var _computeHover__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./computeHover */ "../packages/editor/lib-es/core/service/hover/computeHover.js");

var computeCurrentDropPosition = function (actions, hover, drag, monitor, element, cellPlugins) {
    var mousePosition = monitor.getClientOffset();
    var componentPosition = element.getBoundingClientRect();
    var room = {
        height: componentPosition.bottom - componentPosition.top,
        width: componentPosition.right - componentPosition.left,
    };
    var mouse = {
        y: mousePosition.y - componentPosition.top,
        x: mousePosition.x - componentPosition.left,
    };
    Object(_computeHover__WEBPACK_IMPORTED_MODULE_0__["computeHover"])(drag, hover, actions, {
        room: room,
        mouse: mouse,
        cellPlugins: cellPlugins,
    });
};
var computeAndDispatchInsert = function (hover, drag, monitor, element, actions, cellPlugins) {
    return computeCurrentDropPosition(actions, hover, drag, monitor, element, cellPlugins);
};
var computeAndDispatchHover = function (hover, drag, monitor, element, actions, cellPlugins) {
    return computeCurrentDropPosition(actions, hover, drag, monitor, element, cellPlugins);
};
//# sourceMappingURL=input.js.map

/***/ }),

/***/ "../packages/editor/lib-es/core/service/logger/index.js":
/*!**************************************************************!*\
  !*** ../packages/editor/lib-es/core/service/logger/index.js ***!
  \**************************************************************/
/*! exports provided: Logger, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Logger", function() { return Logger; });
// tslint:disable:no-console
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};
var __spreadArray = (undefined && undefined.__spreadArray) || function (to, from, pack) {
    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
        if (ar || !(i in from)) {
            if (!ar) ar = Array.prototype.slice.call(from, 0, i);
            ar[i] = from[i];
        }
    }
    return to.concat(ar || Array.prototype.slice.call(from));
};
var trace = function () {
    var e = new Error('dummy');
    return e.stack
        .replace(/^[^(]+?[\n$]/gm, '')
        .replace(/^\s+at\s+/gm, '')
        .replace(/^Object.<anonymous>\s*\(/gm, '{anonymous}()@')
        .split('\n');
};
var Logger = /** @class */ (function () {
    function Logger() {
    }
    /**
     * Logs a warning. Warnings are things that are exceptional, but easily to recover from.
     */
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    Logger.prototype.warn = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        console.warn.apply(console, __spreadArray(['Warning:'], __read(args), false));
    };
    /**
     * Logs a debug message. Debug messages are things that help developers debugging things.
     */
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    Logger.prototype.debug = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        console.log.apply(console, __spreadArray(['Debug:'], __read(args), false));
    };
    /**
     * Logs an info. Infos are things that might be interesting for someone who needs to take a closer look.
     */
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    Logger.prototype.info = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        console.log.apply(console, __spreadArray(['Info:'], __read(args), false));
    };
    /**
     * Logs an error. Error are things that are exceptional, but can be recovered from.
     */
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    Logger.prototype.error = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        console.error.apply(console, __spreadArray(['Error:'], __read(args), false));
        console.error('Trace:', trace());
    };
    /**
     * Logs a fatal error. Fatal errors are things that are exceptional and can not be recovered from.
     */
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    Logger.prototype.fatal = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        console.error.apply(console, __spreadArray(['Fatal:'], __read(args), false));
        console.error('Trace:', trace());
        throw new Error(args.join(' '));
    };
    /**
     * Logs a message.
     */
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    Logger.prototype.log = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        console.log.apply(console, __spreadArray(['Fatal:'], __read(args), false));
        console.log('Trace:', trace());
    };
    return Logger;
}());

var instance = new Logger();
/* harmony default export */ __webpack_exports__["default"] = (instance);
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../packages/editor/lib-es/editor/EditableEditor.js":
/*!**********************************************************!*\
  !*** ../packages/editor/lib-es/editor/EditableEditor.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _core_components_Editable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/components/Editable */ "../packages/editor/lib-es/core/components/Editable/index.js");
/* harmony import */ var _core_components_HotKey_GlobalHotKeys__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/components/HotKey/GlobalHotKeys */ "../packages/editor/lib-es/core/components/HotKey/GlobalHotKeys.js");
/* harmony import */ var _core_EditorStore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/EditorStore */ "../packages/editor/lib-es/core/EditorStore.js");
/* harmony import */ var _core_Provider__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/Provider */ "../packages/editor/lib-es/core/Provider/index.js");
/* harmony import */ var _ui_EditorUI__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../ui/EditorUI */ "../packages/editor/lib-es/ui/EditorUI/index.js");
/* harmony import */ var _StickyWrapper__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./StickyWrapper */ "../packages/editor/lib-es/editor/StickyWrapper.js");







var EditableEditor = function (_a) {
    var value = _a.value, lang = _a.lang, children = _a.children, options = _a.options, renderOptions = _a.renderOptions, callbacks = _a.callbacks;
    var theValue = value || Object(_core_EditorStore__WEBPACK_IMPORTED_MODULE_3__["createEmptyState"])();
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_core_Provider__WEBPACK_IMPORTED_MODULE_4__["default"], { lang: lang, callbacks: callbacks, value: theValue, renderOptions: renderOptions, options: options },
        children,
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_StickyWrapper__WEBPACK_IMPORTED_MODULE_6__["default"], null, function (stickyNess) { return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_core_components_HotKey_GlobalHotKeys__WEBPACK_IMPORTED_MODULE_2__["default"], { focusRef: stickyNess.focusRef }),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_core_components_Editable__WEBPACK_IMPORTED_MODULE_1__["default"], null),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_ui_EditorUI__WEBPACK_IMPORTED_MODULE_5__["default"], { stickyNess: stickyNess }))); })));
};
/* harmony default export */ __webpack_exports__["default"] = (EditableEditor);
//# sourceMappingURL=EditableEditor.js.map

/***/ }),

/***/ "../packages/editor/lib-es/editor/StickyWrapper.js":
/*!*********************************************************!*\
  !*** ../packages/editor/lib-es/editor/StickyWrapper.js ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(global) {/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
var __read = (undefined && undefined.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};

var StickyWrapper = function (_a) {
    var children = _a.children;
    var ref = react__WEBPACK_IMPORTED_MODULE_0___default.a.createRef();
    var stickyElRef = react__WEBPACK_IMPORTED_MODULE_0___default.a.createRef();
    var _b = __read(Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(false), 2), shouldStickToTop = _b[0], setShouldStickToTop = _b[1];
    var _c = __read(Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(true), 2), shouldStickToBottom = _c[0], setShouldStickToBottom = _c[1];
    var _d = __read(Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(0), 2), rightOffset = _d[0], setRightOffset = _d[1];
    react__WEBPACK_IMPORTED_MODULE_0___default.a.useEffect(function () {
        var calc = function () {
            if (ref.current) {
                var _a = ref.current.getBoundingClientRect(), top_1 = _a.top, left = _a.left;
                var bottom = top_1 + ref.current.clientHeight;
                // document.documentElement.clientWidth is without scrollbars, so better for us
                var right = document.documentElement.clientWidth - left - ref.current.clientWidth;
                var uiHeight = stickyElRef.current
                    ? stickyElRef.current.clientHeight
                    : 400;
                setRightOffset(right);
                setShouldStickToTop(top_1 > window.innerHeight - uiHeight);
                setShouldStickToBottom(bottom < window.innerHeight);
            }
        };
        document.addEventListener('scroll', calc);
        window.addEventListener('resize', calc);
        var observer = null;
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        if (global.IntersectionObserver) {
            observer = new IntersectionObserver(calc);
            if (ref.current) {
                observer.observe(ref.current);
            }
        }
        // do it once
        calc();
        return function () {
            document.removeEventListener('scroll', calc);
            window.removeEventListener('resize', calc);
            observer === null || observer === void 0 ? void 0 : observer.disconnect();
        };
    }, [ref, stickyElRef]);
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { style: { position: 'relative' }, ref: ref }, children({
        rightOffset: rightOffset,
        stickyElRef: stickyElRef,
        focusRef: ref,
        shouldStickToTop: shouldStickToTop,
        shouldStickToBottom: shouldStickToBottom,
    })));
};
/* harmony default export */ __webpack_exports__["default"] = (StickyWrapper);
//# sourceMappingURL=StickyWrapper.js.map
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../node_modules/next/dist/compiled/webpack/global.js */ "../node_modules/next/dist/compiled/webpack/global.js")))

/***/ }),

/***/ "../packages/editor/lib-es/ui/EditorUI/index.js":
/*!******************************************************!*\
  !*** ../packages/editor/lib-es/ui/EditorUI/index.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _ThemeProvider__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ThemeProvider */ "../packages/editor/lib-es/ui/ThemeProvider/index.js");
/* harmony import */ var _PluginDrawer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../PluginDrawer */ "../packages/editor/lib-es/ui/PluginDrawer/index.js");
/* harmony import */ var _Trash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Trash */ "../packages/editor/lib-es/ui/Trash/index.js");
/* harmony import */ var _Sidebar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Sidebar */ "../packages/editor/lib-es/ui/Sidebar/index.js");
/* harmony import */ var _core_components_hooks__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/components/hooks */ "../packages/editor/lib-es/core/components/hooks/index.js");
/* harmony import */ var _MultiNodesBottomToolbar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../MultiNodesBottomToolbar */ "../packages/editor/lib-es/ui/MultiNodesBottomToolbar/index.js");







/* harmony default export */ __webpack_exports__["default"] = (react__WEBPACK_IMPORTED_MODULE_0___default.a.memo(function (_a) {
    var _b = _a.stickyNess, stickyNess = _b === void 0 ? {
        shouldStickToTop: false,
        shouldStickToBottom: false,
        rightOffset: 0,
    } : _b;
    var hideEditorSidebar = Object(_core_components_hooks__WEBPACK_IMPORTED_MODULE_5__["useOption"])('hideEditorSidebar');
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_ThemeProvider__WEBPACK_IMPORTED_MODULE_1__["ThemeProvider"], null,
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Trash__WEBPACK_IMPORTED_MODULE_3__["Trash"], null),
        !hideEditorSidebar && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Sidebar__WEBPACK_IMPORTED_MODULE_4__["Sidebar"], { stickyNess: stickyNess }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_PluginDrawer__WEBPACK_IMPORTED_MODULE_2__["PluginDrawer"], null),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_MultiNodesBottomToolbar__WEBPACK_IMPORTED_MODULE_6__["MultiNodesBottomToolbar"], null)));
}));
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "../packages/editor/lib-es/ui/MultiNodesBottomToolbar/DeleteAll.js":
/*!*************************************************************************!*\
  !*** ../packages/editor/lib-es/ui/MultiNodesBottomToolbar/DeleteAll.js ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @material-ui/core */ "../node_modules/@material-ui/core/esm/index.js");
/* harmony import */ var _material_ui_icons_Delete__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @material-ui/icons/Delete */ "../node_modules/@material-ui/icons/Delete.js");
/* harmony import */ var _material_ui_icons_Delete__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_Delete__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _core_components_hooks__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/components/hooks */ "../packages/editor/lib-es/core/components/hooks/index.js");




var DeleteAll = function () {
    var remove = Object(_core_components_hooks__WEBPACK_IMPORTED_MODULE_3__["useRemoveMultipleNodeIds"])();
    var focused = Object(_core_components_hooks__WEBPACK_IMPORTED_MODULE_3__["useAllFocusedNodeIds"])();
    var t = Object(_core_components_hooks__WEBPACK_IMPORTED_MODULE_3__["useUiTranslator"])().t;
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_1__["Tooltip"], { title: t('Remove all selected') },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_1__["IconButton"], { onClick: function () { return remove(focused); }, "aria-label": "delete", color: "secondary" },
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_material_ui_icons_Delete__WEBPACK_IMPORTED_MODULE_2___default.a, null))));
};
/* harmony default export */ __webpack_exports__["default"] = (DeleteAll);
//# sourceMappingURL=DeleteAll.js.map

/***/ }),

/***/ "../packages/editor/lib-es/ui/MultiNodesBottomToolbar/DuplicateAll.js":
/*!****************************************************************************!*\
  !*** ../packages/editor/lib-es/ui/MultiNodesBottomToolbar/DuplicateAll.js ***!
  \****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @material-ui/core */ "../node_modules/@material-ui/core/esm/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _core_components_hooks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/components/hooks */ "../packages/editor/lib-es/core/components/hooks/index.js");
/* harmony import */ var _material_ui_icons_FileCopy__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @material-ui/icons/FileCopy */ "../node_modules/@material-ui/icons/FileCopy.js");
/* harmony import */ var _material_ui_icons_FileCopy__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_material_ui_icons_FileCopy__WEBPACK_IMPORTED_MODULE_3__);




var DuplicateAll = function () {
    var duplicate = Object(_core_components_hooks__WEBPACK_IMPORTED_MODULE_2__["useDuplicateMultipleCells"])();
    var t = Object(_core_components_hooks__WEBPACK_IMPORTED_MODULE_2__["useUiTranslator"])().t;
    var nodeIds = Object(_core_components_hooks__WEBPACK_IMPORTED_MODULE_2__["useAllFocusedNodeIds"])();
    return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_0__["Tooltip"], { title: t('Duplicate al') },
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_0__["IconButton"], { onClick: function () { return duplicate(nodeIds); }, "aria-label": "delete", color: "default" },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_icons_FileCopy__WEBPACK_IMPORTED_MODULE_3___default.a, null))));
};
/* harmony default export */ __webpack_exports__["default"] = (DuplicateAll);
//# sourceMappingURL=DuplicateAll.js.map

/***/ }),

/***/ "../packages/editor/lib-es/ui/MultiNodesBottomToolbar/index.js":
/*!*********************************************************************!*\
  !*** ../packages/editor/lib-es/ui/MultiNodesBottomToolbar/index.js ***!
  \*********************************************************************/
/*! exports provided: MultiNodesBottomToolbar */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MultiNodesBottomToolbar", function() { return MultiNodesBottomToolbar; });
/* harmony import */ var _material_ui_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @material-ui/core */ "../node_modules/@material-ui/core/esm/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "../node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _core_components_hooks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/components/hooks */ "../packages/editor/lib-es/core/components/hooks/index.js");
/* harmony import */ var _BottomToolbar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../BottomToolbar */ "../packages/editor/lib-es/ui/BottomToolbar/index.js");
/* harmony import */ var _DeleteAll__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./DeleteAll */ "../packages/editor/lib-es/ui/MultiNodesBottomToolbar/DeleteAll.js");
/* harmony import */ var _DuplicateAll__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./DuplicateAll */ "../packages/editor/lib-es/ui/MultiNodesBottomToolbar/DuplicateAll.js");






var MultiNodesBottomToolbar = react__WEBPACK_IMPORTED_MODULE_1___default.a.memo(function () {
    var t = Object(_core_components_hooks__WEBPACK_IMPORTED_MODULE_2__["useUiTranslator"])().t;
    var focusedNodeIds = Object(_core_components_hooks__WEBPACK_IMPORTED_MODULE_2__["useAllFocusedNodeIds"])();
    return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_BottomToolbar__WEBPACK_IMPORTED_MODULE_3__["BottomToolbarDrawer"], { open: focusedNodeIds.length > 1, anchor: 'bottom' },
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_0__["Grid"], { container: true, direction: "row", alignItems: "center" },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_0__["Grid"], { item: true },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_0__["Avatar"], { children: focusedNodeIds.length, style: {
                        marginRight: 16,
                    } })),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_0__["Grid"], { item: true },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_0__["Typography"], { variant: "subtitle1" }, t('(multiple selected)'))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_0__["Grid"], { item: true, style: { marginLeft: 'auto' } },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_DuplicateAll__WEBPACK_IMPORTED_MODULE_5__["default"], null)),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_material_ui_core__WEBPACK_IMPORTED_MODULE_0__["Grid"], { item: true },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_DeleteAll__WEBPACK_IMPORTED_MODULE_4__["default"], null)))));
});
//# sourceMappingURL=index.js.map

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9AeG9ib3R5aS9zY3JvbGxiYXItd2lkdGgvZGlzdC9pbmRleC5lc20uanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvY29weS10by1jbGlwYm9hcmQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvZmFzdC1kZWVwLWVxdWFsL3JlYWN0LmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL2Zhc3Qtc2hhbGxvdy1lcXVhbC9pbmRleC5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9pcy1ob3RrZXkvbGliL2luZGV4LmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL2pzLWNvb2tpZS9zcmMvanMuY29va2llLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL2xvZGFzaC50aHJvdHRsZS9pbmRleC5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9uYW5vLWNzcy9hZGRvbi9fX2Rldl9fL3dhcm5Pbk1pc3NpbmdEZXBlbmRlbmNpZXMuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvbmFuby1jc3MvYWRkb24vY3Nzb20uanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvbmFuby1jc3MvYWRkb24vdmNzc29tLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL25hbm8tY3NzL2FkZG9uL3Zjc3NvbS9jc3NUb1RyZWUuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvbmFuby1jc3MvYWRkb24vdmNzc29tL3JlbW92ZVJ1bGUuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvbmFuby1jc3MvaW5kZXguanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtZHJhZ2dhYmxlL2J1aWxkL2Nqcy9EcmFnZ2FibGUuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtZHJhZ2dhYmxlL2J1aWxkL2Nqcy9EcmFnZ2FibGVDb3JlLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWRyYWdnYWJsZS9idWlsZC9janMvY2pzLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWRyYWdnYWJsZS9idWlsZC9janMvdXRpbHMvZG9tRm5zLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWRyYWdnYWJsZS9idWlsZC9janMvdXRpbHMvZ2V0UHJlZml4LmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWRyYWdnYWJsZS9idWlsZC9janMvdXRpbHMvbG9nLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWRyYWdnYWJsZS9idWlsZC9janMvdXRpbHMvcG9zaXRpb25GbnMuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtZHJhZ2dhYmxlL2J1aWxkL2Nqcy91dGlscy9zaGltcy5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1kcmFnZ2FibGUvbm9kZV9tb2R1bGVzL2NsYXNzbmFtZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdW5pdmVyc2FsLWludGVyZmFjZS9saWIvYWRkQ2xhc3NEZWNvcmF0b3JTdXBwb3J0LmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVuaXZlcnNhbC1pbnRlcmZhY2UvbGliL2NyZWF0ZUVuaGFuY2VyLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVuaXZlcnNhbC1pbnRlcmZhY2UvbGliL2hvb2tUb1JlbmRlclByb3AuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdW5pdmVyc2FsLWludGVyZmFjZS9saWIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdW5pdmVyc2FsLWludGVyZmFjZS9saWIvcmVuZGVyLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVuaXZlcnNhbC1pbnRlcmZhY2UvbGliL3dyYXBJblN0YXRlZnVsQ29tcG9uZW50LmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vZmFjdG9yeS9jcmVhdGVCcmVha3BvaW50LmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vZmFjdG9yeS9jcmVhdGVHbG9iYWxTdGF0ZS5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL2ZhY3RvcnkvY3JlYXRlSFRNTE1lZGlhSG9vay5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL2ZhY3RvcnkvY3JlYXRlTWVtby5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL2ZhY3RvcnkvY3JlYXRlUmVkdWNlci5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL2ZhY3RvcnkvY3JlYXRlUmVkdWNlckNvbnRleHQuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS9mYWN0b3J5L2NyZWF0ZVN0YXRlQ29udGV4dC5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL2luZGV4LmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vbWlzYy9ob29rU3RhdGUuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS9taXNjL2lzRGVlcEVxdWFsLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vbWlzYy9wYXJzZVRpbWVSYW5nZXMuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS9taXNjL3V0aWwuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VBc3luYy5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZUFzeW5jRm4uanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VBc3luY1JldHJ5LmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlQXVkaW8uanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VCYXR0ZXJ5LmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlQmVmb3JlVW5sb2FkLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlQm9vbGVhbi5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZUNsaWNrQXdheS5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZUNvb2tpZS5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZUNvcHlUb0NsaXBib2FyZC5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZUNvdW50ZXIuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VDc3MuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VDdXN0b21Db21wYXJlRWZmZWN0LmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlRGVib3VuY2UuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VEZWVwQ29tcGFyZUVmZmVjdC5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZURlZmF1bHQuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VEcm9wLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlRHJvcEFyZWEuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VFZmZlY3RPbmNlLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlRW5zdXJlZEZvcndhcmRlZFJlZi5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZUVycm9yLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlRXZlbnQuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VGYXZpY29uLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlRmlyc3RNb3VudFN0YXRlLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlRnVsbHNjcmVlbi5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZUdlb2xvY2F0aW9uLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlR2V0U2V0LmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlR2V0U2V0U3RhdGUuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VIYXJtb25pY0ludGVydmFsRm4uanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VIYXNoLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlSG92ZXIuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VIb3ZlckRpcnR5LmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlSWRsZS5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZUludGVyc2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZUludGVydmFsLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdC5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZUtleS5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZUtleVByZXNzLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlS2V5UHJlc3NFdmVudC5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZUxhdGVzdC5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZUxpZmVjeWNsZXMuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VMaXN0LmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlTG9jYWxTdG9yYWdlLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlTG9jYXRpb24uanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VMb2NrQm9keVNjcm9sbC5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZUxvZ2dlci5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZUxvbmdQcmVzcy5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZU1hcC5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZU1lYXN1cmUuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VNZWRpYS5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZU1lZGlhRGV2aWNlcy5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZU1lZGlhdGVkU3RhdGUuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VNZXRob2RzLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlTW90aW9uLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlTW91bnQuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VNb3VudGVkU3RhdGUuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VNb3VzZS5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZU1vdXNlSG92ZXJlZC5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZU1vdXNlV2hlZWwuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VNdWx0aVN0YXRlVmFsaWRhdG9yLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlTmV0d29ya1N0YXRlLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlTnVtYmVyLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZU9yaWVudGF0aW9uLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlUGFnZUxlYXZlLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlUGVybWlzc2lvbi5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZVByZXZpb3VzLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlUHJldmlvdXNEaXN0aW5jdC5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZVByb21pc2UuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VRdWV1ZS5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZVJhZi5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZVJhZkxvb3AuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VSYWZTdGF0ZS5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZVJlbmRlcnNDb3VudC5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZVNjcmF0Y2guanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VTY3JvbGwuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VTY3JvbGxiYXJXaWR0aC5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZVNjcm9sbGluZy5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZVNlYXJjaFBhcmFtLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlU2Vzc2lvblN0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VTZXQuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VTZXRTdGF0ZS5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZVNoYWxsb3dDb21wYXJlRWZmZWN0LmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlU2l6ZS5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZVNsaWRlci5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZVNwZWVjaC5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZVN0YXJ0VHlwaW5nLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlU3RhdGVMaXN0LmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlU3RhdGVWYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VTdGF0ZVdpdGhIaXN0b3J5LmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlVGhyb3R0bGUuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VUaHJvdHRsZUZuLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlVGltZW91dC5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZVRpbWVvdXRGbi5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy9yZWFjdC11c2UvZXNtL3VzZVRpdGxlLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlVG9nZ2xlLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlVHdlZW4uanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VVbm1vdW50LmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlVW5tb3VudFByb21pc2UuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VVcGRhdGUuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VVcGRhdGVFZmZlY3QuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VVcHNlcnQuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VWaWJyYXRlLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXVzZS9lc20vdXNlVmlkZW8uanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VXaW5kb3dTY3JvbGwuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMvcmVhY3QtdXNlL2VzbS91c2VXaW5kb3dTaXplLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3NjcmVlbmZ1bGwvZGlzdC9zY3JlZW5mdWxsLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3NldC1oYXJtb25pYy1pbnRlcnZhbC9saWIvaW5kZXguZXNtLmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3Rocm90dGxlLWRlYm91bmNlL2VzbS9pbmRleC5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy90b2dnbGUtc2VsZWN0aW9uL2luZGV4LmpzIiwid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3RzLWVhc2luZy9saWIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9wYWNrYWdlcy9lZGl0b3IvbGliLWVzL2NvcmUvUHJvdmlkZXIvQ2FsbGJhY2tzUHJvdmlkZXIuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9wYWNrYWdlcy9lZGl0b3IvbGliLWVzL2NvcmUvUHJvdmlkZXIvRG5kUHJvdmlkZXIuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9wYWNrYWdlcy9lZGl0b3IvbGliLWVzL2NvcmUvUHJvdmlkZXIvRWRpdG9yU3RvcmVQcm92aWRlci5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL3BhY2thZ2VzL2VkaXRvci9saWItZXMvY29yZS9Qcm92aWRlci9PcHRpb25zUHJvdmlkZXIuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9wYWNrYWdlcy9lZGl0b3IvbGliLWVzL2NvcmUvUHJvdmlkZXIvUmVuZGVyT3B0aW9uc1Byb3ZpZGVyLmpzIiwid2VicGFjazovL19OX0UvLi4vcGFja2FnZXMvZWRpdG9yL2xpYi1lcy9jb3JlL1Byb3ZpZGVyL2luZGV4LmpzIiwid2VicGFjazovL19OX0UvLi4vcGFja2FnZXMvZWRpdG9yL2xpYi1lcy9jb3JlL2NvbXBvbmVudHMvQmx1ckdhdGUuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9wYWNrYWdlcy9lZGl0b3IvbGliLWVzL2NvcmUvY29tcG9uZW50cy9DZWxsL0RyYWdnYWJsZS9pbmRleC5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL3BhY2thZ2VzL2VkaXRvci9saWItZXMvY29yZS9jb21wb25lbnRzL0NlbGwvRHJvcHBhYmxlL2hlbHBlci9kbmQuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9wYWNrYWdlcy9lZGl0b3IvbGliLWVzL2NvcmUvY29tcG9uZW50cy9DZWxsL0Ryb3BwYWJsZS9pbmRleC5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL3BhY2thZ2VzL2VkaXRvci9saWItZXMvY29yZS9jb21wb25lbnRzL0NlbGwvRXJyb3JDZWxsL2luZGV4LmpzIiwid2VicGFjazovL19OX0UvLi4vcGFja2FnZXMvZWRpdG9yL2xpYi1lcy9jb3JlL2NvbXBvbmVudHMvQ2VsbC9IYW5kbGUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9wYWNrYWdlcy9lZGl0b3IvbGliLWVzL2NvcmUvY29tcG9uZW50cy9DZWxsL0lubmVyL2luZGV4LmpzIiwid2VicGFjazovL19OX0UvLi4vcGFja2FnZXMvZWRpdG9yL2xpYi1lcy9jb3JlL2NvbXBvbmVudHMvQ2VsbC9JbnNlcnROZXcuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9wYWNrYWdlcy9lZGl0b3IvbGliLWVzL2NvcmUvY29tcG9uZW50cy9DZWxsL01vdmVBY3Rpb25zL2luZGV4LmpzIiwid2VicGFjazovL19OX0UvLi4vcGFja2FnZXMvZWRpdG9yL2xpYi1lcy9jb3JlL2NvbXBvbmVudHMvQ2VsbC9QbHVnaW5Db21wb25lbnQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9wYWNrYWdlcy9lZGl0b3IvbGliLWVzL2NvcmUvY29tcG9uZW50cy9DZWxsL1BsdWdpbkNvbnRyb2xzL2luZGV4LmpzIiwid2VicGFjazovL19OX0UvLi4vcGFja2FnZXMvZWRpdG9yL2xpYi1lcy9jb3JlL2NvbXBvbmVudHMvQ2VsbC9QbHVnaW5NaXNzaW5nLmpzIiwid2VicGFjazovL19OX0UvLi4vcGFja2FnZXMvZWRpdG9yL2xpYi1lcy9jb3JlL2NvbXBvbmVudHMvQ2VsbC9pbmRleC5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL3BhY2thZ2VzL2VkaXRvci9saWItZXMvY29yZS9jb21wb25lbnRzL0NlbGwvdXRpbHMvc2Nyb2xsSW50b1ZpZXdXaXRoT2Zmc2V0LmpzIiwid2VicGFjazovL19OX0UvLi4vcGFja2FnZXMvZWRpdG9yL2xpYi1lcy9jb3JlL2NvbXBvbmVudHMvRWRpdGFibGUvRmFsbGJhY2tEcm9wQXJlYS5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL3BhY2thZ2VzL2VkaXRvci9saWItZXMvY29yZS9jb21wb25lbnRzL0VkaXRhYmxlL0lubmVyL1Jvd3MuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9wYWNrYWdlcy9lZGl0b3IvbGliLWVzL2NvcmUvY29tcG9uZW50cy9FZGl0YWJsZS9Jbm5lci9pbmRleC5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL3BhY2thZ2VzL2VkaXRvci9saWItZXMvY29yZS9jb21wb25lbnRzL0VkaXRhYmxlL2hvb2tzL3VzZUtlZXBTY3JvbGxQb3NpdGlvbi5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL3BhY2thZ2VzL2VkaXRvci9saWItZXMvY29yZS9jb21wb25lbnRzL0VkaXRhYmxlL2luZGV4LmpzIiwid2VicGFjazovL19OX0UvLi4vcGFja2FnZXMvZWRpdG9yL2xpYi1lcy9jb3JlL2NvbXBvbmVudHMvSG90S2V5L0dsb2JhbEhvdEtleXMuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9wYWNrYWdlcy9lZGl0b3IvbGliLWVzL2NvcmUvY29tcG9uZW50cy9Sb3cvRHJvcHBhYmxlL2luZGV4LmpzIiwid2VicGFjazovL19OX0UvLi4vcGFja2FnZXMvZWRpdG9yL2xpYi1lcy9jb3JlL2NvbXBvbmVudHMvUm93L1Jlc2l6YWJsZVJvd0NlbGwuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9wYWNrYWdlcy9lZGl0b3IvbGliLWVzL2NvcmUvY29tcG9uZW50cy9Sb3cvaW5kZXguanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9wYWNrYWdlcy9lZGl0b3IvbGliLWVzL2NvcmUvaGVscGVyL3Rocm90dGxlL2luZGV4LmpzIiwid2VicGFjazovL19OX0UvLi4vcGFja2FnZXMvZWRpdG9yL2xpYi1lcy9jb3JlL21pZ3JhdGlvbnMvc2VyaWFsemVWYWx1ZS5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL3BhY2thZ2VzL2VkaXRvci9saWItZXMvY29yZS9zZXJ2aWNlL2hvdmVyL2NvbXB1dGVIb3Zlci5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL3BhY2thZ2VzL2VkaXRvci9saWItZXMvY29yZS9zZXJ2aWNlL2hvdmVyL2lucHV0LmpzIiwid2VicGFjazovL19OX0UvLi4vcGFja2FnZXMvZWRpdG9yL2xpYi1lcy9jb3JlL3NlcnZpY2UvbG9nZ2VyL2luZGV4LmpzIiwid2VicGFjazovL19OX0UvLi4vcGFja2FnZXMvZWRpdG9yL2xpYi1lcy9lZGl0b3IvRWRpdGFibGVFZGl0b3IuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9wYWNrYWdlcy9lZGl0b3IvbGliLWVzL2VkaXRvci9TdGlja3lXcmFwcGVyLmpzIiwid2VicGFjazovL19OX0UvLi4vcGFja2FnZXMvZWRpdG9yL2xpYi1lcy91aS9FZGl0b3JVSS9pbmRleC5qcyIsIndlYnBhY2s6Ly9fTl9FLy4uL3BhY2thZ2VzL2VkaXRvci9saWItZXMvdWkvTXVsdGlOb2Rlc0JvdHRvbVRvb2xiYXIvRGVsZXRlQWxsLmpzIiwid2VicGFjazovL19OX0UvLi4vcGFja2FnZXMvZWRpdG9yL2xpYi1lcy91aS9NdWx0aU5vZGVzQm90dG9tVG9vbGJhci9EdXBsaWNhdGVBbGwuanMiLCJ3ZWJwYWNrOi8vX05fRS8uLi9wYWNrYWdlcy9lZGl0b3IvbGliLWVzL3VpL011bHRpTm9kZXNCb3R0b21Ub29sYmFyL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUEsa0JBQWtCLHlDQUF5QywyRUFBMkUsdURBQXVELDhDQUE4QywrSkFBK0osb0JBQW9CLHVFQUF1RSwrQkFBMkQ7Ozs7Ozs7Ozs7Ozs7QUNBbmhCOztBQUViLHNCQUFzQixtQkFBTyxDQUFDLG1FQUFrQjs7QUFFaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSwyQ0FBMkMsSUFBSTs7QUFFL0M7QUFDQTtBQUNBLDRCQUE0QixVQUFVO0FBQ3RDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRDtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxPQUFPO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7OztBQ2hIYTs7QUFFYjs7OztBQUlBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixXQUFXO0FBQ2pDO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsb0JBQW9CLFdBQVc7QUFDL0I7O0FBRUEsb0JBQW9CLFdBQVc7QUFDL0I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3BEQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxpQkFBaUIsWUFBWTtBQUM3Qjs7QUFFQSxpQkFBaUIsWUFBWTtBQUM3Qjs7QUFFQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDaEJhOztBQUViO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMkJBQTJCLGNBQWM7QUFDekM7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMERBQTBELGdFQUFnRTtBQUMxSDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEI7Ozs7Ozs7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Q0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxlQUFlO0FBQzNCO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHOztBQUVIO0FBQ0EsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixRQUFRO0FBQ3JDLHFCQUFxQixRQUFRO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FB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N0MsQ0FBQztBQUNELGlDIiwiZmlsZSI6InN0YXRpYy9jaHVua3MvNS5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBlPWZ1bmN0aW9uKHQpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBkb2N1bWVudClyZXR1cm4gMDtpZihkb2N1bWVudC5ib2R5JiYoIWRvY3VtZW50LnJlYWR5U3RhdGV8fFwibG9hZGluZ1wiIT09ZG9jdW1lbnQucmVhZHlTdGF0ZSkpe2lmKCEwIT09dCYmXCJudW1iZXJcIj09dHlwZW9mIGUuX19jYWNoZSlyZXR1cm4gZS5fX2NhY2hlO3ZhciBvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksZD1vLnN0eWxlO2QuZGlzcGxheT1cImJsb2NrXCIsZC5wb3NpdGlvbj1cImFic29sdXRlXCIsZC53aWR0aD1cIjEwMHB4XCIsZC5oZWlnaHQ9XCIxMDBweFwiLGQubGVmdD1cIi05OTlweFwiLGQudG9wPVwiLTk5OXB4XCIsZC5vdmVyZmxvdz1cInNjcm9sbFwiLGRvY3VtZW50LmJvZHkuaW5zZXJ0QmVmb3JlKG8sbnVsbCk7dmFyIG49by5jbGllbnRXaWR0aDtpZigwIT09bilyZXR1cm4gZS5fX2NhY2hlPTEwMC1uLGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobyksZS5fX2NhY2hlO2RvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobyl9fTtleHBvcnR7ZSBhcyBzY3JvbGxiYXJXaWR0aH07XG4iLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIGRlc2VsZWN0Q3VycmVudCA9IHJlcXVpcmUoXCJ0b2dnbGUtc2VsZWN0aW9uXCIpO1xuXG52YXIgY2xpcGJvYXJkVG9JRTExRm9ybWF0dGluZyA9IHtcbiAgXCJ0ZXh0L3BsYWluXCI6IFwiVGV4dFwiLFxuICBcInRleHQvaHRtbFwiOiBcIlVybFwiLFxuICBcImRlZmF1bHRcIjogXCJUZXh0XCJcbn1cblxudmFyIGRlZmF1bHRNZXNzYWdlID0gXCJDb3B5IHRvIGNsaXBib2FyZDogI3trZXl9LCBFbnRlclwiO1xuXG5mdW5jdGlvbiBmb3JtYXQobWVzc2FnZSkge1xuICB2YXIgY29weUtleSA9ICgvbWFjIG9zIHgvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpID8gXCLijJhcIiA6IFwiQ3RybFwiKSArIFwiK0NcIjtcbiAgcmV0dXJuIG1lc3NhZ2UucmVwbGFjZSgvI3tcXHMqa2V5XFxzKn0vZywgY29weUtleSk7XG59XG5cbmZ1bmN0aW9uIGNvcHkodGV4dCwgb3B0aW9ucykge1xuICB2YXIgZGVidWcsXG4gICAgbWVzc2FnZSxcbiAgICByZXNlbGVjdFByZXZpb3VzLFxuICAgIHJhbmdlLFxuICAgIHNlbGVjdGlvbixcbiAgICBtYXJrLFxuICAgIHN1Y2Nlc3MgPSBmYWxzZTtcbiAgaWYgKCFvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IHt9O1xuICB9XG4gIGRlYnVnID0gb3B0aW9ucy5kZWJ1ZyB8fCBmYWxzZTtcbiAgdHJ5IHtcbiAgICByZXNlbGVjdFByZXZpb3VzID0gZGVzZWxlY3RDdXJyZW50KCk7XG5cbiAgICByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgc2VsZWN0aW9uID0gZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCk7XG5cbiAgICBtYXJrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgbWFyay50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgLy8gcmVzZXQgdXNlciBzdHlsZXMgZm9yIHNwYW4gZWxlbWVudFxuICAgIG1hcmsuc3R5bGUuYWxsID0gXCJ1bnNldFwiO1xuICAgIC8vIHByZXZlbnRzIHNjcm9sbGluZyB0byB0aGUgZW5kIG9mIHRoZSBwYWdlXG4gICAgbWFyay5zdHlsZS5wb3NpdGlvbiA9IFwiZml4ZWRcIjtcbiAgICBtYXJrLnN0eWxlLnRvcCA9IDA7XG4gICAgbWFyay5zdHlsZS5jbGlwID0gXCJyZWN0KDAsIDAsIDAsIDApXCI7XG4gICAgLy8gdXNlZCB0byBwcmVzZXJ2ZSBzcGFjZXMgYW5kIGxpbmUgYnJlYWtzXG4gICAgbWFyay5zdHlsZS53aGl0ZVNwYWNlID0gXCJwcmVcIjtcbiAgICAvLyBkbyBub3QgaW5oZXJpdCB1c2VyLXNlbGVjdCAoaXQgbWF5IGJlIGBub25lYClcbiAgICBtYXJrLnN0eWxlLndlYmtpdFVzZXJTZWxlY3QgPSBcInRleHRcIjtcbiAgICBtYXJrLnN0eWxlLk1velVzZXJTZWxlY3QgPSBcInRleHRcIjtcbiAgICBtYXJrLnN0eWxlLm1zVXNlclNlbGVjdCA9IFwidGV4dFwiO1xuICAgIG1hcmsuc3R5bGUudXNlclNlbGVjdCA9IFwidGV4dFwiO1xuICAgIG1hcmsuYWRkRXZlbnRMaXN0ZW5lcihcImNvcHlcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGlmIChvcHRpb25zLmZvcm1hdCkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmICh0eXBlb2YgZS5jbGlwYm9hcmREYXRhID09PSBcInVuZGVmaW5lZFwiKSB7IC8vIElFIDExXG4gICAgICAgICAgZGVidWcgJiYgY29uc29sZS53YXJuKFwidW5hYmxlIHRvIHVzZSBlLmNsaXBib2FyZERhdGFcIik7XG4gICAgICAgICAgZGVidWcgJiYgY29uc29sZS53YXJuKFwidHJ5aW5nIElFIHNwZWNpZmljIHN0dWZmXCIpO1xuICAgICAgICAgIHdpbmRvdy5jbGlwYm9hcmREYXRhLmNsZWFyRGF0YSgpO1xuICAgICAgICAgIHZhciBmb3JtYXQgPSBjbGlwYm9hcmRUb0lFMTFGb3JtYXR0aW5nW29wdGlvbnMuZm9ybWF0XSB8fCBjbGlwYm9hcmRUb0lFMTFGb3JtYXR0aW5nW1wiZGVmYXVsdFwiXVxuICAgICAgICAgIHdpbmRvdy5jbGlwYm9hcmREYXRhLnNldERhdGEoZm9ybWF0LCB0ZXh0KTtcbiAgICAgICAgfSBlbHNlIHsgLy8gYWxsIG90aGVyIGJyb3dzZXJzXG4gICAgICAgICAgZS5jbGlwYm9hcmREYXRhLmNsZWFyRGF0YSgpO1xuICAgICAgICAgIGUuY2xpcGJvYXJkRGF0YS5zZXREYXRhKG9wdGlvbnMuZm9ybWF0LCB0ZXh0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMub25Db3B5KSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgb3B0aW9ucy5vbkNvcHkoZS5jbGlwYm9hcmREYXRhKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobWFyayk7XG5cbiAgICByYW5nZS5zZWxlY3ROb2RlQ29udGVudHMobWFyayk7XG4gICAgc2VsZWN0aW9uLmFkZFJhbmdlKHJhbmdlKTtcblxuICAgIHZhciBzdWNjZXNzZnVsID0gZG9jdW1lbnQuZXhlY0NvbW1hbmQoXCJjb3B5XCIpO1xuICAgIGlmICghc3VjY2Vzc2Z1bCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY29weSBjb21tYW5kIHdhcyB1bnN1Y2Nlc3NmdWxcIik7XG4gICAgfVxuICAgIHN1Y2Nlc3MgPSB0cnVlO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBkZWJ1ZyAmJiBjb25zb2xlLmVycm9yKFwidW5hYmxlIHRvIGNvcHkgdXNpbmcgZXhlY0NvbW1hbmQ6IFwiLCBlcnIpO1xuICAgIGRlYnVnICYmIGNvbnNvbGUud2FybihcInRyeWluZyBJRSBzcGVjaWZpYyBzdHVmZlwiKTtcbiAgICB0cnkge1xuICAgICAgd2luZG93LmNsaXBib2FyZERhdGEuc2V0RGF0YShvcHRpb25zLmZvcm1hdCB8fCBcInRleHRcIiwgdGV4dCk7XG4gICAgICBvcHRpb25zLm9uQ29weSAmJiBvcHRpb25zLm9uQ29weSh3aW5kb3cuY2xpcGJvYXJkRGF0YSk7XG4gICAgICBzdWNjZXNzID0gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGRlYnVnICYmIGNvbnNvbGUuZXJyb3IoXCJ1bmFibGUgdG8gY29weSB1c2luZyBjbGlwYm9hcmREYXRhOiBcIiwgZXJyKTtcbiAgICAgIGRlYnVnICYmIGNvbnNvbGUuZXJyb3IoXCJmYWxsaW5nIGJhY2sgdG8gcHJvbXB0XCIpO1xuICAgICAgbWVzc2FnZSA9IGZvcm1hdChcIm1lc3NhZ2VcIiBpbiBvcHRpb25zID8gb3B0aW9ucy5tZXNzYWdlIDogZGVmYXVsdE1lc3NhZ2UpO1xuICAgICAgd2luZG93LnByb21wdChtZXNzYWdlLCB0ZXh0KTtcbiAgICB9XG4gIH0gZmluYWxseSB7XG4gICAgaWYgKHNlbGVjdGlvbikge1xuICAgICAgaWYgKHR5cGVvZiBzZWxlY3Rpb24ucmVtb3ZlUmFuZ2UgPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHNlbGVjdGlvbi5yZW1vdmVSYW5nZShyYW5nZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxlY3Rpb24ucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG1hcmspIHtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobWFyayk7XG4gICAgfVxuICAgIHJlc2VsZWN0UHJldmlvdXMoKTtcbiAgfVxuXG4gIHJldHVybiBzdWNjZXNzO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNvcHk7XG4iLCIndXNlIHN0cmljdCc7XG5cbi8vIGRvIG5vdCBlZGl0IC5qcyBmaWxlcyBkaXJlY3RseSAtIGVkaXQgc3JjL2luZGV4LmpzdFxuXG5cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBlcXVhbChhLCBiKSB7XG4gIGlmIChhID09PSBiKSByZXR1cm4gdHJ1ZTtcblxuICBpZiAoYSAmJiBiICYmIHR5cGVvZiBhID09ICdvYmplY3QnICYmIHR5cGVvZiBiID09ICdvYmplY3QnKSB7XG4gICAgaWYgKGEuY29uc3RydWN0b3IgIT09IGIuY29uc3RydWN0b3IpIHJldHVybiBmYWxzZTtcblxuICAgIHZhciBsZW5ndGgsIGksIGtleXM7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYSkpIHtcbiAgICAgIGxlbmd0aCA9IGEubGVuZ3RoO1xuICAgICAgaWYgKGxlbmd0aCAhPSBiLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gIT09IDA7KVxuICAgICAgICBpZiAoIWVxdWFsKGFbaV0sIGJbaV0pKSByZXR1cm4gZmFsc2U7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cblxuXG4gICAgaWYgKGEuY29uc3RydWN0b3IgPT09IFJlZ0V4cCkgcmV0dXJuIGEuc291cmNlID09PSBiLnNvdXJjZSAmJiBhLmZsYWdzID09PSBiLmZsYWdzO1xuICAgIGlmIChhLnZhbHVlT2YgIT09IE9iamVjdC5wcm90b3R5cGUudmFsdWVPZikgcmV0dXJuIGEudmFsdWVPZigpID09PSBiLnZhbHVlT2YoKTtcbiAgICBpZiAoYS50b1N0cmluZyAhPT0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZykgcmV0dXJuIGEudG9TdHJpbmcoKSA9PT0gYi50b1N0cmluZygpO1xuXG4gICAga2V5cyA9IE9iamVjdC5rZXlzKGEpO1xuICAgIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgIGlmIChsZW5ndGggIT09IE9iamVjdC5rZXlzKGIpLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gIT09IDA7KVxuICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwga2V5c1tpXSkpIHJldHVybiBmYWxzZTtcblxuICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tICE9PSAwOykge1xuICAgICAgdmFyIGtleSA9IGtleXNbaV07XG5cbiAgICAgIGlmIChrZXkgPT09ICdfb3duZXInICYmIGEuJCR0eXBlb2YpIHtcbiAgICAgICAgLy8gUmVhY3Qtc3BlY2lmaWM6IGF2b2lkIHRyYXZlcnNpbmcgUmVhY3QgZWxlbWVudHMnIF9vd25lci5cbiAgICAgICAgLy8gIF9vd25lciBjb250YWlucyBjaXJjdWxhciByZWZlcmVuY2VzXG4gICAgICAgIC8vIGFuZCBpcyBub3QgbmVlZGVkIHdoZW4gY29tcGFyaW5nIHRoZSBhY3R1YWwgZWxlbWVudHMgKGFuZCBub3QgdGhlaXIgb3duZXJzKVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFlcXVhbChhW2tleV0sIGJba2V5XSkpIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vIHRydWUgaWYgYm90aCBOYU4sIGZhbHNlIG90aGVyd2lzZVxuICByZXR1cm4gYSE9PWEgJiYgYiE9PWI7XG59O1xuIiwidmFyIGtleUxpc3QgPSBPYmplY3Qua2V5cztcblxuZXhwb3J0cy5lcXVhbCA9IGZ1bmN0aW9uIGVxdWFsIChhLCBiKSB7XG4gIGlmIChhID09PSBiKSByZXR1cm4gdHJ1ZTtcbiAgaWYgKCEoYSBpbnN0YW5jZW9mIE9iamVjdCkgfHwgIShiIGluc3RhbmNlb2YgT2JqZWN0KSkgcmV0dXJuIGZhbHNlO1xuXG4gIHZhciBrZXlzID0ga2V5TGlzdChhKTtcbiAgdmFyIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXG4gICAgaWYgKCEoa2V5c1tpXSBpbiBiKSkgcmV0dXJuIGZhbHNlO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspXG4gICAgaWYgKGFba2V5c1tpXV0gIT09IGJba2V5c1tpXV0pIHJldHVybiBmYWxzZTtcblxuICByZXR1cm4gbGVuZ3RoID09PSBrZXlMaXN0KGIpLmxlbmd0aDtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbi8qKlxuICogQ29uc3RhbnRzLlxuICovXG5cbnZhciBJU19NQUMgPSB0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnICYmIC9NYWN8aVBvZHxpUGhvbmV8aVBhZC8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnBsYXRmb3JtKTtcblxudmFyIE1PRElGSUVSUyA9IHtcbiAgYWx0OiAnYWx0S2V5JyxcbiAgY29udHJvbDogJ2N0cmxLZXknLFxuICBtZXRhOiAnbWV0YUtleScsXG4gIHNoaWZ0OiAnc2hpZnRLZXknXG59O1xuXG52YXIgQUxJQVNFUyA9IHtcbiAgYWRkOiAnKycsXG4gIGJyZWFrOiAncGF1c2UnLFxuICBjbWQ6ICdtZXRhJyxcbiAgY29tbWFuZDogJ21ldGEnLFxuICBjdGw6ICdjb250cm9sJyxcbiAgY3RybDogJ2NvbnRyb2wnLFxuICBkZWw6ICdkZWxldGUnLFxuICBkb3duOiAnYXJyb3dkb3duJyxcbiAgZXNjOiAnZXNjYXBlJyxcbiAgaW5zOiAnaW5zZXJ0JyxcbiAgbGVmdDogJ2Fycm93bGVmdCcsXG4gIG1vZDogSVNfTUFDID8gJ21ldGEnIDogJ2NvbnRyb2wnLFxuICBvcHQ6ICdhbHQnLFxuICBvcHRpb246ICdhbHQnLFxuICByZXR1cm46ICdlbnRlcicsXG4gIHJpZ2h0OiAnYXJyb3dyaWdodCcsXG4gIHNwYWNlOiAnICcsXG4gIHNwYWNlYmFyOiAnICcsXG4gIHVwOiAnYXJyb3d1cCcsXG4gIHdpbjogJ21ldGEnLFxuICB3aW5kb3dzOiAnbWV0YSdcbn07XG5cbnZhciBDT0RFUyA9IHtcbiAgYmFja3NwYWNlOiA4LFxuICB0YWI6IDksXG4gIGVudGVyOiAxMyxcbiAgc2hpZnQ6IDE2LFxuICBjb250cm9sOiAxNyxcbiAgYWx0OiAxOCxcbiAgcGF1c2U6IDE5LFxuICBjYXBzbG9jazogMjAsXG4gIGVzY2FwZTogMjcsXG4gICcgJzogMzIsXG4gIHBhZ2V1cDogMzMsXG4gIHBhZ2Vkb3duOiAzNCxcbiAgZW5kOiAzNSxcbiAgaG9tZTogMzYsXG4gIGFycm93bGVmdDogMzcsXG4gIGFycm93dXA6IDM4LFxuICBhcnJvd3JpZ2h0OiAzOSxcbiAgYXJyb3dkb3duOiA0MCxcbiAgaW5zZXJ0OiA0NSxcbiAgZGVsZXRlOiA0NixcbiAgbWV0YTogOTEsXG4gIG51bWxvY2s6IDE0NCxcbiAgc2Nyb2xsbG9jazogMTQ1LFxuICAnOyc6IDE4NixcbiAgJz0nOiAxODcsXG4gICcsJzogMTg4LFxuICAnLSc6IDE4OSxcbiAgJy4nOiAxOTAsXG4gICcvJzogMTkxLFxuICAnYCc6IDE5MixcbiAgJ1snOiAyMTksXG4gICdcXFxcJzogMjIwLFxuICAnXSc6IDIyMSxcbiAgJ1xcJyc6IDIyMlxufTtcblxuZm9yICh2YXIgZiA9IDE7IGYgPCAyMDsgZisrKSB7XG4gIENPREVTWydmJyArIGZdID0gMTExICsgZjtcbn1cblxuLyoqXG4gKiBJcyBob3RrZXk/XG4gKi9cblxuZnVuY3Rpb24gaXNIb3RrZXkoaG90a2V5LCBvcHRpb25zLCBldmVudCkge1xuICBpZiAob3B0aW9ucyAmJiAhKCdieUtleScgaW4gb3B0aW9ucykpIHtcbiAgICBldmVudCA9IG9wdGlvbnM7XG4gICAgb3B0aW9ucyA9IG51bGw7XG4gIH1cblxuICBpZiAoIUFycmF5LmlzQXJyYXkoaG90a2V5KSkge1xuICAgIGhvdGtleSA9IFtob3RrZXldO1xuICB9XG5cbiAgdmFyIGFycmF5ID0gaG90a2V5Lm1hcChmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHBhcnNlSG90a2V5KHN0cmluZywgb3B0aW9ucyk7XG4gIH0pO1xuICB2YXIgY2hlY2sgPSBmdW5jdGlvbiBjaGVjayhlKSB7XG4gICAgcmV0dXJuIGFycmF5LnNvbWUoZnVuY3Rpb24gKG9iamVjdCkge1xuICAgICAgcmV0dXJuIGNvbXBhcmVIb3RrZXkob2JqZWN0LCBlKTtcbiAgICB9KTtcbiAgfTtcbiAgdmFyIHJldCA9IGV2ZW50ID09IG51bGwgPyBjaGVjayA6IGNoZWNrKGV2ZW50KTtcbiAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gaXNDb2RlSG90a2V5KGhvdGtleSwgZXZlbnQpIHtcbiAgcmV0dXJuIGlzSG90a2V5KGhvdGtleSwgZXZlbnQpO1xufVxuXG5mdW5jdGlvbiBpc0tleUhvdGtleShob3RrZXksIGV2ZW50KSB7XG4gIHJldHVybiBpc0hvdGtleShob3RrZXksIHsgYnlLZXk6IHRydWUgfSwgZXZlbnQpO1xufVxuXG4vKipcbiAqIFBhcnNlLlxuICovXG5cbmZ1bmN0aW9uIHBhcnNlSG90a2V5KGhvdGtleSwgb3B0aW9ucykge1xuICB2YXIgYnlLZXkgPSBvcHRpb25zICYmIG9wdGlvbnMuYnlLZXk7XG4gIHZhciByZXQgPSB7fTtcblxuICAvLyBTcGVjaWFsIGNhc2UgdG8gaGFuZGxlIHRoZSBgK2Aga2V5IHNpbmNlIHdlIHVzZSBpdCBhcyBhIHNlcGFyYXRvci5cbiAgaG90a2V5ID0gaG90a2V5LnJlcGxhY2UoJysrJywgJythZGQnKTtcbiAgdmFyIHZhbHVlcyA9IGhvdGtleS5zcGxpdCgnKycpO1xuICB2YXIgbGVuZ3RoID0gdmFsdWVzLmxlbmd0aDtcblxuICAvLyBFbnN1cmUgdGhhdCBhbGwgdGhlIG1vZGlmaWVycyBhcmUgc2V0IHRvIGZhbHNlIHVubGVzcyB0aGUgaG90a2V5IGhhcyB0aGVtLlxuXG4gIGZvciAodmFyIGsgaW4gTU9ESUZJRVJTKSB7XG4gICAgcmV0W01PRElGSUVSU1trXV0gPSBmYWxzZTtcbiAgfVxuXG4gIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTtcbiAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7XG4gIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDtcblxuICB0cnkge1xuICAgIGZvciAodmFyIF9pdGVyYXRvciA9IHZhbHVlc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHtcbiAgICAgIHZhciB2YWx1ZSA9IF9zdGVwLnZhbHVlO1xuXG4gICAgICB2YXIgb3B0aW9uYWwgPSB2YWx1ZS5lbmRzV2l0aCgnPycpICYmIHZhbHVlLmxlbmd0aCA+IDE7XG5cbiAgICAgIGlmIChvcHRpb25hbCkge1xuICAgICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDAsIC0xKTtcbiAgICAgIH1cblxuICAgICAgdmFyIG5hbWUgPSB0b0tleU5hbWUodmFsdWUpO1xuICAgICAgdmFyIG1vZGlmaWVyID0gTU9ESUZJRVJTW25hbWVdO1xuXG4gICAgICBpZiAobGVuZ3RoID09PSAxIHx8ICFtb2RpZmllcikge1xuICAgICAgICBpZiAoYnlLZXkpIHtcbiAgICAgICAgICByZXQua2V5ID0gbmFtZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXQud2hpY2ggPSB0b0tleUNvZGUodmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChtb2RpZmllcikge1xuICAgICAgICByZXRbbW9kaWZpZXJdID0gb3B0aW9uYWwgPyBudWxsIDogdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTtcbiAgICBfaXRlcmF0b3JFcnJvciA9IGVycjtcbiAgfSBmaW5hbGx5IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4pIHtcbiAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpO1xuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJldDtcbn1cblxuLyoqXG4gKiBDb21wYXJlLlxuICovXG5cbmZ1bmN0aW9uIGNvbXBhcmVIb3RrZXkob2JqZWN0LCBldmVudCkge1xuICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XG4gICAgdmFyIGV4cGVjdGVkID0gb2JqZWN0W2tleV07XG4gICAgdmFyIGFjdHVhbCA9IHZvaWQgMDtcblxuICAgIGlmIChleHBlY3RlZCA9PSBudWxsKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBpZiAoa2V5ID09PSAna2V5JyAmJiBldmVudC5rZXkgIT0gbnVsbCkge1xuICAgICAgYWN0dWFsID0gZXZlbnQua2V5LnRvTG93ZXJDYXNlKCk7XG4gICAgfSBlbHNlIGlmIChrZXkgPT09ICd3aGljaCcpIHtcbiAgICAgIGFjdHVhbCA9IGV4cGVjdGVkID09PSA5MSAmJiBldmVudC53aGljaCA9PT0gOTMgPyA5MSA6IGV2ZW50LndoaWNoO1xuICAgIH0gZWxzZSB7XG4gICAgICBhY3R1YWwgPSBldmVudFtrZXldO1xuICAgIH1cblxuICAgIGlmIChhY3R1YWwgPT0gbnVsbCAmJiBleHBlY3RlZCA9PT0gZmFsc2UpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChhY3R1YWwgIT09IGV4cGVjdGVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogVXRpbHMuXG4gKi9cblxuZnVuY3Rpb24gdG9LZXlDb2RlKG5hbWUpIHtcbiAgbmFtZSA9IHRvS2V5TmFtZShuYW1lKTtcbiAgdmFyIGNvZGUgPSBDT0RFU1tuYW1lXSB8fCBuYW1lLnRvVXBwZXJDYXNlKCkuY2hhckNvZGVBdCgwKTtcbiAgcmV0dXJuIGNvZGU7XG59XG5cbmZ1bmN0aW9uIHRvS2V5TmFtZShuYW1lKSB7XG4gIG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG4gIG5hbWUgPSBBTElBU0VTW25hbWVdIHx8IG5hbWU7XG4gIHJldHVybiBuYW1lO1xufVxuXG4vKipcbiAqIEV4cG9ydC5cbiAqL1xuXG5leHBvcnRzLmRlZmF1bHQgPSBpc0hvdGtleTtcbmV4cG9ydHMuaXNIb3RrZXkgPSBpc0hvdGtleTtcbmV4cG9ydHMuaXNDb2RlSG90a2V5ID0gaXNDb2RlSG90a2V5O1xuZXhwb3J0cy5pc0tleUhvdGtleSA9IGlzS2V5SG90a2V5O1xuZXhwb3J0cy5wYXJzZUhvdGtleSA9IHBhcnNlSG90a2V5O1xuZXhwb3J0cy5jb21wYXJlSG90a2V5ID0gY29tcGFyZUhvdGtleTtcbmV4cG9ydHMudG9LZXlDb2RlID0gdG9LZXlDb2RlO1xuZXhwb3J0cy50b0tleU5hbWUgPSB0b0tleU5hbWU7IiwiLyohXG4gKiBKYXZhU2NyaXB0IENvb2tpZSB2Mi4yLjFcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9qcy1jb29raWUvanMtY29va2llXG4gKlxuICogQ29weXJpZ2h0IDIwMDYsIDIwMTUgS2xhdXMgSGFydGwgJiBGYWduZXIgQnJhY2tcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICovXG47KGZ1bmN0aW9uIChmYWN0b3J5KSB7XG5cdHZhciByZWdpc3RlcmVkSW5Nb2R1bGVMb2FkZXI7XG5cdGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcblx0XHRkZWZpbmUoZmFjdG9yeSk7XG5cdFx0cmVnaXN0ZXJlZEluTW9kdWxlTG9hZGVyID0gdHJ1ZTtcblx0fVxuXHRpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdFx0cmVnaXN0ZXJlZEluTW9kdWxlTG9hZGVyID0gdHJ1ZTtcblx0fVxuXHRpZiAoIXJlZ2lzdGVyZWRJbk1vZHVsZUxvYWRlcikge1xuXHRcdHZhciBPbGRDb29raWVzID0gd2luZG93LkNvb2tpZXM7XG5cdFx0dmFyIGFwaSA9IHdpbmRvdy5Db29raWVzID0gZmFjdG9yeSgpO1xuXHRcdGFwaS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0d2luZG93LkNvb2tpZXMgPSBPbGRDb29raWVzO1xuXHRcdFx0cmV0dXJuIGFwaTtcblx0XHR9O1xuXHR9XG59KGZ1bmN0aW9uICgpIHtcblx0ZnVuY3Rpb24gZXh0ZW5kICgpIHtcblx0XHR2YXIgaSA9IDA7XG5cdFx0dmFyIHJlc3VsdCA9IHt9O1xuXHRcdGZvciAoOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgYXR0cmlidXRlcyA9IGFyZ3VtZW50c1sgaSBdO1xuXHRcdFx0Zm9yICh2YXIga2V5IGluIGF0dHJpYnV0ZXMpIHtcblx0XHRcdFx0cmVzdWx0W2tleV0gPSBhdHRyaWJ1dGVzW2tleV07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cblxuXHRmdW5jdGlvbiBkZWNvZGUgKHMpIHtcblx0XHRyZXR1cm4gcy5yZXBsYWNlKC8oJVswLTlBLVpdezJ9KSsvZywgZGVjb2RlVVJJQ29tcG9uZW50KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGluaXQgKGNvbnZlcnRlcikge1xuXHRcdGZ1bmN0aW9uIGFwaSgpIHt9XG5cblx0XHRmdW5jdGlvbiBzZXQgKGtleSwgdmFsdWUsIGF0dHJpYnV0ZXMpIHtcblx0XHRcdGlmICh0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0YXR0cmlidXRlcyA9IGV4dGVuZCh7XG5cdFx0XHRcdHBhdGg6ICcvJ1xuXHRcdFx0fSwgYXBpLmRlZmF1bHRzLCBhdHRyaWJ1dGVzKTtcblxuXHRcdFx0aWYgKHR5cGVvZiBhdHRyaWJ1dGVzLmV4cGlyZXMgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGF0dHJpYnV0ZXMuZXhwaXJlcyA9IG5ldyBEYXRlKG5ldyBEYXRlKCkgKiAxICsgYXR0cmlidXRlcy5leHBpcmVzICogODY0ZSs1KTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gV2UncmUgdXNpbmcgXCJleHBpcmVzXCIgYmVjYXVzZSBcIm1heC1hZ2VcIiBpcyBub3Qgc3VwcG9ydGVkIGJ5IElFXG5cdFx0XHRhdHRyaWJ1dGVzLmV4cGlyZXMgPSBhdHRyaWJ1dGVzLmV4cGlyZXMgPyBhdHRyaWJ1dGVzLmV4cGlyZXMudG9VVENTdHJpbmcoKSA6ICcnO1xuXG5cdFx0XHR0cnkge1xuXHRcdFx0XHR2YXIgcmVzdWx0ID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuXHRcdFx0XHRpZiAoL15bXFx7XFxbXS8udGVzdChyZXN1bHQpKSB7XG5cdFx0XHRcdFx0dmFsdWUgPSByZXN1bHQ7XG5cdFx0XHRcdH1cblx0XHRcdH0gY2F0Y2ggKGUpIHt9XG5cblx0XHRcdHZhbHVlID0gY29udmVydGVyLndyaXRlID9cblx0XHRcdFx0Y29udmVydGVyLndyaXRlKHZhbHVlLCBrZXkpIDpcblx0XHRcdFx0ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh2YWx1ZSkpXG5cdFx0XHRcdFx0LnJlcGxhY2UoLyUoMjN8MjR8MjZ8MkJ8M0F8M0N8M0V8M0R8MkZ8M0Z8NDB8NUJ8NUR8NUV8NjB8N0J8N0R8N0MpL2csIGRlY29kZVVSSUNvbXBvbmVudCk7XG5cblx0XHRcdGtleSA9IGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoa2V5KSlcblx0XHRcdFx0LnJlcGxhY2UoLyUoMjN8MjR8MjZ8MkJ8NUV8NjB8N0MpL2csIGRlY29kZVVSSUNvbXBvbmVudClcblx0XHRcdFx0LnJlcGxhY2UoL1tcXChcXCldL2csIGVzY2FwZSk7XG5cblx0XHRcdHZhciBzdHJpbmdpZmllZEF0dHJpYnV0ZXMgPSAnJztcblx0XHRcdGZvciAodmFyIGF0dHJpYnV0ZU5hbWUgaW4gYXR0cmlidXRlcykge1xuXHRcdFx0XHRpZiAoIWF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV0pIHtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRzdHJpbmdpZmllZEF0dHJpYnV0ZXMgKz0gJzsgJyArIGF0dHJpYnV0ZU5hbWU7XG5cdFx0XHRcdGlmIChhdHRyaWJ1dGVzW2F0dHJpYnV0ZU5hbWVdID09PSB0cnVlKSB7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBDb25zaWRlcnMgUkZDIDYyNjUgc2VjdGlvbiA1LjI6XG5cdFx0XHRcdC8vIC4uLlxuXHRcdFx0XHQvLyAzLiAgSWYgdGhlIHJlbWFpbmluZyB1bnBhcnNlZC1hdHRyaWJ1dGVzIGNvbnRhaW5zIGEgJXgzQiAoXCI7XCIpXG5cdFx0XHRcdC8vICAgICBjaGFyYWN0ZXI6XG5cdFx0XHRcdC8vIENvbnN1bWUgdGhlIGNoYXJhY3RlcnMgb2YgdGhlIHVucGFyc2VkLWF0dHJpYnV0ZXMgdXAgdG8sXG5cdFx0XHRcdC8vIG5vdCBpbmNsdWRpbmcsIHRoZSBmaXJzdCAleDNCIChcIjtcIikgY2hhcmFjdGVyLlxuXHRcdFx0XHQvLyAuLi5cblx0XHRcdFx0c3RyaW5naWZpZWRBdHRyaWJ1dGVzICs9ICc9JyArIGF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV0uc3BsaXQoJzsnKVswXTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIChkb2N1bWVudC5jb29raWUgPSBrZXkgKyAnPScgKyB2YWx1ZSArIHN0cmluZ2lmaWVkQXR0cmlidXRlcyk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZ2V0IChrZXksIGpzb24pIHtcblx0XHRcdGlmICh0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0dmFyIGphciA9IHt9O1xuXHRcdFx0Ly8gVG8gcHJldmVudCB0aGUgZm9yIGxvb3AgaW4gdGhlIGZpcnN0IHBsYWNlIGFzc2lnbiBhbiBlbXB0eSBhcnJheVxuXHRcdFx0Ly8gaW4gY2FzZSB0aGVyZSBhcmUgbm8gY29va2llcyBhdCBhbGwuXG5cdFx0XHR2YXIgY29va2llcyA9IGRvY3VtZW50LmNvb2tpZSA/IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOyAnKSA6IFtdO1xuXHRcdFx0dmFyIGkgPSAwO1xuXG5cdFx0XHRmb3IgKDsgaSA8IGNvb2tpZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dmFyIHBhcnRzID0gY29va2llc1tpXS5zcGxpdCgnPScpO1xuXHRcdFx0XHR2YXIgY29va2llID0gcGFydHMuc2xpY2UoMSkuam9pbignPScpO1xuXG5cdFx0XHRcdGlmICghanNvbiAmJiBjb29raWUuY2hhckF0KDApID09PSAnXCInKSB7XG5cdFx0XHRcdFx0Y29va2llID0gY29va2llLnNsaWNlKDEsIC0xKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0dmFyIG5hbWUgPSBkZWNvZGUocGFydHNbMF0pO1xuXHRcdFx0XHRcdGNvb2tpZSA9IChjb252ZXJ0ZXIucmVhZCB8fCBjb252ZXJ0ZXIpKGNvb2tpZSwgbmFtZSkgfHxcblx0XHRcdFx0XHRcdGRlY29kZShjb29raWUpO1xuXG5cdFx0XHRcdFx0aWYgKGpzb24pIHtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdGNvb2tpZSA9IEpTT04ucGFyc2UoY29va2llKTtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGUpIHt9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0amFyW25hbWVdID0gY29va2llO1xuXG5cdFx0XHRcdFx0aWYgKGtleSA9PT0gbmFtZSkge1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGNhdGNoIChlKSB7fVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4ga2V5ID8gamFyW2tleV0gOiBqYXI7XG5cdFx0fVxuXG5cdFx0YXBpLnNldCA9IHNldDtcblx0XHRhcGkuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xuXHRcdFx0cmV0dXJuIGdldChrZXksIGZhbHNlIC8qIHJlYWQgYXMgcmF3ICovKTtcblx0XHR9O1xuXHRcdGFwaS5nZXRKU09OID0gZnVuY3Rpb24gKGtleSkge1xuXHRcdFx0cmV0dXJuIGdldChrZXksIHRydWUgLyogcmVhZCBhcyBqc29uICovKTtcblx0XHR9O1xuXHRcdGFwaS5yZW1vdmUgPSBmdW5jdGlvbiAoa2V5LCBhdHRyaWJ1dGVzKSB7XG5cdFx0XHRzZXQoa2V5LCAnJywgZXh0ZW5kKGF0dHJpYnV0ZXMsIHtcblx0XHRcdFx0ZXhwaXJlczogLTFcblx0XHRcdH0pKTtcblx0XHR9O1xuXG5cdFx0YXBpLmRlZmF1bHRzID0ge307XG5cblx0XHRhcGkud2l0aENvbnZlcnRlciA9IGluaXQ7XG5cblx0XHRyZXR1cm4gYXBpO1xuXHR9XG5cblx0cmV0dXJuIGluaXQoZnVuY3Rpb24gKCkge30pO1xufSkpO1xuIiwiLyoqXG4gKiBsb2Rhc2ggKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIDxodHRwczovL2pxdWVyeS5vcmcvPlxuICogUmVsZWFzZWQgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICovXG5cbi8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG52YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXG4vKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbnZhciBOQU4gPSAwIC8gMDtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nO1xuXG4vKiogVXNlZCB0byBtYXRjaCBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlLiAqL1xudmFyIHJlVHJpbSA9IC9eXFxzK3xcXHMrJC9nO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgYmFkIHNpZ25lZCBoZXhhZGVjaW1hbCBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNCYWRIZXggPSAvXlstK10weFswLTlhLWZdKyQvaTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGJpbmFyeSBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNCaW5hcnkgPSAvXjBiWzAxXSskL2k7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBvY3RhbCBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNPY3RhbCA9IC9eMG9bMC03XSskL2k7XG5cbi8qKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB3aXRob3V0IGEgZGVwZW5kZW5jeSBvbiBgcm9vdGAuICovXG52YXIgZnJlZVBhcnNlSW50ID0gcGFyc2VJbnQ7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCBmcm9tIE5vZGUuanMuICovXG52YXIgZnJlZUdsb2JhbCA9IHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsICYmIGdsb2JhbC5PYmplY3QgPT09IE9iamVjdCAmJiBnbG9iYWw7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgc2VsZmAuICovXG52YXIgZnJlZVNlbGYgPSB0eXBlb2Ygc2VsZiA9PSAnb2JqZWN0JyAmJiBzZWxmICYmIHNlbGYuT2JqZWN0ID09PSBPYmplY3QgJiYgc2VsZjtcblxuLyoqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QuICovXG52YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgZnJlZVNlbGYgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVNYXggPSBNYXRoLm1heCxcbiAgICBuYXRpdmVNaW4gPSBNYXRoLm1pbjtcblxuLyoqXG4gKiBHZXRzIHRoZSB0aW1lc3RhbXAgb2YgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdGhhdCBoYXZlIGVsYXBzZWQgc2luY2VcbiAqIHRoZSBVbml4IGVwb2NoICgxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMi40LjBcbiAqIEBjYXRlZ29yeSBEYXRlXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lc3RhbXAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uZGVmZXIoZnVuY3Rpb24oc3RhbXApIHtcbiAqICAgY29uc29sZS5sb2coXy5ub3coKSAtIHN0YW1wKTtcbiAqIH0sIF8ubm93KCkpO1xuICogLy8gPT4gTG9ncyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBpdCB0b29rIGZvciB0aGUgZGVmZXJyZWQgaW52b2NhdGlvbi5cbiAqL1xudmFyIG5vdyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gcm9vdC5EYXRlLm5vdygpO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgZGVib3VuY2VkIGZ1bmN0aW9uIHRoYXQgZGVsYXlzIGludm9raW5nIGBmdW5jYCB1bnRpbCBhZnRlciBgd2FpdGBcbiAqIG1pbGxpc2Vjb25kcyBoYXZlIGVsYXBzZWQgc2luY2UgdGhlIGxhc3QgdGltZSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHdhc1xuICogaW52b2tlZC4gVGhlIGRlYm91bmNlZCBmdW5jdGlvbiBjb21lcyB3aXRoIGEgYGNhbmNlbGAgbWV0aG9kIHRvIGNhbmNlbFxuICogZGVsYXllZCBgZnVuY2AgaW52b2NhdGlvbnMgYW5kIGEgYGZsdXNoYCBtZXRob2QgdG8gaW1tZWRpYXRlbHkgaW52b2tlIHRoZW0uXG4gKiBQcm92aWRlIGBvcHRpb25zYCB0byBpbmRpY2F0ZSB3aGV0aGVyIGBmdW5jYCBzaG91bGQgYmUgaW52b2tlZCBvbiB0aGVcbiAqIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YCB0aW1lb3V0LiBUaGUgYGZ1bmNgIGlzIGludm9rZWRcbiAqIHdpdGggdGhlIGxhc3QgYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24uIFN1YnNlcXVlbnRcbiAqIGNhbGxzIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gcmV0dXJuIHRoZSByZXN1bHQgb2YgdGhlIGxhc3QgYGZ1bmNgXG4gKiBpbnZvY2F0aW9uLlxuICpcbiAqICoqTm90ZToqKiBJZiBgbGVhZGluZ2AgYW5kIGB0cmFpbGluZ2Agb3B0aW9ucyBhcmUgYHRydWVgLCBgZnVuY2AgaXNcbiAqIGludm9rZWQgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uXG4gKiBpcyBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuXG4gKlxuICogSWYgYHdhaXRgIGlzIGAwYCBhbmQgYGxlYWRpbmdgIGlzIGBmYWxzZWAsIGBmdW5jYCBpbnZvY2F0aW9uIGlzIGRlZmVycmVkXG4gKiB1bnRpbCB0byB0aGUgbmV4dCB0aWNrLCBzaW1pbGFyIHRvIGBzZXRUaW1lb3V0YCB3aXRoIGEgdGltZW91dCBvZiBgMGAuXG4gKlxuICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vZGVib3VuY2luZy10aHJvdHRsaW5nLWV4cGxhaW5lZC1leGFtcGxlcy8pXG4gKiBmb3IgZGV0YWlscyBvdmVyIHRoZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGBfLmRlYm91bmNlYCBhbmQgYF8udGhyb3R0bGVgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVib3VuY2UuXG4gKiBAcGFyYW0ge251bWJlcn0gW3dhaXQ9MF0gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZGVsYXkuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIG9iamVjdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz1mYWxzZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSBsZWFkaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubWF4V2FpdF1cbiAqICBUaGUgbWF4aW11bSB0aW1lIGBmdW5jYCBpcyBhbGxvd2VkIHRvIGJlIGRlbGF5ZWQgYmVmb3JlIGl0J3MgaW52b2tlZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudHJhaWxpbmc9dHJ1ZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZGVib3VuY2VkIGZ1bmN0aW9uLlxuICogQGV4YW1wbGVcbiAqXG4gKiAvLyBBdm9pZCBjb3N0bHkgY2FsY3VsYXRpb25zIHdoaWxlIHRoZSB3aW5kb3cgc2l6ZSBpcyBpbiBmbHV4LlxuICogalF1ZXJ5KHdpbmRvdykub24oJ3Jlc2l6ZScsIF8uZGVib3VuY2UoY2FsY3VsYXRlTGF5b3V0LCAxNTApKTtcbiAqXG4gKiAvLyBJbnZva2UgYHNlbmRNYWlsYCB3aGVuIGNsaWNrZWQsIGRlYm91bmNpbmcgc3Vic2VxdWVudCBjYWxscy5cbiAqIGpRdWVyeShlbGVtZW50KS5vbignY2xpY2snLCBfLmRlYm91bmNlKHNlbmRNYWlsLCAzMDAsIHtcbiAqICAgJ2xlYWRpbmcnOiB0cnVlLFxuICogICAndHJhaWxpbmcnOiBmYWxzZVxuICogfSkpO1xuICpcbiAqIC8vIEVuc3VyZSBgYmF0Y2hMb2dgIGlzIGludm9rZWQgb25jZSBhZnRlciAxIHNlY29uZCBvZiBkZWJvdW5jZWQgY2FsbHMuXG4gKiB2YXIgZGVib3VuY2VkID0gXy5kZWJvdW5jZShiYXRjaExvZywgMjUwLCB7ICdtYXhXYWl0JzogMTAwMCB9KTtcbiAqIHZhciBzb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UoJy9zdHJlYW0nKTtcbiAqIGpRdWVyeShzb3VyY2UpLm9uKCdtZXNzYWdlJywgZGVib3VuY2VkKTtcbiAqXG4gKiAvLyBDYW5jZWwgdGhlIHRyYWlsaW5nIGRlYm91bmNlZCBpbnZvY2F0aW9uLlxuICogalF1ZXJ5KHdpbmRvdykub24oJ3BvcHN0YXRlJywgZGVib3VuY2VkLmNhbmNlbCk7XG4gKi9cbmZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgdmFyIGxhc3RBcmdzLFxuICAgICAgbGFzdFRoaXMsXG4gICAgICBtYXhXYWl0LFxuICAgICAgcmVzdWx0LFxuICAgICAgdGltZXJJZCxcbiAgICAgIGxhc3RDYWxsVGltZSxcbiAgICAgIGxhc3RJbnZva2VUaW1lID0gMCxcbiAgICAgIGxlYWRpbmcgPSBmYWxzZSxcbiAgICAgIG1heGluZyA9IGZhbHNlLFxuICAgICAgdHJhaWxpbmcgPSB0cnVlO1xuXG4gIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICB9XG4gIHdhaXQgPSB0b051bWJlcih3YWl0KSB8fCAwO1xuICBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICBsZWFkaW5nID0gISFvcHRpb25zLmxlYWRpbmc7XG4gICAgbWF4aW5nID0gJ21heFdhaXQnIGluIG9wdGlvbnM7XG4gICAgbWF4V2FpdCA9IG1heGluZyA/IG5hdGl2ZU1heCh0b051bWJlcihvcHRpb25zLm1heFdhaXQpIHx8IDAsIHdhaXQpIDogbWF4V2FpdDtcbiAgICB0cmFpbGluZyA9ICd0cmFpbGluZycgaW4gb3B0aW9ucyA/ICEhb3B0aW9ucy50cmFpbGluZyA6IHRyYWlsaW5nO1xuICB9XG5cbiAgZnVuY3Rpb24gaW52b2tlRnVuYyh0aW1lKSB7XG4gICAgdmFyIGFyZ3MgPSBsYXN0QXJncyxcbiAgICAgICAgdGhpc0FyZyA9IGxhc3RUaGlzO1xuXG4gICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcbiAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG4gICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gbGVhZGluZ0VkZ2UodGltZSkge1xuICAgIC8vIFJlc2V0IGFueSBgbWF4V2FpdGAgdGltZXIuXG4gICAgbGFzdEludm9rZVRpbWUgPSB0aW1lO1xuICAgIC8vIFN0YXJ0IHRoZSB0aW1lciBmb3IgdGhlIHRyYWlsaW5nIGVkZ2UuXG4gICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAvLyBJbnZva2UgdGhlIGxlYWRpbmcgZWRnZS5cbiAgICByZXR1cm4gbGVhZGluZyA/IGludm9rZUZ1bmModGltZSkgOiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiByZW1haW5pbmdXYWl0KHRpbWUpIHtcbiAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lLFxuICAgICAgICByZXN1bHQgPSB3YWl0IC0gdGltZVNpbmNlTGFzdENhbGw7XG5cbiAgICByZXR1cm4gbWF4aW5nID8gbmF0aXZlTWluKHJlc3VsdCwgbWF4V2FpdCAtIHRpbWVTaW5jZUxhc3RJbnZva2UpIDogcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvdWxkSW52b2tlKHRpbWUpIHtcbiAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lO1xuXG4gICAgLy8gRWl0aGVyIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwsIGFjdGl2aXR5IGhhcyBzdG9wcGVkIGFuZCB3ZSdyZSBhdCB0aGVcbiAgICAvLyB0cmFpbGluZyBlZGdlLCB0aGUgc3lzdGVtIHRpbWUgaGFzIGdvbmUgYmFja3dhcmRzIGFuZCB3ZSdyZSB0cmVhdGluZ1xuICAgIC8vIGl0IGFzIHRoZSB0cmFpbGluZyBlZGdlLCBvciB3ZSd2ZSBoaXQgdGhlIGBtYXhXYWl0YCBsaW1pdC5cbiAgICByZXR1cm4gKGxhc3RDYWxsVGltZSA9PT0gdW5kZWZpbmVkIHx8ICh0aW1lU2luY2VMYXN0Q2FsbCA+PSB3YWl0KSB8fFxuICAgICAgKHRpbWVTaW5jZUxhc3RDYWxsIDwgMCkgfHwgKG1heGluZyAmJiB0aW1lU2luY2VMYXN0SW52b2tlID49IG1heFdhaXQpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRpbWVyRXhwaXJlZCgpIHtcbiAgICB2YXIgdGltZSA9IG5vdygpO1xuICAgIGlmIChzaG91bGRJbnZva2UodGltZSkpIHtcbiAgICAgIHJldHVybiB0cmFpbGluZ0VkZ2UodGltZSk7XG4gICAgfVxuICAgIC8vIFJlc3RhcnQgdGhlIHRpbWVyLlxuICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgcmVtYWluaW5nV2FpdCh0aW1lKSk7XG4gIH1cblxuICBmdW5jdGlvbiB0cmFpbGluZ0VkZ2UodGltZSkge1xuICAgIHRpbWVySWQgPSB1bmRlZmluZWQ7XG5cbiAgICAvLyBPbmx5IGludm9rZSBpZiB3ZSBoYXZlIGBsYXN0QXJnc2Agd2hpY2ggbWVhbnMgYGZ1bmNgIGhhcyBiZWVuXG4gICAgLy8gZGVib3VuY2VkIGF0IGxlYXN0IG9uY2UuXG4gICAgaWYgKHRyYWlsaW5nICYmIGxhc3RBcmdzKSB7XG4gICAgICByZXR1cm4gaW52b2tlRnVuYyh0aW1lKTtcbiAgICB9XG4gICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsKCkge1xuICAgIGlmICh0aW1lcklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcklkKTtcbiAgICB9XG4gICAgbGFzdEludm9rZVRpbWUgPSAwO1xuICAgIGxhc3RBcmdzID0gbGFzdENhbGxUaW1lID0gbGFzdFRoaXMgPSB0aW1lcklkID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgcmV0dXJuIHRpbWVySWQgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IHRyYWlsaW5nRWRnZShub3coKSk7XG4gIH1cblxuICBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7XG4gICAgdmFyIHRpbWUgPSBub3coKSxcbiAgICAgICAgaXNJbnZva2luZyA9IHNob3VsZEludm9rZSh0aW1lKTtcblxuICAgIGxhc3RBcmdzID0gYXJndW1lbnRzO1xuICAgIGxhc3RUaGlzID0gdGhpcztcbiAgICBsYXN0Q2FsbFRpbWUgPSB0aW1lO1xuXG4gICAgaWYgKGlzSW52b2tpbmcpIHtcbiAgICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGxlYWRpbmdFZGdlKGxhc3RDYWxsVGltZSk7XG4gICAgICB9XG4gICAgICBpZiAobWF4aW5nKSB7XG4gICAgICAgIC8vIEhhbmRsZSBpbnZvY2F0aW9ucyBpbiBhIHRpZ2h0IGxvb3AuXG4gICAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgICAgIHJldHVybiBpbnZva2VGdW5jKGxhc3RDYWxsVGltZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgZGVib3VuY2VkLmNhbmNlbCA9IGNhbmNlbDtcbiAgZGVib3VuY2VkLmZsdXNoID0gZmx1c2g7XG4gIHJldHVybiBkZWJvdW5jZWQ7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHRocm90dGxlZCBmdW5jdGlvbiB0aGF0IG9ubHkgaW52b2tlcyBgZnVuY2AgYXQgbW9zdCBvbmNlIHBlclxuICogZXZlcnkgYHdhaXRgIG1pbGxpc2Vjb25kcy4gVGhlIHRocm90dGxlZCBmdW5jdGlvbiBjb21lcyB3aXRoIGEgYGNhbmNlbGBcbiAqIG1ldGhvZCB0byBjYW5jZWwgZGVsYXllZCBgZnVuY2AgaW52b2NhdGlvbnMgYW5kIGEgYGZsdXNoYCBtZXRob2QgdG9cbiAqIGltbWVkaWF0ZWx5IGludm9rZSB0aGVtLiBQcm92aWRlIGBvcHRpb25zYCB0byBpbmRpY2F0ZSB3aGV0aGVyIGBmdW5jYFxuICogc2hvdWxkIGJlIGludm9rZWQgb24gdGhlIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YFxuICogdGltZW91dC4gVGhlIGBmdW5jYCBpcyBpbnZva2VkIHdpdGggdGhlIGxhc3QgYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZVxuICogdGhyb3R0bGVkIGZ1bmN0aW9uLiBTdWJzZXF1ZW50IGNhbGxzIHRvIHRoZSB0aHJvdHRsZWQgZnVuY3Rpb24gcmV0dXJuIHRoZVxuICogcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYCBpbnZvY2F0aW9uLlxuICpcbiAqICoqTm90ZToqKiBJZiBgbGVhZGluZ2AgYW5kIGB0cmFpbGluZ2Agb3B0aW9ucyBhcmUgYHRydWVgLCBgZnVuY2AgaXNcbiAqIGludm9rZWQgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uXG4gKiBpcyBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuXG4gKlxuICogSWYgYHdhaXRgIGlzIGAwYCBhbmQgYGxlYWRpbmdgIGlzIGBmYWxzZWAsIGBmdW5jYCBpbnZvY2F0aW9uIGlzIGRlZmVycmVkXG4gKiB1bnRpbCB0byB0aGUgbmV4dCB0aWNrLCBzaW1pbGFyIHRvIGBzZXRUaW1lb3V0YCB3aXRoIGEgdGltZW91dCBvZiBgMGAuXG4gKlxuICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vZGVib3VuY2luZy10aHJvdHRsaW5nLWV4cGxhaW5lZC1leGFtcGxlcy8pXG4gKiBmb3IgZGV0YWlscyBvdmVyIHRoZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGBfLnRocm90dGxlYCBhbmQgYF8uZGVib3VuY2VgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gdGhyb3R0bGUuXG4gKiBAcGFyYW0ge251bWJlcn0gW3dhaXQ9MF0gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gdGhyb3R0bGUgaW52b2NhdGlvbnMgdG8uXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIG9iamVjdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz10cnVlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIGxlYWRpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudHJhaWxpbmc9dHJ1ZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgdGhyb3R0bGVkIGZ1bmN0aW9uLlxuICogQGV4YW1wbGVcbiAqXG4gKiAvLyBBdm9pZCBleGNlc3NpdmVseSB1cGRhdGluZyB0aGUgcG9zaXRpb24gd2hpbGUgc2Nyb2xsaW5nLlxuICogalF1ZXJ5KHdpbmRvdykub24oJ3Njcm9sbCcsIF8udGhyb3R0bGUodXBkYXRlUG9zaXRpb24sIDEwMCkpO1xuICpcbiAqIC8vIEludm9rZSBgcmVuZXdUb2tlbmAgd2hlbiB0aGUgY2xpY2sgZXZlbnQgaXMgZmlyZWQsIGJ1dCBub3QgbW9yZSB0aGFuIG9uY2UgZXZlcnkgNSBtaW51dGVzLlxuICogdmFyIHRocm90dGxlZCA9IF8udGhyb3R0bGUocmVuZXdUb2tlbiwgMzAwMDAwLCB7ICd0cmFpbGluZyc6IGZhbHNlIH0pO1xuICogalF1ZXJ5KGVsZW1lbnQpLm9uKCdjbGljaycsIHRocm90dGxlZCk7XG4gKlxuICogLy8gQ2FuY2VsIHRoZSB0cmFpbGluZyB0aHJvdHRsZWQgaW52b2NhdGlvbi5cbiAqIGpRdWVyeSh3aW5kb3cpLm9uKCdwb3BzdGF0ZScsIHRocm90dGxlZC5jYW5jZWwpO1xuICovXG5mdW5jdGlvbiB0aHJvdHRsZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG4gIHZhciBsZWFkaW5nID0gdHJ1ZSxcbiAgICAgIHRyYWlsaW5nID0gdHJ1ZTtcblxuICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgfVxuICBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICBsZWFkaW5nID0gJ2xlYWRpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMubGVhZGluZyA6IGxlYWRpbmc7XG4gICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcbiAgfVxuICByZXR1cm4gZGVib3VuY2UoZnVuYywgd2FpdCwge1xuICAgICdsZWFkaW5nJzogbGVhZGluZyxcbiAgICAnbWF4V2FpdCc6IHdhaXQsXG4gICAgJ3RyYWlsaW5nJzogdHJhaWxpbmdcbiAgfSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlXG4gKiBbbGFuZ3VhZ2UgdHlwZV0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLWVjbWFzY3JpcHQtbGFuZ3VhZ2UtdHlwZXMpXG4gKiBvZiBgT2JqZWN0YC4gKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3Qoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KF8ubm9vcCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN5bWJvbGAgcHJpbWl0aXZlIG9yIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHN5bWJvbCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzU3ltYm9sKFN5bWJvbC5pdGVyYXRvcik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1N5bWJvbCgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N5bWJvbCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzeW1ib2wnIHx8XG4gICAgKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3ltYm9sVGFnKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgbnVtYmVyLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgbnVtYmVyLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRvTnVtYmVyKDMuMik7XG4gKiAvLyA9PiAzLjJcbiAqXG4gKiBfLnRvTnVtYmVyKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gNWUtMzI0XG4gKlxuICogXy50b051bWJlcihJbmZpbml0eSk7XG4gKiAvLyA9PiBJbmZpbml0eVxuICpcbiAqIF8udG9OdW1iZXIoJzMuMicpO1xuICogLy8gPT4gMy4yXG4gKi9cbmZ1bmN0aW9uIHRvTnVtYmVyKHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKGlzU3ltYm9sKHZhbHVlKSkge1xuICAgIHJldHVybiBOQU47XG4gIH1cbiAgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgIHZhciBvdGhlciA9IHR5cGVvZiB2YWx1ZS52YWx1ZU9mID09ICdmdW5jdGlvbicgPyB2YWx1ZS52YWx1ZU9mKCkgOiB2YWx1ZTtcbiAgICB2YWx1ZSA9IGlzT2JqZWN0KG90aGVyKSA/IChvdGhlciArICcnKSA6IG90aGVyO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IDAgPyB2YWx1ZSA6ICt2YWx1ZTtcbiAgfVxuICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UocmVUcmltLCAnJyk7XG4gIHZhciBpc0JpbmFyeSA9IHJlSXNCaW5hcnkudGVzdCh2YWx1ZSk7XG4gIHJldHVybiAoaXNCaW5hcnkgfHwgcmVJc09jdGFsLnRlc3QodmFsdWUpKVxuICAgID8gZnJlZVBhcnNlSW50KHZhbHVlLnNsaWNlKDIpLCBpc0JpbmFyeSA/IDIgOiA4KVxuICAgIDogKHJlSXNCYWRIZXgudGVzdCh2YWx1ZSkgPyBOQU4gOiArdmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRocm90dGxlO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgcGtnTmFtZSA9ICduYW5vLWNzcyc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gd2Fybk9uTWlzc2luZ0RlcGVuZGVuY2llcyAoYWRkb24sIHJlbmRlcmVyLCBkZXBzKSB7XG4gICAgdmFyIG1pc3NpbmcgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGVwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgbmFtZSA9IGRlcHNbaV07XG5cbiAgICAgICAgaWYgKCFyZW5kZXJlcltuYW1lXSkge1xuICAgICAgICAgICAgbWlzc2luZy5wdXNoKG5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG1pc3NpbmcubGVuZ3RoKSB7XG4gICAgICAgIHZhciBzdHIgPSAnQWRkb24gXCInICsgYWRkb24gKyAnXCIgaXMgbWlzc2luZyB0aGUgZm9sbG93aW5nIGRlcGVuZGVuY2llczonO1xuXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbWlzc2luZy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgc3RyICs9ICdcXG4gcmVxdWlyZShcIicgKyBwa2dOYW1lICsgJy9hZGRvbi8nICsgbWlzc2luZ1tqXSArICdcIikuYWRkb24obmFubyk7JztcbiAgICAgICAgfVxuXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihzdHIpO1xuICAgIH1cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuYWRkb24gPSBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICAvLyBDU1NPTSBzdXBwb3J0IG9ubHkgYnJvd3NlciBlbnZpcm9ubWVudC5cbiAgICBpZiAoIXJlbmRlcmVyLmNsaWVudCkgcmV0dXJuO1xuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgcmVxdWlyZSgnLi9fX2Rldl9fL3dhcm5Pbk1pc3NpbmdEZXBlbmRlbmNpZXMnKSgnY3Nzb20nLCByZW5kZXJlciwgWydzaCddKTtcbiAgICB9XG5cbiAgICAvLyBTdHlsZSBzaGVldCBmb3IgbWVkaWEgcXVlcmllcy5cbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHJlbmRlcmVyLm1zaCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJykpO1xuXG4gICAgcmVuZGVyZXIuY3JlYXRlUnVsZSA9IGZ1bmN0aW9uIChzZWxlY3RvciwgcHJlbHVkZSkge1xuICAgICAgICB2YXIgcmF3Q3NzID0gc2VsZWN0b3IgKyAne30nO1xuICAgICAgICBpZiAocHJlbHVkZSkgcmF3Q3NzID0gcHJlbHVkZSArICd7JyArIHJhd0NzcyArICd9JztcbiAgICAgICAgdmFyIHNoZWV0ID0gcHJlbHVkZSA/IHJlbmRlcmVyLm1zaC5zaGVldCA6IHJlbmRlcmVyLnNoLnNoZWV0O1xuICAgICAgICB2YXIgaW5kZXggPSBzaGVldC5pbnNlcnRSdWxlKHJhd0Nzcywgc2hlZXQuY3NzUnVsZXMubGVuZ3RoKTtcbiAgICAgICAgdmFyIHJ1bGUgPSAoc2hlZXQuY3NzUnVsZXMgfHwgc2hlZXQucnVsZXMpW2luZGV4XTtcblxuICAgICAgICAvLyBLZWVwIHRyYWNrIG9mIGBpbmRleGAgd2hlcmUgcnVsZSB3YXMgaW5zZXJ0ZWQgaW4gdGhlIHNoZWV0LiBUaGlzIGlzXG4gICAgICAgIC8vIG5lZWRlZCBmb3IgcnVsZSBkZWxldGlvbi5cbiAgICAgICAgcnVsZS5pbmRleCA9IGluZGV4O1xuXG4gICAgICAgIGlmIChwcmVsdWRlKSB7XG4gICAgICAgICAgICAvLyBJZiBydWxlIGhhcyBtZWRpYSBxdWVyeSAoaXQgaGFzIHByZWx1ZGUpLCBtb3ZlIHN0eWxlIChDU1NTdHlsZURlY2xhcmF0aW9uKVxuICAgICAgICAgICAgLy8gb2JqZWN0IHRvIHRoZSBcInRvcFwiIHRvIG5vcm1hbGl6ZSBpdCB3aXRoIGEgcnVsZSB3aXRob3V0IHRoZSBtZWRpYVxuICAgICAgICAgICAgLy8gcXVlcnksIHNvIHRoYXQgYm90aCBydWxlcyBoYXZlIGAuc3R5bGVgIHByb3BlcnR5IGF2YWlsYWJsZS5cbiAgICAgICAgICAgIHZhciBzZWxlY3RvclJ1bGUgPSAocnVsZS5jc3NSdWxlcyB8fCBydWxlLnJ1bGVzKVswXTtcbiAgICAgICAgICAgIHJ1bGUuc3R5bGUgPSBzZWxlY3RvclJ1bGUuc3R5bGU7XG4gICAgICAgICAgICBydWxlLnN0eWxlTWFwID0gc2VsZWN0b3JSdWxlLnN0eWxlTWFwO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJ1bGU7XG4gICAgfTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciByZW1vdmVSdWxlID0gcmVxdWlyZSgnLi92Y3Nzb20vcmVtb3ZlUnVsZScpLnJlbW92ZVJ1bGU7XG5cbmV4cG9ydHMuYWRkb24gPSBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICAvLyBWQ1NTT00gc3VwcG9ydCBvbmx5IGJyb3dzZXIgZW52aXJvbm1lbnQuXG4gICAgaWYgKCFyZW5kZXJlci5jbGllbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIHJlcXVpcmUoJy4vX19kZXZfXy93YXJuT25NaXNzaW5nRGVwZW5kZW5jaWVzJykoJ2Nzc29tJywgcmVuZGVyZXIsIFsnY3JlYXRlUnVsZSddKTsgLy8gY3Nzb21cbiAgICB9XG5cbiAgICB2YXIga2ViYWIgPSByZW5kZXJlci5rZWJhYjtcblxuICAgIGZ1bmN0aW9uIFZSdWxlIChzZWxlY3RvciwgcHJlbHVkZSkge1xuICAgICAgICB0aGlzLnJ1bGUgPSByZW5kZXJlci5jcmVhdGVSdWxlKHNlbGVjdG9yLCBwcmVsdWRlKTtcbiAgICAgICAgdGhpcy5kZWNsID0ge307XG4gICAgfVxuICAgIFZSdWxlLnByb3RvdHlwZS5kaWZmID0gZnVuY3Rpb24gKG5ld0RlY2wpIHtcbiAgICAgICAgdmFyIG9sZERlY2wgPSB0aGlzLmRlY2w7XG4gICAgICAgIHZhciBzdHlsZSA9IHRoaXMucnVsZS5zdHlsZTtcbiAgICAgICAgdmFyIHByb3BlcnR5O1xuICAgICAgICBmb3IgKHByb3BlcnR5IGluIG9sZERlY2wpXG4gICAgICAgICAgICBpZiAobmV3RGVjbFtwcm9wZXJ0eV0gPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICBzdHlsZS5yZW1vdmVQcm9wZXJ0eShwcm9wZXJ0eSk7XG4gICAgICAgIGZvciAocHJvcGVydHkgaW4gbmV3RGVjbClcbiAgICAgICAgICAgIGlmIChuZXdEZWNsW3Byb3BlcnR5XSAhPT0gb2xkRGVjbFtwcm9wZXJ0eV0pXG4gICAgICAgICAgICAgICAgc3R5bGUuc2V0UHJvcGVydHkoa2ViYWIocHJvcGVydHkpLCBuZXdEZWNsW3Byb3BlcnR5XSk7XG4gICAgICAgIHRoaXMuZGVjbCA9IG5ld0RlY2w7XG4gICAgfTtcbiAgICBWUnVsZS5wcm90b3R5cGUuZGVsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZW1vdmVSdWxlKHRoaXMucnVsZSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIFZTaGVldCAoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiB7XG4gICAgICAgICAqICAgJzxhdC1ydWxlLXByZWx1ZGU+Jzoge1xuICAgICAgICAgKiAgICAgJzxzZWxlY3Rvcj4nOiB7XG4gICAgICAgICAqICAgICAgIGNvbG9yOiAncmVkXG4gICAgICAgICAqICAgICB9XG4gICAgICAgICAqICAgfVxuICAgICAgICAgKiB9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRyZWUgPSB7fTtcbiAgICB9XG4gICAgVlNoZWV0LnByb3RvdHlwZS5kaWZmID0gZnVuY3Rpb24gKG5ld1RyZWUpIHtcbiAgICAgICAgdmFyIG9sZFRyZWUgPSB0aGlzLnRyZWU7XG5cbiAgICAgICAgLy8gUmVtb3ZlIG1lZGlhIHF1ZXJpZXMgbm90IHByZXNlbnQgaW4gbmV3IHRyZWUuXG4gICAgICAgIGZvciAodmFyIHByZWx1ZGUgaW4gb2xkVHJlZSkge1xuICAgICAgICAgICAgaWYgKG5ld1RyZWVbcHJlbHVkZV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHZhciBydWxlcyA9IG9sZFRyZWVbcHJlbHVkZV07XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgc2VsZWN0b3IgaW4gcnVsZXMpXG4gICAgICAgICAgICAgICAgICAgIHJ1bGVzW3NlbGVjdG9yXS5kZWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIHByZWx1ZGUgaW4gbmV3VHJlZSkge1xuICAgICAgICAgICAgaWYgKG9sZFRyZWVbcHJlbHVkZV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIC8vIFdob2xlIG1lZGlhIHF1ZXJ5IGlzIG5ldy5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBzZWxlY3RvciBpbiBuZXdUcmVlW3ByZWx1ZGVdKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBydWxlID0gbmV3IFZSdWxlKHNlbGVjdG9yLCBwcmVsdWRlKTtcbiAgICAgICAgICAgICAgICAgICAgcnVsZS5kaWZmKG5ld1RyZWVbcHJlbHVkZV1bc2VsZWN0b3JdKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3VHJlZVtwcmVsdWRlXVtzZWxlY3Rvcl0gPSBydWxlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gT2xkIHRyZWUgYWxyZWFkeSBoYXMgcnVsZXMgd2l0aCB0aGlzIG1lZGlhIHF1ZXJ5LlxuICAgICAgICAgICAgICAgIHZhciBvbGRSdWxlcyA9IG9sZFRyZWVbcHJlbHVkZV07XG4gICAgICAgICAgICAgICAgdmFyIG5ld1J1bGVzID0gbmV3VHJlZVtwcmVsdWRlXTtcblxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBydWxlcyBub3QgcHJlc2VudCBpbiBuZXcgdHJlZS5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBzZWxlY3RvciBpbiBvbGRSdWxlcylcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXdSdWxlc1tzZWxlY3Rvcl0pXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRSdWxlc1tzZWxlY3Rvcl0uZGVsKCk7XG5cbiAgICAgICAgICAgICAgICAvLyBBcHBseSBuZXcgcnVsZXMuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgc2VsZWN0b3IgaW4gbmV3UnVsZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJ1bGUgPSBvbGRSdWxlc1tzZWxlY3Rvcl07XG4gICAgICAgICAgICAgICAgICAgIGlmIChydWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBydWxlLmRpZmYobmV3UnVsZXNbc2VsZWN0b3JdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1J1bGVzW3NlbGVjdG9yXSA9IHJ1bGU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBydWxlID0gbmV3IFZSdWxlKHNlbGVjdG9yLCBwcmVsdWRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGUuZGlmZihuZXdSdWxlc1tzZWxlY3Rvcl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3UnVsZXNbc2VsZWN0b3JdID0gcnVsZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudHJlZSA9IG5ld1RyZWU7XG4gICAgfTtcblxuICAgIHJlbmRlcmVyLlZSdWxlID0gVlJ1bGU7XG4gICAgcmVuZGVyZXIuVlNoZWV0ID0gVlNoZWV0O1xufTtcbiIsImZ1bmN0aW9uIGNzc1RvVHJlZSAodHJlZSwgY3NzLCBzZWxlY3RvciwgcHJlbHVkZSkge1xuICAgIHZhciBkZWNsYXJhdGlvbnMgPSB7fTtcbiAgICB2YXIgaGFzRGVjbGFyYXRpb25zID0gZmFsc2U7XG4gICAgdmFyIGtleSwgdmFsdWU7XG5cbiAgICBmb3IgKGtleSBpbiBjc3MpIHtcbiAgICAgICAgdmFsdWUgPSBjc3Nba2V5XTtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGhhc0RlY2xhcmF0aW9ucyA9IHRydWU7XG4gICAgICAgICAgICBkZWNsYXJhdGlvbnNba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGhhc0RlY2xhcmF0aW9ucykge1xuICAgICAgICBpZiAoIXRyZWVbcHJlbHVkZV0pIHRyZWVbcHJlbHVkZV0gPSB7fTtcbiAgICAgICAgdHJlZVtwcmVsdWRlXVtzZWxlY3Rvcl0gPSBkZWNsYXJhdGlvbnM7XG4gICAgfVxuXG4gICAgZm9yIChrZXkgaW4gY3NzKSB7XG4gICAgICAgIHZhbHVlID0gY3NzW2tleV07XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBpZiAoa2V5WzBdID09PSAnQCcpIHtcbiAgICAgICAgICAgICAgICBjc3NUb1RyZWUodHJlZSwgdmFsdWUsIHNlbGVjdG9yLCBrZXkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgaGFzQ3VycmVudFN5bWJvbCA9IGtleS5pbmRleE9mKCcmJykgPiAtMTtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0b3JQYXJ0cyA9IHNlbGVjdG9yLnNwbGl0KCcsJyk7XG4gICAgICAgICAgICAgICAgaWYgKGhhc0N1cnJlbnRTeW1ib2wpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxlY3RvclBhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RvclBhcnRzW2ldID0ga2V5LnJlcGxhY2UoLyYvZywgc2VsZWN0b3JQYXJ0c1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGVjdG9yUGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yUGFydHNbaV0gPSBzZWxlY3RvclBhcnRzW2ldICsgJyAnICsga2V5O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNzc1RvVHJlZSh0cmVlLCB2YWx1ZSwgc2VsZWN0b3JQYXJ0cy5qb2luKCcsJyksIHByZWx1ZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcblxuZXhwb3J0cy5jc3NUb1RyZWUgPSBjc3NUb1RyZWU7XG4iLCJmdW5jdGlvbiByZW1vdmVSdWxlIChydWxlKSB7XG4gICAgdmFyIG1heEluZGV4ID0gcnVsZS5pbmRleDtcbiAgICB2YXIgc2ggPSBydWxlLnBhcmVudFN0eWxlU2hlZXQ7XG4gICAgdmFyIHJ1bGVzID0gc2guY3NzUnVsZXMgfHwgc2gucnVsZXM7XG4gICAgbWF4SW5kZXggPSBNYXRoLm1heChtYXhJbmRleCwgcnVsZXMubGVuZ3RoIC0gMSk7XG4gICAgd2hpbGUgKG1heEluZGV4ID49IDApIHtcbiAgICAgICAgaWYgKHJ1bGVzW21heEluZGV4XSA9PT0gcnVsZSkge1xuICAgICAgICAgICAgc2guZGVsZXRlUnVsZShtYXhJbmRleCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBtYXhJbmRleC0tO1xuICAgIH1cbn1cblxuZXhwb3J0cy5yZW1vdmVSdWxlID0gcmVtb3ZlUnVsZTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIEtFQkFCX1JFR0VYID0gL1tBLVpdL2c7XG5cbnZhciBoYXNoID0gZnVuY3Rpb24gKHN0cikge1xuICAgIHZhciBoID0gNTM4MSwgaSA9IHN0ci5sZW5ndGg7XG5cbiAgICB3aGlsZSAoaSkgaCA9IChoICogMzMpIF4gc3RyLmNoYXJDb2RlQXQoLS1pKTtcblxuICAgIHJldHVybiAnXycgKyAoaCA+Pj4gMCkudG9TdHJpbmcoMzYpO1xufTtcblxuZXhwb3J0cy5jcmVhdGUgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgY29uZmlnID0gY29uZmlnIHx8IHt9O1xuICAgIHZhciBhc3NpZ24gPSBjb25maWcuYXNzaWduIHx8IE9iamVjdC5hc3NpZ247XG4gICAgdmFyIGNsaWVudCA9IHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnO1xuXG4gICAgLy8gQ2hlY2sgaWYgd2UgYXJlIHJlYWxseSBpbiBicm93c2VyIGVudmlyb25tZW50LlxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGlmIChjbGllbnQpIHtcbiAgICAgICAgICAgIGlmICgodHlwZW9mIGRvY3VtZW50ICE9PSAnb2JqZWN0JykgfHwgIWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdIVE1MJykpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICAgICAgICAnbmFuby1jc3MgZGV0ZWN0ZWQgYnJvd3NlciBlbnZpcm9ubWVudCBiZWNhdXNlIG9mIFwid2luZG93XCIgZ2xvYmFsLCBidXQgJyArXG4gICAgICAgICAgICAgICAgICAgICdcImRvY3VtZW50XCIgZ2xvYmFsIHNlZW1zIHRvIGJlIGRlZmVjdGl2ZS4nXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciByZW5kZXJlciA9IGFzc2lnbih7XG4gICAgICAgIHJhdzogJycsXG4gICAgICAgIHBmeDogJ18nLFxuICAgICAgICBjbGllbnQ6IGNsaWVudCxcbiAgICAgICAgYXNzaWduOiBhc3NpZ24sXG4gICAgICAgIHN0cmluZ2lmeTogSlNPTi5zdHJpbmdpZnksXG4gICAgICAgIGtlYmFiOiBmdW5jdGlvbiAocHJvcCkge1xuICAgICAgICAgICAgcmV0dXJuIHByb3AucmVwbGFjZShLRUJBQl9SRUdFWCwgJy0kJicpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGRlY2w6IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICBrZXkgPSByZW5kZXJlci5rZWJhYihrZXkpO1xuICAgICAgICAgICAgcmV0dXJuIGtleSArICc6JyArIHZhbHVlICsgJzsnO1xuICAgICAgICB9LFxuICAgICAgICBoYXNoOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gaGFzaChyZW5kZXJlci5zdHJpbmdpZnkob2JqKSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNlbGVjdG9yOiBmdW5jdGlvbiAocGFyZW50LCBzZWxlY3Rvcikge1xuICAgICAgICAgICAgcmV0dXJuIHBhcmVudCArIChzZWxlY3RvclswXSA9PT0gJzonID8gJycgIDogJyAnKSArIHNlbGVjdG9yO1xuICAgICAgICB9LFxuICAgICAgICBwdXRSYXc6IGZ1bmN0aW9uIChyYXdDc3NSdWxlKSB7XG4gICAgICAgICAgICByZW5kZXJlci5yYXcgKz0gcmF3Q3NzUnVsZTtcbiAgICAgICAgfVxuICAgIH0sIGNvbmZpZyk7XG5cbiAgICBpZiAocmVuZGVyZXIuY2xpZW50KSB7XG4gICAgICAgIGlmICghcmVuZGVyZXIuc2gpXG4gICAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHJlbmRlcmVyLnNoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKSk7XG5cbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgIHJlbmRlcmVyLnNoLnNldEF0dHJpYnV0ZSgnZGF0YS1uYW5vLWNzcy1kZXYnLCAnJyk7XG5cbiAgICAgICAgICAgIC8vIFRlc3Qgc3R5bGUgc2hlZXQgdXNlZCBpbiBERVYgbW9kZSB0byB0ZXN0IGlmIC5pbnNldFJ1bGUoKSB3b3VsZCB0aHJvdy5cbiAgICAgICAgICAgIHJlbmRlcmVyLnNoVGVzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICAgICAgICByZW5kZXJlci5zaFRlc3Quc2V0QXR0cmlidXRlKCdkYXRhLW5hbm8tY3NzLWRldi10ZXN0cycsICcnKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQocmVuZGVyZXIuc2hUZXN0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlbmRlcmVyLnB1dFJhdyA9IGZ1bmN0aW9uIChyYXdDc3NSdWxlKSB7XG4gICAgICAgICAgICAvLyAuaW5zZXJ0UnVsZSgpIGlzIGZhc3RlciB0aGFuIC5hcHBlbmRDaGlsZCgpLCB0aGF0J3Mgd2h5IHdlIHVzZSBpdCBpbiBQUk9ELlxuICAgICAgICAgICAgLy8gQnV0IENTUyBpbmplY3RlZCB1c2luZyAuaW5zZXJ0UnVsZSgpIGlzIG5vdCBkaXNwbGF5ZWQgaW4gQ2hyb21lIERldnRvb2xzLFxuICAgICAgICAgICAgLy8gdGhhdCdzIHdoeSB3ZSB1c2UgLmFwcGVuZENoaWxkIGluIERFVi5cbiAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNoZWV0ID0gcmVuZGVyZXIuc2guc2hlZXQ7XG5cbiAgICAgICAgICAgICAgICAvLyBVbmtub3duIHBzZXVkby1zZWxlY3RvcnMgd2lsbCB0aHJvdywgdGhpcyB0cnkvY2F0Y2ggc3dhbGxvd3MgYWxsIGVycm9ycy5cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBzaGVldC5pbnNlcnRSdWxlKHJhd0Nzc1J1bGUsIHNoZWV0LmNzc1J1bGVzLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVtcHR5XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHt9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFRlc3QgaWYgLmluc2VydFJ1bGUoKSB3b3JrcyBpbiBkZXYgbW9kZS4gVW5rbm93biBwc2V1ZG8tc2VsZWN0b3JzIHdpbGwgdGhyb3cgd2hlblxuICAgICAgICAgICAgICAgIC8vIC5pbnNlcnRSdWxlKCkgaXMgdXNlZCwgYnV0IC5hcHBlbmRDaGlsZCgpIHdpbGwgbm90IHRocm93LlxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLnNoVGVzdC5zaGVldC5pbnNlcnRSdWxlKHJhd0Nzc1J1bGUsIHJlbmRlcmVyLnNoVGVzdC5zaGVldC5jc3NSdWxlcy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25maWcudmVyYm9zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBJbnNlcnQgcHJldHR5LXByaW50ZWQgQ1NTIGZvciBkZXYgbW9kZS5cbiAgICAgICAgICAgICAgICByZW5kZXJlci5zaC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShyYXdDc3NSdWxlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcmVuZGVyZXIucHV0ID0gZnVuY3Rpb24gKHNlbGVjdG9yLCBkZWNscywgYXRydWxlKSB7XG4gICAgICAgIHZhciBzdHIgPSAnJztcbiAgICAgICAgdmFyIHByb3AsIHZhbHVlO1xuICAgICAgICB2YXIgcG9zdHBvbmVkID0gW107XG5cbiAgICAgICAgZm9yIChwcm9wIGluIGRlY2xzKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IGRlY2xzW3Byb3BdO1xuXG4gICAgICAgICAgICBpZiAoKHZhbHVlIGluc3RhbmNlb2YgT2JqZWN0KSAmJiAhKHZhbHVlIGluc3RhbmNlb2YgQXJyYXkpKSB7XG4gICAgICAgICAgICAgICAgcG9zdHBvbmVkLnB1c2gocHJvcCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIXJlbmRlcmVyLnNvdXJjZW1hcHMpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RyICs9ICcgICAgJyArIHJlbmRlcmVyLmRlY2wocHJvcCwgdmFsdWUsIHNlbGVjdG9yLCBhdHJ1bGUpICsgJ1xcbic7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3RyICs9IHJlbmRlcmVyLmRlY2wocHJvcCwgdmFsdWUsIHNlbGVjdG9yLCBhdHJ1bGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzdHIpIHtcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIXJlbmRlcmVyLnNvdXJjZW1hcHMpIHtcbiAgICAgICAgICAgICAgICBzdHIgPSAnXFxuJyArIHNlbGVjdG9yICsgJyB7XFxuJyArIHN0ciArICd9XFxuJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3RyID0gc2VsZWN0b3IgKyAneycgKyBzdHIgKyAnfSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZW5kZXJlci5wdXRSYXcoYXRydWxlID8gYXRydWxlICsgJ3snICsgc3RyICsgJ30nIDogc3RyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zdHBvbmVkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBwcm9wID0gcG9zdHBvbmVkW2ldO1xuXG4gICAgICAgICAgICBpZiAocHJvcFswXSA9PT0gJ0AnICYmIHByb3AgIT09ICdAZm9udC1mYWNlJykge1xuICAgICAgICAgICAgICAgIHJlbmRlcmVyLnB1dEF0KHNlbGVjdG9yLCBkZWNsc1twcm9wXSwgcHJvcCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlbmRlcmVyLnB1dChyZW5kZXJlci5zZWxlY3RvcihzZWxlY3RvciwgcHJvcCksIGRlY2xzW3Byb3BdLCBhdHJ1bGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJlbmRlcmVyLnB1dEF0ID0gcmVuZGVyZXIucHV0O1xuXG4gICAgcmV0dXJuIHJlbmRlcmVyO1xufTtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiRHJhZ2dhYmxlQ29yZVwiLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfRHJhZ2dhYmxlQ29yZS5kZWZhdWx0O1xuICB9XG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcblxudmFyIFJlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZShcInJlYWN0XCIpKTtcblxudmFyIF9wcm9wVHlwZXMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJwcm9wLXR5cGVzXCIpKTtcblxudmFyIF9yZWFjdERvbSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInJlYWN0LWRvbVwiKSk7XG5cbnZhciBfY2xhc3NuYW1lcyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImNsYXNzbmFtZXNcIikpO1xuXG52YXIgX2RvbUZucyA9IHJlcXVpcmUoXCIuL3V0aWxzL2RvbUZuc1wiKTtcblxudmFyIF9wb3NpdGlvbkZucyA9IHJlcXVpcmUoXCIuL3V0aWxzL3Bvc2l0aW9uRm5zXCIpO1xuXG52YXIgX3NoaW1zID0gcmVxdWlyZShcIi4vdXRpbHMvc2hpbXNcIik7XG5cbnZhciBfRHJhZ2dhYmxlQ29yZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vRHJhZ2dhYmxlQ29yZVwiKSk7XG5cbnZhciBfbG9nID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi91dGlscy9sb2dcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUoKSB7IGlmICh0eXBlb2YgV2Vha01hcCAhPT0gXCJmdW5jdGlvblwiKSByZXR1cm4gbnVsbDsgdmFyIGNhY2hlID0gbmV3IFdlYWtNYXAoKTsgX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlID0gZnVuY3Rpb24gX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlKCkgeyByZXR1cm4gY2FjaGU7IH07IHJldHVybiBjYWNoZTsgfVxuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGlmIChvYmogPT09IG51bGwgfHwgX3R5cGVvZihvYmopICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiBvYmogIT09IFwiZnVuY3Rpb25cIikgeyByZXR1cm4geyBkZWZhdWx0OiBvYmogfTsgfSB2YXIgY2FjaGUgPSBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUoKTsgaWYgKGNhY2hlICYmIGNhY2hlLmhhcyhvYmopKSB7IHJldHVybiBjYWNoZS5nZXQob2JqKTsgfSB2YXIgbmV3T2JqID0ge307IHZhciBoYXNQcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgeyB2YXIgZGVzYyA9IGhhc1Byb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDogbnVsbDsgaWYgKGRlc2MgJiYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOyB9IGVsc2UgeyBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgaWYgKGNhY2hlKSB7IGNhY2hlLnNldChvYmosIG5ld09iaik7IH0gcmV0dXJuIG5ld09iajsgfVxuXG5mdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9XG5cbmZ1bmN0aW9uIF9leHRlbmRzKCkgeyBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07IHJldHVybiBfZXh0ZW5kcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhzb3VyY2UsIGV4Y2x1ZGVkKSB7IGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9OyB2YXIgdGFyZ2V0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCk7IHZhciBrZXksIGk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzb3VyY2VTeW1ib2xLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpOyBmb3IgKGkgPSAwOyBpIDwgc291cmNlU3ltYm9sS2V5cy5sZW5ndGg7IGkrKykgeyBrZXkgPSBzb3VyY2VTeW1ib2xLZXlzW2ldOyBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlOyBpZiAoIU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzb3VyY2UsIGtleSkpIGNvbnRpbnVlOyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKSB7IGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9OyB2YXIgdGFyZ2V0ID0ge307IHZhciBzb3VyY2VLZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTsgdmFyIGtleSwgaTsgZm9yIChpID0gMDsgaSA8IHNvdXJjZUtleXMubGVuZ3RoOyBpKyspIHsga2V5ID0gc291cmNlS2V5c1tpXTsgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgeyByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOyB9XG5cbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH1cblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfVxuXG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcInVuZGVmaW5lZFwiIHx8ICEoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSkgcmV0dXJuOyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVtcInJldHVyblwiXSAhPSBudWxsKSBfaVtcInJldHVyblwiXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH1cblxuZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOyB9XG5cbmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpOyByZXR1cm4gZnVuY3Rpb24gKCkgeyB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksIHJlc3VsdDsgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsgdmFyIE5ld1RhcmdldCA9IF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjsgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTsgfSBlbHNlIHsgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfSByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgcmVzdWx0KTsgfTsgfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9XG5cbmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gc2VsZjsgfVxuXG5mdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7IGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7IGlmICh0eXBlb2YgUHJveHkgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRydWU7IHRyeSB7IERhdGUucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoRGF0ZSwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9XG5cbmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuLy9cbi8vIERlZmluZSA8RHJhZ2dhYmxlPlxuLy9cbnZhciBEcmFnZ2FibGUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKERyYWdnYWJsZSwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihEcmFnZ2FibGUpO1xuXG4gIF9jcmVhdGVDbGFzcyhEcmFnZ2FibGUsIG51bGwsIFt7XG4gICAga2V5OiBcImdldERlcml2ZWRTdGF0ZUZyb21Qcm9wc1wiLFxuICAgIC8vIFJlYWN0IDE2LjMrXG4gICAgLy8gQXJpdHkgKHByb3BzLCBzdGF0ZSlcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKF9yZWYsIF9yZWYyKSB7XG4gICAgICB2YXIgcG9zaXRpb24gPSBfcmVmLnBvc2l0aW9uO1xuICAgICAgdmFyIHByZXZQcm9wc1Bvc2l0aW9uID0gX3JlZjIucHJldlByb3BzUG9zaXRpb247XG5cbiAgICAgIC8vIFNldCB4L3kgaWYgYSBuZXcgcG9zaXRpb24gaXMgcHJvdmlkZWQgaW4gcHJvcHMgdGhhdCBpcyBkaWZmZXJlbnQgdGhhbiB0aGUgcHJldmlvdXMuXG4gICAgICBpZiAocG9zaXRpb24gJiYgKCFwcmV2UHJvcHNQb3NpdGlvbiB8fCBwb3NpdGlvbi54ICE9PSBwcmV2UHJvcHNQb3NpdGlvbi54IHx8IHBvc2l0aW9uLnkgIT09IHByZXZQcm9wc1Bvc2l0aW9uLnkpKSB7XG4gICAgICAgICgwLCBfbG9nLmRlZmF1bHQpKCdEcmFnZ2FibGU6IGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyAlaicsIHtcbiAgICAgICAgICBwb3NpdGlvbjogcG9zaXRpb24sXG4gICAgICAgICAgcHJldlByb3BzUG9zaXRpb246IHByZXZQcm9wc1Bvc2l0aW9uXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHg6IHBvc2l0aW9uLngsXG4gICAgICAgICAgeTogcG9zaXRpb24ueSxcbiAgICAgICAgICBwcmV2UHJvcHNQb3NpdGlvbjogX29iamVjdFNwcmVhZCh7fSwgcG9zaXRpb24pXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfV0pO1xuXG4gIGZ1bmN0aW9uIERyYWdnYWJsZShwcm9wc1xuICAvKjogRHJhZ2dhYmxlUHJvcHMqL1xuICApIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRHJhZ2dhYmxlKTtcblxuICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcIm9uRHJhZ1N0YXJ0XCIsIGZ1bmN0aW9uIChlLCBjb3JlRGF0YSkge1xuICAgICAgKDAsIF9sb2cuZGVmYXVsdCkoJ0RyYWdnYWJsZTogb25EcmFnU3RhcnQ6ICVqJywgY29yZURhdGEpOyAvLyBTaG9ydC1jaXJjdWl0IGlmIHVzZXIncyBjYWxsYmFjayBraWxsZWQgaXQuXG5cbiAgICAgIHZhciBzaG91bGRTdGFydCA9IF90aGlzLnByb3BzLm9uU3RhcnQoZSwgKDAsIF9wb3NpdGlvbkZucy5jcmVhdGVEcmFnZ2FibGVEYXRhKShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgY29yZURhdGEpKTsgLy8gS2lsbHMgc3RhcnQgZXZlbnQgb24gY29yZSBhcyB3ZWxsLCBzbyBtb3ZlIGhhbmRsZXJzIGFyZSBuZXZlciBib3VuZC5cblxuXG4gICAgICBpZiAoc2hvdWxkU3RhcnQgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgZHJhZ2dpbmc6IHRydWUsXG4gICAgICAgIGRyYWdnZWQ6IHRydWVcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcIm9uRHJhZ1wiLCBmdW5jdGlvbiAoZSwgY29yZURhdGEpIHtcbiAgICAgIGlmICghX3RoaXMuc3RhdGUuZHJhZ2dpbmcpIHJldHVybiBmYWxzZTtcbiAgICAgICgwLCBfbG9nLmRlZmF1bHQpKCdEcmFnZ2FibGU6IG9uRHJhZzogJWonLCBjb3JlRGF0YSk7XG4gICAgICB2YXIgdWlEYXRhID0gKDAsIF9wb3NpdGlvbkZucy5jcmVhdGVEcmFnZ2FibGVEYXRhKShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgY29yZURhdGEpO1xuICAgICAgdmFyIG5ld1N0YXRlXG4gICAgICAvKjogJFNoYXBlPERyYWdnYWJsZVN0YXRlPiovXG4gICAgICA9IHtcbiAgICAgICAgeDogdWlEYXRhLngsXG4gICAgICAgIHk6IHVpRGF0YS55XG4gICAgICB9OyAvLyBLZWVwIHdpdGhpbiBib3VuZHMuXG5cbiAgICAgIGlmIChfdGhpcy5wcm9wcy5ib3VuZHMpIHtcbiAgICAgICAgLy8gU2F2ZSBvcmlnaW5hbCB4IGFuZCB5LlxuICAgICAgICB2YXIgeCA9IG5ld1N0YXRlLngsXG4gICAgICAgICAgICB5ID0gbmV3U3RhdGUueTsgLy8gQWRkIHNsYWNrIHRvIHRoZSB2YWx1ZXMgdXNlZCB0byBjYWxjdWxhdGUgYm91bmQgcG9zaXRpb24uIFRoaXMgd2lsbCBlbnN1cmUgdGhhdCBpZlxuICAgICAgICAvLyB3ZSBzdGFydCByZW1vdmluZyBzbGFjaywgdGhlIGVsZW1lbnQgd29uJ3QgcmVhY3QgdG8gaXQgcmlnaHQgYXdheSB1bnRpbCBpdCdzIGJlZW5cbiAgICAgICAgLy8gY29tcGxldGVseSByZW1vdmVkLlxuXG4gICAgICAgIG5ld1N0YXRlLnggKz0gX3RoaXMuc3RhdGUuc2xhY2tYO1xuICAgICAgICBuZXdTdGF0ZS55ICs9IF90aGlzLnN0YXRlLnNsYWNrWTsgLy8gR2V0IGJvdW5kIHBvc2l0aW9uLiBUaGlzIHdpbGwgY2VpbC9mbG9vciB0aGUgeCBhbmQgeSB3aXRoaW4gdGhlIGJvdW5kYXJpZXMuXG5cbiAgICAgICAgdmFyIF9nZXRCb3VuZFBvc2l0aW9uID0gKDAsIF9wb3NpdGlvbkZucy5nZXRCb3VuZFBvc2l0aW9uKShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgbmV3U3RhdGUueCwgbmV3U3RhdGUueSksXG4gICAgICAgICAgICBfZ2V0Qm91bmRQb3NpdGlvbjIgPSBfc2xpY2VkVG9BcnJheShfZ2V0Qm91bmRQb3NpdGlvbiwgMiksXG4gICAgICAgICAgICBuZXdTdGF0ZVggPSBfZ2V0Qm91bmRQb3NpdGlvbjJbMF0sXG4gICAgICAgICAgICBuZXdTdGF0ZVkgPSBfZ2V0Qm91bmRQb3NpdGlvbjJbMV07XG5cbiAgICAgICAgbmV3U3RhdGUueCA9IG5ld1N0YXRlWDtcbiAgICAgICAgbmV3U3RhdGUueSA9IG5ld1N0YXRlWTsgLy8gUmVjYWxjdWxhdGUgc2xhY2sgYnkgbm90aW5nIGhvdyBtdWNoIHdhcyBzaGF2ZWQgYnkgdGhlIGJvdW5kUG9zaXRpb24gaGFuZGxlci5cblxuICAgICAgICBuZXdTdGF0ZS5zbGFja1ggPSBfdGhpcy5zdGF0ZS5zbGFja1ggKyAoeCAtIG5ld1N0YXRlLngpO1xuICAgICAgICBuZXdTdGF0ZS5zbGFja1kgPSBfdGhpcy5zdGF0ZS5zbGFja1kgKyAoeSAtIG5ld1N0YXRlLnkpOyAvLyBVcGRhdGUgdGhlIGV2ZW50IHdlIGZpcmUgdG8gcmVmbGVjdCB3aGF0IHJlYWxseSBoYXBwZW5lZCBhZnRlciBib3VuZHMgdG9vayBlZmZlY3QuXG5cbiAgICAgICAgdWlEYXRhLnggPSBuZXdTdGF0ZS54O1xuICAgICAgICB1aURhdGEueSA9IG5ld1N0YXRlLnk7XG4gICAgICAgIHVpRGF0YS5kZWx0YVggPSBuZXdTdGF0ZS54IC0gX3RoaXMuc3RhdGUueDtcbiAgICAgICAgdWlEYXRhLmRlbHRhWSA9IG5ld1N0YXRlLnkgLSBfdGhpcy5zdGF0ZS55O1xuICAgICAgfSAvLyBTaG9ydC1jaXJjdWl0IGlmIHVzZXIncyBjYWxsYmFjayBraWxsZWQgaXQuXG5cblxuICAgICAgdmFyIHNob3VsZFVwZGF0ZSA9IF90aGlzLnByb3BzLm9uRHJhZyhlLCB1aURhdGEpO1xuXG4gICAgICBpZiAoc2hvdWxkVXBkYXRlID09PSBmYWxzZSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICBfdGhpcy5zZXRTdGF0ZShuZXdTdGF0ZSk7XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwib25EcmFnU3RvcFwiLCBmdW5jdGlvbiAoZSwgY29yZURhdGEpIHtcbiAgICAgIGlmICghX3RoaXMuc3RhdGUuZHJhZ2dpbmcpIHJldHVybiBmYWxzZTsgLy8gU2hvcnQtY2lyY3VpdCBpZiB1c2VyJ3MgY2FsbGJhY2sga2lsbGVkIGl0LlxuXG4gICAgICB2YXIgc2hvdWxkQ29udGludWUgPSBfdGhpcy5wcm9wcy5vblN0b3AoZSwgKDAsIF9wb3NpdGlvbkZucy5jcmVhdGVEcmFnZ2FibGVEYXRhKShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgY29yZURhdGEpKTtcblxuICAgICAgaWYgKHNob3VsZENvbnRpbnVlID09PSBmYWxzZSkgcmV0dXJuIGZhbHNlO1xuICAgICAgKDAsIF9sb2cuZGVmYXVsdCkoJ0RyYWdnYWJsZTogb25EcmFnU3RvcDogJWonLCBjb3JlRGF0YSk7XG4gICAgICB2YXIgbmV3U3RhdGVcbiAgICAgIC8qOiAkU2hhcGU8RHJhZ2dhYmxlU3RhdGU+Ki9cbiAgICAgID0ge1xuICAgICAgICBkcmFnZ2luZzogZmFsc2UsXG4gICAgICAgIHNsYWNrWDogMCxcbiAgICAgICAgc2xhY2tZOiAwXG4gICAgICB9OyAvLyBJZiB0aGlzIGlzIGEgY29udHJvbGxlZCBjb21wb25lbnQsIHRoZSByZXN1bHQgb2YgdGhpcyBvcGVyYXRpb24gd2lsbCBiZSB0b1xuICAgICAgLy8gcmV2ZXJ0IGJhY2sgdG8gdGhlIG9sZCBwb3NpdGlvbi4gV2UgZXhwZWN0IGEgaGFuZGxlciBvbiBgb25EcmFnU3RvcGAsIGF0IHRoZSBsZWFzdC5cblxuICAgICAgdmFyIGNvbnRyb2xsZWQgPSBCb29sZWFuKF90aGlzLnByb3BzLnBvc2l0aW9uKTtcblxuICAgICAgaWYgKGNvbnRyb2xsZWQpIHtcbiAgICAgICAgdmFyIF90aGlzJHByb3BzJHBvc2l0aW9uID0gX3RoaXMucHJvcHMucG9zaXRpb24sXG4gICAgICAgICAgICB4ID0gX3RoaXMkcHJvcHMkcG9zaXRpb24ueCxcbiAgICAgICAgICAgIHkgPSBfdGhpcyRwcm9wcyRwb3NpdGlvbi55O1xuICAgICAgICBuZXdTdGF0ZS54ID0geDtcbiAgICAgICAgbmV3U3RhdGUueSA9IHk7XG4gICAgICB9XG5cbiAgICAgIF90aGlzLnNldFN0YXRlKG5ld1N0YXRlKTtcbiAgICB9KTtcblxuICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgLy8gV2hldGhlciBvciBub3Qgd2UgYXJlIGN1cnJlbnRseSBkcmFnZ2luZy5cbiAgICAgIGRyYWdnaW5nOiBmYWxzZSxcbiAgICAgIC8vIFdoZXRoZXIgb3Igbm90IHdlIGhhdmUgYmVlbiBkcmFnZ2VkIGJlZm9yZS5cbiAgICAgIGRyYWdnZWQ6IGZhbHNlLFxuICAgICAgLy8gQ3VycmVudCB0cmFuc2Zvcm0geCBhbmQgeS5cbiAgICAgIHg6IHByb3BzLnBvc2l0aW9uID8gcHJvcHMucG9zaXRpb24ueCA6IHByb3BzLmRlZmF1bHRQb3NpdGlvbi54LFxuICAgICAgeTogcHJvcHMucG9zaXRpb24gPyBwcm9wcy5wb3NpdGlvbi55IDogcHJvcHMuZGVmYXVsdFBvc2l0aW9uLnksXG4gICAgICBwcmV2UHJvcHNQb3NpdGlvbjogX29iamVjdFNwcmVhZCh7fSwgcHJvcHMucG9zaXRpb24pLFxuICAgICAgLy8gVXNlZCBmb3IgY29tcGVuc2F0aW5nIGZvciBvdXQtb2YtYm91bmRzIGRyYWdzXG4gICAgICBzbGFja1g6IDAsXG4gICAgICBzbGFja1k6IDAsXG4gICAgICAvLyBDYW4gb25seSBkZXRlcm1pbmUgaWYgU1ZHIGFmdGVyIG1vdW50aW5nXG4gICAgICBpc0VsZW1lbnRTVkc6IGZhbHNlXG4gICAgfTtcblxuICAgIGlmIChwcm9wcy5wb3NpdGlvbiAmJiAhKHByb3BzLm9uRHJhZyB8fCBwcm9wcy5vblN0b3ApKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS53YXJuKCdBIGBwb3NpdGlvbmAgd2FzIGFwcGxpZWQgdG8gdGhpcyA8RHJhZ2dhYmxlPiwgd2l0aG91dCBkcmFnIGhhbmRsZXJzLiBUaGlzIHdpbGwgbWFrZSB0aGlzICcgKyAnY29tcG9uZW50IGVmZmVjdGl2ZWx5IHVuZHJhZ2dhYmxlLiBQbGVhc2UgYXR0YWNoIGBvbkRyYWdgIG9yIGBvblN0b3BgIGhhbmRsZXJzIHNvIHlvdSBjYW4gYWRqdXN0IHRoZSAnICsgJ2Bwb3NpdGlvbmAgb2YgdGhpcyBlbGVtZW50LicpO1xuICAgIH1cblxuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhEcmFnZ2FibGUsIFt7XG4gICAga2V5OiBcImNvbXBvbmVudERpZE1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHRoZSBlbGVtZW50IHBhc3NlZCBpcyBhbiBpbnN0YW5jZW9mIFNWR0VsZW1lbnRcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93LlNWR0VsZW1lbnQgIT09ICd1bmRlZmluZWQnICYmIHRoaXMuZmluZERPTU5vZGUoKSBpbnN0YW5jZW9mIHdpbmRvdy5TVkdFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIGlzRWxlbWVudFNWRzogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29tcG9uZW50V2lsbFVubW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgZHJhZ2dpbmc6IGZhbHNlXG4gICAgICB9KTsgLy8gcHJldmVudHMgaW52YXJpYW50IGlmIHVubW91bnRlZCB3aGlsZSBkcmFnZ2luZ1xuICAgIH0gLy8gUmVhY3QgU3RyaWN0IE1vZGUgY29tcGF0aWJpbGl0eTogaWYgYG5vZGVSZWZgIGlzIHBhc3NlZCwgd2Ugd2lsbCB1c2UgaXQgaW5zdGVhZCBvZiB0cnlpbmcgdG8gZmluZFxuICAgIC8vIHRoZSB1bmRlcmx5aW5nIERPTSBub2RlIG91cnNlbHZlcy4gU2VlIHRoZSBSRUFETUUgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG5cbiAgfSwge1xuICAgIGtleTogXCJmaW5kRE9NTm9kZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kRE9NTm9kZSgpXG4gICAgLyo6ID9IVE1MRWxlbWVudCovXG4gICAge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMubm9kZVJlZiA/IHRoaXMucHJvcHMubm9kZVJlZi5jdXJyZW50IDogX3JlYWN0RG9tLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKVxuICAgIC8qOiBSZWFjdEVsZW1lbnQ8YW55PiovXG4gICAge1xuICAgICAgdmFyIF9jbGFzc05hbWVzO1xuXG4gICAgICB2YXIgX3RoaXMkcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGF4aXMgPSBfdGhpcyRwcm9wcy5heGlzLFxuICAgICAgICAgIGJvdW5kcyA9IF90aGlzJHByb3BzLmJvdW5kcyxcbiAgICAgICAgICBjaGlsZHJlbiA9IF90aGlzJHByb3BzLmNoaWxkcmVuLFxuICAgICAgICAgIGRlZmF1bHRQb3NpdGlvbiA9IF90aGlzJHByb3BzLmRlZmF1bHRQb3NpdGlvbixcbiAgICAgICAgICBkZWZhdWx0Q2xhc3NOYW1lID0gX3RoaXMkcHJvcHMuZGVmYXVsdENsYXNzTmFtZSxcbiAgICAgICAgICBkZWZhdWx0Q2xhc3NOYW1lRHJhZ2dpbmcgPSBfdGhpcyRwcm9wcy5kZWZhdWx0Q2xhc3NOYW1lRHJhZ2dpbmcsXG4gICAgICAgICAgZGVmYXVsdENsYXNzTmFtZURyYWdnZWQgPSBfdGhpcyRwcm9wcy5kZWZhdWx0Q2xhc3NOYW1lRHJhZ2dlZCxcbiAgICAgICAgICBwb3NpdGlvbiA9IF90aGlzJHByb3BzLnBvc2l0aW9uLFxuICAgICAgICAgIHBvc2l0aW9uT2Zmc2V0ID0gX3RoaXMkcHJvcHMucG9zaXRpb25PZmZzZXQsXG4gICAgICAgICAgc2NhbGUgPSBfdGhpcyRwcm9wcy5zY2FsZSxcbiAgICAgICAgICBkcmFnZ2FibGVDb3JlUHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3RoaXMkcHJvcHMsIFtcImF4aXNcIiwgXCJib3VuZHNcIiwgXCJjaGlsZHJlblwiLCBcImRlZmF1bHRQb3NpdGlvblwiLCBcImRlZmF1bHRDbGFzc05hbWVcIiwgXCJkZWZhdWx0Q2xhc3NOYW1lRHJhZ2dpbmdcIiwgXCJkZWZhdWx0Q2xhc3NOYW1lRHJhZ2dlZFwiLCBcInBvc2l0aW9uXCIsIFwicG9zaXRpb25PZmZzZXRcIiwgXCJzY2FsZVwiXSk7XG5cbiAgICAgIHZhciBzdHlsZSA9IHt9O1xuICAgICAgdmFyIHN2Z1RyYW5zZm9ybSA9IG51bGw7IC8vIElmIHRoaXMgaXMgY29udHJvbGxlZCwgd2UgZG9uJ3Qgd2FudCB0byBtb3ZlIGl0IC0gdW5sZXNzIGl0J3MgZHJhZ2dpbmcuXG5cbiAgICAgIHZhciBjb250cm9sbGVkID0gQm9vbGVhbihwb3NpdGlvbik7XG4gICAgICB2YXIgZHJhZ2dhYmxlID0gIWNvbnRyb2xsZWQgfHwgdGhpcy5zdGF0ZS5kcmFnZ2luZztcbiAgICAgIHZhciB2YWxpZFBvc2l0aW9uID0gcG9zaXRpb24gfHwgZGVmYXVsdFBvc2l0aW9uO1xuICAgICAgdmFyIHRyYW5zZm9ybU9wdHMgPSB7XG4gICAgICAgIC8vIFNldCBsZWZ0IGlmIGhvcml6b250YWwgZHJhZyBpcyBlbmFibGVkXG4gICAgICAgIHg6ICgwLCBfcG9zaXRpb25GbnMuY2FuRHJhZ1gpKHRoaXMpICYmIGRyYWdnYWJsZSA/IHRoaXMuc3RhdGUueCA6IHZhbGlkUG9zaXRpb24ueCxcbiAgICAgICAgLy8gU2V0IHRvcCBpZiB2ZXJ0aWNhbCBkcmFnIGlzIGVuYWJsZWRcbiAgICAgICAgeTogKDAsIF9wb3NpdGlvbkZucy5jYW5EcmFnWSkodGhpcykgJiYgZHJhZ2dhYmxlID8gdGhpcy5zdGF0ZS55IDogdmFsaWRQb3NpdGlvbi55XG4gICAgICB9OyAvLyBJZiB0aGlzIGVsZW1lbnQgd2FzIFNWRywgd2UgdXNlIHRoZSBgdHJhbnNmb3JtYCBhdHRyaWJ1dGUuXG5cbiAgICAgIGlmICh0aGlzLnN0YXRlLmlzRWxlbWVudFNWRykge1xuICAgICAgICBzdmdUcmFuc2Zvcm0gPSAoMCwgX2RvbUZucy5jcmVhdGVTVkdUcmFuc2Zvcm0pKHRyYW5zZm9ybU9wdHMsIHBvc2l0aW9uT2Zmc2V0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEFkZCBhIENTUyB0cmFuc2Zvcm0gdG8gbW92ZSB0aGUgZWxlbWVudCBhcm91bmQuIFRoaXMgYWxsb3dzIHVzIHRvIG1vdmUgdGhlIGVsZW1lbnQgYXJvdW5kXG4gICAgICAgIC8vIHdpdGhvdXQgd29ycnlpbmcgYWJvdXQgd2hldGhlciBvciBub3QgaXQgaXMgcmVsYXRpdmVseSBvciBhYnNvbHV0ZWx5IHBvc2l0aW9uZWQuXG4gICAgICAgIC8vIElmIHRoZSBpdGVtIHlvdSBhcmUgZHJhZ2dpbmcgYWxyZWFkeSBoYXMgYSB0cmFuc2Zvcm0gc2V0LCB3cmFwIGl0IGluIGEgPHNwYW4+IHNvIDxEcmFnZ2FibGU+XG4gICAgICAgIC8vIGhhcyBhIGNsZWFuIHNsYXRlLlxuICAgICAgICBzdHlsZSA9ICgwLCBfZG9tRm5zLmNyZWF0ZUNTU1RyYW5zZm9ybSkodHJhbnNmb3JtT3B0cywgcG9zaXRpb25PZmZzZXQpO1xuICAgICAgfSAvLyBNYXJrIHdpdGggY2xhc3Mgd2hpbGUgZHJhZ2dpbmdcblxuXG4gICAgICB2YXIgY2xhc3NOYW1lID0gKDAsIF9jbGFzc25hbWVzLmRlZmF1bHQpKGNoaWxkcmVuLnByb3BzLmNsYXNzTmFtZSB8fCAnJywgZGVmYXVsdENsYXNzTmFtZSwgKF9jbGFzc05hbWVzID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lcywgZGVmYXVsdENsYXNzTmFtZURyYWdnaW5nLCB0aGlzLnN0YXRlLmRyYWdnaW5nKSwgX2RlZmluZVByb3BlcnR5KF9jbGFzc05hbWVzLCBkZWZhdWx0Q2xhc3NOYW1lRHJhZ2dlZCwgdGhpcy5zdGF0ZS5kcmFnZ2VkKSwgX2NsYXNzTmFtZXMpKTsgLy8gUmV1c2UgdGhlIGNoaWxkIHByb3ZpZGVkXG4gICAgICAvLyBUaGlzIG1ha2VzIGl0IGZsZXhpYmxlIHRvIHVzZSB3aGF0ZXZlciBlbGVtZW50IGlzIHdhbnRlZCAoZGl2LCB1bCwgZXRjKVxuXG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoX0RyYWdnYWJsZUNvcmUuZGVmYXVsdCwgX2V4dGVuZHMoe30sIGRyYWdnYWJsZUNvcmVQcm9wcywge1xuICAgICAgICBvblN0YXJ0OiB0aGlzLm9uRHJhZ1N0YXJ0LFxuICAgICAgICBvbkRyYWc6IHRoaXMub25EcmFnLFxuICAgICAgICBvblN0b3A6IHRoaXMub25EcmFnU3RvcFxuICAgICAgfSksIFJlYWN0LmNsb25lRWxlbWVudChSZWFjdC5DaGlsZHJlbi5vbmx5KGNoaWxkcmVuKSwge1xuICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSxcbiAgICAgICAgc3R5bGU6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgY2hpbGRyZW4ucHJvcHMuc3R5bGUpLCBzdHlsZSksXG4gICAgICAgIHRyYW5zZm9ybTogc3ZnVHJhbnNmb3JtXG4gICAgICB9KSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIERyYWdnYWJsZTtcbn0oUmVhY3QuQ29tcG9uZW50KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gRHJhZ2dhYmxlO1xuXG5fZGVmaW5lUHJvcGVydHkoRHJhZ2dhYmxlLCBcImRpc3BsYXlOYW1lXCIsICdEcmFnZ2FibGUnKTtcblxuX2RlZmluZVByb3BlcnR5KERyYWdnYWJsZSwgXCJwcm9wVHlwZXNcIiwgX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBfRHJhZ2dhYmxlQ29yZS5kZWZhdWx0LnByb3BUeXBlcyksIHt9LCB7XG4gIC8qKlxuICAgKiBgYXhpc2AgZGV0ZXJtaW5lcyB3aGljaCBheGlzIHRoZSBkcmFnZ2FibGUgY2FuIG1vdmUuXG4gICAqXG4gICAqICBOb3RlIHRoYXQgYWxsIGNhbGxiYWNrcyB3aWxsIHN0aWxsIHJldHVybiBkYXRhIGFzIG5vcm1hbC4gVGhpcyBvbmx5XG4gICAqICBjb250cm9scyBmbHVzaGluZyB0byB0aGUgRE9NLlxuICAgKlxuICAgKiAnYm90aCcgYWxsb3dzIG1vdmVtZW50IGhvcml6b250YWxseSBhbmQgdmVydGljYWxseS5cbiAgICogJ3gnIGxpbWl0cyBtb3ZlbWVudCB0byBob3Jpem9udGFsIGF4aXMuXG4gICAqICd5JyBsaW1pdHMgbW92ZW1lbnQgdG8gdmVydGljYWwgYXhpcy5cbiAgICogJ25vbmUnIGxpbWl0cyBhbGwgbW92ZW1lbnQuXG4gICAqXG4gICAqIERlZmF1bHRzIHRvICdib3RoJy5cbiAgICovXG4gIGF4aXM6IF9wcm9wVHlwZXMuZGVmYXVsdC5vbmVPZihbJ2JvdGgnLCAneCcsICd5JywgJ25vbmUnXSksXG5cbiAgLyoqXG4gICAqIGBib3VuZHNgIGRldGVybWluZXMgdGhlIHJhbmdlIG9mIG1vdmVtZW50IGF2YWlsYWJsZSB0byB0aGUgZWxlbWVudC5cbiAgICogQXZhaWxhYmxlIHZhbHVlcyBhcmU6XG4gICAqXG4gICAqICdwYXJlbnQnIHJlc3RyaWN0cyBtb3ZlbWVudCB3aXRoaW4gdGhlIERyYWdnYWJsZSdzIHBhcmVudCBub2RlLlxuICAgKlxuICAgKiBBbHRlcm5hdGl2ZWx5LCBwYXNzIGFuIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllcywgYWxsIG9mIHdoaWNoIGFyZSBvcHRpb25hbDpcbiAgICpcbiAgICoge2xlZnQ6IExFRlRfQk9VTkQsIHJpZ2h0OiBSSUdIVF9CT1VORCwgYm90dG9tOiBCT1RUT01fQk9VTkQsIHRvcDogVE9QX0JPVU5EfVxuICAgKlxuICAgKiBBbGwgdmFsdWVzIGFyZSBpbiBweC5cbiAgICpcbiAgICogRXhhbXBsZTpcbiAgICpcbiAgICogYGBganN4XG4gICAqICAgbGV0IEFwcCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgICogICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAqICAgICAgICAgcmV0dXJuIChcbiAgICogICAgICAgICAgICA8RHJhZ2dhYmxlIGJvdW5kcz17e3JpZ2h0OiAzMDAsIGJvdHRvbTogMzAwfX0+XG4gICAqICAgICAgICAgICAgICA8ZGl2PkNvbnRlbnQ8L2Rpdj5cbiAgICogICAgICAgICAgIDwvRHJhZ2dhYmxlPlxuICAgKiAgICAgICAgICk7XG4gICAqICAgICAgIH1cbiAgICogICB9KTtcbiAgICogYGBgXG4gICAqL1xuICBib3VuZHM6IF9wcm9wVHlwZXMuZGVmYXVsdC5vbmVPZlR5cGUoW19wcm9wVHlwZXMuZGVmYXVsdC5zaGFwZSh7XG4gICAgbGVmdDogX3Byb3BUeXBlcy5kZWZhdWx0Lm51bWJlcixcbiAgICByaWdodDogX3Byb3BUeXBlcy5kZWZhdWx0Lm51bWJlcixcbiAgICB0b3A6IF9wcm9wVHlwZXMuZGVmYXVsdC5udW1iZXIsXG4gICAgYm90dG9tOiBfcHJvcFR5cGVzLmRlZmF1bHQubnVtYmVyXG4gIH0pLCBfcHJvcFR5cGVzLmRlZmF1bHQuc3RyaW5nLCBfcHJvcFR5cGVzLmRlZmF1bHQub25lT2YoW2ZhbHNlXSldKSxcbiAgZGVmYXVsdENsYXNzTmFtZTogX3Byb3BUeXBlcy5kZWZhdWx0LnN0cmluZyxcbiAgZGVmYXVsdENsYXNzTmFtZURyYWdnaW5nOiBfcHJvcFR5cGVzLmRlZmF1bHQuc3RyaW5nLFxuICBkZWZhdWx0Q2xhc3NOYW1lRHJhZ2dlZDogX3Byb3BUeXBlcy5kZWZhdWx0LnN0cmluZyxcblxuICAvKipcbiAgICogYGRlZmF1bHRQb3NpdGlvbmAgc3BlY2lmaWVzIHRoZSB4IGFuZCB5IHRoYXQgdGhlIGRyYWdnZWQgaXRlbSBzaG91bGQgc3RhcnQgYXRcbiAgICpcbiAgICogRXhhbXBsZTpcbiAgICpcbiAgICogYGBganN4XG4gICAqICAgICAgbGV0IEFwcCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgICogICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAqICAgICAgICAgICAgICByZXR1cm4gKFxuICAgKiAgICAgICAgICAgICAgICAgIDxEcmFnZ2FibGUgZGVmYXVsdFBvc2l0aW9uPXt7eDogMjUsIHk6IDI1fX0+XG4gICAqICAgICAgICAgICAgICAgICAgICAgIDxkaXY+SSBzdGFydCB3aXRoIHRyYW5zZm9ybVg6IDI1cHggYW5kIHRyYW5zZm9ybVk6IDI1cHg7PC9kaXY+XG4gICAqICAgICAgICAgICAgICAgICAgPC9EcmFnZ2FibGU+XG4gICAqICAgICAgICAgICAgICApO1xuICAgKiAgICAgICAgICB9XG4gICAqICAgICAgfSk7XG4gICAqIGBgYFxuICAgKi9cbiAgZGVmYXVsdFBvc2l0aW9uOiBfcHJvcFR5cGVzLmRlZmF1bHQuc2hhcGUoe1xuICAgIHg6IF9wcm9wVHlwZXMuZGVmYXVsdC5udW1iZXIsXG4gICAgeTogX3Byb3BUeXBlcy5kZWZhdWx0Lm51bWJlclxuICB9KSxcbiAgcG9zaXRpb25PZmZzZXQ6IF9wcm9wVHlwZXMuZGVmYXVsdC5zaGFwZSh7XG4gICAgeDogX3Byb3BUeXBlcy5kZWZhdWx0Lm9uZU9mVHlwZShbX3Byb3BUeXBlcy5kZWZhdWx0Lm51bWJlciwgX3Byb3BUeXBlcy5kZWZhdWx0LnN0cmluZ10pLFxuICAgIHk6IF9wcm9wVHlwZXMuZGVmYXVsdC5vbmVPZlR5cGUoW19wcm9wVHlwZXMuZGVmYXVsdC5udW1iZXIsIF9wcm9wVHlwZXMuZGVmYXVsdC5zdHJpbmddKVxuICB9KSxcblxuICAvKipcbiAgICogYHBvc2l0aW9uYCwgaWYgcHJlc2VudCwgZGVmaW5lcyB0aGUgY3VycmVudCBwb3NpdGlvbiBvZiB0aGUgZWxlbWVudC5cbiAgICpcbiAgICogIFRoaXMgaXMgc2ltaWxhciB0byBob3cgZm9ybSBlbGVtZW50cyBpbiBSZWFjdCB3b3JrIC0gaWYgbm8gYHBvc2l0aW9uYCBpcyBzdXBwbGllZCwgdGhlIGNvbXBvbmVudFxuICAgKiAgaXMgdW5jb250cm9sbGVkLlxuICAgKlxuICAgKiBFeGFtcGxlOlxuICAgKlxuICAgKiBgYGBqc3hcbiAgICogICAgICBsZXQgQXBwID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICAgKiAgICAgICAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICogICAgICAgICAgICAgIHJldHVybiAoXG4gICAqICAgICAgICAgICAgICAgICAgPERyYWdnYWJsZSBwb3NpdGlvbj17e3g6IDI1LCB5OiAyNX19PlxuICAgKiAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pkkgc3RhcnQgd2l0aCB0cmFuc2Zvcm1YOiAyNXB4IGFuZCB0cmFuc2Zvcm1ZOiAyNXB4OzwvZGl2PlxuICAgKiAgICAgICAgICAgICAgICAgIDwvRHJhZ2dhYmxlPlxuICAgKiAgICAgICAgICAgICAgKTtcbiAgICogICAgICAgICAgfVxuICAgKiAgICAgIH0pO1xuICAgKiBgYGBcbiAgICovXG4gIHBvc2l0aW9uOiBfcHJvcFR5cGVzLmRlZmF1bHQuc2hhcGUoe1xuICAgIHg6IF9wcm9wVHlwZXMuZGVmYXVsdC5udW1iZXIsXG4gICAgeTogX3Byb3BUeXBlcy5kZWZhdWx0Lm51bWJlclxuICB9KSxcblxuICAvKipcbiAgICogVGhlc2UgcHJvcGVydGllcyBzaG91bGQgYmUgZGVmaW5lZCBvbiB0aGUgY2hpbGQsIG5vdCBoZXJlLlxuICAgKi9cbiAgY2xhc3NOYW1lOiBfc2hpbXMuZG9udFNldE1lLFxuICBzdHlsZTogX3NoaW1zLmRvbnRTZXRNZSxcbiAgdHJhbnNmb3JtOiBfc2hpbXMuZG9udFNldE1lXG59KSk7XG5cbl9kZWZpbmVQcm9wZXJ0eShEcmFnZ2FibGUsIFwiZGVmYXVsdFByb3BzXCIsIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgX0RyYWdnYWJsZUNvcmUuZGVmYXVsdC5kZWZhdWx0UHJvcHMpLCB7fSwge1xuICBheGlzOiAnYm90aCcsXG4gIGJvdW5kczogZmFsc2UsXG4gIGRlZmF1bHRDbGFzc05hbWU6ICdyZWFjdC1kcmFnZ2FibGUnLFxuICBkZWZhdWx0Q2xhc3NOYW1lRHJhZ2dpbmc6ICdyZWFjdC1kcmFnZ2FibGUtZHJhZ2dpbmcnLFxuICBkZWZhdWx0Q2xhc3NOYW1lRHJhZ2dlZDogJ3JlYWN0LWRyYWdnYWJsZS1kcmFnZ2VkJyxcbiAgZGVmYXVsdFBvc2l0aW9uOiB7XG4gICAgeDogMCxcbiAgICB5OiAwXG4gIH0sXG4gIHBvc2l0aW9uOiBudWxsLFxuICBzY2FsZTogMVxufSkpOyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuXG52YXIgUmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKFwicmVhY3RcIikpO1xuXG52YXIgX3Byb3BUeXBlcyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInByb3AtdHlwZXNcIikpO1xuXG52YXIgX3JlYWN0RG9tID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3QtZG9tXCIpKTtcblxudmFyIF9kb21GbnMgPSByZXF1aXJlKFwiLi91dGlscy9kb21GbnNcIik7XG5cbnZhciBfcG9zaXRpb25GbnMgPSByZXF1aXJlKFwiLi91dGlscy9wb3NpdGlvbkZuc1wiKTtcblxudmFyIF9zaGltcyA9IHJlcXVpcmUoXCIuL3V0aWxzL3NoaW1zXCIpO1xuXG52YXIgX2xvZyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vdXRpbHMvbG9nXCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlKCkgeyBpZiAodHlwZW9mIFdlYWtNYXAgIT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIG51bGw7IHZhciBjYWNoZSA9IG5ldyBXZWFrTWFwKCk7IF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSA9IGZ1bmN0aW9uIF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSgpIHsgcmV0dXJuIGNhY2hlOyB9OyByZXR1cm4gY2FjaGU7IH1cblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBpZiAob2JqID09PSBudWxsIHx8IF90eXBlb2Yob2JqKSAhPT0gXCJvYmplY3RcIiAmJiB0eXBlb2Ygb2JqICE9PSBcImZ1bmN0aW9uXCIpIHsgcmV0dXJuIHsgZGVmYXVsdDogb2JqIH07IH0gdmFyIGNhY2hlID0gX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlKCk7IGlmIChjYWNoZSAmJiBjYWNoZS5oYXMob2JqKSkgeyByZXR1cm4gY2FjaGUuZ2V0KG9iaik7IH0gdmFyIG5ld09iaiA9IHt9OyB2YXIgaGFzUHJvcGVydHlEZXNjcmlwdG9yID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7IGZvciAodmFyIGtleSBpbiBvYmopIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHsgdmFyIGRlc2MgPSBoYXNQcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IG51bGw7IGlmIChkZXNjICYmIChkZXNjLmdldCB8fCBkZXNjLnNldCkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsgfSBlbHNlIHsgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IGlmIChjYWNoZSkgeyBjYWNoZS5zZXQob2JqLCBuZXdPYmopOyB9IHJldHVybiBuZXdPYmo7IH1cblxuZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfVxuXG5mdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsgfVxuXG5mdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfVxuXG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH1cblxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkpIHJldHVybjsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0gIT0gbnVsbCkgX2lbXCJyZXR1cm5cIl0oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9XG5cbmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpOyByZXR1cm4gZnVuY3Rpb24gKCkgeyB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksIHJlc3VsdDsgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsgdmFyIE5ld1RhcmdldCA9IF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjsgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTsgfSBlbHNlIHsgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfSByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgcmVzdWx0KTsgfTsgfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9XG5cbmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gc2VsZjsgfVxuXG5mdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7IGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7IGlmICh0eXBlb2YgUHJveHkgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRydWU7IHRyeSB7IERhdGUucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoRGF0ZSwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9XG5cbmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuLy8gU2ltcGxlIGFic3RyYWN0aW9uIGZvciBkcmFnZ2luZyBldmVudHMgbmFtZXMuXG52YXIgZXZlbnRzRm9yID0ge1xuICB0b3VjaDoge1xuICAgIHN0YXJ0OiAndG91Y2hzdGFydCcsXG4gICAgbW92ZTogJ3RvdWNobW92ZScsXG4gICAgc3RvcDogJ3RvdWNoZW5kJ1xuICB9LFxuICBtb3VzZToge1xuICAgIHN0YXJ0OiAnbW91c2Vkb3duJyxcbiAgICBtb3ZlOiAnbW91c2Vtb3ZlJyxcbiAgICBzdG9wOiAnbW91c2V1cCdcbiAgfVxufTsgLy8gRGVmYXVsdCB0byBtb3VzZSBldmVudHMuXG5cbnZhciBkcmFnRXZlbnRGb3IgPSBldmVudHNGb3IubW91c2U7XG4vKjo6IHR5cGUgRHJhZ2dhYmxlQ29yZVN0YXRlID0ge1xuICBkcmFnZ2luZzogYm9vbGVhbixcbiAgbGFzdFg6IG51bWJlcixcbiAgbGFzdFk6IG51bWJlcixcbiAgdG91Y2hJZGVudGlmaWVyOiA/bnVtYmVyXG59OyovXG5cbi8qOjogZXhwb3J0IHR5cGUgRHJhZ2dhYmxlRGF0YSA9IHtcbiAgbm9kZTogSFRNTEVsZW1lbnQsXG4gIHg6IG51bWJlciwgeTogbnVtYmVyLFxuICBkZWx0YVg6IG51bWJlciwgZGVsdGFZOiBudW1iZXIsXG4gIGxhc3RYOiBudW1iZXIsIGxhc3RZOiBudW1iZXIsXG59OyovXG5cbi8qOjogZXhwb3J0IHR5cGUgRHJhZ2dhYmxlRXZlbnRIYW5kbGVyID0gKGU6IE1vdXNlRXZlbnQsIGRhdGE6IERyYWdnYWJsZURhdGEpID0+IHZvaWQ7Ki9cblxuLyo6OiBleHBvcnQgdHlwZSBDb250cm9sUG9zaXRpb24gPSB7eDogbnVtYmVyLCB5OiBudW1iZXJ9OyovXG5cbi8qOjogZXhwb3J0IHR5cGUgUG9zaXRpb25PZmZzZXRDb250cm9sUG9zaXRpb24gPSB7eDogbnVtYmVyfHN0cmluZywgeTogbnVtYmVyfHN0cmluZ307Ki9cblxuLyo6OiBleHBvcnQgdHlwZSBEcmFnZ2FibGVDb3JlUHJvcHMgPSB7XG4gIGFsbG93QW55Q2xpY2s6IGJvb2xlYW4sXG4gIGNhbmNlbDogc3RyaW5nLFxuICBjaGlsZHJlbjogUmVhY3RFbGVtZW50PGFueT4sXG4gIGRpc2FibGVkOiBib29sZWFuLFxuICBlbmFibGVVc2VyU2VsZWN0SGFjazogYm9vbGVhbixcbiAgb2Zmc2V0UGFyZW50OiBIVE1MRWxlbWVudCxcbiAgZ3JpZDogW251bWJlciwgbnVtYmVyXSxcbiAgaGFuZGxlOiBzdHJpbmcsXG4gIG5vZGVSZWY/OiA/UmVhY3QuRWxlbWVudFJlZjxhbnk+LFxuICBvblN0YXJ0OiBEcmFnZ2FibGVFdmVudEhhbmRsZXIsXG4gIG9uRHJhZzogRHJhZ2dhYmxlRXZlbnRIYW5kbGVyLFxuICBvblN0b3A6IERyYWdnYWJsZUV2ZW50SGFuZGxlcixcbiAgb25Nb3VzZURvd246IChlOiBNb3VzZUV2ZW50KSA9PiB2b2lkLFxuICBzY2FsZTogbnVtYmVyLFxufTsqL1xuXG4vL1xuLy8gRGVmaW5lIDxEcmFnZ2FibGVDb3JlPi5cbi8vXG4vLyA8RHJhZ2dhYmxlQ29yZT4gaXMgZm9yIGFkdmFuY2VkIHVzYWdlIG9mIDxEcmFnZ2FibGU+LiBJdCBtYWludGFpbnMgbWluaW1hbCBpbnRlcm5hbCBzdGF0ZSBzbyBpdCBjYW5cbi8vIHdvcmsgd2VsbCB3aXRoIGxpYnJhcmllcyB0aGF0IHJlcXVpcmUgbW9yZSBjb250cm9sIG92ZXIgdGhlIGVsZW1lbnQuXG4vL1xudmFyIERyYWdnYWJsZUNvcmUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKERyYWdnYWJsZUNvcmUsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoRHJhZ2dhYmxlQ29yZSk7XG5cbiAgZnVuY3Rpb24gRHJhZ2dhYmxlQ29yZSgpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRHJhZ2dhYmxlQ29yZSk7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgX3RoaXMgPSBfc3VwZXIuY2FsbC5hcHBseShfc3VwZXIsIFt0aGlzXS5jb25jYXQoYXJncykpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcInN0YXRlXCIsIHtcbiAgICAgIGRyYWdnaW5nOiBmYWxzZSxcbiAgICAgIC8vIFVzZWQgd2hpbGUgZHJhZ2dpbmcgdG8gZGV0ZXJtaW5lIGRlbHRhcy5cbiAgICAgIGxhc3RYOiBOYU4sXG4gICAgICBsYXN0WTogTmFOLFxuICAgICAgdG91Y2hJZGVudGlmaWVyOiBudWxsXG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwibW91bnRlZFwiLCBmYWxzZSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwiaGFuZGxlRHJhZ1N0YXJ0XCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAvLyBNYWtlIGl0IHBvc3NpYmxlIHRvIGF0dGFjaCBldmVudCBoYW5kbGVycyBvbiB0b3Agb2YgdGhpcyBvbmUuXG4gICAgICBfdGhpcy5wcm9wcy5vbk1vdXNlRG93bihlKTsgLy8gT25seSBhY2NlcHQgbGVmdC1jbGlja3MuXG5cblxuICAgICAgaWYgKCFfdGhpcy5wcm9wcy5hbGxvd0FueUNsaWNrICYmIHR5cGVvZiBlLmJ1dHRvbiA9PT0gJ251bWJlcicgJiYgZS5idXR0b24gIT09IDApIHJldHVybiBmYWxzZTsgLy8gR2V0IG5vZGVzLiBCZSBzdXJlIHRvIGdyYWIgcmVsYXRpdmUgZG9jdW1lbnQgKGNvdWxkIGJlIGlmcmFtZWQpXG5cbiAgICAgIHZhciB0aGlzTm9kZSA9IF90aGlzLmZpbmRET01Ob2RlKCk7XG5cbiAgICAgIGlmICghdGhpc05vZGUgfHwgIXRoaXNOb2RlLm93bmVyRG9jdW1lbnQgfHwgIXRoaXNOb2RlLm93bmVyRG9jdW1lbnQuYm9keSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJzxEcmFnZ2FibGVDb3JlPiBub3QgbW91bnRlZCBvbiBEcmFnU3RhcnQhJyk7XG4gICAgICB9XG5cbiAgICAgIHZhciBvd25lckRvY3VtZW50ID0gdGhpc05vZGUub3duZXJEb2N1bWVudDsgLy8gU2hvcnQgY2lyY3VpdCBpZiBoYW5kbGUgb3IgY2FuY2VsIHByb3Agd2FzIHByb3ZpZGVkIGFuZCBzZWxlY3RvciBkb2Vzbid0IG1hdGNoLlxuXG4gICAgICBpZiAoX3RoaXMucHJvcHMuZGlzYWJsZWQgfHwgIShlLnRhcmdldCBpbnN0YW5jZW9mIG93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuTm9kZSkgfHwgX3RoaXMucHJvcHMuaGFuZGxlICYmICEoMCwgX2RvbUZucy5tYXRjaGVzU2VsZWN0b3JBbmRQYXJlbnRzVG8pKGUudGFyZ2V0LCBfdGhpcy5wcm9wcy5oYW5kbGUsIHRoaXNOb2RlKSB8fCBfdGhpcy5wcm9wcy5jYW5jZWwgJiYgKDAsIF9kb21GbnMubWF0Y2hlc1NlbGVjdG9yQW5kUGFyZW50c1RvKShlLnRhcmdldCwgX3RoaXMucHJvcHMuY2FuY2VsLCB0aGlzTm9kZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBQcmV2ZW50IHNjcm9sbGluZyBvbiBtb2JpbGUgZGV2aWNlcywgbGlrZSBpcGFkL2lwaG9uZS5cbiAgICAgIC8vIEltcG9ydGFudCB0aGF0IHRoaXMgaXMgYWZ0ZXIgaGFuZGxlL2NhbmNlbC5cblxuXG4gICAgICBpZiAoZS50eXBlID09PSAndG91Y2hzdGFydCcpIGUucHJldmVudERlZmF1bHQoKTsgLy8gU2V0IHRvdWNoIGlkZW50aWZpZXIgaW4gY29tcG9uZW50IHN0YXRlIGlmIHRoaXMgaXMgYSB0b3VjaCBldmVudC4gVGhpcyBhbGxvd3MgdXMgdG9cbiAgICAgIC8vIGRpc3Rpbmd1aXNoIGJldHdlZW4gaW5kaXZpZHVhbCB0b3VjaGVzIG9uIG11bHRpdG91Y2ggc2NyZWVucyBieSBpZGVudGlmeWluZyB3aGljaFxuICAgICAgLy8gdG91Y2hwb2ludCB3YXMgc2V0IHRvIHRoaXMgZWxlbWVudC5cblxuICAgICAgdmFyIHRvdWNoSWRlbnRpZmllciA9ICgwLCBfZG9tRm5zLmdldFRvdWNoSWRlbnRpZmllcikoZSk7XG5cbiAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgdG91Y2hJZGVudGlmaWVyOiB0b3VjaElkZW50aWZpZXJcbiAgICAgIH0pOyAvLyBHZXQgdGhlIGN1cnJlbnQgZHJhZyBwb2ludCBmcm9tIHRoZSBldmVudC4gVGhpcyBpcyB1c2VkIGFzIHRoZSBvZmZzZXQuXG5cblxuICAgICAgdmFyIHBvc2l0aW9uID0gKDAsIF9wb3NpdGlvbkZucy5nZXRDb250cm9sUG9zaXRpb24pKGUsIHRvdWNoSWRlbnRpZmllciwgX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgICAgaWYgKHBvc2l0aW9uID09IG51bGwpIHJldHVybjsgLy8gbm90IHBvc3NpYmxlIGJ1dCBzYXRpc2ZpZXMgZmxvd1xuXG4gICAgICB2YXIgeCA9IHBvc2l0aW9uLngsXG4gICAgICAgICAgeSA9IHBvc2l0aW9uLnk7IC8vIENyZWF0ZSBhbiBldmVudCBvYmplY3Qgd2l0aCBhbGwgdGhlIGRhdGEgcGFyZW50cyBuZWVkIHRvIG1ha2UgYSBkZWNpc2lvbiBoZXJlLlxuXG4gICAgICB2YXIgY29yZUV2ZW50ID0gKDAsIF9wb3NpdGlvbkZucy5jcmVhdGVDb3JlRGF0YSkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIHgsIHkpO1xuICAgICAgKDAsIF9sb2cuZGVmYXVsdCkoJ0RyYWdnYWJsZUNvcmU6IGhhbmRsZURyYWdTdGFydDogJWonLCBjb3JlRXZlbnQpOyAvLyBDYWxsIGV2ZW50IGhhbmRsZXIuIElmIGl0IHJldHVybnMgZXhwbGljaXQgZmFsc2UsIGNhbmNlbC5cblxuICAgICAgKDAsIF9sb2cuZGVmYXVsdCkoJ2NhbGxpbmcnLCBfdGhpcy5wcm9wcy5vblN0YXJ0KTtcblxuICAgICAgdmFyIHNob3VsZFVwZGF0ZSA9IF90aGlzLnByb3BzLm9uU3RhcnQoZSwgY29yZUV2ZW50KTtcblxuICAgICAgaWYgKHNob3VsZFVwZGF0ZSA9PT0gZmFsc2UgfHwgX3RoaXMubW91bnRlZCA9PT0gZmFsc2UpIHJldHVybjsgLy8gQWRkIGEgc3R5bGUgdG8gdGhlIGJvZHkgdG8gZGlzYWJsZSB1c2VyLXNlbGVjdC4gVGhpcyBwcmV2ZW50cyB0ZXh0IGZyb21cbiAgICAgIC8vIGJlaW5nIHNlbGVjdGVkIGFsbCBvdmVyIHRoZSBwYWdlLlxuXG4gICAgICBpZiAoX3RoaXMucHJvcHMuZW5hYmxlVXNlclNlbGVjdEhhY2spICgwLCBfZG9tRm5zLmFkZFVzZXJTZWxlY3RTdHlsZXMpKG93bmVyRG9jdW1lbnQpOyAvLyBJbml0aWF0ZSBkcmFnZ2luZy4gU2V0IHRoZSBjdXJyZW50IHggYW5kIHkgYXMgb2Zmc2V0c1xuICAgICAgLy8gc28gd2Uga25vdyBob3cgbXVjaCB3ZSd2ZSBtb3ZlZCBkdXJpbmcgdGhlIGRyYWcuIFRoaXMgYWxsb3dzIHVzXG4gICAgICAvLyB0byBkcmFnIGVsZW1lbnRzIGFyb3VuZCBldmVuIGlmIHRoZXkgaGF2ZSBiZWVuIG1vdmVkLCB3aXRob3V0IGlzc3VlLlxuXG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGRyYWdnaW5nOiB0cnVlLFxuICAgICAgICBsYXN0WDogeCxcbiAgICAgICAgbGFzdFk6IHlcbiAgICAgIH0pOyAvLyBBZGQgZXZlbnRzIHRvIHRoZSBkb2N1bWVudCBkaXJlY3RseSBzbyB3ZSBjYXRjaCB3aGVuIHRoZSB1c2VyJ3MgbW91c2UvdG91Y2ggbW92ZXMgb3V0c2lkZSBvZlxuICAgICAgLy8gdGhpcyBlbGVtZW50LiBXZSB1c2UgZGlmZmVyZW50IGV2ZW50cyBkZXBlbmRpbmcgb24gd2hldGhlciBvciBub3Qgd2UgaGF2ZSBkZXRlY3RlZCB0aGF0IHRoaXNcbiAgICAgIC8vIGlzIGEgdG91Y2gtY2FwYWJsZSBkZXZpY2UuXG5cblxuICAgICAgKDAsIF9kb21GbnMuYWRkRXZlbnQpKG93bmVyRG9jdW1lbnQsIGRyYWdFdmVudEZvci5tb3ZlLCBfdGhpcy5oYW5kbGVEcmFnKTtcbiAgICAgICgwLCBfZG9tRm5zLmFkZEV2ZW50KShvd25lckRvY3VtZW50LCBkcmFnRXZlbnRGb3Iuc3RvcCwgX3RoaXMuaGFuZGxlRHJhZ1N0b3ApO1xuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcImhhbmRsZURyYWdcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIC8vIEdldCB0aGUgY3VycmVudCBkcmFnIHBvaW50IGZyb20gdGhlIGV2ZW50LiBUaGlzIGlzIHVzZWQgYXMgdGhlIG9mZnNldC5cbiAgICAgIHZhciBwb3NpdGlvbiA9ICgwLCBfcG9zaXRpb25GbnMuZ2V0Q29udHJvbFBvc2l0aW9uKShlLCBfdGhpcy5zdGF0ZS50b3VjaElkZW50aWZpZXIsIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICAgIGlmIChwb3NpdGlvbiA9PSBudWxsKSByZXR1cm47XG4gICAgICB2YXIgeCA9IHBvc2l0aW9uLngsXG4gICAgICAgICAgeSA9IHBvc2l0aW9uLnk7IC8vIFNuYXAgdG8gZ3JpZCBpZiBwcm9wIGhhcyBiZWVuIHByb3ZpZGVkXG5cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KF90aGlzLnByb3BzLmdyaWQpKSB7XG4gICAgICAgIHZhciBkZWx0YVggPSB4IC0gX3RoaXMuc3RhdGUubGFzdFgsXG4gICAgICAgICAgICBkZWx0YVkgPSB5IC0gX3RoaXMuc3RhdGUubGFzdFk7XG5cbiAgICAgICAgdmFyIF9zbmFwVG9HcmlkID0gKDAsIF9wb3NpdGlvbkZucy5zbmFwVG9HcmlkKShfdGhpcy5wcm9wcy5ncmlkLCBkZWx0YVgsIGRlbHRhWSk7XG5cbiAgICAgICAgdmFyIF9zbmFwVG9HcmlkMiA9IF9zbGljZWRUb0FycmF5KF9zbmFwVG9HcmlkLCAyKTtcblxuICAgICAgICBkZWx0YVggPSBfc25hcFRvR3JpZDJbMF07XG4gICAgICAgIGRlbHRhWSA9IF9zbmFwVG9HcmlkMlsxXTtcbiAgICAgICAgaWYgKCFkZWx0YVggJiYgIWRlbHRhWSkgcmV0dXJuOyAvLyBza2lwIHVzZWxlc3MgZHJhZ1xuXG4gICAgICAgIHggPSBfdGhpcy5zdGF0ZS5sYXN0WCArIGRlbHRhWCwgeSA9IF90aGlzLnN0YXRlLmxhc3RZICsgZGVsdGFZO1xuICAgICAgfVxuXG4gICAgICB2YXIgY29yZUV2ZW50ID0gKDAsIF9wb3NpdGlvbkZucy5jcmVhdGVDb3JlRGF0YSkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIHgsIHkpO1xuICAgICAgKDAsIF9sb2cuZGVmYXVsdCkoJ0RyYWdnYWJsZUNvcmU6IGhhbmRsZURyYWc6ICVqJywgY29yZUV2ZW50KTsgLy8gQ2FsbCBldmVudCBoYW5kbGVyLiBJZiBpdCByZXR1cm5zIGV4cGxpY2l0IGZhbHNlLCB0cmlnZ2VyIGVuZC5cblxuICAgICAgdmFyIHNob3VsZFVwZGF0ZSA9IF90aGlzLnByb3BzLm9uRHJhZyhlLCBjb3JlRXZlbnQpO1xuXG4gICAgICBpZiAoc2hvdWxkVXBkYXRlID09PSBmYWxzZSB8fCBfdGhpcy5tb3VudGVkID09PSBmYWxzZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vICRGbG93SWdub3JlXG4gICAgICAgICAgX3RoaXMuaGFuZGxlRHJhZ1N0b3AobmV3IE1vdXNlRXZlbnQoJ21vdXNldXAnKSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIC8vIE9sZCBicm93c2Vyc1xuICAgICAgICAgIHZhciBldmVudCA9ICgoZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ01vdXNlRXZlbnRzJylcbiAgICAgICAgICAvKjogYW55Ki9cbiAgICAgICAgICApXG4gICAgICAgICAgLyo6IE1vdXNlVG91Y2hFdmVudCovXG4gICAgICAgICAgKTsgLy8gSSBzZWUgd2h5IHRoaXMgaW5zYW5pdHkgd2FzIGRlcHJlY2F0ZWRcbiAgICAgICAgICAvLyAkRmxvd0lnbm9yZVxuXG4gICAgICAgICAgZXZlbnQuaW5pdE1vdXNlRXZlbnQoJ21vdXNldXAnLCB0cnVlLCB0cnVlLCB3aW5kb3csIDAsIDAsIDAsIDAsIDAsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCAwLCBudWxsKTtcblxuICAgICAgICAgIF90aGlzLmhhbmRsZURyYWdTdG9wKGV2ZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICBsYXN0WDogeCxcbiAgICAgICAgbGFzdFk6IHlcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcImhhbmRsZURyYWdTdG9wXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoIV90aGlzLnN0YXRlLmRyYWdnaW5nKSByZXR1cm47XG4gICAgICB2YXIgcG9zaXRpb24gPSAoMCwgX3Bvc2l0aW9uRm5zLmdldENvbnRyb2xQb3NpdGlvbikoZSwgX3RoaXMuc3RhdGUudG91Y2hJZGVudGlmaWVyLCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSk7XG4gICAgICBpZiAocG9zaXRpb24gPT0gbnVsbCkgcmV0dXJuO1xuICAgICAgdmFyIHggPSBwb3NpdGlvbi54LFxuICAgICAgICAgIHkgPSBwb3NpdGlvbi55O1xuICAgICAgdmFyIGNvcmVFdmVudCA9ICgwLCBfcG9zaXRpb25GbnMuY3JlYXRlQ29yZURhdGEpKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCB4LCB5KTsgLy8gQ2FsbCBldmVudCBoYW5kbGVyXG5cbiAgICAgIHZhciBzaG91bGRDb250aW51ZSA9IF90aGlzLnByb3BzLm9uU3RvcChlLCBjb3JlRXZlbnQpO1xuXG4gICAgICBpZiAoc2hvdWxkQ29udGludWUgPT09IGZhbHNlIHx8IF90aGlzLm1vdW50ZWQgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgIHZhciB0aGlzTm9kZSA9IF90aGlzLmZpbmRET01Ob2RlKCk7XG5cbiAgICAgIGlmICh0aGlzTm9kZSkge1xuICAgICAgICAvLyBSZW1vdmUgdXNlci1zZWxlY3QgaGFja1xuICAgICAgICBpZiAoX3RoaXMucHJvcHMuZW5hYmxlVXNlclNlbGVjdEhhY2spICgwLCBfZG9tRm5zLnJlbW92ZVVzZXJTZWxlY3RTdHlsZXMpKHRoaXNOb2RlLm93bmVyRG9jdW1lbnQpO1xuICAgICAgfVxuXG4gICAgICAoMCwgX2xvZy5kZWZhdWx0KSgnRHJhZ2dhYmxlQ29yZTogaGFuZGxlRHJhZ1N0b3A6ICVqJywgY29yZUV2ZW50KTsgLy8gUmVzZXQgdGhlIGVsLlxuXG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGRyYWdnaW5nOiBmYWxzZSxcbiAgICAgICAgbGFzdFg6IE5hTixcbiAgICAgICAgbGFzdFk6IE5hTlxuICAgICAgfSk7XG5cbiAgICAgIGlmICh0aGlzTm9kZSkge1xuICAgICAgICAvLyBSZW1vdmUgZXZlbnQgaGFuZGxlcnNcbiAgICAgICAgKDAsIF9sb2cuZGVmYXVsdCkoJ0RyYWdnYWJsZUNvcmU6IFJlbW92aW5nIGhhbmRsZXJzJyk7XG4gICAgICAgICgwLCBfZG9tRm5zLnJlbW92ZUV2ZW50KSh0aGlzTm9kZS5vd25lckRvY3VtZW50LCBkcmFnRXZlbnRGb3IubW92ZSwgX3RoaXMuaGFuZGxlRHJhZyk7XG4gICAgICAgICgwLCBfZG9tRm5zLnJlbW92ZUV2ZW50KSh0aGlzTm9kZS5vd25lckRvY3VtZW50LCBkcmFnRXZlbnRGb3Iuc3RvcCwgX3RoaXMuaGFuZGxlRHJhZ1N0b3ApO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcIm9uTW91c2VEb3duXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBkcmFnRXZlbnRGb3IgPSBldmVudHNGb3IubW91c2U7IC8vIG9uIHRvdWNoc2NyZWVuIGxhcHRvcHMgd2UgY291bGQgc3dpdGNoIGJhY2sgdG8gbW91c2VcblxuICAgICAgcmV0dXJuIF90aGlzLmhhbmRsZURyYWdTdGFydChlKTtcbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJvbk1vdXNlVXBcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGRyYWdFdmVudEZvciA9IGV2ZW50c0Zvci5tb3VzZTtcbiAgICAgIHJldHVybiBfdGhpcy5oYW5kbGVEcmFnU3RvcChlKTtcbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJvblRvdWNoU3RhcnRcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIC8vIFdlJ3JlIG9uIGEgdG91Y2ggZGV2aWNlIG5vdywgc28gY2hhbmdlIHRoZSBldmVudCBoYW5kbGVyc1xuICAgICAgZHJhZ0V2ZW50Rm9yID0gZXZlbnRzRm9yLnRvdWNoO1xuICAgICAgcmV0dXJuIF90aGlzLmhhbmRsZURyYWdTdGFydChlKTtcbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJvblRvdWNoRW5kXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAvLyBXZSdyZSBvbiBhIHRvdWNoIGRldmljZSBub3csIHNvIGNoYW5nZSB0aGUgZXZlbnQgaGFuZGxlcnNcbiAgICAgIGRyYWdFdmVudEZvciA9IGV2ZW50c0Zvci50b3VjaDtcbiAgICAgIHJldHVybiBfdGhpcy5oYW5kbGVEcmFnU3RvcChlKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhEcmFnZ2FibGVDb3JlLCBbe1xuICAgIGtleTogXCJjb21wb25lbnREaWRNb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIHRoaXMubW91bnRlZCA9IHRydWU7IC8vIFRvdWNoIGhhbmRsZXJzIG11c3QgYmUgYWRkZWQgd2l0aCB7cGFzc2l2ZTogZmFsc2V9IHRvIGJlIGNhbmNlbGFibGUuXG4gICAgICAvLyBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS93ZWIvdXBkYXRlcy8yMDE3LzAxL3Njcm9sbGluZy1pbnRlcnZlbnRpb25cblxuICAgICAgdmFyIHRoaXNOb2RlID0gdGhpcy5maW5kRE9NTm9kZSgpO1xuXG4gICAgICBpZiAodGhpc05vZGUpIHtcbiAgICAgICAgKDAsIF9kb21GbnMuYWRkRXZlbnQpKHRoaXNOb2RlLCBldmVudHNGb3IudG91Y2guc3RhcnQsIHRoaXMub25Ub3VjaFN0YXJ0LCB7XG4gICAgICAgICAgcGFzc2l2ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudFdpbGxVbm1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgdGhpcy5tb3VudGVkID0gZmFsc2U7IC8vIFJlbW92ZSBhbnkgbGVmdG92ZXIgZXZlbnQgaGFuZGxlcnMuIFJlbW92ZSBib3RoIHRvdWNoIGFuZCBtb3VzZSBoYW5kbGVycyBpbiBjYXNlXG4gICAgICAvLyBzb21lIGJyb3dzZXIgcXVpcmsgY2F1c2VkIGEgdG91Y2ggZXZlbnQgdG8gZmlyZSBkdXJpbmcgYSBtb3VzZSBtb3ZlLCBvciB2aWNlIHZlcnNhLlxuXG4gICAgICB2YXIgdGhpc05vZGUgPSB0aGlzLmZpbmRET01Ob2RlKCk7XG5cbiAgICAgIGlmICh0aGlzTm9kZSkge1xuICAgICAgICB2YXIgb3duZXJEb2N1bWVudCA9IHRoaXNOb2RlLm93bmVyRG9jdW1lbnQ7XG4gICAgICAgICgwLCBfZG9tRm5zLnJlbW92ZUV2ZW50KShvd25lckRvY3VtZW50LCBldmVudHNGb3IubW91c2UubW92ZSwgdGhpcy5oYW5kbGVEcmFnKTtcbiAgICAgICAgKDAsIF9kb21GbnMucmVtb3ZlRXZlbnQpKG93bmVyRG9jdW1lbnQsIGV2ZW50c0Zvci50b3VjaC5tb3ZlLCB0aGlzLmhhbmRsZURyYWcpO1xuICAgICAgICAoMCwgX2RvbUZucy5yZW1vdmVFdmVudCkob3duZXJEb2N1bWVudCwgZXZlbnRzRm9yLm1vdXNlLnN0b3AsIHRoaXMuaGFuZGxlRHJhZ1N0b3ApO1xuICAgICAgICAoMCwgX2RvbUZucy5yZW1vdmVFdmVudCkob3duZXJEb2N1bWVudCwgZXZlbnRzRm9yLnRvdWNoLnN0b3AsIHRoaXMuaGFuZGxlRHJhZ1N0b3ApO1xuICAgICAgICAoMCwgX2RvbUZucy5yZW1vdmVFdmVudCkodGhpc05vZGUsIGV2ZW50c0Zvci50b3VjaC5zdGFydCwgdGhpcy5vblRvdWNoU3RhcnQsIHtcbiAgICAgICAgICBwYXNzaXZlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuZW5hYmxlVXNlclNlbGVjdEhhY2spICgwLCBfZG9tRm5zLnJlbW92ZVVzZXJTZWxlY3RTdHlsZXMpKG93bmVyRG9jdW1lbnQpO1xuICAgICAgfVxuICAgIH0gLy8gUmVhY3QgU3RyaWN0IE1vZGUgY29tcGF0aWJpbGl0eTogaWYgYG5vZGVSZWZgIGlzIHBhc3NlZCwgd2Ugd2lsbCB1c2UgaXQgaW5zdGVhZCBvZiB0cnlpbmcgdG8gZmluZFxuICAgIC8vIHRoZSB1bmRlcmx5aW5nIERPTSBub2RlIG91cnNlbHZlcy4gU2VlIHRoZSBSRUFETUUgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG5cbiAgfSwge1xuICAgIGtleTogXCJmaW5kRE9NTm9kZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kRE9NTm9kZSgpXG4gICAgLyo6ID9IVE1MRWxlbWVudCovXG4gICAge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMubm9kZVJlZiA/IHRoaXMucHJvcHMubm9kZVJlZi5jdXJyZW50IDogX3JlYWN0RG9tLmRlZmF1bHQuZmluZERPTU5vZGUodGhpcyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAvLyBSZXVzZSB0aGUgY2hpbGQgcHJvdmlkZWRcbiAgICAgIC8vIFRoaXMgbWFrZXMgaXQgZmxleGlibGUgdG8gdXNlIHdoYXRldmVyIGVsZW1lbnQgaXMgd2FudGVkIChkaXYsIHVsLCBldGMpXG4gICAgICByZXR1cm4gUmVhY3QuY2xvbmVFbGVtZW50KFJlYWN0LkNoaWxkcmVuLm9ubHkodGhpcy5wcm9wcy5jaGlsZHJlbiksIHtcbiAgICAgICAgLy8gTm90ZTogbW91c2VNb3ZlIGhhbmRsZXIgaXMgYXR0YWNoZWQgdG8gZG9jdW1lbnQgc28gaXQgd2lsbCBzdGlsbCBmdW5jdGlvblxuICAgICAgICAvLyB3aGVuIHRoZSB1c2VyIGRyYWdzIHF1aWNrbHkgYW5kIGxlYXZlcyB0aGUgYm91bmRzIG9mIHRoZSBlbGVtZW50LlxuICAgICAgICBvbk1vdXNlRG93bjogdGhpcy5vbk1vdXNlRG93bixcbiAgICAgICAgb25Nb3VzZVVwOiB0aGlzLm9uTW91c2VVcCxcbiAgICAgICAgLy8gb25Ub3VjaFN0YXJ0IGlzIGFkZGVkIG9uIGBjb21wb25lbnREaWRNb3VudGAgc28gdGhleSBjYW4gYmUgYWRkZWQgd2l0aFxuICAgICAgICAvLyB7cGFzc2l2ZTogZmFsc2V9LCB3aGljaCBhbGxvd3MgaXQgdG8gY2FuY2VsLiBTZWUgXG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL3dlYi91cGRhdGVzLzIwMTcvMDEvc2Nyb2xsaW5nLWludGVydmVudGlvblxuICAgICAgICBvblRvdWNoRW5kOiB0aGlzLm9uVG91Y2hFbmRcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBEcmFnZ2FibGVDb3JlO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBEcmFnZ2FibGVDb3JlO1xuXG5fZGVmaW5lUHJvcGVydHkoRHJhZ2dhYmxlQ29yZSwgXCJkaXNwbGF5TmFtZVwiLCAnRHJhZ2dhYmxlQ29yZScpO1xuXG5fZGVmaW5lUHJvcGVydHkoRHJhZ2dhYmxlQ29yZSwgXCJwcm9wVHlwZXNcIiwge1xuICAvKipcbiAgICogYGFsbG93QW55Q2xpY2tgIGFsbG93cyBkcmFnZ2luZyB1c2luZyBhbnkgbW91c2UgYnV0dG9uLlxuICAgKiBCeSBkZWZhdWx0LCB3ZSBvbmx5IGFjY2VwdCB0aGUgbGVmdCBidXR0b24uXG4gICAqXG4gICAqIERlZmF1bHRzIHRvIGBmYWxzZWAuXG4gICAqL1xuICBhbGxvd0FueUNsaWNrOiBfcHJvcFR5cGVzLmRlZmF1bHQuYm9vbCxcblxuICAvKipcbiAgICogYGRpc2FibGVkYCwgaWYgdHJ1ZSwgc3RvcHMgdGhlIDxEcmFnZ2FibGU+IGZyb20gZHJhZ2dpbmcuIEFsbCBoYW5kbGVycyxcbiAgICogd2l0aCB0aGUgZXhjZXB0aW9uIG9mIGBvbk1vdXNlRG93bmAsIHdpbGwgbm90IGZpcmUuXG4gICAqL1xuICBkaXNhYmxlZDogX3Byb3BUeXBlcy5kZWZhdWx0LmJvb2wsXG5cbiAgLyoqXG4gICAqIEJ5IGRlZmF1bHQsIHdlIGFkZCAndXNlci1zZWxlY3Q6bm9uZScgYXR0cmlidXRlcyB0byB0aGUgZG9jdW1lbnQgYm9keVxuICAgKiB0byBwcmV2ZW50IHVnbHkgdGV4dCBzZWxlY3Rpb24gZHVyaW5nIGRyYWcuIElmIHRoaXMgaXMgY2F1c2luZyBwcm9ibGVtc1xuICAgKiBmb3IgeW91ciBhcHAsIHNldCB0aGlzIHRvIGBmYWxzZWAuXG4gICAqL1xuICBlbmFibGVVc2VyU2VsZWN0SGFjazogX3Byb3BUeXBlcy5kZWZhdWx0LmJvb2wsXG5cbiAgLyoqXG4gICAqIGBvZmZzZXRQYXJlbnRgLCBpZiBzZXQsIHVzZXMgdGhlIHBhc3NlZCBET00gbm9kZSB0byBjb21wdXRlIGRyYWcgb2Zmc2V0c1xuICAgKiBpbnN0ZWFkIG9mIHVzaW5nIHRoZSBwYXJlbnQgbm9kZS5cbiAgICovXG4gIG9mZnNldFBhcmVudDogZnVuY3Rpb24gb2Zmc2V0UGFyZW50KHByb3BzXG4gIC8qOiBEcmFnZ2FibGVDb3JlUHJvcHMqL1xuICAsIHByb3BOYW1lXG4gIC8qOiAkS2V5czxEcmFnZ2FibGVDb3JlUHJvcHM+Ki9cbiAgKSB7XG4gICAgaWYgKHByb3BzW3Byb3BOYW1lXSAmJiBwcm9wc1twcm9wTmFtZV0ubm9kZVR5cGUgIT09IDEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRHJhZ2dhYmxlXFwncyBvZmZzZXRQYXJlbnQgbXVzdCBiZSBhIERPTSBOb2RlLicpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogYGdyaWRgIHNwZWNpZmllcyB0aGUgeCBhbmQgeSB0aGF0IGRyYWdnaW5nIHNob3VsZCBzbmFwIHRvLlxuICAgKi9cbiAgZ3JpZDogX3Byb3BUeXBlcy5kZWZhdWx0LmFycmF5T2YoX3Byb3BUeXBlcy5kZWZhdWx0Lm51bWJlciksXG5cbiAgLyoqXG4gICAqIGBoYW5kbGVgIHNwZWNpZmllcyBhIHNlbGVjdG9yIHRvIGJlIHVzZWQgYXMgdGhlIGhhbmRsZSB0aGF0IGluaXRpYXRlcyBkcmFnLlxuICAgKlxuICAgKiBFeGFtcGxlOlxuICAgKlxuICAgKiBgYGBqc3hcbiAgICogICBsZXQgQXBwID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICAgKiAgICAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICogICAgICAgICByZXR1cm4gKFxuICAgKiAgICAgICAgICAgIDxEcmFnZ2FibGUgaGFuZGxlPVwiLmhhbmRsZVwiPlxuICAgKiAgICAgICAgICAgICAgPGRpdj5cbiAgICogICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhhbmRsZVwiPkNsaWNrIG1lIHRvIGRyYWc8L2Rpdj5cbiAgICogICAgICAgICAgICAgICAgICA8ZGl2PlRoaXMgaXMgc29tZSBvdGhlciBjb250ZW50PC9kaXY+XG4gICAqICAgICAgICAgICAgICA8L2Rpdj5cbiAgICogICAgICAgICAgIDwvRHJhZ2dhYmxlPlxuICAgKiAgICAgICAgICk7XG4gICAqICAgICAgIH1cbiAgICogICB9KTtcbiAgICogYGBgXG4gICAqL1xuICBoYW5kbGU6IF9wcm9wVHlwZXMuZGVmYXVsdC5zdHJpbmcsXG5cbiAgLyoqXG4gICAqIGBjYW5jZWxgIHNwZWNpZmllcyBhIHNlbGVjdG9yIHRvIGJlIHVzZWQgdG8gcHJldmVudCBkcmFnIGluaXRpYWxpemF0aW9uLlxuICAgKlxuICAgKiBFeGFtcGxlOlxuICAgKlxuICAgKiBgYGBqc3hcbiAgICogICBsZXQgQXBwID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICAgKiAgICAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICogICAgICAgICAgIHJldHVybihcbiAgICogICAgICAgICAgICAgICA8RHJhZ2dhYmxlIGNhbmNlbD1cIi5jYW5jZWxcIj5cbiAgICogICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICogICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhbmNlbFwiPllvdSBjYW4ndCBkcmFnIGZyb20gaGVyZTwvZGl2PlxuICAgKiAgICAgICAgICAgICAgICAgICAgIDxkaXY+RHJhZ2dpbmcgaGVyZSB3b3JrcyBmaW5lPC9kaXY+XG4gICAqICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgKiAgICAgICAgICAgICAgIDwvRHJhZ2dhYmxlPlxuICAgKiAgICAgICAgICAgKTtcbiAgICogICAgICAgfVxuICAgKiAgIH0pO1xuICAgKiBgYGBcbiAgICovXG4gIGNhbmNlbDogX3Byb3BUeXBlcy5kZWZhdWx0LnN0cmluZyxcblxuICAvKiBJZiBydW5uaW5nIGluIFJlYWN0IFN0cmljdCBtb2RlLCBSZWFjdERPTS5maW5kRE9NTm9kZSgpIGlzIGRlcHJlY2F0ZWQuXG4gICAqIFVuZm9ydHVuYXRlbHksIGluIG9yZGVyIGZvciA8RHJhZ2dhYmxlPiB0byB3b3JrIHByb3Blcmx5LCB3ZSBuZWVkIHJhdyBhY2Nlc3NcbiAgICogdG8gdGhlIHVuZGVybHlpbmcgRE9NIG5vZGUuIElmIHlvdSB3YW50IHRvIGF2b2lkIHRoZSB3YXJuaW5nLCBwYXNzIGEgYG5vZGVSZWZgXG4gICAqIGFzIGluIHRoaXMgZXhhbXBsZTpcbiAgICpcbiAgICogZnVuY3Rpb24gTXlDb21wb25lbnQoKSB7XG4gICAqICAgY29uc3Qgbm9kZVJlZiA9IFJlYWN0LnVzZVJlZihudWxsKTtcbiAgICogICByZXR1cm4gKFxuICAgKiAgICAgPERyYWdnYWJsZSBub2RlUmVmPXtub2RlUmVmfT5cbiAgICogICAgICAgPGRpdiByZWY9e25vZGVSZWZ9PkV4YW1wbGUgVGFyZ2V0PC9kaXY+XG4gICAqICAgICA8L0RyYWdnYWJsZT5cbiAgICogICApO1xuICAgKiB9XG4gICAqXG4gICAqIFRoaXMgY2FuIGJlIHVzZWQgZm9yIGFyYml0cmFyaWx5IG5lc3RlZCBjb21wb25lbnRzLCBzbyBsb25nIGFzIHRoZSByZWYgZW5kcyB1cFxuICAgKiBwb2ludGluZyB0byB0aGUgYWN0dWFsIGNoaWxkIERPTSBub2RlIGFuZCBub3QgYSBjdXN0b20gY29tcG9uZW50LlxuICAgKi9cbiAgbm9kZVJlZjogX3Byb3BUeXBlcy5kZWZhdWx0Lm9iamVjdCxcblxuICAvKipcbiAgICogQ2FsbGVkIHdoZW4gZHJhZ2dpbmcgc3RhcnRzLlxuICAgKiBJZiB0aGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIGJvb2xlYW4gZmFsc2UsIGRyYWdnaW5nIHdpbGwgYmUgY2FuY2VsZWQuXG4gICAqL1xuICBvblN0YXJ0OiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYyxcblxuICAvKipcbiAgICogQ2FsbGVkIHdoaWxlIGRyYWdnaW5nLlxuICAgKiBJZiB0aGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIGJvb2xlYW4gZmFsc2UsIGRyYWdnaW5nIHdpbGwgYmUgY2FuY2VsZWQuXG4gICAqL1xuICBvbkRyYWc6IF9wcm9wVHlwZXMuZGVmYXVsdC5mdW5jLFxuXG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiBkcmFnZ2luZyBzdG9wcy5cbiAgICogSWYgdGhpcyBmdW5jdGlvbiByZXR1cm5zIHRoZSBib29sZWFuIGZhbHNlLCB0aGUgZHJhZyB3aWxsIHJlbWFpbiBhY3RpdmUuXG4gICAqL1xuICBvblN0b3A6IF9wcm9wVHlwZXMuZGVmYXVsdC5mdW5jLFxuXG4gIC8qKlxuICAgKiBBIHdvcmthcm91bmQgb3B0aW9uIHdoaWNoIGNhbiBiZSBwYXNzZWQgaWYgb25Nb3VzZURvd24gbmVlZHMgdG8gYmUgYWNjZXNzZWQsXG4gICAqIHNpbmNlIGl0J2xsIGFsd2F5cyBiZSBibG9ja2VkIChhcyB0aGVyZSBpcyBpbnRlcm5hbCB1c2Ugb2Ygb25Nb3VzZURvd24pXG4gICAqL1xuICBvbk1vdXNlRG93bjogX3Byb3BUeXBlcy5kZWZhdWx0LmZ1bmMsXG5cbiAgLyoqXG4gICAqIGBzY2FsZWAsIGlmIHNldCwgYXBwbGllcyBzY2FsaW5nIHdoaWxlIGRyYWdnaW5nIGFuIGVsZW1lbnRcbiAgICovXG4gIHNjYWxlOiBfcHJvcFR5cGVzLmRlZmF1bHQubnVtYmVyLFxuXG4gIC8qKlxuICAgKiBUaGVzZSBwcm9wZXJ0aWVzIHNob3VsZCBiZSBkZWZpbmVkIG9uIHRoZSBjaGlsZCwgbm90IGhlcmUuXG4gICAqL1xuICBjbGFzc05hbWU6IF9zaGltcy5kb250U2V0TWUsXG4gIHN0eWxlOiBfc2hpbXMuZG9udFNldE1lLFxuICB0cmFuc2Zvcm06IF9zaGltcy5kb250U2V0TWVcbn0pO1xuXG5fZGVmaW5lUHJvcGVydHkoRHJhZ2dhYmxlQ29yZSwgXCJkZWZhdWx0UHJvcHNcIiwge1xuICBhbGxvd0FueUNsaWNrOiBmYWxzZSxcbiAgLy8gYnkgZGVmYXVsdCBvbmx5IGFjY2VwdCBsZWZ0IGNsaWNrXG4gIGNhbmNlbDogbnVsbCxcbiAgZGlzYWJsZWQ6IGZhbHNlLFxuICBlbmFibGVVc2VyU2VsZWN0SGFjazogdHJ1ZSxcbiAgb2Zmc2V0UGFyZW50OiBudWxsLFxuICBoYW5kbGU6IG51bGwsXG4gIGdyaWQ6IG51bGwsXG4gIHRyYW5zZm9ybTogbnVsbCxcbiAgb25TdGFydDogZnVuY3Rpb24gb25TdGFydCgpIHt9LFxuICBvbkRyYWc6IGZ1bmN0aW9uIG9uRHJhZygpIHt9LFxuICBvblN0b3A6IGZ1bmN0aW9uIG9uU3RvcCgpIHt9LFxuICBvbk1vdXNlRG93bjogZnVuY3Rpb24gb25Nb3VzZURvd24oKSB7fSxcbiAgc2NhbGU6IDFcbn0pOyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgX3JlcXVpcmUgPSByZXF1aXJlKCcuL0RyYWdnYWJsZScpLFxuICAgIERyYWdnYWJsZSA9IF9yZXF1aXJlLmRlZmF1bHQsXG4gICAgRHJhZ2dhYmxlQ29yZSA9IF9yZXF1aXJlLkRyYWdnYWJsZUNvcmU7IC8vIFByZXZpb3VzIHZlcnNpb25zIG9mIHRoaXMgbGliIGV4cG9ydGVkIDxEcmFnZ2FibGU+IGFzIHRoZSByb290IGV4cG9ydC4gQXMgdG8gbm8tLy8gdGhlbSwgb3IgVHlwZVNjcmlwdCwgd2UgZXhwb3J0ICpib3RoKiBhcyB0aGUgcm9vdCBhbmQgYXMgJ2RlZmF1bHQnLlxuLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9temFicmlza2llL3JlYWN0LWRyYWdnYWJsZS9wdWxsLzI1NFxuLy8gYW5kIGh0dHBzOi8vZ2l0aHViLmNvbS9temFicmlza2llL3JlYWN0LWRyYWdnYWJsZS9pc3N1ZXMvMjY2XG5cblxubW9kdWxlLmV4cG9ydHMgPSBEcmFnZ2FibGU7XG5tb2R1bGUuZXhwb3J0cy5kZWZhdWx0ID0gRHJhZ2dhYmxlO1xubW9kdWxlLmV4cG9ydHMuRHJhZ2dhYmxlQ29yZSA9IERyYWdnYWJsZUNvcmU7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH1cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMubWF0Y2hlc1NlbGVjdG9yID0gbWF0Y2hlc1NlbGVjdG9yO1xuZXhwb3J0cy5tYXRjaGVzU2VsZWN0b3JBbmRQYXJlbnRzVG8gPSBtYXRjaGVzU2VsZWN0b3JBbmRQYXJlbnRzVG87XG5leHBvcnRzLmFkZEV2ZW50ID0gYWRkRXZlbnQ7XG5leHBvcnRzLnJlbW92ZUV2ZW50ID0gcmVtb3ZlRXZlbnQ7XG5leHBvcnRzLm91dGVySGVpZ2h0ID0gb3V0ZXJIZWlnaHQ7XG5leHBvcnRzLm91dGVyV2lkdGggPSBvdXRlcldpZHRoO1xuZXhwb3J0cy5pbm5lckhlaWdodCA9IGlubmVySGVpZ2h0O1xuZXhwb3J0cy5pbm5lcldpZHRoID0gaW5uZXJXaWR0aDtcbmV4cG9ydHMub2Zmc2V0WFlGcm9tUGFyZW50ID0gb2Zmc2V0WFlGcm9tUGFyZW50O1xuZXhwb3J0cy5jcmVhdGVDU1NUcmFuc2Zvcm0gPSBjcmVhdGVDU1NUcmFuc2Zvcm07XG5leHBvcnRzLmNyZWF0ZVNWR1RyYW5zZm9ybSA9IGNyZWF0ZVNWR1RyYW5zZm9ybTtcbmV4cG9ydHMuZ2V0VHJhbnNsYXRpb24gPSBnZXRUcmFuc2xhdGlvbjtcbmV4cG9ydHMuZ2V0VG91Y2ggPSBnZXRUb3VjaDtcbmV4cG9ydHMuZ2V0VG91Y2hJZGVudGlmaWVyID0gZ2V0VG91Y2hJZGVudGlmaWVyO1xuZXhwb3J0cy5hZGRVc2VyU2VsZWN0U3R5bGVzID0gYWRkVXNlclNlbGVjdFN0eWxlcztcbmV4cG9ydHMucmVtb3ZlVXNlclNlbGVjdFN0eWxlcyA9IHJlbW92ZVVzZXJTZWxlY3RTdHlsZXM7XG5leHBvcnRzLmFkZENsYXNzTmFtZSA9IGFkZENsYXNzTmFtZTtcbmV4cG9ydHMucmVtb3ZlQ2xhc3NOYW1lID0gcmVtb3ZlQ2xhc3NOYW1lO1xuXG52YXIgX3NoaW1zID0gcmVxdWlyZShcIi4vc2hpbXNcIik7XG5cbnZhciBfZ2V0UHJlZml4ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZShcIi4vZ2V0UHJlZml4XCIpKTtcblxuZnVuY3Rpb24gX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlKCkgeyBpZiAodHlwZW9mIFdlYWtNYXAgIT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIG51bGw7IHZhciBjYWNoZSA9IG5ldyBXZWFrTWFwKCk7IF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSA9IGZ1bmN0aW9uIF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSgpIHsgcmV0dXJuIGNhY2hlOyB9OyByZXR1cm4gY2FjaGU7IH1cblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBpZiAob2JqID09PSBudWxsIHx8IF90eXBlb2Yob2JqKSAhPT0gXCJvYmplY3RcIiAmJiB0eXBlb2Ygb2JqICE9PSBcImZ1bmN0aW9uXCIpIHsgcmV0dXJuIHsgZGVmYXVsdDogb2JqIH07IH0gdmFyIGNhY2hlID0gX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlKCk7IGlmIChjYWNoZSAmJiBjYWNoZS5oYXMob2JqKSkgeyByZXR1cm4gY2FjaGUuZ2V0KG9iaik7IH0gdmFyIG5ld09iaiA9IHt9OyB2YXIgaGFzUHJvcGVydHlEZXNjcmlwdG9yID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7IGZvciAodmFyIGtleSBpbiBvYmopIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHsgdmFyIGRlc2MgPSBoYXNQcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IG51bGw7IGlmIChkZXNjICYmIChkZXNjLmdldCB8fCBkZXNjLnNldCkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsgfSBlbHNlIHsgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IGlmIChjYWNoZSkgeyBjYWNoZS5zZXQob2JqLCBuZXdPYmopOyB9IHJldHVybiBuZXdPYmo7IH1cblxuZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH1cblxuZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbnZhciBtYXRjaGVzU2VsZWN0b3JGdW5jID0gJyc7XG5cbmZ1bmN0aW9uIG1hdGNoZXNTZWxlY3RvcihlbFxuLyo6IE5vZGUqL1xuLCBzZWxlY3RvclxuLyo6IHN0cmluZyovXG4pXG4vKjogYm9vbGVhbiovXG57XG4gIGlmICghbWF0Y2hlc1NlbGVjdG9yRnVuYykge1xuICAgIG1hdGNoZXNTZWxlY3RvckZ1bmMgPSAoMCwgX3NoaW1zLmZpbmRJbkFycmF5KShbJ21hdGNoZXMnLCAnd2Via2l0TWF0Y2hlc1NlbGVjdG9yJywgJ21vek1hdGNoZXNTZWxlY3RvcicsICdtc01hdGNoZXNTZWxlY3RvcicsICdvTWF0Y2hlc1NlbGVjdG9yJ10sIGZ1bmN0aW9uIChtZXRob2QpIHtcbiAgICAgIC8vICRGbG93SWdub3JlOiBEb2Vzbid0IHRoaW5rIGVsZW1lbnRzIGFyZSBpbmRleGFibGVcbiAgICAgIHJldHVybiAoMCwgX3NoaW1zLmlzRnVuY3Rpb24pKGVsW21ldGhvZF0pO1xuICAgIH0pO1xuICB9IC8vIE1pZ2h0IG5vdCBiZSBmb3VuZCBlbnRpcmVseSAobm90IGFuIEVsZW1lbnQ/KSAtIGluIHRoYXQgY2FzZSwgYmFpbFxuICAvLyAkRmxvd0lnbm9yZTogRG9lc24ndCB0aGluayBlbGVtZW50cyBhcmUgaW5kZXhhYmxlXG5cblxuICBpZiAoISgwLCBfc2hpbXMuaXNGdW5jdGlvbikoZWxbbWF0Y2hlc1NlbGVjdG9yRnVuY10pKSByZXR1cm4gZmFsc2U7IC8vICRGbG93SWdub3JlOiBEb2Vzbid0IHRoaW5rIGVsZW1lbnRzIGFyZSBpbmRleGFibGVcblxuICByZXR1cm4gZWxbbWF0Y2hlc1NlbGVjdG9yRnVuY10oc2VsZWN0b3IpO1xufSAvLyBXb3JrcyB1cCB0aGUgdHJlZSB0byB0aGUgZHJhZ2dhYmxlIGl0c2VsZiBhdHRlbXB0aW5nIHRvIG1hdGNoIHNlbGVjdG9yLlxuXG5cbmZ1bmN0aW9uIG1hdGNoZXNTZWxlY3RvckFuZFBhcmVudHNUbyhlbFxuLyo6IE5vZGUqL1xuLCBzZWxlY3RvclxuLyo6IHN0cmluZyovXG4sIGJhc2VOb2RlXG4vKjogTm9kZSovXG4pXG4vKjogYm9vbGVhbiovXG57XG4gIHZhciBub2RlID0gZWw7XG5cbiAgZG8ge1xuICAgIGlmIChtYXRjaGVzU2VsZWN0b3Iobm9kZSwgc2VsZWN0b3IpKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAobm9kZSA9PT0gYmFzZU5vZGUpIHJldHVybiBmYWxzZTtcbiAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICB9IHdoaWxlIChub2RlKTtcblxuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGFkZEV2ZW50KGVsXG4vKjogP05vZGUqL1xuLCBldmVudFxuLyo6IHN0cmluZyovXG4sIGhhbmRsZXJcbi8qOiBGdW5jdGlvbiovXG4sIGlucHV0T3B0aW9uc1xuLyo6IE9iamVjdCovXG4pXG4vKjogdm9pZCovXG57XG4gIGlmICghZWwpIHJldHVybjtcblxuICB2YXIgb3B0aW9ucyA9IF9vYmplY3RTcHJlYWQoe1xuICAgIGNhcHR1cmU6IHRydWVcbiAgfSwgaW5wdXRPcHRpb25zKTtcblxuICBpZiAoZWwuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpO1xuICB9IGVsc2UgaWYgKGVsLmF0dGFjaEV2ZW50KSB7XG4gICAgZWwuYXR0YWNoRXZlbnQoJ29uJyArIGV2ZW50LCBoYW5kbGVyKTtcbiAgfSBlbHNlIHtcbiAgICAvLyAkRmxvd0lnbm9yZTogRG9lc24ndCB0aGluayBlbGVtZW50cyBhcmUgaW5kZXhhYmxlXG4gICAgZWxbJ29uJyArIGV2ZW50XSA9IGhhbmRsZXI7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlRXZlbnQoZWxcbi8qOiA/Tm9kZSovXG4sIGV2ZW50XG4vKjogc3RyaW5nKi9cbiwgaGFuZGxlclxuLyo6IEZ1bmN0aW9uKi9cbiwgaW5wdXRPcHRpb25zXG4vKjogT2JqZWN0Ki9cbilcbi8qOiB2b2lkKi9cbntcbiAgaWYgKCFlbCkgcmV0dXJuO1xuXG4gIHZhciBvcHRpb25zID0gX29iamVjdFNwcmVhZCh7XG4gICAgY2FwdHVyZTogdHJ1ZVxuICB9LCBpbnB1dE9wdGlvbnMpO1xuXG4gIGlmIChlbC5yZW1vdmVFdmVudExpc3RlbmVyKSB7XG4gICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XG4gIH0gZWxzZSBpZiAoZWwuZGV0YWNoRXZlbnQpIHtcbiAgICBlbC5kZXRhY2hFdmVudCgnb24nICsgZXZlbnQsIGhhbmRsZXIpO1xuICB9IGVsc2Uge1xuICAgIC8vICRGbG93SWdub3JlOiBEb2Vzbid0IHRoaW5rIGVsZW1lbnRzIGFyZSBpbmRleGFibGVcbiAgICBlbFsnb24nICsgZXZlbnRdID0gbnVsbDtcbiAgfVxufVxuXG5mdW5jdGlvbiBvdXRlckhlaWdodChub2RlXG4vKjogSFRNTEVsZW1lbnQqL1xuKVxuLyo6IG51bWJlciovXG57XG4gIC8vIFRoaXMgaXMgZGVsaWJlcmF0ZWx5IGV4Y2x1ZGluZyBtYXJnaW4gZm9yIG91ciBjYWxjdWxhdGlvbnMsIHNpbmNlIHdlIGFyZSB1c2luZ1xuICAvLyBvZmZzZXRUb3Agd2hpY2ggaXMgaW5jbHVkaW5nIG1hcmdpbi4gU2VlIGdldEJvdW5kUG9zaXRpb25cbiAgdmFyIGhlaWdodCA9IG5vZGUuY2xpZW50SGVpZ2h0O1xuICB2YXIgY29tcHV0ZWRTdHlsZSA9IG5vZGUub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKG5vZGUpO1xuICBoZWlnaHQgKz0gKDAsIF9zaGltcy5pbnQpKGNvbXB1dGVkU3R5bGUuYm9yZGVyVG9wV2lkdGgpO1xuICBoZWlnaHQgKz0gKDAsIF9zaGltcy5pbnQpKGNvbXB1dGVkU3R5bGUuYm9yZGVyQm90dG9tV2lkdGgpO1xuICByZXR1cm4gaGVpZ2h0O1xufVxuXG5mdW5jdGlvbiBvdXRlcldpZHRoKG5vZGVcbi8qOiBIVE1MRWxlbWVudCovXG4pXG4vKjogbnVtYmVyKi9cbntcbiAgLy8gVGhpcyBpcyBkZWxpYmVyYXRlbHkgZXhjbHVkaW5nIG1hcmdpbiBmb3Igb3VyIGNhbGN1bGF0aW9ucywgc2luY2Ugd2UgYXJlIHVzaW5nXG4gIC8vIG9mZnNldExlZnQgd2hpY2ggaXMgaW5jbHVkaW5nIG1hcmdpbi4gU2VlIGdldEJvdW5kUG9zaXRpb25cbiAgdmFyIHdpZHRoID0gbm9kZS5jbGllbnRXaWR0aDtcbiAgdmFyIGNvbXB1dGVkU3R5bGUgPSBub2RlLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShub2RlKTtcbiAgd2lkdGggKz0gKDAsIF9zaGltcy5pbnQpKGNvbXB1dGVkU3R5bGUuYm9yZGVyTGVmdFdpZHRoKTtcbiAgd2lkdGggKz0gKDAsIF9zaGltcy5pbnQpKGNvbXB1dGVkU3R5bGUuYm9yZGVyUmlnaHRXaWR0aCk7XG4gIHJldHVybiB3aWR0aDtcbn1cblxuZnVuY3Rpb24gaW5uZXJIZWlnaHQobm9kZVxuLyo6IEhUTUxFbGVtZW50Ki9cbilcbi8qOiBudW1iZXIqL1xue1xuICB2YXIgaGVpZ2h0ID0gbm9kZS5jbGllbnRIZWlnaHQ7XG4gIHZhciBjb21wdXRlZFN0eWxlID0gbm9kZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUobm9kZSk7XG4gIGhlaWdodCAtPSAoMCwgX3NoaW1zLmludCkoY29tcHV0ZWRTdHlsZS5wYWRkaW5nVG9wKTtcbiAgaGVpZ2h0IC09ICgwLCBfc2hpbXMuaW50KShjb21wdXRlZFN0eWxlLnBhZGRpbmdCb3R0b20pO1xuICByZXR1cm4gaGVpZ2h0O1xufVxuXG5mdW5jdGlvbiBpbm5lcldpZHRoKG5vZGVcbi8qOiBIVE1MRWxlbWVudCovXG4pXG4vKjogbnVtYmVyKi9cbntcbiAgdmFyIHdpZHRoID0gbm9kZS5jbGllbnRXaWR0aDtcbiAgdmFyIGNvbXB1dGVkU3R5bGUgPSBub2RlLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShub2RlKTtcbiAgd2lkdGggLT0gKDAsIF9zaGltcy5pbnQpKGNvbXB1dGVkU3R5bGUucGFkZGluZ0xlZnQpO1xuICB3aWR0aCAtPSAoMCwgX3NoaW1zLmludCkoY29tcHV0ZWRTdHlsZS5wYWRkaW5nUmlnaHQpO1xuICByZXR1cm4gd2lkdGg7XG59IC8vIEdldCBmcm9tIG9mZnNldFBhcmVudFxuXG5cbmZ1bmN0aW9uIG9mZnNldFhZRnJvbVBhcmVudChldnRcbi8qOiB7Y2xpZW50WDogbnVtYmVyLCBjbGllbnRZOiBudW1iZXJ9Ki9cbiwgb2Zmc2V0UGFyZW50XG4vKjogSFRNTEVsZW1lbnQqL1xuLCBzY2FsZVxuLyo6IG51bWJlciovXG4pXG4vKjogQ29udHJvbFBvc2l0aW9uKi9cbntcbiAgdmFyIGlzQm9keSA9IG9mZnNldFBhcmVudCA9PT0gb2Zmc2V0UGFyZW50Lm93bmVyRG9jdW1lbnQuYm9keTtcbiAgdmFyIG9mZnNldFBhcmVudFJlY3QgPSBpc0JvZHkgPyB7XG4gICAgbGVmdDogMCxcbiAgICB0b3A6IDBcbiAgfSA6IG9mZnNldFBhcmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgdmFyIHggPSAoZXZ0LmNsaWVudFggKyBvZmZzZXRQYXJlbnQuc2Nyb2xsTGVmdCAtIG9mZnNldFBhcmVudFJlY3QubGVmdCkgLyBzY2FsZTtcbiAgdmFyIHkgPSAoZXZ0LmNsaWVudFkgKyBvZmZzZXRQYXJlbnQuc2Nyb2xsVG9wIC0gb2Zmc2V0UGFyZW50UmVjdC50b3ApIC8gc2NhbGU7XG4gIHJldHVybiB7XG4gICAgeDogeCxcbiAgICB5OiB5XG4gIH07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNTU1RyYW5zZm9ybShjb250cm9sUG9zXG4vKjogQ29udHJvbFBvc2l0aW9uKi9cbiwgcG9zaXRpb25PZmZzZXRcbi8qOiBQb3NpdGlvbk9mZnNldENvbnRyb2xQb3NpdGlvbiovXG4pXG4vKjogT2JqZWN0Ki9cbntcbiAgdmFyIHRyYW5zbGF0aW9uID0gZ2V0VHJhbnNsYXRpb24oY29udHJvbFBvcywgcG9zaXRpb25PZmZzZXQsICdweCcpO1xuICByZXR1cm4gX2RlZmluZVByb3BlcnR5KHt9LCAoMCwgX2dldFByZWZpeC5icm93c2VyUHJlZml4VG9LZXkpKCd0cmFuc2Zvcm0nLCBfZ2V0UHJlZml4LmRlZmF1bHQpLCB0cmFuc2xhdGlvbik7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVNWR1RyYW5zZm9ybShjb250cm9sUG9zXG4vKjogQ29udHJvbFBvc2l0aW9uKi9cbiwgcG9zaXRpb25PZmZzZXRcbi8qOiBQb3NpdGlvbk9mZnNldENvbnRyb2xQb3NpdGlvbiovXG4pXG4vKjogc3RyaW5nKi9cbntcbiAgdmFyIHRyYW5zbGF0aW9uID0gZ2V0VHJhbnNsYXRpb24oY29udHJvbFBvcywgcG9zaXRpb25PZmZzZXQsICcnKTtcbiAgcmV0dXJuIHRyYW5zbGF0aW9uO1xufVxuXG5mdW5jdGlvbiBnZXRUcmFuc2xhdGlvbihfcmVmMiwgcG9zaXRpb25PZmZzZXRcbi8qOiBQb3NpdGlvbk9mZnNldENvbnRyb2xQb3NpdGlvbiovXG4sIHVuaXRTdWZmaXhcbi8qOiBzdHJpbmcqL1xuKVxuLyo6IHN0cmluZyovXG57XG4gIHZhciB4ID0gX3JlZjIueCxcbiAgICAgIHkgPSBfcmVmMi55O1xuICB2YXIgdHJhbnNsYXRpb24gPSBcInRyYW5zbGF0ZShcIi5jb25jYXQoeCkuY29uY2F0KHVuaXRTdWZmaXgsIFwiLFwiKS5jb25jYXQoeSkuY29uY2F0KHVuaXRTdWZmaXgsIFwiKVwiKTtcblxuICBpZiAocG9zaXRpb25PZmZzZXQpIHtcbiAgICB2YXIgZGVmYXVsdFggPSBcIlwiLmNvbmNhdCh0eXBlb2YgcG9zaXRpb25PZmZzZXQueCA9PT0gJ3N0cmluZycgPyBwb3NpdGlvbk9mZnNldC54IDogcG9zaXRpb25PZmZzZXQueCArIHVuaXRTdWZmaXgpO1xuICAgIHZhciBkZWZhdWx0WSA9IFwiXCIuY29uY2F0KHR5cGVvZiBwb3NpdGlvbk9mZnNldC55ID09PSAnc3RyaW5nJyA/IHBvc2l0aW9uT2Zmc2V0LnkgOiBwb3NpdGlvbk9mZnNldC55ICsgdW5pdFN1ZmZpeCk7XG4gICAgdHJhbnNsYXRpb24gPSBcInRyYW5zbGF0ZShcIi5jb25jYXQoZGVmYXVsdFgsIFwiLCBcIikuY29uY2F0KGRlZmF1bHRZLCBcIilcIikgKyB0cmFuc2xhdGlvbjtcbiAgfVxuXG4gIHJldHVybiB0cmFuc2xhdGlvbjtcbn1cblxuZnVuY3Rpb24gZ2V0VG91Y2goZVxuLyo6IE1vdXNlVG91Y2hFdmVudCovXG4sIGlkZW50aWZpZXJcbi8qOiBudW1iZXIqL1xuKVxuLyo6ID97Y2xpZW50WDogbnVtYmVyLCBjbGllbnRZOiBudW1iZXJ9Ki9cbntcbiAgcmV0dXJuIGUudGFyZ2V0VG91Y2hlcyAmJiAoMCwgX3NoaW1zLmZpbmRJbkFycmF5KShlLnRhcmdldFRvdWNoZXMsIGZ1bmN0aW9uICh0KSB7XG4gICAgcmV0dXJuIGlkZW50aWZpZXIgPT09IHQuaWRlbnRpZmllcjtcbiAgfSkgfHwgZS5jaGFuZ2VkVG91Y2hlcyAmJiAoMCwgX3NoaW1zLmZpbmRJbkFycmF5KShlLmNoYW5nZWRUb3VjaGVzLCBmdW5jdGlvbiAodCkge1xuICAgIHJldHVybiBpZGVudGlmaWVyID09PSB0LmlkZW50aWZpZXI7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBnZXRUb3VjaElkZW50aWZpZXIoZVxuLyo6IE1vdXNlVG91Y2hFdmVudCovXG4pXG4vKjogP251bWJlciovXG57XG4gIGlmIChlLnRhcmdldFRvdWNoZXMgJiYgZS50YXJnZXRUb3VjaGVzWzBdKSByZXR1cm4gZS50YXJnZXRUb3VjaGVzWzBdLmlkZW50aWZpZXI7XG4gIGlmIChlLmNoYW5nZWRUb3VjaGVzICYmIGUuY2hhbmdlZFRvdWNoZXNbMF0pIHJldHVybiBlLmNoYW5nZWRUb3VjaGVzWzBdLmlkZW50aWZpZXI7XG59IC8vIFVzZXItc2VsZWN0IEhhY2tzOlxuLy9cbi8vIFVzZWZ1bCBmb3IgcHJldmVudGluZyBibHVlIGhpZ2hsaWdodHMgYWxsIG92ZXIgZXZlcnl0aGluZyB3aGVuIGRyYWdnaW5nLlxuLy8gTm90ZSB3ZSdyZSBwYXNzaW5nIGBkb2N1bWVudGAgYi9jIHdlIGNvdWxkIGJlIGlmcmFtZWRcblxuXG5mdW5jdGlvbiBhZGRVc2VyU2VsZWN0U3R5bGVzKGRvY1xuLyo6ID9Eb2N1bWVudCovXG4pIHtcbiAgaWYgKCFkb2MpIHJldHVybjtcbiAgdmFyIHN0eWxlRWwgPSBkb2MuZ2V0RWxlbWVudEJ5SWQoJ3JlYWN0LWRyYWdnYWJsZS1zdHlsZS1lbCcpO1xuXG4gIGlmICghc3R5bGVFbCkge1xuICAgIHN0eWxlRWwgPSBkb2MuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICBzdHlsZUVsLnR5cGUgPSAndGV4dC9jc3MnO1xuICAgIHN0eWxlRWwuaWQgPSAncmVhY3QtZHJhZ2dhYmxlLXN0eWxlLWVsJztcbiAgICBzdHlsZUVsLmlubmVySFRNTCA9ICcucmVhY3QtZHJhZ2dhYmxlLXRyYW5zcGFyZW50LXNlbGVjdGlvbiAqOjotbW96LXNlbGVjdGlvbiB7YWxsOiBpbmhlcml0O31cXG4nO1xuICAgIHN0eWxlRWwuaW5uZXJIVE1MICs9ICcucmVhY3QtZHJhZ2dhYmxlLXRyYW5zcGFyZW50LXNlbGVjdGlvbiAqOjpzZWxlY3Rpb24ge2FsbDogaW5oZXJpdDt9XFxuJztcbiAgICBkb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXS5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgfVxuXG4gIGlmIChkb2MuYm9keSkgYWRkQ2xhc3NOYW1lKGRvYy5ib2R5LCAncmVhY3QtZHJhZ2dhYmxlLXRyYW5zcGFyZW50LXNlbGVjdGlvbicpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVVc2VyU2VsZWN0U3R5bGVzKGRvY1xuLyo6ID9Eb2N1bWVudCovXG4pIHtcbiAgaWYgKCFkb2MpIHJldHVybjtcblxuICB0cnkge1xuICAgIGlmIChkb2MuYm9keSkgcmVtb3ZlQ2xhc3NOYW1lKGRvYy5ib2R5LCAncmVhY3QtZHJhZ2dhYmxlLXRyYW5zcGFyZW50LXNlbGVjdGlvbicpOyAvLyAkRmxvd0lnbm9yZTogSUVcblxuICAgIGlmIChkb2Muc2VsZWN0aW9uKSB7XG4gICAgICAvLyAkRmxvd0lnbm9yZTogSUVcbiAgICAgIGRvYy5zZWxlY3Rpb24uZW1wdHkoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUmVtb3ZlIHNlbGVjdGlvbiBjYXVzZWQgYnkgc2Nyb2xsLCB1bmxlc3MgaXQncyBhIGZvY3VzZWQgaW5wdXRcbiAgICAgIC8vICh3ZSB1c2UgZG9jLmRlZmF1bHRWaWV3IGluIGNhc2Ugd2UncmUgaW4gYW4gaWZyYW1lKVxuICAgICAgdmFyIHNlbGVjdGlvbiA9IChkb2MuZGVmYXVsdFZpZXcgfHwgd2luZG93KS5nZXRTZWxlY3Rpb24oKTtcblxuICAgICAgaWYgKHNlbGVjdGlvbiAmJiBzZWxlY3Rpb24udHlwZSAhPT0gJ0NhcmV0Jykge1xuICAgICAgICBzZWxlY3Rpb24ucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlKSB7Ly8gcHJvYmFibHkgSUVcbiAgfVxufVxuXG5mdW5jdGlvbiBhZGRDbGFzc05hbWUoZWxcbi8qOiBIVE1MRWxlbWVudCovXG4sIGNsYXNzTmFtZVxuLyo6IHN0cmluZyovXG4pIHtcbiAgaWYgKGVsLmNsYXNzTGlzdCkge1xuICAgIGVsLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoIWVsLmNsYXNzTmFtZS5tYXRjaChuZXcgUmVnRXhwKFwiKD86XnxcXFxccylcIi5jb25jYXQoY2xhc3NOYW1lLCBcIig/IVxcXFxTKVwiKSkpKSB7XG4gICAgICBlbC5jbGFzc05hbWUgKz0gXCIgXCIuY29uY2F0KGNsYXNzTmFtZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUNsYXNzTmFtZShlbFxuLyo6IEhUTUxFbGVtZW50Ki9cbiwgY2xhc3NOYW1lXG4vKjogc3RyaW5nKi9cbikge1xuICBpZiAoZWwuY2xhc3NMaXN0KSB7XG4gICAgZWwuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuICB9IGVsc2Uge1xuICAgIGVsLmNsYXNzTmFtZSA9IGVsLmNsYXNzTmFtZS5yZXBsYWNlKG5ldyBSZWdFeHAoXCIoPzpefFxcXFxzKVwiLmNvbmNhdChjbGFzc05hbWUsIFwiKD8hXFxcXFMpXCIpLCAnZycpLCAnJyk7XG4gIH1cbn0iLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZ2V0UHJlZml4ID0gZ2V0UHJlZml4O1xuZXhwb3J0cy5icm93c2VyUHJlZml4VG9LZXkgPSBicm93c2VyUHJlZml4VG9LZXk7XG5leHBvcnRzLmJyb3dzZXJQcmVmaXhUb1N0eWxlID0gYnJvd3NlclByZWZpeFRvU3R5bGU7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG52YXIgcHJlZml4ZXMgPSBbJ01veicsICdXZWJraXQnLCAnTycsICdtcyddO1xuXG5mdW5jdGlvbiBnZXRQcmVmaXgoKVxuLyo6IHN0cmluZyovXG57XG4gIHZhciBwcm9wXG4gIC8qOiBzdHJpbmcqL1xuICA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogJ3RyYW5zZm9ybSc7XG4gIC8vIENoZWNraW5nIHNwZWNpZmljYWxseSBmb3IgJ3dpbmRvdy5kb2N1bWVudCcgaXMgZm9yIHBzZXVkby1icm93c2VyIHNlcnZlci1zaWRlXG4gIC8vIGVudmlyb25tZW50cyB0aGF0IGRlZmluZSAnd2luZG93JyBhcyB0aGUgZ2xvYmFsIGNvbnRleHQuXG4gIC8vIEUuZy4gUmVhY3QtcmFpbHMgKHNlZSBodHRwczovL2dpdGh1Yi5jb20vcmVhY3Rqcy9yZWFjdC1yYWlscy9wdWxsLzg0KVxuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIHdpbmRvdy5kb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiAnJztcbiAgdmFyIHN0eWxlID0gd2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZTtcbiAgaWYgKHByb3AgaW4gc3R5bGUpIHJldHVybiAnJztcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHByZWZpeGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGJyb3dzZXJQcmVmaXhUb0tleShwcm9wLCBwcmVmaXhlc1tpXSkgaW4gc3R5bGUpIHJldHVybiBwcmVmaXhlc1tpXTtcbiAgfVxuXG4gIHJldHVybiAnJztcbn1cblxuZnVuY3Rpb24gYnJvd3NlclByZWZpeFRvS2V5KHByb3Bcbi8qOiBzdHJpbmcqL1xuLCBwcmVmaXhcbi8qOiBzdHJpbmcqL1xuKVxuLyo6IHN0cmluZyovXG57XG4gIHJldHVybiBwcmVmaXggPyBcIlwiLmNvbmNhdChwcmVmaXgpLmNvbmNhdChrZWJhYlRvVGl0bGVDYXNlKHByb3ApKSA6IHByb3A7XG59XG5cbmZ1bmN0aW9uIGJyb3dzZXJQcmVmaXhUb1N0eWxlKHByb3Bcbi8qOiBzdHJpbmcqL1xuLCBwcmVmaXhcbi8qOiBzdHJpbmcqL1xuKVxuLyo6IHN0cmluZyovXG57XG4gIHJldHVybiBwcmVmaXggPyBcIi1cIi5jb25jYXQocHJlZml4LnRvTG93ZXJDYXNlKCksIFwiLVwiKS5jb25jYXQocHJvcCkgOiBwcm9wO1xufVxuXG5mdW5jdGlvbiBrZWJhYlRvVGl0bGVDYXNlKHN0clxuLyo6IHN0cmluZyovXG4pXG4vKjogc3RyaW5nKi9cbntcbiAgdmFyIG91dCA9ICcnO1xuICB2YXIgc2hvdWxkQ2FwaXRhbGl6ZSA9IHRydWU7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoc2hvdWxkQ2FwaXRhbGl6ZSkge1xuICAgICAgb3V0ICs9IHN0cltpXS50b1VwcGVyQ2FzZSgpO1xuICAgICAgc2hvdWxkQ2FwaXRhbGl6ZSA9IGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoc3RyW2ldID09PSAnLScpIHtcbiAgICAgIHNob3VsZENhcGl0YWxpemUgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBvdXQgKz0gc3RyW2ldO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59IC8vIERlZmF1bHQgZXhwb3J0IGlzIHRoZSBwcmVmaXggaXRzZWxmLCBsaWtlICdNb3onLCAnV2Via2l0JywgZXRjXG4vLyBOb3RlIHRoYXQgeW91IG1heSBoYXZlIHRvIHJlLXRlc3QgZm9yIGNlcnRhaW4gdGhpbmdzOyBmb3IgaW5zdGFuY2UsIENocm9tZSA1MFxuLy8gY2FuIGhhbmRsZSB1bnByZWZpeGVkIGB0cmFuc2Zvcm1gLCBidXQgbm90IHVucHJlZml4ZWQgYHVzZXItc2VsZWN0YFxuXG5cbnZhciBfZGVmYXVsdCA9IGdldFByZWZpeCgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDsiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IGxvZztcblxuLyplc2xpbnQgbm8tY29uc29sZTowKi9cbmZ1bmN0aW9uIGxvZygpIHtcbiAgdmFyIF9jb25zb2xlO1xuXG4gIGlmICh1bmRlZmluZWQpIChfY29uc29sZSA9IGNvbnNvbGUpLmxvZy5hcHBseShfY29uc29sZSwgYXJndW1lbnRzKTtcbn0iLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZ2V0Qm91bmRQb3NpdGlvbiA9IGdldEJvdW5kUG9zaXRpb247XG5leHBvcnRzLnNuYXBUb0dyaWQgPSBzbmFwVG9HcmlkO1xuZXhwb3J0cy5jYW5EcmFnWCA9IGNhbkRyYWdYO1xuZXhwb3J0cy5jYW5EcmFnWSA9IGNhbkRyYWdZO1xuZXhwb3J0cy5nZXRDb250cm9sUG9zaXRpb24gPSBnZXRDb250cm9sUG9zaXRpb247XG5leHBvcnRzLmNyZWF0ZUNvcmVEYXRhID0gY3JlYXRlQ29yZURhdGE7XG5leHBvcnRzLmNyZWF0ZURyYWdnYWJsZURhdGEgPSBjcmVhdGVEcmFnZ2FibGVEYXRhO1xuXG52YXIgX3NoaW1zID0gcmVxdWlyZShcIi4vc2hpbXNcIik7XG5cbnZhciBfZG9tRm5zID0gcmVxdWlyZShcIi4vZG9tRm5zXCIpO1xuXG5mdW5jdGlvbiBnZXRCb3VuZFBvc2l0aW9uKGRyYWdnYWJsZVxuLyo6IERyYWdnYWJsZSovXG4sIHhcbi8qOiBudW1iZXIqL1xuLCB5XG4vKjogbnVtYmVyKi9cbilcbi8qOiBbbnVtYmVyLCBudW1iZXJdKi9cbntcbiAgLy8gSWYgbm8gYm91bmRzLCBzaG9ydC1jaXJjdWl0IGFuZCBtb3ZlIG9uXG4gIGlmICghZHJhZ2dhYmxlLnByb3BzLmJvdW5kcykgcmV0dXJuIFt4LCB5XTsgLy8gQ2xvbmUgbmV3IGJvdW5kc1xuXG4gIHZhciBib3VuZHMgPSBkcmFnZ2FibGUucHJvcHMuYm91bmRzO1xuICBib3VuZHMgPSB0eXBlb2YgYm91bmRzID09PSAnc3RyaW5nJyA/IGJvdW5kcyA6IGNsb25lQm91bmRzKGJvdW5kcyk7XG4gIHZhciBub2RlID0gZmluZERPTU5vZGUoZHJhZ2dhYmxlKTtcblxuICBpZiAodHlwZW9mIGJvdW5kcyA9PT0gJ3N0cmluZycpIHtcbiAgICB2YXIgb3duZXJEb2N1bWVudCA9IG5vZGUub3duZXJEb2N1bWVudDtcbiAgICB2YXIgb3duZXJXaW5kb3cgPSBvd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O1xuICAgIHZhciBib3VuZE5vZGU7XG5cbiAgICBpZiAoYm91bmRzID09PSAncGFyZW50Jykge1xuICAgICAgYm91bmROb2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICAgIH0gZWxzZSB7XG4gICAgICBib3VuZE5vZGUgPSBvd25lckRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYm91bmRzKTtcbiAgICB9XG5cbiAgICBpZiAoIShib3VuZE5vZGUgaW5zdGFuY2VvZiBvd25lcldpbmRvdy5IVE1MRWxlbWVudCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQm91bmRzIHNlbGVjdG9yIFwiJyArIGJvdW5kcyArICdcIiBjb3VsZCBub3QgZmluZCBhbiBlbGVtZW50LicpO1xuICAgIH1cblxuICAgIHZhciBub2RlU3R5bGUgPSBvd25lcldpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG5vZGUpO1xuICAgIHZhciBib3VuZE5vZGVTdHlsZSA9IG93bmVyV2luZG93LmdldENvbXB1dGVkU3R5bGUoYm91bmROb2RlKTsgLy8gQ29tcHV0ZSBib3VuZHMuIFRoaXMgaXMgYSBwYWluIHdpdGggcGFkZGluZyBhbmQgb2Zmc2V0cyBidXQgdGhpcyBnZXRzIGl0IGV4YWN0bHkgcmlnaHQuXG5cbiAgICBib3VuZHMgPSB7XG4gICAgICBsZWZ0OiAtbm9kZS5vZmZzZXRMZWZ0ICsgKDAsIF9zaGltcy5pbnQpKGJvdW5kTm9kZVN0eWxlLnBhZGRpbmdMZWZ0KSArICgwLCBfc2hpbXMuaW50KShub2RlU3R5bGUubWFyZ2luTGVmdCksXG4gICAgICB0b3A6IC1ub2RlLm9mZnNldFRvcCArICgwLCBfc2hpbXMuaW50KShib3VuZE5vZGVTdHlsZS5wYWRkaW5nVG9wKSArICgwLCBfc2hpbXMuaW50KShub2RlU3R5bGUubWFyZ2luVG9wKSxcbiAgICAgIHJpZ2h0OiAoMCwgX2RvbUZucy5pbm5lcldpZHRoKShib3VuZE5vZGUpIC0gKDAsIF9kb21GbnMub3V0ZXJXaWR0aCkobm9kZSkgLSBub2RlLm9mZnNldExlZnQgKyAoMCwgX3NoaW1zLmludCkoYm91bmROb2RlU3R5bGUucGFkZGluZ1JpZ2h0KSAtICgwLCBfc2hpbXMuaW50KShub2RlU3R5bGUubWFyZ2luUmlnaHQpLFxuICAgICAgYm90dG9tOiAoMCwgX2RvbUZucy5pbm5lckhlaWdodCkoYm91bmROb2RlKSAtICgwLCBfZG9tRm5zLm91dGVySGVpZ2h0KShub2RlKSAtIG5vZGUub2Zmc2V0VG9wICsgKDAsIF9zaGltcy5pbnQpKGJvdW5kTm9kZVN0eWxlLnBhZGRpbmdCb3R0b20pIC0gKDAsIF9zaGltcy5pbnQpKG5vZGVTdHlsZS5tYXJnaW5Cb3R0b20pXG4gICAgfTtcbiAgfSAvLyBLZWVwIHggYW5kIHkgYmVsb3cgcmlnaHQgYW5kIGJvdHRvbSBsaW1pdHMuLi5cblxuXG4gIGlmICgoMCwgX3NoaW1zLmlzTnVtKShib3VuZHMucmlnaHQpKSB4ID0gTWF0aC5taW4oeCwgYm91bmRzLnJpZ2h0KTtcbiAgaWYgKCgwLCBfc2hpbXMuaXNOdW0pKGJvdW5kcy5ib3R0b20pKSB5ID0gTWF0aC5taW4oeSwgYm91bmRzLmJvdHRvbSk7IC8vIEJ1dCBhYm92ZSBsZWZ0IGFuZCB0b3AgbGltaXRzLlxuXG4gIGlmICgoMCwgX3NoaW1zLmlzTnVtKShib3VuZHMubGVmdCkpIHggPSBNYXRoLm1heCh4LCBib3VuZHMubGVmdCk7XG4gIGlmICgoMCwgX3NoaW1zLmlzTnVtKShib3VuZHMudG9wKSkgeSA9IE1hdGgubWF4KHksIGJvdW5kcy50b3ApO1xuICByZXR1cm4gW3gsIHldO1xufVxuXG5mdW5jdGlvbiBzbmFwVG9HcmlkKGdyaWRcbi8qOiBbbnVtYmVyLCBudW1iZXJdKi9cbiwgcGVuZGluZ1hcbi8qOiBudW1iZXIqL1xuLCBwZW5kaW5nWVxuLyo6IG51bWJlciovXG4pXG4vKjogW251bWJlciwgbnVtYmVyXSovXG57XG4gIHZhciB4ID0gTWF0aC5yb3VuZChwZW5kaW5nWCAvIGdyaWRbMF0pICogZ3JpZFswXTtcbiAgdmFyIHkgPSBNYXRoLnJvdW5kKHBlbmRpbmdZIC8gZ3JpZFsxXSkgKiBncmlkWzFdO1xuICByZXR1cm4gW3gsIHldO1xufVxuXG5mdW5jdGlvbiBjYW5EcmFnWChkcmFnZ2FibGVcbi8qOiBEcmFnZ2FibGUqL1xuKVxuLyo6IGJvb2xlYW4qL1xue1xuICByZXR1cm4gZHJhZ2dhYmxlLnByb3BzLmF4aXMgPT09ICdib3RoJyB8fCBkcmFnZ2FibGUucHJvcHMuYXhpcyA9PT0gJ3gnO1xufVxuXG5mdW5jdGlvbiBjYW5EcmFnWShkcmFnZ2FibGVcbi8qOiBEcmFnZ2FibGUqL1xuKVxuLyo6IGJvb2xlYW4qL1xue1xuICByZXR1cm4gZHJhZ2dhYmxlLnByb3BzLmF4aXMgPT09ICdib3RoJyB8fCBkcmFnZ2FibGUucHJvcHMuYXhpcyA9PT0gJ3knO1xufSAvLyBHZXQge3gsIHl9IHBvc2l0aW9ucyBmcm9tIGV2ZW50LlxuXG5cbmZ1bmN0aW9uIGdldENvbnRyb2xQb3NpdGlvbihlXG4vKjogTW91c2VUb3VjaEV2ZW50Ki9cbiwgdG91Y2hJZGVudGlmaWVyXG4vKjogP251bWJlciovXG4sIGRyYWdnYWJsZUNvcmVcbi8qOiBEcmFnZ2FibGVDb3JlKi9cbilcbi8qOiA/Q29udHJvbFBvc2l0aW9uKi9cbntcbiAgdmFyIHRvdWNoT2JqID0gdHlwZW9mIHRvdWNoSWRlbnRpZmllciA9PT0gJ251bWJlcicgPyAoMCwgX2RvbUZucy5nZXRUb3VjaCkoZSwgdG91Y2hJZGVudGlmaWVyKSA6IG51bGw7XG4gIGlmICh0eXBlb2YgdG91Y2hJZGVudGlmaWVyID09PSAnbnVtYmVyJyAmJiAhdG91Y2hPYmopIHJldHVybiBudWxsOyAvLyBub3QgdGhlIHJpZ2h0IHRvdWNoXG5cbiAgdmFyIG5vZGUgPSBmaW5kRE9NTm9kZShkcmFnZ2FibGVDb3JlKTsgLy8gVXNlciBjYW4gcHJvdmlkZSBhbiBvZmZzZXRQYXJlbnQgaWYgZGVzaXJlZC5cblxuICB2YXIgb2Zmc2V0UGFyZW50ID0gZHJhZ2dhYmxlQ29yZS5wcm9wcy5vZmZzZXRQYXJlbnQgfHwgbm9kZS5vZmZzZXRQYXJlbnQgfHwgbm9kZS5vd25lckRvY3VtZW50LmJvZHk7XG4gIHJldHVybiAoMCwgX2RvbUZucy5vZmZzZXRYWUZyb21QYXJlbnQpKHRvdWNoT2JqIHx8IGUsIG9mZnNldFBhcmVudCwgZHJhZ2dhYmxlQ29yZS5wcm9wcy5zY2FsZSk7XG59IC8vIENyZWF0ZSBhbiBkYXRhIG9iamVjdCBleHBvc2VkIGJ5IDxEcmFnZ2FibGVDb3JlPidzIGV2ZW50c1xuXG5cbmZ1bmN0aW9uIGNyZWF0ZUNvcmVEYXRhKGRyYWdnYWJsZVxuLyo6IERyYWdnYWJsZUNvcmUqL1xuLCB4XG4vKjogbnVtYmVyKi9cbiwgeVxuLyo6IG51bWJlciovXG4pXG4vKjogRHJhZ2dhYmxlRGF0YSovXG57XG4gIHZhciBzdGF0ZSA9IGRyYWdnYWJsZS5zdGF0ZTtcbiAgdmFyIGlzU3RhcnQgPSAhKDAsIF9zaGltcy5pc051bSkoc3RhdGUubGFzdFgpO1xuICB2YXIgbm9kZSA9IGZpbmRET01Ob2RlKGRyYWdnYWJsZSk7XG5cbiAgaWYgKGlzU3RhcnQpIHtcbiAgICAvLyBJZiB0aGlzIGlzIG91ciBmaXJzdCBtb3ZlLCB1c2UgdGhlIHggYW5kIHkgYXMgbGFzdCBjb29yZHMuXG4gICAgcmV0dXJuIHtcbiAgICAgIG5vZGU6IG5vZGUsXG4gICAgICBkZWx0YVg6IDAsXG4gICAgICBkZWx0YVk6IDAsXG4gICAgICBsYXN0WDogeCxcbiAgICAgIGxhc3RZOiB5LFxuICAgICAgeDogeCxcbiAgICAgIHk6IHlcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIC8vIE90aGVyd2lzZSBjYWxjdWxhdGUgcHJvcGVyIHZhbHVlcy5cbiAgICByZXR1cm4ge1xuICAgICAgbm9kZTogbm9kZSxcbiAgICAgIGRlbHRhWDogeCAtIHN0YXRlLmxhc3RYLFxuICAgICAgZGVsdGFZOiB5IC0gc3RhdGUubGFzdFksXG4gICAgICBsYXN0WDogc3RhdGUubGFzdFgsXG4gICAgICBsYXN0WTogc3RhdGUubGFzdFksXG4gICAgICB4OiB4LFxuICAgICAgeTogeVxuICAgIH07XG4gIH1cbn0gLy8gQ3JlYXRlIGFuIGRhdGEgZXhwb3NlZCBieSA8RHJhZ2dhYmxlPidzIGV2ZW50c1xuXG5cbmZ1bmN0aW9uIGNyZWF0ZURyYWdnYWJsZURhdGEoZHJhZ2dhYmxlXG4vKjogRHJhZ2dhYmxlKi9cbiwgY29yZURhdGFcbi8qOiBEcmFnZ2FibGVEYXRhKi9cbilcbi8qOiBEcmFnZ2FibGVEYXRhKi9cbntcbiAgdmFyIHNjYWxlID0gZHJhZ2dhYmxlLnByb3BzLnNjYWxlO1xuICByZXR1cm4ge1xuICAgIG5vZGU6IGNvcmVEYXRhLm5vZGUsXG4gICAgeDogZHJhZ2dhYmxlLnN0YXRlLnggKyBjb3JlRGF0YS5kZWx0YVggLyBzY2FsZSxcbiAgICB5OiBkcmFnZ2FibGUuc3RhdGUueSArIGNvcmVEYXRhLmRlbHRhWSAvIHNjYWxlLFxuICAgIGRlbHRhWDogY29yZURhdGEuZGVsdGFYIC8gc2NhbGUsXG4gICAgZGVsdGFZOiBjb3JlRGF0YS5kZWx0YVkgLyBzY2FsZSxcbiAgICBsYXN0WDogZHJhZ2dhYmxlLnN0YXRlLngsXG4gICAgbGFzdFk6IGRyYWdnYWJsZS5zdGF0ZS55XG4gIH07XG59IC8vIEEgbG90IGZhc3RlciB0aGFuIHN0cmluZ2lmeS9wYXJzZVxuXG5cbmZ1bmN0aW9uIGNsb25lQm91bmRzKGJvdW5kc1xuLyo6IEJvdW5kcyovXG4pXG4vKjogQm91bmRzKi9cbntcbiAgcmV0dXJuIHtcbiAgICBsZWZ0OiBib3VuZHMubGVmdCxcbiAgICB0b3A6IGJvdW5kcy50b3AsXG4gICAgcmlnaHQ6IGJvdW5kcy5yaWdodCxcbiAgICBib3R0b206IGJvdW5kcy5ib3R0b21cbiAgfTtcbn1cblxuZnVuY3Rpb24gZmluZERPTU5vZGUoZHJhZ2dhYmxlXG4vKjogRHJhZ2dhYmxlIHwgRHJhZ2dhYmxlQ29yZSovXG4pXG4vKjogSFRNTEVsZW1lbnQqL1xue1xuICB2YXIgbm9kZSA9IGRyYWdnYWJsZS5maW5kRE9NTm9kZSgpO1xuXG4gIGlmICghbm9kZSkge1xuICAgIHRocm93IG5ldyBFcnJvcignPERyYWdnYWJsZUNvcmU+OiBVbm1vdW50ZWQgZHVyaW5nIGV2ZW50IScpO1xuICB9IC8vICRGbG93SWdub3JlIHdlIGNhbid0IGFzc2VydCBvbiBIVE1MRWxlbWVudCBkdWUgdG8gdGVzdHMuLi4gRklYTUVcblxuXG4gIHJldHVybiBub2RlO1xufSIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5maW5kSW5BcnJheSA9IGZpbmRJbkFycmF5O1xuZXhwb3J0cy5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtcbmV4cG9ydHMuaXNOdW0gPSBpc051bTtcbmV4cG9ydHMuaW50ID0gaW50O1xuZXhwb3J0cy5kb250U2V0TWUgPSBkb250U2V0TWU7XG5cbi8vIEBjcmVkaXRzIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL3JvZ296aG5pa29mZi9hNDNjZmVkMjdjNDFlNGU2OGNkY1xuZnVuY3Rpb24gZmluZEluQXJyYXkoYXJyYXlcbi8qOiBBcnJheTxhbnk+IHwgVG91Y2hMaXN0Ki9cbiwgY2FsbGJhY2tcbi8qOiBGdW5jdGlvbiovXG4pXG4vKjogYW55Ki9cbntcbiAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGNhbGxiYWNrLmFwcGx5KGNhbGxiYWNrLCBbYXJyYXlbaV0sIGksIGFycmF5XSkpIHJldHVybiBhcnJheVtpXTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKGZ1bmNcbi8qOiBhbnkqL1xuKVxuLyo6IGJvb2xlYW4gJWNoZWNrcyovXG57XG4gIHJldHVybiB0eXBlb2YgZnVuYyA9PT0gJ2Z1bmN0aW9uJyB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZnVuYykgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG59XG5cbmZ1bmN0aW9uIGlzTnVtKG51bVxuLyo6IGFueSovXG4pXG4vKjogYm9vbGVhbiAlY2hlY2tzKi9cbntcbiAgcmV0dXJuIHR5cGVvZiBudW0gPT09ICdudW1iZXInICYmICFpc05hTihudW0pO1xufVxuXG5mdW5jdGlvbiBpbnQoYVxuLyo6IHN0cmluZyovXG4pXG4vKjogbnVtYmVyKi9cbntcbiAgcmV0dXJuIHBhcnNlSW50KGEsIDEwKTtcbn1cblxuZnVuY3Rpb24gZG9udFNldE1lKHByb3BzXG4vKjogT2JqZWN0Ki9cbiwgcHJvcE5hbWVcbi8qOiBzdHJpbmcqL1xuLCBjb21wb25lbnROYW1lXG4vKjogc3RyaW5nKi9cbikge1xuICBpZiAocHJvcHNbcHJvcE5hbWVdKSB7XG4gICAgcmV0dXJuIG5ldyBFcnJvcihcIkludmFsaWQgcHJvcCBcIi5jb25jYXQocHJvcE5hbWUsIFwiIHBhc3NlZCB0byBcIikuY29uY2F0KGNvbXBvbmVudE5hbWUsIFwiIC0gZG8gbm90IHNldCB0aGlzLCBzZXQgaXQgb24gdGhlIGNoaWxkLlwiKSk7XG4gIH1cbn0iLCIvKiFcbiAgQ29weXJpZ2h0IChjKSAyMDE4IEplZCBXYXRzb24uXG4gIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTUlUKSwgc2VlXG4gIGh0dHA6Ly9qZWR3YXRzb24uZ2l0aHViLmlvL2NsYXNzbmFtZXNcbiovXG4vKiBnbG9iYWwgZGVmaW5lICovXG5cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgaGFzT3duID0ge30uaGFzT3duUHJvcGVydHk7XG5cblx0ZnVuY3Rpb24gY2xhc3NOYW1lcygpIHtcblx0XHR2YXIgY2xhc3NlcyA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhcmcgPSBhcmd1bWVudHNbaV07XG5cdFx0XHRpZiAoIWFyZykgY29udGludWU7XG5cblx0XHRcdHZhciBhcmdUeXBlID0gdHlwZW9mIGFyZztcblxuXHRcdFx0aWYgKGFyZ1R5cGUgPT09ICdzdHJpbmcnIHx8IGFyZ1R5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChhcmcpO1xuXHRcdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykpIHtcblx0XHRcdFx0aWYgKGFyZy5sZW5ndGgpIHtcblx0XHRcdFx0XHR2YXIgaW5uZXIgPSBjbGFzc05hbWVzLmFwcGx5KG51bGwsIGFyZyk7XG5cdFx0XHRcdFx0aWYgKGlubmVyKSB7XG5cdFx0XHRcdFx0XHRjbGFzc2VzLnB1c2goaW5uZXIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChhcmdUeXBlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRpZiAoYXJnLnRvU3RyaW5nID09PSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nKSB7XG5cdFx0XHRcdFx0Zm9yICh2YXIga2V5IGluIGFyZykge1xuXHRcdFx0XHRcdFx0aWYgKGhhc093bi5jYWxsKGFyZywga2V5KSAmJiBhcmdba2V5XSkge1xuXHRcdFx0XHRcdFx0XHRjbGFzc2VzLnB1c2goa2V5KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGFyZy50b1N0cmluZygpKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBjbGFzc2VzLmpvaW4oJyAnKTtcblx0fVxuXG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdGNsYXNzTmFtZXMuZGVmYXVsdCA9IGNsYXNzTmFtZXM7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyByZWdpc3RlciBhcyAnY2xhc3NuYW1lcycsIGNvbnNpc3RlbnQgd2l0aCBucG0gcGFja2FnZSBuYW1lXG5cdFx0ZGVmaW5lKCdjbGFzc25hbWVzJywgW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGFzc05hbWVzID0gY2xhc3NOYW1lcztcblx0fVxufSgpKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIHRzbGliXzEgPSByZXF1aXJlKFwidHNsaWJcIik7XG52YXIgd3JhcEluU3RhdGVmdWxDb21wb25lbnRfMSA9IHRzbGliXzEuX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL3dyYXBJblN0YXRlZnVsQ29tcG9uZW50XCIpKTtcbnZhciBhZGRDbGFzc0RlY29yYXRvclN1cHBvcnQgPSBmdW5jdGlvbiAoQ29tcCkge1xuICAgIHZhciBpc1NGQyA9ICFDb21wLnByb3RvdHlwZTtcbiAgICByZXR1cm4gIWlzU0ZDID8gQ29tcCA6IHdyYXBJblN0YXRlZnVsQ29tcG9uZW50XzEuZGVmYXVsdChDb21wKTtcbn07XG5leHBvcnRzLmRlZmF1bHQgPSBhZGRDbGFzc0RlY29yYXRvclN1cHBvcnQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hZGRDbGFzc0RlY29yYXRvclN1cHBvcnQuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmRpdldyYXBwZXIgPSB2b2lkIDA7XG52YXIgdHNsaWJfMSA9IHJlcXVpcmUoXCJ0c2xpYlwiKTtcbnZhciBSZWFjdCA9IHRzbGliXzEuX19pbXBvcnRTdGFyKHJlcXVpcmUoXCJyZWFjdFwiKSk7XG52YXIgYWRkQ2xhc3NEZWNvcmF0b3JTdXBwb3J0XzEgPSB0c2xpYl8xLl9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9hZGRDbGFzc0RlY29yYXRvclN1cHBvcnRcIikpO1xudmFyIGggPSBSZWFjdC5jcmVhdGVFbGVtZW50O1xudmFyIG5vV3JhcCA9IGZ1bmN0aW9uIChDb21wLCBwcm9wTmFtZSwgcHJvcHMsIHN0YXRlKSB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiBoKENvbXAsIHByb3BOYW1lID8gdHNsaWJfMS5fX2Fzc2lnbigoX2EgPSB7fSwgX2FbcHJvcE5hbWVdID0gc3RhdGUsIF9hKSwgcHJvcHMpIDogdHNsaWJfMS5fX2Fzc2lnbih0c2xpYl8xLl9fYXNzaWduKHt9LCBzdGF0ZSksIHByb3BzKSk7XG59O1xuZXhwb3J0cy5kaXZXcmFwcGVyID0gZnVuY3Rpb24gKENvbXAsIHByb3BOYW1lLCBwcm9wcywgc3RhdGUpIHtcbiAgICByZXR1cm4gaCgnZGl2JywgbnVsbCwgbm9XcmFwKENvbXAsIHByb3BOYW1lLCBwcm9wcywgc3RhdGUpKTtcbn07XG52YXIgY3JlYXRlRW5oYW5jZXIgPSBmdW5jdGlvbiAoRmFjYywgcHJvcCwgd3JhcHBlcikge1xuICAgIGlmICh3cmFwcGVyID09PSB2b2lkIDApIHsgd3JhcHBlciA9IG5vV3JhcDsgfVxuICAgIHZhciBlbmhhbmNlciA9IGZ1bmN0aW9uIChDb21wLCBwcm9wTmFtZSwgZmFjY1Byb3BzKSB7XG4gICAgICAgIGlmIChwcm9wTmFtZSA9PT0gdm9pZCAwKSB7IHByb3BOYW1lID0gcHJvcDsgfVxuICAgICAgICBpZiAoZmFjY1Byb3BzID09PSB2b2lkIDApIHsgZmFjY1Byb3BzID0gbnVsbDsgfVxuICAgICAgICB2YXIgaXNDbGFzc0RlY29yYXRvck1ldGhvZENhbGwgPSB0eXBlb2YgQ29tcCA9PT0gJ3N0cmluZyc7XG4gICAgICAgIGlmIChpc0NsYXNzRGVjb3JhdG9yTWV0aG9kQ2FsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChLbGFzcykgeyByZXR1cm4gZW5oYW5jZXIoS2xhc3MsIENvbXAgfHwgcHJvcCwgcHJvcE5hbWUpOyB9O1xuICAgICAgICB9XG4gICAgICAgIHZhciBFbmhhbmNlZCA9IGZ1bmN0aW9uIChwcm9wcykge1xuICAgICAgICAgICAgcmV0dXJuIGgoRmFjYywgZmFjY1Byb3BzLCBmdW5jdGlvbiAoc3RhdGUpIHsgcmV0dXJuIHdyYXBwZXIoQ29tcCwgcHJvcE5hbWUsIHByb3BzLCBzdGF0ZSk7IH0pO1xuICAgICAgICB9O1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgRW5oYW5jZWQuZGlzcGxheU5hbWUgPSAoRmFjYy5kaXNwbGF5TmFtZSB8fCBGYWNjLm5hbWUpICsgXCIoXCIgKyAoQ29tcC5kaXNwbGF5TmFtZSB8fCBDb21wLm5hbWUpICsgXCIpXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlzQ2xhc3NEZWNvcmF0b3JNZXRob2RDYWxsID8gYWRkQ2xhc3NEZWNvcmF0b3JTdXBwb3J0XzEuZGVmYXVsdChFbmhhbmNlZCkgOiBFbmhhbmNlZDtcbiAgICB9O1xuICAgIHJldHVybiBlbmhhbmNlcjtcbn07XG5leHBvcnRzLmRlZmF1bHQgPSBjcmVhdGVFbmhhbmNlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZUVuaGFuY2VyLmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIHRzbGliXzEgPSByZXF1aXJlKFwidHNsaWJcIik7XG52YXIgcmVuZGVyXzEgPSB0c2xpYl8xLl9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9yZW5kZXJcIikpO1xudmFyIGRlZmF1bHRNYXBQcm9wc1RvQXJncyA9IGZ1bmN0aW9uIChwcm9wcykgeyByZXR1cm4gW3Byb3BzXTsgfTtcbnZhciBob29rVG9SZW5kZXJQcm9wID0gZnVuY3Rpb24gKGhvb2ssIG1hcFByb3BzVG9BcmdzKSB7XG4gICAgaWYgKG1hcFByb3BzVG9BcmdzID09PSB2b2lkIDApIHsgbWFwUHJvcHNUb0FyZ3MgPSBkZWZhdWx0TWFwUHJvcHNUb0FyZ3M7IH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKHByb3BzKSB7IHJldHVybiByZW5kZXJfMS5kZWZhdWx0KHByb3BzLCBob29rLmFwcGx5KHZvaWQgMCwgbWFwUHJvcHNUb0FyZ3MocHJvcHMpKSk7IH07XG59O1xuZXhwb3J0cy5kZWZhdWx0ID0gaG9va1RvUmVuZGVyUHJvcDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhvb2tUb1JlbmRlclByb3AuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmhvb2tUb1JlbmRlclByb3AgPSBleHBvcnRzLmNyZWF0ZUVuaGFuY2VyID0gZXhwb3J0cy5yZW5kZXIgPSB2b2lkIDA7XG52YXIgdHNsaWJfMSA9IHJlcXVpcmUoXCJ0c2xpYlwiKTtcbnZhciByZW5kZXJfMSA9IHRzbGliXzEuX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL3JlbmRlclwiKSk7XG5leHBvcnRzLnJlbmRlciA9IHJlbmRlcl8xLmRlZmF1bHQ7XG52YXIgY3JlYXRlRW5oYW5jZXJfMSA9IHRzbGliXzEuX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL2NyZWF0ZUVuaGFuY2VyXCIpKTtcbmV4cG9ydHMuY3JlYXRlRW5oYW5jZXIgPSBjcmVhdGVFbmhhbmNlcl8xLmRlZmF1bHQ7XG52YXIgaG9va1RvUmVuZGVyUHJvcF8xID0gdHNsaWJfMS5fX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vaG9va1RvUmVuZGVyUHJvcFwiKSk7XG5leHBvcnRzLmhvb2tUb1JlbmRlclByb3AgPSBob29rVG9SZW5kZXJQcm9wXzEuZGVmYXVsdDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIHRzbGliXzEgPSByZXF1aXJlKFwidHNsaWJcIik7XG52YXIgcmVhY3RfMSA9IHJlcXVpcmUoXCJyZWFjdFwiKTtcbnZhciBpc1JlYWN0MTZQbHVzID0gcGFyc2VJbnQocmVhY3RfMS52ZXJzaW9uLnN1YnN0cigwLCByZWFjdF8xLnZlcnNpb24uaW5kZXhPZignLicpKSkgPiAxNTtcbnZhciBpc0ZuID0gZnVuY3Rpb24gKGZuKSB7IHJldHVybiB0eXBlb2YgZm4gPT09ICdmdW5jdGlvbic7IH07XG52YXIgcmVuZGVyID0gZnVuY3Rpb24gKHByb3BzLCBkYXRhKSB7XG4gICAgdmFyIG1vcmUgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBtb3JlW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBpZiAodHlwZW9mIHByb3BzICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigncmVuZGVyQ2hpbGRyZW4ocHJvcHMsIGRhdGEpIGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBwcm9wcyBvYmplY3QuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNoaWxkcmVuXzEgPSBwcm9wcy5jaGlsZHJlbiwgcmVuZGVyXzEgPSBwcm9wcy5yZW5kZXI7XG4gICAgICAgIGlmIChpc0ZuKGNoaWxkcmVuXzEpICYmIGlzRm4ocmVuZGVyXzEpKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0JvdGggXCJyZW5kZXJcIiBhbmQgXCJjaGlsZHJlblwiIGFyZSBzcGVjaWZpZWQgZm9yIGluIGEgdW5pdmVyc2FsIGludGVyZmFjZSBjb21wb25lbnQuICcgK1xuICAgICAgICAgICAgICAgICdDaGlsZHJlbiB3aWxsIGJlIHVzZWQuJyk7XG4gICAgICAgICAgICBjb25zb2xlLnRyYWNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdVbml2ZXJzYWwgY29tcG9uZW50IGludGVyZmFjZSBub3JtYWxseSBleHBlY3RzIGRhdGEgdG8gYmUgYW4gb2JqZWN0LCAnICtcbiAgICAgICAgICAgICAgICAoXCJcXFwiXCIgKyB0eXBlb2YgZGF0YSArIFwiXFxcIiByZWNlaXZlZC5cIikpO1xuICAgICAgICAgICAgY29uc29sZS50cmFjZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciByZW5kZXIgPSBwcm9wcy5yZW5kZXIsIF9hID0gcHJvcHMuY2hpbGRyZW4sIGNoaWxkcmVuID0gX2EgPT09IHZvaWQgMCA/IHJlbmRlciA6IF9hLCBjb21wb25lbnQgPSBwcm9wcy5jb21wb25lbnQsIF9iID0gcHJvcHMuY29tcCwgY29tcCA9IF9iID09PSB2b2lkIDAgPyBjb21wb25lbnQgOiBfYjtcbiAgICBpZiAoaXNGbihjaGlsZHJlbikpXG4gICAgICAgIHJldHVybiBjaGlsZHJlbi5hcHBseSh2b2lkIDAsIHRzbGliXzEuX19zcHJlYWRBcnJheXMoW2RhdGFdLCBtb3JlKSk7XG4gICAgaWYgKGNvbXApIHtcbiAgICAgICAgcmV0dXJuIHJlYWN0XzEuY3JlYXRlRWxlbWVudChjb21wLCBkYXRhKTtcbiAgICB9XG4gICAgaWYgKGNoaWxkcmVuIGluc3RhbmNlb2YgQXJyYXkpXG4gICAgICAgIHJldHVybiBpc1JlYWN0MTZQbHVzID8gY2hpbGRyZW4gOiByZWFjdF8xLmNyZWF0ZUVsZW1lbnQuYXBwbHkodm9pZCAwLCB0c2xpYl8xLl9fc3ByZWFkQXJyYXlzKFsnZGl2JywgbnVsbF0sIGNoaWxkcmVuKSk7XG4gICAgaWYgKGNoaWxkcmVuICYmIChjaGlsZHJlbiBpbnN0YW5jZW9mIE9iamVjdCkpIHtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgIGlmICghY2hpbGRyZW4udHlwZSB8fCAoKHR5cGVvZiBjaGlsZHJlbi50eXBlICE9PSAnc3RyaW5nJykgJiYgKHR5cGVvZiBjaGlsZHJlbi50eXBlICE9PSAnZnVuY3Rpb24nKSAmJiAodHlwZW9mIGNoaWxkcmVuLnR5cGUgIT09ICdzeW1ib2wnKSkpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1VuaXZlcnNhbCBjb21wb25lbnQgaW50ZXJmYWNlIHJlY2VpdmVkIG9iamVjdCBhcyBjaGlsZHJlbiwgJyArXG4gICAgICAgICAgICAgICAgICAgICdleHBlY3RlZCBSZWFjdCBlbGVtZW50LCBidXQgcmVjZWl2ZWQgdW5leHBlY3RlZCBSZWFjdCBcInR5cGVcIi4nKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLnRyYWNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNoaWxkcmVuLnR5cGUgPT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZHJlbjtcbiAgICAgICAgICAgIHJldHVybiByZWFjdF8xLmNsb25lRWxlbWVudChjaGlsZHJlbiwgT2JqZWN0LmFzc2lnbih7fSwgY2hpbGRyZW4ucHJvcHMsIGRhdGEpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2hpbGRyZW4udHlwZSA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkcmVuO1xuICAgICAgICAgICAgcmV0dXJuIHJlYWN0XzEuY2xvbmVFbGVtZW50KGNoaWxkcmVuLCBPYmplY3QuYXNzaWduKHt9LCBjaGlsZHJlbi5wcm9wcywgZGF0YSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjaGlsZHJlbiB8fCBudWxsO1xufTtcbmV4cG9ydHMuZGVmYXVsdCA9IHJlbmRlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlbmRlci5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciB0c2xpYl8xID0gcmVxdWlyZShcInRzbGliXCIpO1xudmFyIFJlYWN0ID0gdHNsaWJfMS5fX2ltcG9ydFN0YXIocmVxdWlyZShcInJlYWN0XCIpKTtcbnZhciB3cmFwSW5TdGF0ZWZ1bENvbXBvbmVudCA9IGZ1bmN0aW9uIChDb21wKSB7XG4gICAgdmFyIERlY29yYXRlZCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgIHRzbGliXzEuX19leHRlbmRzKGNsYXNzXzEsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIGNsYXNzXzEoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgY2xhc3NfMS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIENvbXAodGhpcy5wcm9wcywgdGhpcy5jb250ZXh0KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGNsYXNzXzE7XG4gICAgfShSZWFjdC5Db21wb25lbnQpKTtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBEZWNvcmF0ZWQuZGlzcGxheU5hbWUgPSBcIkRlY29yYXRlZChcIiArIChDb21wLmRpc3BsYXlOYW1lIHx8IENvbXAubmFtZSkgKyBcIilcIjtcbiAgICB9XG4gICAgcmV0dXJuIERlY29yYXRlZDtcbn07XG5leHBvcnRzLmRlZmF1bHQgPSB3cmFwSW5TdGF0ZWZ1bENvbXBvbmVudDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdyYXBJblN0YXRlZnVsQ29tcG9uZW50LmpzLm1hcCIsImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBpc0Jyb3dzZXIsIG9mZiwgb24gfSBmcm9tICcuLi9taXNjL3V0aWwnO1xudmFyIGNyZWF0ZUJyZWFrcG9pbnQgPSBmdW5jdGlvbiAoYnJlYWtwb2ludHMpIHtcbiAgICBpZiAoYnJlYWtwb2ludHMgPT09IHZvaWQgMCkgeyBicmVha3BvaW50cyA9IHsgbGFwdG9wTDogMTQ0MCwgbGFwdG9wOiAxMDI0LCB0YWJsZXQ6IDc2OCB9OyB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hID0gdXNlU3RhdGUoaXNCcm93c2VyID8gd2luZG93LmlubmVyV2lkdGggOiAwKSwgc2NyZWVuID0gX2FbMF0sIHNldFNjcmVlbiA9IF9hWzFdO1xuICAgICAgICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNldFNpZGVTY3JlZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc2V0U2NyZWVuKHdpbmRvdy5pbm5lcldpZHRoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzZXRTaWRlU2NyZWVuKCk7XG4gICAgICAgICAgICBvbih3aW5kb3csICdyZXNpemUnLCBzZXRTaWRlU2NyZWVuKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgb2ZmKHdpbmRvdywgJ3Jlc2l6ZScsIHNldFNpZGVTY3JlZW4pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBzb3J0ZWRCcmVha3BvaW50cyA9IHVzZU1lbW8oZnVuY3Rpb24gKCkgeyByZXR1cm4gT2JqZWN0LmVudHJpZXMoYnJlYWtwb2ludHMpLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIChhWzFdID49IGJbMV0gPyAxIDogLTEpOyB9KTsgfSwgW2JyZWFrcG9pbnRzXSk7XG4gICAgICAgIHZhciByZXN1bHQgPSBzb3J0ZWRCcmVha3BvaW50cy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgX2EpIHtcbiAgICAgICAgICAgIHZhciBuYW1lID0gX2FbMF0sIHdpZHRoID0gX2FbMV07XG4gICAgICAgICAgICBpZiAoc2NyZWVuID49IHdpZHRoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBzb3J0ZWRCcmVha3BvaW50c1swXVswXSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbn07XG5leHBvcnQgZGVmYXVsdCBjcmVhdGVCcmVha3BvaW50O1xuIiwiaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyByZXNvbHZlSG9va1N0YXRlIH0gZnJvbSAnLi4vbWlzYy9ob29rU3RhdGUnO1xuaW1wb3J0IHVzZUVmZmVjdE9uY2UgZnJvbSAnLi4vdXNlRWZmZWN0T25jZSc7XG5pbXBvcnQgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCBmcm9tICcuLi91c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0JztcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVHbG9iYWxTdGF0ZShpbml0aWFsU3RhdGUpIHtcbiAgICB2YXIgc3RvcmUgPSB7XG4gICAgICAgIHN0YXRlOiBpbml0aWFsU3RhdGUgaW5zdGFuY2VvZiBGdW5jdGlvbiA/IGluaXRpYWxTdGF0ZSgpIDogaW5pdGlhbFN0YXRlLFxuICAgICAgICBzZXRTdGF0ZTogZnVuY3Rpb24gKG5leHRTdGF0ZSkge1xuICAgICAgICAgICAgc3RvcmUuc3RhdGUgPSByZXNvbHZlSG9va1N0YXRlKG5leHRTdGF0ZSwgc3RvcmUuc3RhdGUpO1xuICAgICAgICAgICAgc3RvcmUuc2V0dGVycy5mb3JFYWNoKGZ1bmN0aW9uIChzZXR0ZXIpIHsgcmV0dXJuIHNldHRlcihzdG9yZS5zdGF0ZSk7IH0pO1xuICAgICAgICB9LFxuICAgICAgICBzZXR0ZXJzOiBbXSxcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYSA9IHVzZVN0YXRlKHN0b3JlLnN0YXRlKSwgZ2xvYmFsU3RhdGUgPSBfYVswXSwgc3RhdGVTZXR0ZXIgPSBfYVsxXTtcbiAgICAgICAgdXNlRWZmZWN0T25jZShmdW5jdGlvbiAoKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzdG9yZS5zZXR0ZXJzID0gc3RvcmUuc2V0dGVycy5maWx0ZXIoZnVuY3Rpb24gKHNldHRlcikgeyByZXR1cm4gc2V0dGVyICE9PSBzdGF0ZVNldHRlcjsgfSk7XG4gICAgICAgIH07IH0pO1xuICAgICAgICB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghc3RvcmUuc2V0dGVycy5pbmNsdWRlcyhzdGF0ZVNldHRlcikpIHtcbiAgICAgICAgICAgICAgICBzdG9yZS5zZXR0ZXJzLnB1c2goc3RhdGVTZXR0ZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFtnbG9iYWxTdGF0ZSwgc3RvcmUuc2V0U3RhdGVdO1xuICAgIH07XG59XG5leHBvcnQgZGVmYXVsdCBjcmVhdGVHbG9iYWxTdGF0ZTtcbiIsImltcG9ydCB7IF9fYXNzaWduIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB1c2VTZXRTdGF0ZSBmcm9tICcuLi91c2VTZXRTdGF0ZSc7XG5pbXBvcnQgcGFyc2VUaW1lUmFuZ2VzIGZyb20gJy4uL21pc2MvcGFyc2VUaW1lUmFuZ2VzJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWF0ZUhUTUxNZWRpYUhvb2sodGFnKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChlbE9yUHJvcHMpIHtcbiAgICAgICAgdmFyIGVsZW1lbnQ7XG4gICAgICAgIHZhciBwcm9wcztcbiAgICAgICAgaWYgKFJlYWN0LmlzVmFsaWRFbGVtZW50KGVsT3JQcm9wcykpIHtcbiAgICAgICAgICAgIGVsZW1lbnQgPSBlbE9yUHJvcHM7XG4gICAgICAgICAgICBwcm9wcyA9IGVsZW1lbnQucHJvcHM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwcm9wcyA9IGVsT3JQcm9wcztcbiAgICAgICAgfVxuICAgICAgICB2YXIgX2EgPSB1c2VTZXRTdGF0ZSh7XG4gICAgICAgICAgICBidWZmZXJlZDogW10sXG4gICAgICAgICAgICB0aW1lOiAwLFxuICAgICAgICAgICAgZHVyYXRpb246IDAsXG4gICAgICAgICAgICBwYXVzZWQ6IHRydWUsXG4gICAgICAgICAgICBtdXRlZDogZmFsc2UsXG4gICAgICAgICAgICB2b2x1bWU6IDEsXG4gICAgICAgICAgICBwbGF5aW5nOiBmYWxzZSxcbiAgICAgICAgfSksIHN0YXRlID0gX2FbMF0sIHNldFN0YXRlID0gX2FbMV07XG4gICAgICAgIHZhciByZWYgPSB1c2VSZWYobnVsbCk7XG4gICAgICAgIHZhciB3cmFwRXZlbnQgPSBmdW5jdGlvbiAodXNlckV2ZW50LCBwcm94eUV2ZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcHJveHlFdmVudCAmJiBwcm94eUV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJFdmVudCAmJiB1c2VyRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIHZhciBvblBsYXkgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBzZXRTdGF0ZSh7IHBhdXNlZDogZmFsc2UgfSk7IH07XG4gICAgICAgIHZhciBvblBsYXlpbmcgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBzZXRTdGF0ZSh7IHBsYXlpbmc6IHRydWUgfSk7IH07XG4gICAgICAgIHZhciBvbldhaXRpbmcgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBzZXRTdGF0ZSh7IHBsYXlpbmc6IGZhbHNlIH0pOyB9O1xuICAgICAgICB2YXIgb25QYXVzZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNldFN0YXRlKHsgcGF1c2VkOiB0cnVlLCBwbGF5aW5nOiBmYWxzZSB9KTsgfTtcbiAgICAgICAgdmFyIG9uVm9sdW1lQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVsID0gcmVmLmN1cnJlbnQ7XG4gICAgICAgICAgICBpZiAoIWVsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIG11dGVkOiBlbC5tdXRlZCxcbiAgICAgICAgICAgICAgICB2b2x1bWU6IGVsLnZvbHVtZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgb25EdXJhdGlvbkNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBlbCA9IHJlZi5jdXJyZW50O1xuICAgICAgICAgICAgaWYgKCFlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9IGVsLmR1cmF0aW9uLCBidWZmZXJlZCA9IGVsLmJ1ZmZlcmVkO1xuICAgICAgICAgICAgc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcbiAgICAgICAgICAgICAgICBidWZmZXJlZDogcGFyc2VUaW1lUmFuZ2VzKGJ1ZmZlcmVkKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgb25UaW1lVXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVsID0gcmVmLmN1cnJlbnQ7XG4gICAgICAgICAgICBpZiAoIWVsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0U3RhdGUoeyB0aW1lOiBlbC5jdXJyZW50VGltZSB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIG9uUHJvZ3Jlc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZWwgPSByZWYuY3VycmVudDtcbiAgICAgICAgICAgIGlmICghZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXRTdGF0ZSh7IGJ1ZmZlcmVkOiBwYXJzZVRpbWVSYW5nZXMoZWwuYnVmZmVyZWQpIH0pO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICAgICAgZWxlbWVudCA9IFJlYWN0LmNsb25lRWxlbWVudChlbGVtZW50LCBfX2Fzc2lnbihfX2Fzc2lnbih7IGNvbnRyb2xzOiBmYWxzZSB9LCBwcm9wcyksIHsgcmVmOiByZWYsIG9uUGxheTogd3JhcEV2ZW50KHByb3BzLm9uUGxheSwgb25QbGF5KSwgb25QbGF5aW5nOiB3cmFwRXZlbnQocHJvcHMub25QbGF5aW5nLCBvblBsYXlpbmcpLCBvbldhaXRpbmc6IHdyYXBFdmVudChwcm9wcy5vbldhaXRpbmcsIG9uV2FpdGluZyksIG9uUGF1c2U6IHdyYXBFdmVudChwcm9wcy5vblBhdXNlLCBvblBhdXNlKSwgb25Wb2x1bWVDaGFuZ2U6IHdyYXBFdmVudChwcm9wcy5vblZvbHVtZUNoYW5nZSwgb25Wb2x1bWVDaGFuZ2UpLCBvbkR1cmF0aW9uQ2hhbmdlOiB3cmFwRXZlbnQocHJvcHMub25EdXJhdGlvbkNoYW5nZSwgb25EdXJhdGlvbkNoYW5nZSksIG9uVGltZVVwZGF0ZTogd3JhcEV2ZW50KHByb3BzLm9uVGltZVVwZGF0ZSwgb25UaW1lVXBkYXRlKSwgb25Qcm9ncmVzczogd3JhcEV2ZW50KHByb3BzLm9uUHJvZ3Jlc3MsIG9uUHJvZ3Jlc3MpIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnQgPSBSZWFjdC5jcmVhdGVFbGVtZW50KHRhZywgX19hc3NpZ24oX19hc3NpZ24oeyBjb250cm9sczogZmFsc2UgfSwgcHJvcHMpLCB7IHJlZjogcmVmLCBvblBsYXk6IHdyYXBFdmVudChwcm9wcy5vblBsYXksIG9uUGxheSksIG9uUGxheWluZzogd3JhcEV2ZW50KHByb3BzLm9uUGxheWluZywgb25QbGF5aW5nKSwgb25XYWl0aW5nOiB3cmFwRXZlbnQocHJvcHMub25XYWl0aW5nLCBvbldhaXRpbmcpLCBvblBhdXNlOiB3cmFwRXZlbnQocHJvcHMub25QYXVzZSwgb25QYXVzZSksIG9uVm9sdW1lQ2hhbmdlOiB3cmFwRXZlbnQocHJvcHMub25Wb2x1bWVDaGFuZ2UsIG9uVm9sdW1lQ2hhbmdlKSwgb25EdXJhdGlvbkNoYW5nZTogd3JhcEV2ZW50KHByb3BzLm9uRHVyYXRpb25DaGFuZ2UsIG9uRHVyYXRpb25DaGFuZ2UpLCBvblRpbWVVcGRhdGU6IHdyYXBFdmVudChwcm9wcy5vblRpbWVVcGRhdGUsIG9uVGltZVVwZGF0ZSksIG9uUHJvZ3Jlc3M6IHdyYXBFdmVudChwcm9wcy5vblByb2dyZXNzLCBvblByb2dyZXNzKSB9KSk7IC8vIFRPRE86IGZpeCB0aGlzIHR5cGluZy5cbiAgICAgICAgfVxuICAgICAgICAvLyBTb21lIGJyb3dzZXJzIHJldHVybiBgUHJvbWlzZWAgb24gYC5wbGF5KClgIGFuZCBtYXkgdGhyb3cgZXJyb3JzXG4gICAgICAgIC8vIGlmIG9uZSB0cmllcyB0byBleGVjdXRlIGFub3RoZXIgYC5wbGF5KClgIG9yIGAucGF1c2UoKWAgd2hpbGUgdGhhdFxuICAgICAgICAvLyBwcm9taXNlIGlzIHJlc29sdmluZy4gU28gd2UgcHJldmVudCB0aGF0IHdpdGggdGhpcyBsb2NrLlxuICAgICAgICAvLyBTZWU6IGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTU5MzI3M1xuICAgICAgICB2YXIgbG9ja1BsYXkgPSBmYWxzZTtcbiAgICAgICAgdmFyIGNvbnRyb2xzID0ge1xuICAgICAgICAgICAgcGxheTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBlbCA9IHJlZi5jdXJyZW50O1xuICAgICAgICAgICAgICAgIGlmICghZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFsb2NrUGxheSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZSA9IGVsLnBsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlzUHJvbWlzZSA9IHR5cGVvZiBwcm9taXNlID09PSAnb2JqZWN0JztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9ja1BsYXkgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc2V0TG9jayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NrUGxheSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2UudGhlbihyZXNldExvY2ssIHJlc2V0TG9jayk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF1c2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZWwgPSByZWYuY3VycmVudDtcbiAgICAgICAgICAgICAgICBpZiAoZWwgJiYgIWxvY2tQbGF5KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbC5wYXVzZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZWVrOiBmdW5jdGlvbiAodGltZSkge1xuICAgICAgICAgICAgICAgIHZhciBlbCA9IHJlZi5jdXJyZW50O1xuICAgICAgICAgICAgICAgIGlmICghZWwgfHwgc3RhdGUuZHVyYXRpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRpbWUgPSBNYXRoLm1pbihzdGF0ZS5kdXJhdGlvbiwgTWF0aC5tYXgoMCwgdGltZSkpO1xuICAgICAgICAgICAgICAgIGVsLmN1cnJlbnRUaW1lID0gdGltZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB2b2x1bWU6IGZ1bmN0aW9uICh2b2x1bWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZWwgPSByZWYuY3VycmVudDtcbiAgICAgICAgICAgICAgICBpZiAoIWVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdm9sdW1lID0gTWF0aC5taW4oMSwgTWF0aC5tYXgoMCwgdm9sdW1lKSk7XG4gICAgICAgICAgICAgICAgZWwudm9sdW1lID0gdm9sdW1lO1xuICAgICAgICAgICAgICAgIHNldFN0YXRlKHsgdm9sdW1lOiB2b2x1bWUgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbXV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBlbCA9IHJlZi5jdXJyZW50O1xuICAgICAgICAgICAgICAgIGlmICghZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbC5tdXRlZCA9IHRydWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdW5tdXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsID0gcmVmLmN1cnJlbnQ7XG4gICAgICAgICAgICAgICAgaWYgKCFlbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsLm11dGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVsID0gcmVmLmN1cnJlbnQ7XG4gICAgICAgICAgICBpZiAoIWVsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhZyA9PT0gJ2F1ZGlvJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigndXNlQXVkaW8oKSByZWYgdG8gPGF1ZGlvPiBlbGVtZW50IGlzIGVtcHR5IGF0IG1vdW50LiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnSXQgc2VlbSB5b3UgaGF2ZSBub3QgcmVuZGVyZWQgdGhlIGF1ZGlvIGVsZW1lbnQsIHdoaWNoIGl0ICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdyZXR1cm5zIGFzIHRoZSBmaXJzdCBhcmd1bWVudCBjb25zdCBbYXVkaW9dID0gdXNlQXVkaW8oLi4uKS4nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0YWcgPT09ICd2aWRlbycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3VzZVZpZGVvKCkgcmVmIHRvIDx2aWRlbz4gZWxlbWVudCBpcyBlbXB0eSBhdCBtb3VudC4gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0l0IHNlZW0geW91IGhhdmUgbm90IHJlbmRlcmVkIHRoZSB2aWRlbyBlbGVtZW50LCB3aGljaCBpdCAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAncmV0dXJucyBhcyB0aGUgZmlyc3QgYXJndW1lbnQgY29uc3QgW3ZpZGVvXSA9IHVzZVZpZGVvKC4uLikuJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIHZvbHVtZTogZWwudm9sdW1lLFxuICAgICAgICAgICAgICAgIG11dGVkOiBlbC5tdXRlZCxcbiAgICAgICAgICAgICAgICBwYXVzZWQ6IGVsLnBhdXNlZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gU3RhcnQgbWVkaWEsIGlmIGF1dG9QbGF5IHJlcXVlc3RlZC5cbiAgICAgICAgICAgIGlmIChwcm9wcy5hdXRvUGxheSAmJiBlbC5wYXVzZWQpIHtcbiAgICAgICAgICAgICAgICBjb250cm9scy5wbGF5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIFtwcm9wcy5zcmNdKTtcbiAgICAgICAgcmV0dXJuIFtlbGVtZW50LCBzdGF0ZSwgY29udHJvbHMsIHJlZl07XG4gICAgfTtcbn1cbiIsImltcG9ydCB7IHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG52YXIgY3JlYXRlTWVtbyA9IGZ1bmN0aW9uIChmbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVzZU1lbW8oZnVuY3Rpb24gKCkgeyByZXR1cm4gZm4uYXBwbHkodm9pZCAwLCBhcmdzKTsgfSwgYXJncyk7XG4gICAgfTtcbn07XG5leHBvcnQgZGVmYXVsdCBjcmVhdGVNZW1vO1xuIiwiaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgdXNlVXBkYXRlRWZmZWN0IGZyb20gJy4uL3VzZVVwZGF0ZUVmZmVjdCc7XG5mdW5jdGlvbiBjb21wb3NlTWlkZGxld2FyZShjaGFpbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoY29udGV4dCwgZGlzcGF0Y2gpIHtcbiAgICAgICAgcmV0dXJuIGNoYWluLnJlZHVjZVJpZ2h0KGZ1bmN0aW9uIChyZXMsIG1pZGRsZXdhcmUpIHtcbiAgICAgICAgICAgIHJldHVybiBtaWRkbGV3YXJlKGNvbnRleHQpKHJlcyk7XG4gICAgICAgIH0sIGRpc3BhdGNoKTtcbiAgICB9O1xufVxudmFyIGNyZWF0ZVJlZHVjZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG1pZGRsZXdhcmVzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgbWlkZGxld2FyZXNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgdmFyIGNvbXBvc2VkTWlkZGxld2FyZSA9IGNvbXBvc2VNaWRkbGV3YXJlKG1pZGRsZXdhcmVzKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHJlZHVjZXIsIGluaXRpYWxTdGF0ZSwgaW5pdGlhbGl6ZXIpIHtcbiAgICAgICAgaWYgKGluaXRpYWxpemVyID09PSB2b2lkIDApIHsgaW5pdGlhbGl6ZXIgPSBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9OyB9XG4gICAgICAgIHZhciByZWYgPSB1c2VSZWYoaW5pdGlhbGl6ZXIoaW5pdGlhbFN0YXRlKSk7XG4gICAgICAgIHZhciBfYSA9IHVzZVN0YXRlKHJlZi5jdXJyZW50KSwgc2V0U3RhdGUgPSBfYVsxXTtcbiAgICAgICAgdmFyIGRpc3BhdGNoID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICAgICAgcmVmLmN1cnJlbnQgPSByZWR1Y2VyKHJlZi5jdXJyZW50LCBhY3Rpb24pO1xuICAgICAgICAgICAgc2V0U3RhdGUocmVmLmN1cnJlbnQpO1xuICAgICAgICAgICAgcmV0dXJuIGFjdGlvbjtcbiAgICAgICAgfSwgW3JlZHVjZXJdKTtcbiAgICAgICAgdmFyIGRpc3BhdGNoUmVmID0gdXNlUmVmKGNvbXBvc2VkTWlkZGxld2FyZSh7XG4gICAgICAgICAgICBnZXRTdGF0ZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVmLmN1cnJlbnQ7IH0sXG4gICAgICAgICAgICBkaXNwYXRjaDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2hSZWYuY3VycmVudC5hcHBseShkaXNwYXRjaFJlZiwgYXJncyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LCBkaXNwYXRjaCkpO1xuICAgICAgICB1c2VVcGRhdGVFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZGlzcGF0Y2hSZWYuY3VycmVudCA9IGNvbXBvc2VkTWlkZGxld2FyZSh7XG4gICAgICAgICAgICAgICAgZ2V0U3RhdGU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlZi5jdXJyZW50OyB9LFxuICAgICAgICAgICAgICAgIGRpc3BhdGNoOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoUmVmLmN1cnJlbnQuYXBwbHkoZGlzcGF0Y2hSZWYsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LCBkaXNwYXRjaCk7XG4gICAgICAgIH0sIFtkaXNwYXRjaF0pO1xuICAgICAgICByZXR1cm4gW3JlZi5jdXJyZW50LCBkaXNwYXRjaFJlZi5jdXJyZW50XTtcbiAgICB9O1xufTtcbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZVJlZHVjZXI7XG4iLCJpbXBvcnQgeyBjcmVhdGVDb250ZXh0LCBjcmVhdGVFbGVtZW50LCB1c2VDb250ZXh0LCB1c2VSZWR1Y2VyIH0gZnJvbSAncmVhY3QnO1xudmFyIGNyZWF0ZVJlZHVjZXJDb250ZXh0ID0gZnVuY3Rpb24gKHJlZHVjZXIsIGRlZmF1bHRJbml0aWFsU3RhdGUpIHtcbiAgICB2YXIgY29udGV4dCA9IGNyZWF0ZUNvbnRleHQodW5kZWZpbmVkKTtcbiAgICB2YXIgcHJvdmlkZXJGYWN0b3J5ID0gZnVuY3Rpb24gKHByb3BzLCBjaGlsZHJlbikgeyByZXR1cm4gY3JlYXRlRWxlbWVudChjb250ZXh0LlByb3ZpZGVyLCBwcm9wcywgY2hpbGRyZW4pOyB9O1xuICAgIHZhciBSZWR1Y2VyUHJvdmlkZXIgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIGNoaWxkcmVuID0gX2EuY2hpbGRyZW4sIGluaXRpYWxTdGF0ZSA9IF9hLmluaXRpYWxTdGF0ZTtcbiAgICAgICAgdmFyIHN0YXRlID0gdXNlUmVkdWNlcihyZWR1Y2VyLCBpbml0aWFsU3RhdGUgIT09IHVuZGVmaW5lZCA/IGluaXRpYWxTdGF0ZSA6IGRlZmF1bHRJbml0aWFsU3RhdGUpO1xuICAgICAgICByZXR1cm4gcHJvdmlkZXJGYWN0b3J5KHsgdmFsdWU6IHN0YXRlIH0sIGNoaWxkcmVuKTtcbiAgICB9O1xuICAgIHZhciB1c2VSZWR1Y2VyQ29udGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHN0YXRlID0gdXNlQ29udGV4dChjb250ZXh0KTtcbiAgICAgICAgaWYgKHN0YXRlID09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInVzZVJlZHVjZXJDb250ZXh0IG11c3QgYmUgdXNlZCBpbnNpZGUgYSBSZWR1Y2VyUHJvdmlkZXIuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9O1xuICAgIHJldHVybiBbdXNlUmVkdWNlckNvbnRleHQsIFJlZHVjZXJQcm92aWRlciwgY29udGV4dF07XG59O1xuZXhwb3J0IGRlZmF1bHQgY3JlYXRlUmVkdWNlckNvbnRleHQ7XG4iLCJpbXBvcnQgeyBjcmVhdGVDb250ZXh0LCBjcmVhdGVFbGVtZW50LCB1c2VDb250ZXh0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbnZhciBjcmVhdGVTdGF0ZUNvbnRleHQgPSBmdW5jdGlvbiAoZGVmYXVsdEluaXRpYWxWYWx1ZSkge1xuICAgIHZhciBjb250ZXh0ID0gY3JlYXRlQ29udGV4dCh1bmRlZmluZWQpO1xuICAgIHZhciBwcm92aWRlckZhY3RvcnkgPSBmdW5jdGlvbiAocHJvcHMsIGNoaWxkcmVuKSB7IHJldHVybiBjcmVhdGVFbGVtZW50KGNvbnRleHQuUHJvdmlkZXIsIHByb3BzLCBjaGlsZHJlbik7IH07XG4gICAgdmFyIFN0YXRlUHJvdmlkZXIgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIGNoaWxkcmVuID0gX2EuY2hpbGRyZW4sIGluaXRpYWxWYWx1ZSA9IF9hLmluaXRpYWxWYWx1ZTtcbiAgICAgICAgdmFyIHN0YXRlID0gdXNlU3RhdGUoaW5pdGlhbFZhbHVlICE9PSB1bmRlZmluZWQgPyBpbml0aWFsVmFsdWUgOiBkZWZhdWx0SW5pdGlhbFZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyRmFjdG9yeSh7IHZhbHVlOiBzdGF0ZSB9LCBjaGlsZHJlbik7XG4gICAgfTtcbiAgICB2YXIgdXNlU3RhdGVDb250ZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3RhdGUgPSB1c2VDb250ZXh0KGNvbnRleHQpO1xuICAgICAgICBpZiAoc3RhdGUgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidXNlU3RhdGVDb250ZXh0IG11c3QgYmUgdXNlZCBpbnNpZGUgYSBTdGF0ZVByb3ZpZGVyLlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfTtcbiAgICByZXR1cm4gW3VzZVN0YXRlQ29udGV4dCwgU3RhdGVQcm92aWRlciwgY29udGV4dF07XG59O1xuZXhwb3J0IGRlZmF1bHQgY3JlYXRlU3RhdGVDb250ZXh0O1xuIiwiZXhwb3J0IHsgZGVmYXVsdCBhcyBjcmVhdGVNZW1vIH0gZnJvbSAnLi9mYWN0b3J5L2NyZWF0ZU1lbW8nO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBjcmVhdGVSZWR1Y2VyQ29udGV4dCB9IGZyb20gJy4vZmFjdG9yeS9jcmVhdGVSZWR1Y2VyQ29udGV4dCc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIGNyZWF0ZVJlZHVjZXIgfSBmcm9tICcuL2ZhY3RvcnkvY3JlYXRlUmVkdWNlcic7XG5leHBvcnQgeyBkZWZhdWx0IGFzIGNyZWF0ZVN0YXRlQ29udGV4dCB9IGZyb20gJy4vZmFjdG9yeS9jcmVhdGVTdGF0ZUNvbnRleHQnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VBc3luYyB9IGZyb20gJy4vdXNlQXN5bmMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VBc3luY0ZuIH0gZnJvbSAnLi91c2VBc3luY0ZuJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlQXN5bmNSZXRyeSB9IGZyb20gJy4vdXNlQXN5bmNSZXRyeSc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZUF1ZGlvIH0gZnJvbSAnLi91c2VBdWRpbyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZUJhdHRlcnkgfSBmcm9tICcuL3VzZUJhdHRlcnknO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VCZWZvcmVVbmxvYWQgfSBmcm9tICcuL3VzZUJlZm9yZVVubG9hZCc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZUJvb2xlYW4gfSBmcm9tICcuL3VzZUJvb2xlYW4nO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VDbGlja0F3YXkgfSBmcm9tICcuL3VzZUNsaWNrQXdheSc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZUNvb2tpZSB9IGZyb20gJy4vdXNlQ29va2llJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlQ29weVRvQ2xpcGJvYXJkIH0gZnJvbSAnLi91c2VDb3B5VG9DbGlwYm9hcmQnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VDb3VudGVyIH0gZnJvbSAnLi91c2VDb3VudGVyJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlQ3NzIH0gZnJvbSAnLi91c2VDc3MnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VDdXN0b21Db21wYXJlRWZmZWN0IH0gZnJvbSAnLi91c2VDdXN0b21Db21wYXJlRWZmZWN0JztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlRGVib3VuY2UgfSBmcm9tICcuL3VzZURlYm91bmNlJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlRGVlcENvbXBhcmVFZmZlY3QgfSBmcm9tICcuL3VzZURlZXBDb21wYXJlRWZmZWN0JztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlRGVmYXVsdCB9IGZyb20gJy4vdXNlRGVmYXVsdCc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZURyb3AgfSBmcm9tICcuL3VzZURyb3AnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VEcm9wQXJlYSB9IGZyb20gJy4vdXNlRHJvcEFyZWEnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VFZmZlY3RPbmNlIH0gZnJvbSAnLi91c2VFZmZlY3RPbmNlJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlRW5zdXJlZEZvcndhcmRlZFJlZiwgZW5zdXJlZEZvcndhcmRSZWYgfSBmcm9tICcuL3VzZUVuc3VyZWRGb3J3YXJkZWRSZWYnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VFdmVudCB9IGZyb20gJy4vdXNlRXZlbnQnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VFcnJvciB9IGZyb20gJy4vdXNlRXJyb3InO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VGYXZpY29uIH0gZnJvbSAnLi91c2VGYXZpY29uJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlRnVsbHNjcmVlbiB9IGZyb20gJy4vdXNlRnVsbHNjcmVlbic7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZUdlb2xvY2F0aW9uIH0gZnJvbSAnLi91c2VHZW9sb2NhdGlvbic7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZUdldFNldCB9IGZyb20gJy4vdXNlR2V0U2V0JztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlR2V0U2V0U3RhdGUgfSBmcm9tICcuL3VzZUdldFNldFN0YXRlJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlSGFybW9uaWNJbnRlcnZhbEZuIH0gZnJvbSAnLi91c2VIYXJtb25pY0ludGVydmFsRm4nO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VIb3ZlciB9IGZyb20gJy4vdXNlSG92ZXInO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VIb3ZlckRpcnR5IH0gZnJvbSAnLi91c2VIb3ZlckRpcnR5JztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlSWRsZSB9IGZyb20gJy4vdXNlSWRsZSc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZUludGVyc2VjdGlvbiB9IGZyb20gJy4vdXNlSW50ZXJzZWN0aW9uJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlSW50ZXJ2YWwgfSBmcm9tICcuL3VzZUludGVydmFsJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCB9IGZyb20gJy4vdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZUtleSB9IGZyb20gJy4vdXNlS2V5JztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgY3JlYXRlQnJlYWtwb2ludCB9IGZyb20gJy4vZmFjdG9yeS9jcmVhdGVCcmVha3BvaW50Jztcbi8vIG5vdCBleHBvcnRlZCBiZWNhdXNlIG9mIHBlZXIgZGVwZW5kZW5jeVxuLy8gZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VLZXlib2FyZEpzIH0gZnJvbSAnLi91c2VLZXlib2FyZEpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlS2V5UHJlc3MgfSBmcm9tICcuL3VzZUtleVByZXNzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlS2V5UHJlc3NFdmVudCB9IGZyb20gJy4vdXNlS2V5UHJlc3NFdmVudCc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZUxhdGVzdCB9IGZyb20gJy4vdXNlTGF0ZXN0JztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlTGlmZWN5Y2xlcyB9IGZyb20gJy4vdXNlTGlmZWN5Y2xlcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZUxpc3QgfSBmcm9tICcuL3VzZUxpc3QnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VMb2NhbFN0b3JhZ2UgfSBmcm9tICcuL3VzZUxvY2FsU3RvcmFnZSc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZUxvY2F0aW9uIH0gZnJvbSAnLi91c2VMb2NhdGlvbic7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZUxvY2tCb2R5U2Nyb2xsIH0gZnJvbSAnLi91c2VMb2NrQm9keVNjcm9sbCc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZUxvZ2dlciB9IGZyb20gJy4vdXNlTG9nZ2VyJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlTG9uZ1ByZXNzIH0gZnJvbSAnLi91c2VMb25nUHJlc3MnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VNYXAgfSBmcm9tICcuL3VzZU1hcCc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZU1lZGlhIH0gZnJvbSAnLi91c2VNZWRpYSc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZU1lZGlhRGV2aWNlcyB9IGZyb20gJy4vdXNlTWVkaWFEZXZpY2VzJztcbmV4cG9ydCB7IHVzZU1lZGlhdGVkU3RhdGUgfSBmcm9tICcuL3VzZU1lZGlhdGVkU3RhdGUnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VNZXRob2RzIH0gZnJvbSAnLi91c2VNZXRob2RzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlTW90aW9uIH0gZnJvbSAnLi91c2VNb3Rpb24nO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VNb3VudCB9IGZyb20gJy4vdXNlTW91bnQnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VNb3VudGVkU3RhdGUgfSBmcm9tICcuL3VzZU1vdW50ZWRTdGF0ZSc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZU1vdXNlIH0gZnJvbSAnLi91c2VNb3VzZSc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZU1vdXNlSG92ZXJlZCB9IGZyb20gJy4vdXNlTW91c2VIb3ZlcmVkJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlTW91c2VXaGVlbCB9IGZyb20gJy4vdXNlTW91c2VXaGVlbCc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZU5ldHdvcmtTdGF0ZSB9IGZyb20gJy4vdXNlTmV0d29ya1N0YXRlJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlTnVtYmVyIH0gZnJvbSAnLi91c2VOdW1iZXInO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VPYnNlcnZhYmxlIH0gZnJvbSAnLi91c2VPYnNlcnZhYmxlJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlT3JpZW50YXRpb24gfSBmcm9tICcuL3VzZU9yaWVudGF0aW9uJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlUGFnZUxlYXZlIH0gZnJvbSAnLi91c2VQYWdlTGVhdmUnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VQZXJtaXNzaW9uIH0gZnJvbSAnLi91c2VQZXJtaXNzaW9uJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlUHJldmlvdXMgfSBmcm9tICcuL3VzZVByZXZpb3VzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlUHJldmlvdXNEaXN0aW5jdCB9IGZyb20gJy4vdXNlUHJldmlvdXNEaXN0aW5jdCc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZVByb21pc2UgfSBmcm9tICcuL3VzZVByb21pc2UnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VRdWV1ZSB9IGZyb20gJy4vdXNlUXVldWUnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VSYWYgfSBmcm9tICcuL3VzZVJhZic7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZVJhZkxvb3AgfSBmcm9tICcuL3VzZVJhZkxvb3AnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VSYWZTdGF0ZSB9IGZyb20gJy4vdXNlUmFmU3RhdGUnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VTZWFyY2hQYXJhbSB9IGZyb20gJy4vdXNlU2VhcmNoUGFyYW0nO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VTY3JhdGNoIH0gZnJvbSAnLi91c2VTY3JhdGNoJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlU2Nyb2xsIH0gZnJvbSAnLi91c2VTY3JvbGwnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VTY3JvbGxpbmcgfSBmcm9tICcuL3VzZVNjcm9sbGluZyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZVNlc3Npb25TdG9yYWdlIH0gZnJvbSAnLi91c2VTZXNzaW9uU3RvcmFnZSc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZVNldFN0YXRlIH0gZnJvbSAnLi91c2VTZXRTdGF0ZSc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZVNoYWxsb3dDb21wYXJlRWZmZWN0IH0gZnJvbSAnLi91c2VTaGFsbG93Q29tcGFyZUVmZmVjdCc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZVNpemUgfSBmcm9tICcuL3VzZVNpemUnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VTbGlkZXIgfSBmcm9tICcuL3VzZVNsaWRlcic7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZVNwZWVjaCB9IGZyb20gJy4vdXNlU3BlZWNoJztcbi8vIG5vdCBleHBvcnRlZCBiZWNhdXNlIG9mIHBlZXIgZGVwZW5kZW5jeVxuLy8gZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VTcHJpbmcgfSBmcm9tICcuL3VzZVNwcmluZyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZVN0YXJ0VHlwaW5nIH0gZnJvbSAnLi91c2VTdGFydFR5cGluZyc7XG5leHBvcnQgeyB1c2VTdGF0ZVdpdGhIaXN0b3J5IH0gZnJvbSAnLi91c2VTdGF0ZVdpdGhIaXN0b3J5JztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlU3RhdGVMaXN0IH0gZnJvbSAnLi91c2VTdGF0ZUxpc3QnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VUaHJvdHRsZSB9IGZyb20gJy4vdXNlVGhyb3R0bGUnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VUaHJvdHRsZUZuIH0gZnJvbSAnLi91c2VUaHJvdHRsZUZuJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlVGltZW91dCB9IGZyb20gJy4vdXNlVGltZW91dCc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZVRpbWVvdXRGbiB9IGZyb20gJy4vdXNlVGltZW91dEZuJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlVGl0bGUgfSBmcm9tICcuL3VzZVRpdGxlJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlVG9nZ2xlIH0gZnJvbSAnLi91c2VUb2dnbGUnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VUd2VlbiB9IGZyb20gJy4vdXNlVHdlZW4nO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VVbm1vdW50IH0gZnJvbSAnLi91c2VVbm1vdW50JztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlVW5tb3VudFByb21pc2UgfSBmcm9tICcuL3VzZVVubW91bnRQcm9taXNlJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlVXBkYXRlIH0gZnJvbSAnLi91c2VVcGRhdGUnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VVcGRhdGVFZmZlY3QgfSBmcm9tICcuL3VzZVVwZGF0ZUVmZmVjdCc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZVVwc2VydCB9IGZyb20gJy4vdXNlVXBzZXJ0JztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlVmlicmF0ZSB9IGZyb20gJy4vdXNlVmlicmF0ZSc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZVZpZGVvIH0gZnJvbSAnLi91c2VWaWRlbyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZVN0YXRlVmFsaWRhdG9yIH0gZnJvbSAnLi91c2VTdGF0ZVZhbGlkYXRvcic7XG5leHBvcnQgeyB1c2VTY3JvbGxiYXJXaWR0aCB9IGZyb20gJy4vdXNlU2Nyb2xsYmFyV2lkdGgnO1xuZXhwb3J0IHsgdXNlTXVsdGlTdGF0ZVZhbGlkYXRvciB9IGZyb20gJy4vdXNlTXVsdGlTdGF0ZVZhbGlkYXRvcic7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZVdpbmRvd1Njcm9sbCB9IGZyb20gJy4vdXNlV2luZG93U2Nyb2xsJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgdXNlV2luZG93U2l6ZSB9IGZyb20gJy4vdXNlV2luZG93U2l6ZSc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIHVzZU1lYXN1cmUgfSBmcm9tICcuL3VzZU1lYXN1cmUnO1xuZXhwb3J0IHsgdXNlUmVuZGVyc0NvdW50IH0gZnJvbSAnLi91c2VSZW5kZXJzQ291bnQnO1xuZXhwb3J0IHsgdXNlRmlyc3RNb3VudFN0YXRlIH0gZnJvbSAnLi91c2VGaXJzdE1vdW50U3RhdGUnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyB1c2VTZXQgfSBmcm9tICcuL3VzZVNldCc7XG5leHBvcnQgeyBjcmVhdGVHbG9iYWxTdGF0ZSB9IGZyb20gJy4vZmFjdG9yeS9jcmVhdGVHbG9iYWxTdGF0ZSc7XG5leHBvcnQgeyB1c2VIYXNoIH0gZnJvbSAnLi91c2VIYXNoJztcbiIsImV4cG9ydCBmdW5jdGlvbiByZXNvbHZlSG9va1N0YXRlKG5leHRTdGF0ZSwgY3VycmVudFN0YXRlKSB7XG4gICAgaWYgKHR5cGVvZiBuZXh0U3RhdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIG5leHRTdGF0ZS5sZW5ndGggPyBuZXh0U3RhdGUoY3VycmVudFN0YXRlKSA6IG5leHRTdGF0ZSgpO1xuICAgIH1cbiAgICByZXR1cm4gbmV4dFN0YXRlO1xufVxuIiwiaW1wb3J0IGlzRGVlcEVxdWFsUmVhY3QgZnJvbSAnZmFzdC1kZWVwLWVxdWFsL3JlYWN0JztcbmV4cG9ydCBkZWZhdWx0IGlzRGVlcEVxdWFsUmVhY3Q7XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwYXJzZVRpbWVSYW5nZXMocmFuZ2VzKSB7XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgICAgIHN0YXJ0OiByYW5nZXMuc3RhcnQoaSksXG4gICAgICAgICAgICBlbmQ6IHJhbmdlcy5lbmQoaSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuIiwiZXhwb3J0IHZhciBub29wID0gZnVuY3Rpb24gKCkgeyB9O1xuZXhwb3J0IGZ1bmN0aW9uIG9uKG9iaikge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgaWYgKG9iaiAmJiBvYmouYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICBvYmouYWRkRXZlbnRMaXN0ZW5lci5hcHBseShvYmosIGFyZ3MpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBvZmYob2JqKSB7XG4gICAgdmFyIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICBpZiAob2JqICYmIG9iai5yZW1vdmVFdmVudExpc3RlbmVyKSB7XG4gICAgICAgIG9iai5yZW1vdmVFdmVudExpc3RlbmVyLmFwcGx5KG9iaiwgYXJncyk7XG4gICAgfVxufVxuZXhwb3J0IHZhciBpc0Jyb3dzZXIgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJztcbmV4cG9ydCB2YXIgaXNOYXZpZ2F0b3IgPSB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJztcbiIsImltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB1c2VBc3luY0ZuIGZyb20gJy4vdXNlQXN5bmNGbic7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VBc3luYyhmbiwgZGVwcykge1xuICAgIGlmIChkZXBzID09PSB2b2lkIDApIHsgZGVwcyA9IFtdOyB9XG4gICAgdmFyIF9hID0gdXNlQXN5bmNGbihmbiwgZGVwcywge1xuICAgICAgICBsb2FkaW5nOiB0cnVlLFxuICAgIH0pLCBzdGF0ZSA9IF9hWzBdLCBjYWxsYmFjayA9IF9hWzFdO1xuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgfSwgW2NhbGxiYWNrXSk7XG4gICAgcmV0dXJuIHN0YXRlO1xufVxuIiwiaW1wb3J0IHsgX19hc3NpZ24gfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHVzZU1vdW50ZWRTdGF0ZSBmcm9tICcuL3VzZU1vdW50ZWRTdGF0ZSc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VBc3luY0ZuKGZuLCBkZXBzLCBpbml0aWFsU3RhdGUpIHtcbiAgICBpZiAoZGVwcyA9PT0gdm9pZCAwKSB7IGRlcHMgPSBbXTsgfVxuICAgIGlmIChpbml0aWFsU3RhdGUgPT09IHZvaWQgMCkgeyBpbml0aWFsU3RhdGUgPSB7IGxvYWRpbmc6IGZhbHNlIH07IH1cbiAgICB2YXIgbGFzdENhbGxJZCA9IHVzZVJlZigwKTtcbiAgICB2YXIgaXNNb3VudGVkID0gdXNlTW91bnRlZFN0YXRlKCk7XG4gICAgdmFyIF9hID0gdXNlU3RhdGUoaW5pdGlhbFN0YXRlKSwgc3RhdGUgPSBfYVswXSwgc2V0ID0gX2FbMV07XG4gICAgdmFyIGNhbGxiYWNrID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjYWxsSWQgPSArK2xhc3RDYWxsSWQuY3VycmVudDtcbiAgICAgICAgaWYgKCFzdGF0ZS5sb2FkaW5nKSB7XG4gICAgICAgICAgICBzZXQoZnVuY3Rpb24gKHByZXZTdGF0ZSkgeyByZXR1cm4gKF9fYXNzaWduKF9fYXNzaWduKHt9LCBwcmV2U3RhdGUpLCB7IGxvYWRpbmc6IHRydWUgfSkpOyB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZm4uYXBwbHkodm9pZCAwLCBhcmdzKS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaXNNb3VudGVkKCkgJiYgY2FsbElkID09PSBsYXN0Q2FsbElkLmN1cnJlbnQgJiYgc2V0KHsgdmFsdWU6IHZhbHVlLCBsb2FkaW5nOiBmYWxzZSB9KTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpc01vdW50ZWQoKSAmJiBjYWxsSWQgPT09IGxhc3RDYWxsSWQuY3VycmVudCAmJiBzZXQoeyBlcnJvcjogZXJyb3IsIGxvYWRpbmc6IGZhbHNlIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGVycm9yO1xuICAgICAgICB9KTtcbiAgICB9LCBkZXBzKTtcbiAgICByZXR1cm4gW3N0YXRlLCBjYWxsYmFja107XG59XG4iLCJpbXBvcnQgeyBfX2Fzc2lnbiwgX19zcHJlYWRBcnJheXMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB1c2VBc3luYyBmcm9tICcuL3VzZUFzeW5jJztcbnZhciB1c2VBc3luY1JldHJ5ID0gZnVuY3Rpb24gKGZuLCBkZXBzKSB7XG4gICAgaWYgKGRlcHMgPT09IHZvaWQgMCkgeyBkZXBzID0gW107IH1cbiAgICB2YXIgX2EgPSB1c2VTdGF0ZSgwKSwgYXR0ZW1wdCA9IF9hWzBdLCBzZXRBdHRlbXB0ID0gX2FbMV07XG4gICAgdmFyIHN0YXRlID0gdXNlQXN5bmMoZm4sIF9fc3ByZWFkQXJyYXlzKGRlcHMsIFthdHRlbXB0XSkpO1xuICAgIHZhciBzdGF0ZUxvYWRpbmcgPSBzdGF0ZS5sb2FkaW5nO1xuICAgIHZhciByZXRyeSA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHN0YXRlTG9hZGluZykge1xuICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1lvdSBhcmUgY2FsbGluZyB1c2VBc3luY1JldHJ5IGhvb2sgcmV0cnkoKSBtZXRob2Qgd2hpbGUgbG9hZGluZyBpbiBwcm9ncmVzcywgdGhpcyBpcyBhIG5vLW9wLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNldEF0dGVtcHQoZnVuY3Rpb24gKGN1cnJlbnRBdHRlbXB0KSB7IHJldHVybiBjdXJyZW50QXR0ZW1wdCArIDE7IH0pO1xuICAgIH0sIF9fc3ByZWFkQXJyYXlzKGRlcHMsIFtzdGF0ZUxvYWRpbmddKSk7XG4gICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBzdGF0ZSksIHsgcmV0cnk6IHJldHJ5IH0pO1xufTtcbmV4cG9ydCBkZWZhdWx0IHVzZUFzeW5jUmV0cnk7XG4iLCJpbXBvcnQgY3JlYXRlSFRNTE1lZGlhSG9vayBmcm9tICcuL2ZhY3RvcnkvY3JlYXRlSFRNTE1lZGlhSG9vayc7XG52YXIgdXNlQXVkaW8gPSBjcmVhdGVIVE1MTWVkaWFIb29rKCdhdWRpbycpO1xuZXhwb3J0IGRlZmF1bHQgdXNlQXVkaW87XG4iLCJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgaXNOYXZpZ2F0b3IsIG9mZiwgb24gfSBmcm9tICcuL21pc2MvdXRpbCc7XG5pbXBvcnQgaXNEZWVwRXF1YWwgZnJvbSAnLi9taXNjL2lzRGVlcEVxdWFsJztcbnZhciBuYXYgPSBpc05hdmlnYXRvciA/IG5hdmlnYXRvciA6IHVuZGVmaW5lZDtcbnZhciBpc0JhdHRlcnlBcGlTdXBwb3J0ZWQgPSBuYXYgJiYgdHlwZW9mIG5hdi5nZXRCYXR0ZXJ5ID09PSAnZnVuY3Rpb24nO1xuZnVuY3Rpb24gdXNlQmF0dGVyeU1vY2soKSB7XG4gICAgcmV0dXJuIHsgaXNTdXBwb3J0ZWQ6IGZhbHNlIH07XG59XG5mdW5jdGlvbiB1c2VCYXR0ZXJ5KCkge1xuICAgIHZhciBfYSA9IHVzZVN0YXRlKHsgaXNTdXBwb3J0ZWQ6IHRydWUsIGZldGNoZWQ6IGZhbHNlIH0pLCBzdGF0ZSA9IF9hWzBdLCBzZXRTdGF0ZSA9IF9hWzFdO1xuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpc01vdW50ZWQgPSB0cnVlO1xuICAgICAgICB2YXIgYmF0dGVyeSA9IG51bGw7XG4gICAgICAgIHZhciBoYW5kbGVDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIWlzTW91bnRlZCB8fCAhYmF0dGVyeSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBuZXdTdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBpc1N1cHBvcnRlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBmZXRjaGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIGxldmVsOiBiYXR0ZXJ5LmxldmVsLFxuICAgICAgICAgICAgICAgIGNoYXJnaW5nOiBiYXR0ZXJ5LmNoYXJnaW5nLFxuICAgICAgICAgICAgICAgIGRpc2NoYXJnaW5nVGltZTogYmF0dGVyeS5kaXNjaGFyZ2luZ1RpbWUsXG4gICAgICAgICAgICAgICAgY2hhcmdpbmdUaW1lOiBiYXR0ZXJ5LmNoYXJnaW5nVGltZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAhaXNEZWVwRXF1YWwoc3RhdGUsIG5ld1N0YXRlKSAmJiBzZXRTdGF0ZShuZXdTdGF0ZSk7XG4gICAgICAgIH07XG4gICAgICAgIG5hdi5nZXRCYXR0ZXJ5KCkudGhlbihmdW5jdGlvbiAoYmF0KSB7XG4gICAgICAgICAgICBpZiAoIWlzTW91bnRlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJhdHRlcnkgPSBiYXQ7XG4gICAgICAgICAgICBvbihiYXR0ZXJ5LCAnY2hhcmdpbmdjaGFuZ2UnLCBoYW5kbGVDaGFuZ2UpO1xuICAgICAgICAgICAgb24oYmF0dGVyeSwgJ2NoYXJnaW5ndGltZWNoYW5nZScsIGhhbmRsZUNoYW5nZSk7XG4gICAgICAgICAgICBvbihiYXR0ZXJ5LCAnZGlzY2hhcmdpbmd0aW1lY2hhbmdlJywgaGFuZGxlQ2hhbmdlKTtcbiAgICAgICAgICAgIG9uKGJhdHRlcnksICdsZXZlbGNoYW5nZScsIGhhbmRsZUNoYW5nZSk7XG4gICAgICAgICAgICBoYW5kbGVDaGFuZ2UoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpc01vdW50ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChiYXR0ZXJ5KSB7XG4gICAgICAgICAgICAgICAgb2ZmKGJhdHRlcnksICdjaGFyZ2luZ2NoYW5nZScsIGhhbmRsZUNoYW5nZSk7XG4gICAgICAgICAgICAgICAgb2ZmKGJhdHRlcnksICdjaGFyZ2luZ3RpbWVjaGFuZ2UnLCBoYW5kbGVDaGFuZ2UpO1xuICAgICAgICAgICAgICAgIG9mZihiYXR0ZXJ5LCAnZGlzY2hhcmdpbmd0aW1lY2hhbmdlJywgaGFuZGxlQ2hhbmdlKTtcbiAgICAgICAgICAgICAgICBvZmYoYmF0dGVyeSwgJ2xldmVsY2hhbmdlJywgaGFuZGxlQ2hhbmdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9LCBbXSk7XG4gICAgcmV0dXJuIHN0YXRlO1xufVxuZXhwb3J0IGRlZmF1bHQgaXNCYXR0ZXJ5QXBpU3VwcG9ydGVkID8gdXNlQmF0dGVyeSA6IHVzZUJhdHRlcnlNb2NrO1xuIiwiaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IG9mZiwgb24gfSBmcm9tICcuL21pc2MvdXRpbCc7XG52YXIgdXNlQmVmb3JlVW5sb2FkID0gZnVuY3Rpb24gKGVuYWJsZWQsIG1lc3NhZ2UpIHtcbiAgICBpZiAoZW5hYmxlZCA9PT0gdm9pZCAwKSB7IGVuYWJsZWQgPSB0cnVlOyB9XG4gICAgdmFyIGhhbmRsZXIgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIGZpbmFsRW5hYmxlZCA9IHR5cGVvZiBlbmFibGVkID09PSAnZnVuY3Rpb24nID8gZW5hYmxlZCgpIDogdHJ1ZTtcbiAgICAgICAgaWYgKCFmaW5hbEVuYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZiAobWVzc2FnZSkge1xuICAgICAgICAgICAgZXZlbnQucmV0dXJuVmFsdWUgPSBtZXNzYWdlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH0sIFtlbmFibGVkLCBtZXNzYWdlXSk7XG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFlbmFibGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgb24od2luZG93LCAnYmVmb3JldW5sb2FkJywgaGFuZGxlcik7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiBvZmYod2luZG93LCAnYmVmb3JldW5sb2FkJywgaGFuZGxlcik7IH07XG4gICAgfSwgW2VuYWJsZWQsIGhhbmRsZXJdKTtcbn07XG5leHBvcnQgZGVmYXVsdCB1c2VCZWZvcmVVbmxvYWQ7XG4iLCJpbXBvcnQgdXNlQm9vbGVhbiBmcm9tICcuL3VzZVRvZ2dsZSc7XG5leHBvcnQgZGVmYXVsdCB1c2VCb29sZWFuO1xuIiwiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBvZmYsIG9uIH0gZnJvbSAnLi9taXNjL3V0aWwnO1xudmFyIGRlZmF1bHRFdmVudHMgPSBbJ21vdXNlZG93bicsICd0b3VjaHN0YXJ0J107XG52YXIgdXNlQ2xpY2tBd2F5ID0gZnVuY3Rpb24gKHJlZiwgb25DbGlja0F3YXksIGV2ZW50cykge1xuICAgIGlmIChldmVudHMgPT09IHZvaWQgMCkgeyBldmVudHMgPSBkZWZhdWx0RXZlbnRzOyB9XG4gICAgdmFyIHNhdmVkQ2FsbGJhY2sgPSB1c2VSZWYob25DbGlja0F3YXkpO1xuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNhdmVkQ2FsbGJhY2suY3VycmVudCA9IG9uQ2xpY2tBd2F5O1xuICAgIH0sIFtvbkNsaWNrQXdheV0pO1xuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgZWwgPSByZWYuY3VycmVudDtcbiAgICAgICAgICAgIGVsICYmICFlbC5jb250YWlucyhldmVudC50YXJnZXQpICYmIHNhdmVkQ2FsbGJhY2suY3VycmVudChldmVudCk7XG4gICAgICAgIH07XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgZXZlbnRzXzEgPSBldmVudHM7IF9pIDwgZXZlbnRzXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgZXZlbnROYW1lID0gZXZlbnRzXzFbX2ldO1xuICAgICAgICAgICAgb24oZG9jdW1lbnQsIGV2ZW50TmFtZSwgaGFuZGxlcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgZXZlbnRzXzIgPSBldmVudHM7IF9pIDwgZXZlbnRzXzIubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGV2ZW50TmFtZSA9IGV2ZW50c18yW19pXTtcbiAgICAgICAgICAgICAgICBvZmYoZG9jdW1lbnQsIGV2ZW50TmFtZSwgaGFuZGxlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSwgW2V2ZW50cywgcmVmXSk7XG59O1xuZXhwb3J0IGRlZmF1bHQgdXNlQ2xpY2tBd2F5O1xuIiwiaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IENvb2tpZXMgZnJvbSAnanMtY29va2llJztcbnZhciB1c2VDb29raWUgPSBmdW5jdGlvbiAoY29va2llTmFtZSkge1xuICAgIHZhciBfYSA9IHVzZVN0YXRlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIENvb2tpZXMuZ2V0KGNvb2tpZU5hbWUpIHx8IG51bGw7IH0pLCB2YWx1ZSA9IF9hWzBdLCBzZXRWYWx1ZSA9IF9hWzFdO1xuICAgIHZhciB1cGRhdGVDb29raWUgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAobmV3VmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgICAgQ29va2llcy5zZXQoY29va2llTmFtZSwgbmV3VmFsdWUsIG9wdGlvbnMpO1xuICAgICAgICBzZXRWYWx1ZShuZXdWYWx1ZSk7XG4gICAgfSwgW2Nvb2tpZU5hbWVdKTtcbiAgICB2YXIgZGVsZXRlQ29va2llID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBDb29raWVzLnJlbW92ZShjb29raWVOYW1lKTtcbiAgICAgICAgc2V0VmFsdWUobnVsbCk7XG4gICAgfSwgW2Nvb2tpZU5hbWVdKTtcbiAgICByZXR1cm4gW3ZhbHVlLCB1cGRhdGVDb29raWUsIGRlbGV0ZUNvb2tpZV07XG59O1xuZXhwb3J0IGRlZmF1bHQgdXNlQ29va2llO1xuIiwiaW1wb3J0IHdyaXRlVGV4dCBmcm9tICdjb3B5LXRvLWNsaXBib2FyZCc7XG5pbXBvcnQgeyB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB1c2VNb3VudGVkU3RhdGUgZnJvbSAnLi91c2VNb3VudGVkU3RhdGUnO1xuaW1wb3J0IHVzZVNldFN0YXRlIGZyb20gJy4vdXNlU2V0U3RhdGUnO1xudmFyIHVzZUNvcHlUb0NsaXBib2FyZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaXNNb3VudGVkID0gdXNlTW91bnRlZFN0YXRlKCk7XG4gICAgdmFyIF9hID0gdXNlU2V0U3RhdGUoe1xuICAgICAgICB2YWx1ZTogdW5kZWZpbmVkLFxuICAgICAgICBlcnJvcjogdW5kZWZpbmVkLFxuICAgICAgICBub1VzZXJJbnRlcmFjdGlvbjogdHJ1ZSxcbiAgICB9KSwgc3RhdGUgPSBfYVswXSwgc2V0U3RhdGUgPSBfYVsxXTtcbiAgICB2YXIgY29weVRvQ2xpcGJvYXJkID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICghaXNNb3VudGVkKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbm9Vc2VySW50ZXJhY3Rpb247XG4gICAgICAgIHZhciBub3JtYWxpemVkVmFsdWU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBvbmx5IHN0cmluZ3MgYW5kIG51bWJlcnMgY2FzdGVkIHRvIHN0cmluZ3MgY2FuIGJlIGNvcGllZCB0byBjbGlwYm9hcmRcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnICYmIHR5cGVvZiB2YWx1ZSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSBuZXcgRXJyb3IoXCJDYW5ub3QgY29weSB0eXBlb2YgXCIgKyB0eXBlb2YgdmFsdWUgKyBcIiB0byBjbGlwYm9hcmQsIG11c3QgYmUgYSBzdHJpbmdcIik7XG4gICAgICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICBzZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgICAgICAgICBub1VzZXJJbnRlcmFjdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBlbXB0eSBzdHJpbmdzIGFyZSBhbHNvIGNvbnNpZGVyZWQgaW52YWxpZFxuICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVycm9yID0gbmV3IEVycm9yKFwiQ2Fubm90IGNvcHkgZW1wdHkgc3RyaW5nIHRvIGNsaXBib2FyZC5cIik7XG4gICAgICAgICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICBzZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgICAgICAgICBub1VzZXJJbnRlcmFjdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub3JtYWxpemVkVmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICAgICAgbm9Vc2VySW50ZXJhY3Rpb24gPSB3cml0ZVRleHQobm9ybWFsaXplZFZhbHVlKTtcbiAgICAgICAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogbm9ybWFsaXplZFZhbHVlLFxuICAgICAgICAgICAgICAgIGVycm9yOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgbm9Vc2VySW50ZXJhY3Rpb246IG5vVXNlckludGVyYWN0aW9uLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBzZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgdmFsdWU6IG5vcm1hbGl6ZWRWYWx1ZSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IsXG4gICAgICAgICAgICAgICAgbm9Vc2VySW50ZXJhY3Rpb246IG5vVXNlckludGVyYWN0aW9uLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCBbXSk7XG4gICAgcmV0dXJuIFtzdGF0ZSwgY29weVRvQ2xpcGJvYXJkXTtcbn07XG5leHBvcnQgZGVmYXVsdCB1c2VDb3B5VG9DbGlwYm9hcmQ7XG4iLCJpbXBvcnQgeyB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHVzZUdldFNldCBmcm9tICcuL3VzZUdldFNldCc7XG5pbXBvcnQgeyByZXNvbHZlSG9va1N0YXRlIH0gZnJvbSAnLi9taXNjL2hvb2tTdGF0ZSc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VDb3VudGVyKGluaXRpYWxWYWx1ZSwgbWF4LCBtaW4pIHtcbiAgICBpZiAoaW5pdGlhbFZhbHVlID09PSB2b2lkIDApIHsgaW5pdGlhbFZhbHVlID0gMDsgfVxuICAgIGlmIChtYXggPT09IHZvaWQgMCkgeyBtYXggPSBudWxsOyB9XG4gICAgaWYgKG1pbiA9PT0gdm9pZCAwKSB7IG1pbiA9IG51bGw7IH1cbiAgICB2YXIgaW5pdCA9IHJlc29sdmVIb29rU3RhdGUoaW5pdGlhbFZhbHVlKTtcbiAgICB0eXBlb2YgaW5pdCAhPT0gJ251bWJlcicgJiZcbiAgICAgICAgY29uc29sZS5lcnJvcignaW5pdGlhbFZhbHVlIGhhcyB0byBiZSBhIG51bWJlciwgZ290ICcgKyB0eXBlb2YgaW5pdGlhbFZhbHVlKTtcbiAgICBpZiAodHlwZW9mIG1pbiA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgaW5pdCA9IE1hdGgubWF4KGluaXQsIG1pbik7XG4gICAgfVxuICAgIGVsc2UgaWYgKG1pbiAhPT0gbnVsbCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdtaW4gaGFzIHRvIGJlIGEgbnVtYmVyLCBnb3QgJyArIHR5cGVvZiBtaW4pO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG1heCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgaW5pdCA9IE1hdGgubWluKGluaXQsIG1heCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG1heCAhPT0gbnVsbCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdtYXggaGFzIHRvIGJlIGEgbnVtYmVyLCBnb3QgJyArIHR5cGVvZiBtYXgpO1xuICAgIH1cbiAgICB2YXIgX2EgPSB1c2VHZXRTZXQoaW5pdCksIGdldCA9IF9hWzBdLCBzZXRJbnRlcm5hbCA9IF9hWzFdO1xuICAgIHJldHVybiBbXG4gICAgICAgIGdldCgpLFxuICAgICAgICB1c2VNZW1vKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzZXQgPSBmdW5jdGlvbiAobmV3U3RhdGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJldlN0YXRlID0gZ2V0KCk7XG4gICAgICAgICAgICAgICAgdmFyIHJTdGF0ZSA9IHJlc29sdmVIb29rU3RhdGUobmV3U3RhdGUsIHByZXZTdGF0ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHByZXZTdGF0ZSAhPT0gclN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWluID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgclN0YXRlID0gTWF0aC5tYXgoclN0YXRlLCBtaW4pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWF4ID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgclN0YXRlID0gTWF0aC5taW4oclN0YXRlLCBtYXgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHByZXZTdGF0ZSAhPT0gclN0YXRlICYmIHNldEludGVybmFsKHJTdGF0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZ2V0OiBnZXQsXG4gICAgICAgICAgICAgICAgc2V0OiBzZXQsXG4gICAgICAgICAgICAgICAgaW5jOiBmdW5jdGlvbiAoZGVsdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlbHRhID09PSB2b2lkIDApIHsgZGVsdGEgPSAxOyB9XG4gICAgICAgICAgICAgICAgICAgIHZhciByRGVsdGEgPSByZXNvbHZlSG9va1N0YXRlKGRlbHRhLCBnZXQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgckRlbHRhICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignZGVsdGEgaGFzIHRvIGJlIGEgbnVtYmVyIG9yIGZ1bmN0aW9uIHJldHVybmluZyBhIG51bWJlciwgZ290ICcgKyB0eXBlb2YgckRlbHRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXQoZnVuY3Rpb24gKG51bSkgeyByZXR1cm4gbnVtICsgckRlbHRhOyB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRlYzogZnVuY3Rpb24gKGRlbHRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZWx0YSA9PT0gdm9pZCAwKSB7IGRlbHRhID0gMTsgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgckRlbHRhID0gcmVzb2x2ZUhvb2tTdGF0ZShkZWx0YSwgZ2V0KCkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJEZWx0YSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2RlbHRhIGhhcyB0byBiZSBhIG51bWJlciBvciBmdW5jdGlvbiByZXR1cm5pbmcgYSBudW1iZXIsIGdvdCAnICsgdHlwZW9mIHJEZWx0YSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc2V0KGZ1bmN0aW9uIChudW0pIHsgcmV0dXJuIG51bSAtIHJEZWx0YTsgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwKSB7IHZhbHVlID0gaW5pdDsgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgclZhbHVlID0gcmVzb2x2ZUhvb2tTdGF0ZSh2YWx1ZSwgZ2V0KCkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJWYWx1ZSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3ZhbHVlIGhhcyB0byBiZSBhIG51bWJlciBvciBmdW5jdGlvbiByZXR1cm5pbmcgYSBudW1iZXIsIGdvdCAnICsgdHlwZW9mIHJWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICAgICAgICAgICAgICAgICAgICBpbml0ID0gclZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBzZXQoclZhbHVlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSwgW2luaXQsIG1pbiwgbWF4XSksXG4gICAgXTtcbn1cbiIsImltcG9ydCB7IGNyZWF0ZSB9IGZyb20gJ25hbm8tY3NzJztcbmltcG9ydCB7IGFkZG9uIGFzIGFkZG9uQ1NTT00gfSBmcm9tICduYW5vLWNzcy9hZGRvbi9jc3NvbSc7XG5pbXBvcnQgeyBhZGRvbiBhcyBhZGRvblZDU1NPTSB9IGZyb20gJ25hbm8tY3NzL2FkZG9uL3Zjc3NvbSc7XG5pbXBvcnQgeyBjc3NUb1RyZWUgfSBmcm9tICduYW5vLWNzcy9hZGRvbi92Y3Nzb20vY3NzVG9UcmVlJztcbmltcG9ydCB7IHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCBmcm9tICcuL3VzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QnO1xudmFyIG5hbm8gPSBjcmVhdGUoKTtcbmFkZG9uQ1NTT00obmFubyk7XG5hZGRvblZDU1NPTShuYW5vKTtcbnZhciBjb3VudGVyID0gMDtcbnZhciB1c2VDc3MgPSBmdW5jdGlvbiAoY3NzKSB7XG4gICAgdmFyIGNsYXNzTmFtZSA9IHVzZU1lbW8oZnVuY3Rpb24gKCkgeyByZXR1cm4gJ3JlYWN0LXVzZS1jc3MtJyArIChjb3VudGVyKyspLnRvU3RyaW5nKDM2KTsgfSwgW10pO1xuICAgIHZhciBzaGVldCA9IHVzZU1lbW8oZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV3IG5hbm8uVlNoZWV0KCk7IH0sIFtdKTtcbiAgICB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRyZWUgPSB7fTtcbiAgICAgICAgY3NzVG9UcmVlKHRyZWUsIGNzcywgJy4nICsgY2xhc3NOYW1lLCAnJyk7XG4gICAgICAgIHNoZWV0LmRpZmYodHJlZSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzaGVldC5kaWZmKHt9KTtcbiAgICAgICAgfTtcbiAgICB9KTtcbiAgICByZXR1cm4gY2xhc3NOYW1lO1xufTtcbmV4cG9ydCBkZWZhdWx0IHVzZUNzcztcbiIsImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xudmFyIGlzUHJpbWl0aXZlID0gZnVuY3Rpb24gKHZhbCkgeyByZXR1cm4gdmFsICE9PSBPYmplY3QodmFsKTsgfTtcbnZhciB1c2VDdXN0b21Db21wYXJlRWZmZWN0ID0gZnVuY3Rpb24gKGVmZmVjdCwgZGVwcywgZGVwc0VxdWFsKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgaWYgKCEoZGVwcyBpbnN0YW5jZW9mIEFycmF5KSB8fCAhZGVwcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignYHVzZUN1c3RvbUNvbXBhcmVFZmZlY3RgIHNob3VsZCBub3QgYmUgdXNlZCB3aXRoIG5vIGRlcGVuZGVuY2llcy4gVXNlIFJlYWN0LnVzZUVmZmVjdCBpbnN0ZWFkLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZXBzLmV2ZXJ5KGlzUHJpbWl0aXZlKSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdgdXNlQ3VzdG9tQ29tcGFyZUVmZmVjdGAgc2hvdWxkIG5vdCBiZSB1c2VkIHdpdGggZGVwZW5kZW5jaWVzIHRoYXQgYXJlIGFsbCBwcmltaXRpdmUgdmFsdWVzLiBVc2UgUmVhY3QudXNlRWZmZWN0IGluc3RlYWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBkZXBzRXF1YWwgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignYHVzZUN1c3RvbUNvbXBhcmVFZmZlY3RgIHNob3VsZCBiZSB1c2VkIHdpdGggZGVwc0VxdWFsIGNhbGxiYWNrIGZvciBjb21wYXJpbmcgZGVwcyBsaXN0Jyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIHJlZiA9IHVzZVJlZih1bmRlZmluZWQpO1xuICAgIGlmICghcmVmLmN1cnJlbnQgfHwgIWRlcHNFcXVhbChkZXBzLCByZWYuY3VycmVudCkpIHtcbiAgICAgICAgcmVmLmN1cnJlbnQgPSBkZXBzO1xuICAgIH1cbiAgICB1c2VFZmZlY3QoZWZmZWN0LCByZWYuY3VycmVudCk7XG59O1xuZXhwb3J0IGRlZmF1bHQgdXNlQ3VzdG9tQ29tcGFyZUVmZmVjdDtcbiIsImltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB1c2VUaW1lb3V0Rm4gZnJvbSAnLi91c2VUaW1lb3V0Rm4nO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlRGVib3VuY2UoZm4sIG1zLCBkZXBzKSB7XG4gICAgaWYgKG1zID09PSB2b2lkIDApIHsgbXMgPSAwOyB9XG4gICAgaWYgKGRlcHMgPT09IHZvaWQgMCkgeyBkZXBzID0gW107IH1cbiAgICB2YXIgX2EgPSB1c2VUaW1lb3V0Rm4oZm4sIG1zKSwgaXNSZWFkeSA9IF9hWzBdLCBjYW5jZWwgPSBfYVsxXSwgcmVzZXQgPSBfYVsyXTtcbiAgICB1c2VFZmZlY3QocmVzZXQsIGRlcHMpO1xuICAgIHJldHVybiBbaXNSZWFkeSwgY2FuY2VsXTtcbn1cbiIsImltcG9ydCB1c2VDdXN0b21Db21wYXJlRWZmZWN0IGZyb20gJy4vdXNlQ3VzdG9tQ29tcGFyZUVmZmVjdCc7XG5pbXBvcnQgaXNEZWVwRXF1YWwgZnJvbSAnLi9taXNjL2lzRGVlcEVxdWFsJztcbnZhciBpc1ByaW1pdGl2ZSA9IGZ1bmN0aW9uICh2YWwpIHsgcmV0dXJuIHZhbCAhPT0gT2JqZWN0KHZhbCk7IH07XG52YXIgdXNlRGVlcENvbXBhcmVFZmZlY3QgPSBmdW5jdGlvbiAoZWZmZWN0LCBkZXBzKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgaWYgKCEoZGVwcyBpbnN0YW5jZW9mIEFycmF5KSB8fCAhZGVwcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignYHVzZURlZXBDb21wYXJlRWZmZWN0YCBzaG91bGQgbm90IGJlIHVzZWQgd2l0aCBubyBkZXBlbmRlbmNpZXMuIFVzZSBSZWFjdC51c2VFZmZlY3QgaW5zdGVhZC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVwcy5ldmVyeShpc1ByaW1pdGl2ZSkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignYHVzZURlZXBDb21wYXJlRWZmZWN0YCBzaG91bGQgbm90IGJlIHVzZWQgd2l0aCBkZXBlbmRlbmNpZXMgdGhhdCBhcmUgYWxsIHByaW1pdGl2ZSB2YWx1ZXMuIFVzZSBSZWFjdC51c2VFZmZlY3QgaW5zdGVhZC4nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1c2VDdXN0b21Db21wYXJlRWZmZWN0KGVmZmVjdCwgZGVwcywgaXNEZWVwRXF1YWwpO1xufTtcbmV4cG9ydCBkZWZhdWx0IHVzZURlZXBDb21wYXJlRWZmZWN0O1xuIiwiaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG52YXIgdXNlRGVmYXVsdCA9IGZ1bmN0aW9uIChkZWZhdWx0VmFsdWUsIGluaXRpYWxWYWx1ZSkge1xuICAgIHZhciBfYSA9IHVzZVN0YXRlKGluaXRpYWxWYWx1ZSksIHZhbHVlID0gX2FbMF0sIHNldFZhbHVlID0gX2FbMV07XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIFtkZWZhdWx0VmFsdWUsIHNldFZhbHVlXTtcbiAgICB9XG4gICAgcmV0dXJuIFt2YWx1ZSwgc2V0VmFsdWVdO1xufTtcbmV4cG9ydCBkZWZhdWx0IHVzZURlZmF1bHQ7XG4iLCJpbXBvcnQgeyBfX3NwcmVhZEFycmF5cyB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBub29wLCBvZmYsIG9uIH0gZnJvbSAnLi9taXNjL3V0aWwnO1xudmFyIGNyZWF0ZVByb2Nlc3MgPSBmdW5jdGlvbiAob3B0aW9ucykgeyByZXR1cm4gZnVuY3Rpb24gKGRhdGFUcmFuc2ZlciwgZXZlbnQpIHtcbiAgICB2YXIgdXJpID0gZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvdXJpLWxpc3QnKTtcbiAgICBpZiAodXJpKSB7XG4gICAgICAgIChvcHRpb25zLm9uVXJpIHx8IG5vb3ApKHVyaSwgZXZlbnQpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChkYXRhVHJhbnNmZXIuZmlsZXMgJiYgZGF0YVRyYW5zZmVyLmZpbGVzLmxlbmd0aCkge1xuICAgICAgICAob3B0aW9ucy5vbkZpbGVzIHx8IG5vb3ApKEFycmF5LmZyb20oZGF0YVRyYW5zZmVyLmZpbGVzKSwgZXZlbnQpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChldmVudC5jbGlwYm9hcmREYXRhKSB7XG4gICAgICAgIHZhciB0ZXh0ID0gZXZlbnQuY2xpcGJvYXJkRGF0YS5nZXREYXRhKCd0ZXh0Jyk7XG4gICAgICAgIChvcHRpb25zLm9uVGV4dCB8fCBub29wKSh0ZXh0LCBldmVudCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG59OyB9O1xudmFyIHVzZURyb3AgPSBmdW5jdGlvbiAob3B0aW9ucywgYXJncykge1xuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XG4gICAgaWYgKGFyZ3MgPT09IHZvaWQgMCkgeyBhcmdzID0gW107IH1cbiAgICB2YXIgb25GaWxlcyA9IG9wdGlvbnMub25GaWxlcywgb25UZXh0ID0gb3B0aW9ucy5vblRleHQsIG9uVXJpID0gb3B0aW9ucy5vblVyaTtcbiAgICB2YXIgX2EgPSB1c2VTdGF0ZShmYWxzZSksIG92ZXIgPSBfYVswXSwgc2V0T3ZlclJhdyA9IF9hWzFdO1xuICAgIHZhciBzZXRPdmVyID0gdXNlQ2FsbGJhY2soc2V0T3ZlclJhdywgW10pO1xuICAgIHZhciBwcm9jZXNzID0gdXNlTWVtbyhmdW5jdGlvbiAoKSB7IHJldHVybiBjcmVhdGVQcm9jZXNzKG9wdGlvbnMpOyB9LCBbb25GaWxlcywgb25UZXh0LCBvblVyaV0pO1xuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBvbkRyYWdPdmVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgc2V0T3Zlcih0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIG9uRHJhZ0VudGVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgc2V0T3Zlcih0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIG9uRHJhZ0xlYXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2V0T3ZlcihmYWxzZSk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBvbkRyYWdFeGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2V0T3ZlcihmYWxzZSk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBvbkRyb3AgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBzZXRPdmVyKGZhbHNlKTtcbiAgICAgICAgICAgIHByb2Nlc3MoZXZlbnQuZGF0YVRyYW5zZmVyLCBldmVudCk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBvblBhc3RlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBwcm9jZXNzKGV2ZW50LmNsaXBib2FyZERhdGEsIGV2ZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgb24oZG9jdW1lbnQsICdkcmFnb3ZlcicsIG9uRHJhZ092ZXIpO1xuICAgICAgICBvbihkb2N1bWVudCwgJ2RyYWdlbnRlcicsIG9uRHJhZ0VudGVyKTtcbiAgICAgICAgb24oZG9jdW1lbnQsICdkcmFnbGVhdmUnLCBvbkRyYWdMZWF2ZSk7XG4gICAgICAgIG9uKGRvY3VtZW50LCAnZHJhZ2V4aXQnLCBvbkRyYWdFeGl0KTtcbiAgICAgICAgb24oZG9jdW1lbnQsICdkcm9wJywgb25Ecm9wKTtcbiAgICAgICAgaWYgKG9uVGV4dCkge1xuICAgICAgICAgICAgb24oZG9jdW1lbnQsICdwYXN0ZScsIG9uUGFzdGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBvZmYoZG9jdW1lbnQsICdkcmFnb3ZlcicsIG9uRHJhZ092ZXIpO1xuICAgICAgICAgICAgb2ZmKGRvY3VtZW50LCAnZHJhZ2VudGVyJywgb25EcmFnRW50ZXIpO1xuICAgICAgICAgICAgb2ZmKGRvY3VtZW50LCAnZHJhZ2xlYXZlJywgb25EcmFnTGVhdmUpO1xuICAgICAgICAgICAgb2ZmKGRvY3VtZW50LCAnZHJhZ2V4aXQnLCBvbkRyYWdFeGl0KTtcbiAgICAgICAgICAgIG9mZihkb2N1bWVudCwgJ2Ryb3AnLCBvbkRyb3ApO1xuICAgICAgICAgICAgb2ZmKGRvY3VtZW50LCAncGFzdGUnLCBvblBhc3RlKTtcbiAgICAgICAgfTtcbiAgICB9LCBfX3NwcmVhZEFycmF5cyhbcHJvY2Vzc10sIGFyZ3MpKTtcbiAgICByZXR1cm4geyBvdmVyOiBvdmVyIH07XG59O1xuZXhwb3J0IGRlZmF1bHQgdXNlRHJvcDtcbiIsImltcG9ydCB7IHVzZU1lbW8sIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHVzZU1vdW50ZWRTdGF0ZSBmcm9tICcuL3VzZU1vdW50ZWRTdGF0ZSc7XG5pbXBvcnQgeyBub29wIH0gZnJvbSAnLi9taXNjL3V0aWwnO1xuLypcbmNvbnN0IGRlZmF1bHRTdGF0ZTogRHJvcEFyZWFTdGF0ZSA9IHtcbiAgb3ZlcjogZmFsc2UsXG59O1xuKi9cbnZhciBjcmVhdGVQcm9jZXNzID0gZnVuY3Rpb24gKG9wdGlvbnMsIG1vdW50ZWQpIHsgcmV0dXJuIGZ1bmN0aW9uIChkYXRhVHJhbnNmZXIsIGV2ZW50KSB7XG4gICAgdmFyIHVyaSA9IGRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3VyaS1saXN0Jyk7XG4gICAgaWYgKHVyaSkge1xuICAgICAgICAob3B0aW9ucy5vblVyaSB8fCBub29wKSh1cmksIGV2ZW50KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoZGF0YVRyYW5zZmVyLmZpbGVzICYmIGRhdGFUcmFuc2Zlci5maWxlcy5sZW5ndGgpIHtcbiAgICAgICAgKG9wdGlvbnMub25GaWxlcyB8fCBub29wKShBcnJheS5mcm9tKGRhdGFUcmFuc2Zlci5maWxlcyksIGV2ZW50KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoZGF0YVRyYW5zZmVyLml0ZW1zICYmIGRhdGFUcmFuc2Zlci5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgZGF0YVRyYW5zZmVyLml0ZW1zWzBdLmdldEFzU3RyaW5nKGZ1bmN0aW9uICh0ZXh0KSB7XG4gICAgICAgICAgICBpZiAobW91bnRlZCkge1xuICAgICAgICAgICAgICAgIChvcHRpb25zLm9uVGV4dCB8fCBub29wKSh0ZXh0LCBldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn07IH07XG52YXIgY3JlYXRlQm9uZCA9IGZ1bmN0aW9uIChwcm9jZXNzLCBzZXRPdmVyKSB7IHJldHVybiAoe1xuICAgIG9uRHJhZ092ZXI6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0sXG4gICAgb25EcmFnRW50ZXI6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBzZXRPdmVyKHRydWUpO1xuICAgIH0sXG4gICAgb25EcmFnTGVhdmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2V0T3ZlcihmYWxzZSk7XG4gICAgfSxcbiAgICBvbkRyb3A6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldmVudC5wZXJzaXN0KCk7XG4gICAgICAgIHNldE92ZXIoZmFsc2UpO1xuICAgICAgICBwcm9jZXNzKGV2ZW50LmRhdGFUcmFuc2ZlciwgZXZlbnQpO1xuICAgIH0sXG4gICAgb25QYXN0ZTogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnBlcnNpc3QoKTtcbiAgICAgICAgcHJvY2VzcyhldmVudC5jbGlwYm9hcmREYXRhLCBldmVudCk7XG4gICAgfSxcbn0pOyB9O1xudmFyIHVzZURyb3BBcmVhID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfVxuICAgIHZhciBvbkZpbGVzID0gb3B0aW9ucy5vbkZpbGVzLCBvblRleHQgPSBvcHRpb25zLm9uVGV4dCwgb25VcmkgPSBvcHRpb25zLm9uVXJpO1xuICAgIHZhciBpc01vdW50ZWQgPSB1c2VNb3VudGVkU3RhdGUoKTtcbiAgICB2YXIgX2EgPSB1c2VTdGF0ZShmYWxzZSksIG92ZXIgPSBfYVswXSwgc2V0T3ZlciA9IF9hWzFdO1xuICAgIHZhciBwcm9jZXNzID0gdXNlTWVtbyhmdW5jdGlvbiAoKSB7IHJldHVybiBjcmVhdGVQcm9jZXNzKG9wdGlvbnMsIGlzTW91bnRlZCgpKTsgfSwgW29uRmlsZXMsIG9uVGV4dCwgb25VcmldKTtcbiAgICB2YXIgYm9uZCA9IHVzZU1lbW8oZnVuY3Rpb24gKCkgeyByZXR1cm4gY3JlYXRlQm9uZChwcm9jZXNzLCBzZXRPdmVyKTsgfSwgW3Byb2Nlc3MsIHNldE92ZXJdKTtcbiAgICByZXR1cm4gW2JvbmQsIHsgb3Zlcjogb3ZlciB9XTtcbn07XG5leHBvcnQgZGVmYXVsdCB1c2VEcm9wQXJlYTtcbiIsImltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbnZhciB1c2VFZmZlY3RPbmNlID0gZnVuY3Rpb24gKGVmZmVjdCkge1xuICAgIHVzZUVmZmVjdChlZmZlY3QsIFtdKTtcbn07XG5leHBvcnQgZGVmYXVsdCB1c2VFZmZlY3RPbmNlO1xuIiwiaW1wb3J0IHsgZm9yd2FyZFJlZiwgdXNlRWZmZWN0LCB1c2VSZWYsIH0gZnJvbSAncmVhY3QnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlRW5zdXJlZEZvcndhcmRlZFJlZihmb3J3YXJkZWRSZWYpIHtcbiAgICB2YXIgZW5zdXJlZFJlZiA9IHVzZVJlZihmb3J3YXJkZWRSZWYgJiYgZm9yd2FyZGVkUmVmLmN1cnJlbnQpO1xuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghZm9yd2FyZGVkUmVmKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZm9yd2FyZGVkUmVmLmN1cnJlbnQgPSBlbnN1cmVkUmVmLmN1cnJlbnQ7XG4gICAgfSwgW2ZvcndhcmRlZFJlZl0pO1xuICAgIHJldHVybiBlbnN1cmVkUmVmO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZWRGb3J3YXJkUmVmKENvbXBvbmVudCkge1xuICAgIHJldHVybiBmb3J3YXJkUmVmKGZ1bmN0aW9uIChwcm9wcywgcmVmKSB7XG4gICAgICAgIHZhciBlbnN1cmVkUmVmID0gdXNlRW5zdXJlZEZvcndhcmRlZFJlZihyZWYpO1xuICAgICAgICByZXR1cm4gQ29tcG9uZW50KHByb3BzLCBlbnN1cmVkUmVmKTtcbiAgICB9KTtcbn1cbiIsImltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xudmFyIHVzZUVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBfYSA9IHVzZVN0YXRlKG51bGwpLCBlcnJvciA9IF9hWzBdLCBzZXRFcnJvciA9IF9hWzFdO1xuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9LCBbZXJyb3JdKTtcbiAgICB2YXIgZGlzcGF0Y2hFcnJvciA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgc2V0RXJyb3IoZXJyKTtcbiAgICB9LCBbXSk7XG4gICAgcmV0dXJuIGRpc3BhdGNoRXJyb3I7XG59O1xuZXhwb3J0IGRlZmF1bHQgdXNlRXJyb3I7XG4iLCJpbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBpc0Jyb3dzZXIsIG9mZiwgb24gfSBmcm9tICcuL21pc2MvdXRpbCc7XG52YXIgZGVmYXVsdFRhcmdldCA9IGlzQnJvd3NlciA/IHdpbmRvdyA6IG51bGw7XG52YXIgaXNMaXN0ZW5lclR5cGUxID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgIHJldHVybiAhIXRhcmdldC5hZGRFdmVudExpc3RlbmVyO1xufTtcbnZhciBpc0xpc3RlbmVyVHlwZTIgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgcmV0dXJuICEhdGFyZ2V0Lm9uO1xufTtcbnZhciB1c2VFdmVudCA9IGZ1bmN0aW9uIChuYW1lLCBoYW5kbGVyLCB0YXJnZXQsIG9wdGlvbnMpIHtcbiAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsgdGFyZ2V0ID0gZGVmYXVsdFRhcmdldDsgfVxuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghaGFuZGxlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzTGlzdGVuZXJUeXBlMSh0YXJnZXQpKSB7XG4gICAgICAgICAgICBvbih0YXJnZXQsIG5hbWUsIGhhbmRsZXIsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzTGlzdGVuZXJUeXBlMih0YXJnZXQpKSB7XG4gICAgICAgICAgICB0YXJnZXQub24obmFtZSwgaGFuZGxlciwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChpc0xpc3RlbmVyVHlwZTEodGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgIG9mZih0YXJnZXQsIG5hbWUsIGhhbmRsZXIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNMaXN0ZW5lclR5cGUyKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQub2ZmKG5hbWUsIGhhbmRsZXIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0sIFtuYW1lLCBoYW5kbGVyLCB0YXJnZXQsIEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpXSk7XG59O1xuZXhwb3J0IGRlZmF1bHQgdXNlRXZlbnQ7XG4iLCJpbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG52YXIgdXNlRmF2aWNvbiA9IGZ1bmN0aW9uIChocmVmKSB7XG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibGlua1tyZWwqPSdpY29uJ11cIikgfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpO1xuICAgICAgICBsaW5rLnR5cGUgPSAnaW1hZ2UveC1pY29uJztcbiAgICAgICAgbGluay5yZWwgPSAnc2hvcnRjdXQgaWNvbic7XG4gICAgICAgIGxpbmsuaHJlZiA9IGhyZWY7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0uYXBwZW5kQ2hpbGQobGluayk7XG4gICAgfSwgW2hyZWZdKTtcbn07XG5leHBvcnQgZGVmYXVsdCB1c2VGYXZpY29uO1xuIiwiaW1wb3J0IHsgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUZpcnN0TW91bnRTdGF0ZSgpIHtcbiAgICB2YXIgaXNGaXJzdCA9IHVzZVJlZih0cnVlKTtcbiAgICBpZiAoaXNGaXJzdC5jdXJyZW50KSB7XG4gICAgICAgIGlzRmlyc3QuY3VycmVudCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGlzRmlyc3QuY3VycmVudDtcbn1cbiIsImltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHNjcmVlbmZ1bGwgZnJvbSAnc2NyZWVuZnVsbCc7XG5pbXBvcnQgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCBmcm9tICcuL3VzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QnO1xuaW1wb3J0IHsgbm9vcCwgb2ZmLCBvbiB9IGZyb20gJy4vbWlzYy91dGlsJztcbnZhciB1c2VGdWxsc2NyZWVuID0gZnVuY3Rpb24gKHJlZiwgZW5hYmxlZCwgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XG4gICAgdmFyIHZpZGVvID0gb3B0aW9ucy52aWRlbywgX2EgPSBvcHRpb25zLm9uQ2xvc2UsIG9uQ2xvc2UgPSBfYSA9PT0gdm9pZCAwID8gbm9vcCA6IF9hO1xuICAgIHZhciBfYiA9IHVzZVN0YXRlKGVuYWJsZWQpLCBpc0Z1bGxzY3JlZW4gPSBfYlswXSwgc2V0SXNGdWxsc2NyZWVuID0gX2JbMV07XG4gICAgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghZW5hYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb25XZWJraXRFbmRGdWxsc2NyZWVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHZpZGVvID09PSBudWxsIHx8IHZpZGVvID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2aWRlby5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgb2ZmKHZpZGVvLmN1cnJlbnQsICd3ZWJraXRlbmRmdWxsc2NyZWVuJywgb25XZWJraXRFbmRGdWxsc2NyZWVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9uQ2xvc2UoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIG9uQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHNjcmVlbmZ1bGwuaXNFbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlzU2NyZWVuZnVsbEZ1bGxzY3JlZW4gPSBzY3JlZW5mdWxsLmlzRnVsbHNjcmVlbjtcbiAgICAgICAgICAgICAgICBzZXRJc0Z1bGxzY3JlZW4oaXNTY3JlZW5mdWxsRnVsbHNjcmVlbik7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1NjcmVlbmZ1bGxGdWxsc2NyZWVuKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChzY3JlZW5mdWxsLmlzRW5hYmxlZCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBzY3JlZW5mdWxsLnJlcXVlc3QocmVmLmN1cnJlbnQpO1xuICAgICAgICAgICAgICAgIHNldElzRnVsbHNjcmVlbih0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIG9uQ2xvc2UoZXJyb3IpO1xuICAgICAgICAgICAgICAgIHNldElzRnVsbHNjcmVlbihmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzY3JlZW5mdWxsLm9uKCdjaGFuZ2UnLCBvbkNoYW5nZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodmlkZW8gJiYgdmlkZW8uY3VycmVudCAmJiB2aWRlby5jdXJyZW50LndlYmtpdEVudGVyRnVsbHNjcmVlbikge1xuICAgICAgICAgICAgdmlkZW8uY3VycmVudC53ZWJraXRFbnRlckZ1bGxzY3JlZW4oKTtcbiAgICAgICAgICAgIG9uKHZpZGVvLmN1cnJlbnQsICd3ZWJraXRlbmRmdWxsc2NyZWVuJywgb25XZWJraXRFbmRGdWxsc2NyZWVuKTtcbiAgICAgICAgICAgIHNldElzRnVsbHNjcmVlbih0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9uQ2xvc2UoKTtcbiAgICAgICAgICAgIHNldElzRnVsbHNjcmVlbihmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNldElzRnVsbHNjcmVlbihmYWxzZSk7XG4gICAgICAgICAgICBpZiAoc2NyZWVuZnVsbC5pc0VuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBzY3JlZW5mdWxsLm9mZignY2hhbmdlJywgb25DaGFuZ2UpO1xuICAgICAgICAgICAgICAgICAgICBzY3JlZW5mdWxsLmV4aXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKF9hKSB7IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHZpZGVvICYmIHZpZGVvLmN1cnJlbnQgJiYgdmlkZW8uY3VycmVudC53ZWJraXRFeGl0RnVsbHNjcmVlbikge1xuICAgICAgICAgICAgICAgIG9mZih2aWRlby5jdXJyZW50LCAnd2Via2l0ZW5kZnVsbHNjcmVlbicsIG9uV2Via2l0RW5kRnVsbHNjcmVlbik7XG4gICAgICAgICAgICAgICAgdmlkZW8uY3VycmVudC53ZWJraXRFeGl0RnVsbHNjcmVlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0sIFtlbmFibGVkLCB2aWRlbywgcmVmXSk7XG4gICAgcmV0dXJuIGlzRnVsbHNjcmVlbjtcbn07XG5leHBvcnQgZGVmYXVsdCB1c2VGdWxsc2NyZWVuO1xuIiwiaW1wb3J0IHsgX19hc3NpZ24gfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG52YXIgdXNlR2VvbG9jYXRpb24gPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIHZhciBfYSA9IHVzZVN0YXRlKHtcbiAgICAgICAgbG9hZGluZzogdHJ1ZSxcbiAgICAgICAgYWNjdXJhY3k6IG51bGwsXG4gICAgICAgIGFsdGl0dWRlOiBudWxsLFxuICAgICAgICBhbHRpdHVkZUFjY3VyYWN5OiBudWxsLFxuICAgICAgICBoZWFkaW5nOiBudWxsLFxuICAgICAgICBsYXRpdHVkZTogbnVsbCxcbiAgICAgICAgbG9uZ2l0dWRlOiBudWxsLFxuICAgICAgICBzcGVlZDogbnVsbCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgIH0pLCBzdGF0ZSA9IF9hWzBdLCBzZXRTdGF0ZSA9IF9hWzFdO1xuICAgIHZhciBtb3VudGVkID0gdHJ1ZTtcbiAgICB2YXIgd2F0Y2hJZDtcbiAgICB2YXIgb25FdmVudCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBpZiAobW91bnRlZCkge1xuICAgICAgICAgICAgc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGFjY3VyYWN5OiBldmVudC5jb29yZHMuYWNjdXJhY3ksXG4gICAgICAgICAgICAgICAgYWx0aXR1ZGU6IGV2ZW50LmNvb3Jkcy5hbHRpdHVkZSxcbiAgICAgICAgICAgICAgICBhbHRpdHVkZUFjY3VyYWN5OiBldmVudC5jb29yZHMuYWx0aXR1ZGVBY2N1cmFjeSxcbiAgICAgICAgICAgICAgICBoZWFkaW5nOiBldmVudC5jb29yZHMuaGVhZGluZyxcbiAgICAgICAgICAgICAgICBsYXRpdHVkZTogZXZlbnQuY29vcmRzLmxhdGl0dWRlLFxuICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogZXZlbnQuY29vcmRzLmxvbmdpdHVkZSxcbiAgICAgICAgICAgICAgICBzcGVlZDogZXZlbnQuY29vcmRzLnNwZWVkLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogZXZlbnQudGltZXN0YW1wLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHZhciBvbkV2ZW50RXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIG1vdW50ZWQgJiYgc2V0U3RhdGUoZnVuY3Rpb24gKG9sZFN0YXRlKSB7IHJldHVybiAoX19hc3NpZ24oX19hc3NpZ24oe30sIG9sZFN0YXRlKSwgeyBsb2FkaW5nOiBmYWxzZSwgZXJyb3I6IGVycm9yIH0pKTsgfSk7XG4gICAgfTtcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKG9uRXZlbnQsIG9uRXZlbnRFcnJvciwgb3B0aW9ucyk7XG4gICAgICAgIHdhdGNoSWQgPSBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24ud2F0Y2hQb3NpdGlvbihvbkV2ZW50LCBvbkV2ZW50RXJyb3IsIG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbW91bnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmNsZWFyV2F0Y2god2F0Y2hJZCk7XG4gICAgICAgIH07XG4gICAgfSwgW10pO1xuICAgIHJldHVybiBzdGF0ZTtcbn07XG5leHBvcnQgZGVmYXVsdCB1c2VHZW9sb2NhdGlvbjtcbiIsImltcG9ydCB7IHVzZU1lbW8sIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB1c2VVcGRhdGUgZnJvbSAnLi91c2VVcGRhdGUnO1xuaW1wb3J0IHsgcmVzb2x2ZUhvb2tTdGF0ZSB9IGZyb20gJy4vbWlzYy9ob29rU3RhdGUnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlR2V0U2V0KGluaXRpYWxTdGF0ZSkge1xuICAgIHZhciBzdGF0ZSA9IHVzZVJlZihyZXNvbHZlSG9va1N0YXRlKGluaXRpYWxTdGF0ZSkpO1xuICAgIHZhciB1cGRhdGUgPSB1c2VVcGRhdGUoKTtcbiAgICByZXR1cm4gdXNlTWVtbyhmdW5jdGlvbiAoKSB7IHJldHVybiBbXG4gICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN0YXRlLmN1cnJlbnQ7IH0sXG4gICAgICAgIGZ1bmN0aW9uIChuZXdTdGF0ZSkge1xuICAgICAgICAgICAgc3RhdGUuY3VycmVudCA9IHJlc29sdmVIb29rU3RhdGUobmV3U3RhdGUsIHN0YXRlLmN1cnJlbnQpO1xuICAgICAgICAgICAgdXBkYXRlKCk7XG4gICAgICAgIH0sXG4gICAgXTsgfSwgW10pO1xufVxuIiwiaW1wb3J0IHsgX19hc3NpZ24gfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgdXNlVXBkYXRlIGZyb20gJy4vdXNlVXBkYXRlJztcbnZhciB1c2VHZXRTZXRTdGF0ZSA9IGZ1bmN0aW9uIChpbml0aWFsU3RhdGUpIHtcbiAgICBpZiAoaW5pdGlhbFN0YXRlID09PSB2b2lkIDApIHsgaW5pdGlhbFN0YXRlID0ge307IH1cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBpZiAodHlwZW9mIGluaXRpYWxTdGF0ZSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3VzZUdldFNldFN0YXRlIGluaXRpYWwgc3RhdGUgbXVzdCBiZSBhbiBvYmplY3QuJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIHVwZGF0ZSA9IHVzZVVwZGF0ZSgpO1xuICAgIHZhciBzdGF0ZSA9IHVzZVJlZihfX2Fzc2lnbih7fSwgaW5pdGlhbFN0YXRlKSk7XG4gICAgdmFyIGdldCA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN0YXRlLmN1cnJlbnQ7IH0sIFtdKTtcbiAgICB2YXIgc2V0ID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKHBhdGNoKSB7XG4gICAgICAgIGlmICghcGF0Y2gpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXRjaCAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCd1c2VHZXRTZXRTdGF0ZSBzZXR0ZXIgcGF0Y2ggbXVzdCBiZSBhbiBvYmplY3QuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LmFzc2lnbihzdGF0ZS5jdXJyZW50LCBwYXRjaCk7XG4gICAgICAgIHVwZGF0ZSgpO1xuICAgIH0sIFtdKTtcbiAgICByZXR1cm4gW2dldCwgc2V0XTtcbn07XG5leHBvcnQgZGVmYXVsdCB1c2VHZXRTZXRTdGF0ZTtcbiIsImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgY2xlYXJIYXJtb25pY0ludGVydmFsLCBzZXRIYXJtb25pY0ludGVydmFsIH0gZnJvbSAnc2V0LWhhcm1vbmljLWludGVydmFsJztcbnZhciB1c2VIYXJtb25pY0ludGVydmFsRm4gPSBmdW5jdGlvbiAoZm4sIGRlbGF5KSB7XG4gICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsgZGVsYXkgPSAwOyB9XG4gICAgdmFyIGxhdGVzdENhbGxiYWNrID0gdXNlUmVmKGZ1bmN0aW9uICgpIHsgfSk7XG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGF0ZXN0Q2FsbGJhY2suY3VycmVudCA9IGZuO1xuICAgIH0pO1xuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChkZWxheSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyIGludGVydmFsXzEgPSBzZXRIYXJtb25pY0ludGVydmFsKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGxhdGVzdENhbGxiYWNrLmN1cnJlbnQoKTsgfSwgZGVsYXkpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNsZWFySGFybW9uaWNJbnRlcnZhbChpbnRlcnZhbF8xKTsgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0sIFtkZWxheV0pO1xufTtcbmV4cG9ydCBkZWZhdWx0IHVzZUhhcm1vbmljSW50ZXJ2YWxGbjtcbiIsImltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB1c2VMaWZlY3ljbGVzIGZyb20gJy4vdXNlTGlmZWN5Y2xlcyc7XG5pbXBvcnQgeyBvZmYsIG9uIH0gZnJvbSAnLi9taXNjL3V0aWwnO1xuLyoqXG4gKiByZWFkIGFuZCB3cml0ZSB1cmwgaGFzaCwgcmVzcG9uc2UgdG8gdXJsIGhhc2ggY2hhbmdlXG4gKi9cbmV4cG9ydCB2YXIgdXNlSGFzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX2EgPSB1c2VTdGF0ZShmdW5jdGlvbiAoKSB7IHJldHVybiB3aW5kb3cubG9jYXRpb24uaGFzaDsgfSksIGhhc2ggPSBfYVswXSwgc2V0SGFzaCA9IF9hWzFdO1xuICAgIHZhciBvbkhhc2hDaGFuZ2UgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNldEhhc2god2luZG93LmxvY2F0aW9uLmhhc2gpO1xuICAgIH0sIFtdKTtcbiAgICB1c2VMaWZlY3ljbGVzKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgb24od2luZG93LCAnaGFzaGNoYW5nZScsIG9uSGFzaENoYW5nZSk7XG4gICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBvZmYod2luZG93LCAnaGFzaGNoYW5nZScsIG9uSGFzaENoYW5nZSk7XG4gICAgfSk7XG4gICAgdmFyIF9zZXRIYXNoID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKG5ld0hhc2gpIHtcbiAgICAgICAgaWYgKG5ld0hhc2ggIT09IGhhc2gpIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gbmV3SGFzaDtcbiAgICAgICAgfVxuICAgIH0sIFtoYXNoXSk7XG4gICAgcmV0dXJuIFtoYXNoLCBfc2V0SGFzaF07XG59O1xuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgbm9vcCB9IGZyb20gJy4vbWlzYy91dGlsJztcbnZhciB1c2VTdGF0ZSA9IFJlYWN0LnVzZVN0YXRlO1xudmFyIHVzZUhvdmVyID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICB2YXIgX2EgPSB1c2VTdGF0ZShmYWxzZSksIHN0YXRlID0gX2FbMF0sIHNldFN0YXRlID0gX2FbMV07XG4gICAgdmFyIG9uTW91c2VFbnRlciA9IGZ1bmN0aW9uIChvcmlnaW5hbE9uTW91c2VFbnRlcikgeyByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIChvcmlnaW5hbE9uTW91c2VFbnRlciB8fCBub29wKShldmVudCk7XG4gICAgICAgIHNldFN0YXRlKHRydWUpO1xuICAgIH07IH07XG4gICAgdmFyIG9uTW91c2VMZWF2ZSA9IGZ1bmN0aW9uIChvcmlnaW5hbE9uTW91c2VMZWF2ZSkgeyByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIChvcmlnaW5hbE9uTW91c2VMZWF2ZSB8fCBub29wKShldmVudCk7XG4gICAgICAgIHNldFN0YXRlKGZhbHNlKTtcbiAgICB9OyB9O1xuICAgIGlmICh0eXBlb2YgZWxlbWVudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBlbGVtZW50ID0gZWxlbWVudChzdGF0ZSk7XG4gICAgfVxuICAgIHZhciBlbCA9IFJlYWN0LmNsb25lRWxlbWVudChlbGVtZW50LCB7XG4gICAgICAgIG9uTW91c2VFbnRlcjogb25Nb3VzZUVudGVyKGVsZW1lbnQucHJvcHMub25Nb3VzZUVudGVyKSxcbiAgICAgICAgb25Nb3VzZUxlYXZlOiBvbk1vdXNlTGVhdmUoZWxlbWVudC5wcm9wcy5vbk1vdXNlTGVhdmUpLFxuICAgIH0pO1xuICAgIHJldHVybiBbZWwsIHN0YXRlXTtcbn07XG5leHBvcnQgZGVmYXVsdCB1c2VIb3ZlcjtcbiIsImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBvZmYsIG9uIH0gZnJvbSAnLi9taXNjL3V0aWwnO1xuLy8ga3Vkb3M6IGh0dHBzOi8vdXNlaG9va3MuY29tL1xudmFyIHVzZUhvdmVyRGlydHkgPSBmdW5jdGlvbiAocmVmLCBlbmFibGVkKSB7XG4gICAgaWYgKGVuYWJsZWQgPT09IHZvaWQgMCkgeyBlbmFibGVkID0gdHJ1ZTsgfVxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICBpZiAodHlwZW9mIHJlZiAhPT0gJ29iamVjdCcgfHwgdHlwZW9mIHJlZi5jdXJyZW50ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcigndXNlSG92ZXJEaXJ0eSBleHBlY3RzIGEgc2luZ2xlIHJlZiBhcmd1bWVudC4nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgX2EgPSB1c2VTdGF0ZShmYWxzZSksIHZhbHVlID0gX2FbMF0sIHNldFZhbHVlID0gX2FbMV07XG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG9uTW91c2VPdmVyID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gc2V0VmFsdWUodHJ1ZSk7IH07XG4gICAgICAgIHZhciBvbk1vdXNlT3V0ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gc2V0VmFsdWUoZmFsc2UpOyB9O1xuICAgICAgICBpZiAoZW5hYmxlZCAmJiByZWYgJiYgcmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIG9uKHJlZi5jdXJyZW50LCAnbW91c2VvdmVyJywgb25Nb3VzZU92ZXIpO1xuICAgICAgICAgICAgb24ocmVmLmN1cnJlbnQsICdtb3VzZW91dCcsIG9uTW91c2VPdXQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGZpeGVzIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwcyB3YXJuaW5nIGFib3V0IHN0YWxlIHJlZiBlbGVtZW50c1xuICAgICAgICB2YXIgY3VycmVudCA9IHJlZi5jdXJyZW50O1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGVuYWJsZWQgJiYgY3VycmVudCkge1xuICAgICAgICAgICAgICAgIG9mZihjdXJyZW50LCAnbW91c2VvdmVyJywgb25Nb3VzZU92ZXIpO1xuICAgICAgICAgICAgICAgIG9mZihjdXJyZW50LCAnbW91c2VvdXQnLCBvbk1vdXNlT3V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9LCBbZW5hYmxlZCwgcmVmXSk7XG4gICAgcmV0dXJuIHZhbHVlO1xufTtcbmV4cG9ydCBkZWZhdWx0IHVzZUhvdmVyRGlydHk7XG4iLCJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdGhyb3R0bGUgfSBmcm9tICd0aHJvdHRsZS1kZWJvdW5jZSc7XG5pbXBvcnQgeyBvZmYsIG9uIH0gZnJvbSAnLi9taXNjL3V0aWwnO1xudmFyIGRlZmF1bHRFdmVudHMgPSBbJ21vdXNlbW92ZScsICdtb3VzZWRvd24nLCAncmVzaXplJywgJ2tleWRvd24nLCAndG91Y2hzdGFydCcsICd3aGVlbCddO1xudmFyIG9uZU1pbnV0ZSA9IDYwZTM7XG52YXIgdXNlSWRsZSA9IGZ1bmN0aW9uIChtcywgaW5pdGlhbFN0YXRlLCBldmVudHMpIHtcbiAgICBpZiAobXMgPT09IHZvaWQgMCkgeyBtcyA9IG9uZU1pbnV0ZTsgfVxuICAgIGlmIChpbml0aWFsU3RhdGUgPT09IHZvaWQgMCkgeyBpbml0aWFsU3RhdGUgPSBmYWxzZTsgfVxuICAgIGlmIChldmVudHMgPT09IHZvaWQgMCkgeyBldmVudHMgPSBkZWZhdWx0RXZlbnRzOyB9XG4gICAgdmFyIF9hID0gdXNlU3RhdGUoaW5pdGlhbFN0YXRlKSwgc3RhdGUgPSBfYVswXSwgc2V0U3RhdGUgPSBfYVsxXTtcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbW91bnRlZCA9IHRydWU7XG4gICAgICAgIHZhciB0aW1lb3V0O1xuICAgICAgICB2YXIgbG9jYWxTdGF0ZSA9IHN0YXRlO1xuICAgICAgICB2YXIgc2V0ID0gZnVuY3Rpb24gKG5ld1N0YXRlKSB7XG4gICAgICAgICAgICBpZiAobW91bnRlZCkge1xuICAgICAgICAgICAgICAgIGxvY2FsU3RhdGUgPSBuZXdTdGF0ZTtcbiAgICAgICAgICAgICAgICBzZXRTdGF0ZShuZXdTdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHZhciBvbkV2ZW50ID0gdGhyb3R0bGUoNTAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChsb2NhbFN0YXRlKSB7XG4gICAgICAgICAgICAgICAgc2V0KGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNldCh0cnVlKTsgfSwgbXMpO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIG9uVmlzaWJpbGl0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghZG9jdW1lbnQuaGlkZGVuKSB7XG4gICAgICAgICAgICAgICAgb25FdmVudCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV2ZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgb24od2luZG93LCBldmVudHNbaV0sIG9uRXZlbnQpO1xuICAgICAgICB9XG4gICAgICAgIG9uKGRvY3VtZW50LCAndmlzaWJpbGl0eWNoYW5nZScsIG9uVmlzaWJpbGl0eSk7XG4gICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNldCh0cnVlKTsgfSwgbXMpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbW91bnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBldmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBvZmYod2luZG93LCBldmVudHNbaV0sIG9uRXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb2ZmKGRvY3VtZW50LCAndmlzaWJpbGl0eWNoYW5nZScsIG9uVmlzaWJpbGl0eSk7XG4gICAgICAgIH07XG4gICAgfSwgW21zLCBldmVudHNdKTtcbiAgICByZXR1cm4gc3RhdGU7XG59O1xuZXhwb3J0IGRlZmF1bHQgdXNlSWRsZTtcbiIsImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG52YXIgdXNlSW50ZXJzZWN0aW9uID0gZnVuY3Rpb24gKHJlZiwgb3B0aW9ucykge1xuICAgIHZhciBfYSA9IHVzZVN0YXRlKG51bGwpLCBpbnRlcnNlY3Rpb25PYnNlcnZlckVudHJ5ID0gX2FbMF0sIHNldEludGVyc2VjdGlvbk9ic2VydmVyRW50cnkgPSBfYVsxXTtcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAocmVmLmN1cnJlbnQgJiYgdHlwZW9mIEludGVyc2VjdGlvbk9ic2VydmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIChlbnRyaWVzKSB7XG4gICAgICAgICAgICAgICAgc2V0SW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeShlbnRyaWVzWzBdKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgb2JzZXJ2ZXJfMSA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihoYW5kbGVyLCBvcHRpb25zKTtcbiAgICAgICAgICAgIG9ic2VydmVyXzEub2JzZXJ2ZShyZWYuY3VycmVudCk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHNldEludGVyc2VjdGlvbk9ic2VydmVyRW50cnkobnVsbCk7XG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXJfMS5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IH07XG4gICAgfSwgW3JlZi5jdXJyZW50LCBvcHRpb25zLnRocmVzaG9sZCwgb3B0aW9ucy5yb290LCBvcHRpb25zLnJvb3RNYXJnaW5dKTtcbiAgICByZXR1cm4gaW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeTtcbn07XG5leHBvcnQgZGVmYXVsdCB1c2VJbnRlcnNlY3Rpb247XG4iLCJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbnZhciB1c2VJbnRlcnZhbCA9IGZ1bmN0aW9uIChjYWxsYmFjaywgZGVsYXkpIHtcbiAgICB2YXIgc2F2ZWRDYWxsYmFjayA9IHVzZVJlZihmdW5jdGlvbiAoKSB7IH0pO1xuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNhdmVkQ2FsbGJhY2suY3VycmVudCA9IGNhbGxiYWNrO1xuICAgIH0pO1xuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChkZWxheSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyIGludGVydmFsXzEgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7IHJldHVybiBzYXZlZENhbGxiYWNrLmN1cnJlbnQoKTsgfSwgZGVsYXkgfHwgMCk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gY2xlYXJJbnRlcnZhbChpbnRlcnZhbF8xKTsgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0sIFtkZWxheV0pO1xufTtcbmV4cG9ydCBkZWZhdWx0IHVzZUludGVydmFsO1xuIiwiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VMYXlvdXRFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBpc0Jyb3dzZXIgfSBmcm9tICcuL21pc2MvdXRpbCc7XG52YXIgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCA9IGlzQnJvd3NlciA/IHVzZUxheW91dEVmZmVjdCA6IHVzZUVmZmVjdDtcbmV4cG9ydCBkZWZhdWx0IHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3Q7XG4iLCJpbXBvcnQgeyB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHVzZUV2ZW50IGZyb20gJy4vdXNlRXZlbnQnO1xuaW1wb3J0IHsgbm9vcCB9IGZyb20gJy4vbWlzYy91dGlsJztcbnZhciBjcmVhdGVLZXlQcmVkaWNhdGUgPSBmdW5jdGlvbiAoa2V5RmlsdGVyKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBrZXlGaWx0ZXIgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyBrZXlGaWx0ZXJcbiAgICAgICAgOiB0eXBlb2Yga2V5RmlsdGVyID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIGV2ZW50LmtleSA9PT0ga2V5RmlsdGVyOyB9XG4gICAgICAgICAgICA6IGtleUZpbHRlclxuICAgICAgICAgICAgICAgID8gZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfVxuICAgICAgICAgICAgICAgIDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZmFsc2U7IH07XG59O1xudmFyIHVzZUtleSA9IGZ1bmN0aW9uIChrZXksIGZuLCBvcHRzLCBkZXBzKSB7XG4gICAgaWYgKGZuID09PSB2b2lkIDApIHsgZm4gPSBub29wOyB9XG4gICAgaWYgKG9wdHMgPT09IHZvaWQgMCkgeyBvcHRzID0ge307IH1cbiAgICBpZiAoZGVwcyA9PT0gdm9pZCAwKSB7IGRlcHMgPSBba2V5XTsgfVxuICAgIHZhciBfYSA9IG9wdHMuZXZlbnQsIGV2ZW50ID0gX2EgPT09IHZvaWQgMCA/ICdrZXlkb3duJyA6IF9hLCB0YXJnZXQgPSBvcHRzLnRhcmdldCwgb3B0aW9ucyA9IG9wdHMub3B0aW9ucztcbiAgICB2YXIgdXNlTWVtb0hhbmRsZXIgPSB1c2VNZW1vKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHByZWRpY2F0ZSA9IGNyZWF0ZUtleVByZWRpY2F0ZShrZXkpO1xuICAgICAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIChoYW5kbGVyRXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChwcmVkaWNhdGUoaGFuZGxlckV2ZW50KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbihoYW5kbGVyRXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gaGFuZGxlcjtcbiAgICB9LCBkZXBzKTtcbiAgICB1c2VFdmVudChldmVudCwgdXNlTWVtb0hhbmRsZXIsIHRhcmdldCwgb3B0aW9ucyk7XG59O1xuZXhwb3J0IGRlZmF1bHQgdXNlS2V5O1xuIiwiaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgdXNlS2V5IGZyb20gJy4vdXNlS2V5JztcbnZhciB1c2VLZXlQcmVzcyA9IGZ1bmN0aW9uIChrZXlGaWx0ZXIpIHtcbiAgICB2YXIgX2EgPSB1c2VTdGF0ZShbZmFsc2UsIG51bGxdKSwgc3RhdGUgPSBfYVswXSwgc2V0ID0gX2FbMV07XG4gICAgdXNlS2V5KGtleUZpbHRlciwgZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBzZXQoW3RydWUsIGV2ZW50XSk7IH0sIHsgZXZlbnQ6ICdrZXlkb3duJyB9LCBbc3RhdGVdKTtcbiAgICB1c2VLZXkoa2V5RmlsdGVyLCBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIHNldChbZmFsc2UsIGV2ZW50XSk7IH0sIHsgZXZlbnQ6ICdrZXl1cCcgfSwgW3N0YXRlXSk7XG4gICAgcmV0dXJuIHN0YXRlO1xufTtcbmV4cG9ydCBkZWZhdWx0IHVzZUtleVByZXNzO1xuIiwiaW1wb3J0IHVzZUtleVByZXNzRGVmYXVsdCBmcm9tICcuL3VzZUtleVByZXNzJztcbmltcG9ydCB1c2VVcGRhdGVFZmZlY3QgZnJvbSAnLi91c2VVcGRhdGVFZmZlY3QnO1xudmFyIHVzZUtleVByZXNzRXZlbnQgPSBmdW5jdGlvbiAoa2V5LCBrZXlkb3duLCBrZXl1cCwgdXNlS2V5UHJlc3MpIHtcbiAgICBpZiAodXNlS2V5UHJlc3MgPT09IHZvaWQgMCkgeyB1c2VLZXlQcmVzcyA9IHVzZUtleVByZXNzRGVmYXVsdDsgfVxuICAgIHZhciBfYSA9IHVzZUtleVByZXNzKGtleSksIHByZXNzZWQgPSBfYVswXSwgZXZlbnQgPSBfYVsxXTtcbiAgICB1c2VVcGRhdGVFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXByZXNzZWQgJiYga2V5dXApIHtcbiAgICAgICAgICAgIGtleXVwKGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwcmVzc2VkICYmIGtleWRvd24pIHtcbiAgICAgICAgICAgIGtleWRvd24oZXZlbnQpO1xuICAgICAgICB9XG4gICAgfSwgW3ByZXNzZWRdKTtcbn07XG5leHBvcnQgZGVmYXVsdCB1c2VLZXlQcmVzc0V2ZW50O1xuIiwiaW1wb3J0IHsgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xudmFyIHVzZUxhdGVzdCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHZhciByZWYgPSB1c2VSZWYodmFsdWUpO1xuICAgIHJlZi5jdXJyZW50ID0gdmFsdWU7XG4gICAgcmV0dXJuIHJlZjtcbn07XG5leHBvcnQgZGVmYXVsdCB1c2VMYXRlc3Q7XG4iLCJpbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG52YXIgdXNlTGlmZWN5Y2xlcyA9IGZ1bmN0aW9uIChtb3VudCwgdW5tb3VudCkge1xuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChtb3VudCkge1xuICAgICAgICAgICAgbW91bnQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHVubW91bnQpIHtcbiAgICAgICAgICAgICAgICB1bm1vdW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSwgW10pO1xufTtcbmV4cG9ydCBkZWZhdWx0IHVzZUxpZmVjeWNsZXM7XG4iLCJpbXBvcnQgeyB1c2VNZW1vLCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgdXNlVXBkYXRlIGZyb20gJy4vdXNlVXBkYXRlJztcbmltcG9ydCB7IHJlc29sdmVIb29rU3RhdGUgfSBmcm9tICcuL21pc2MvaG9va1N0YXRlJztcbmZ1bmN0aW9uIHVzZUxpc3QoaW5pdGlhbExpc3QpIHtcbiAgICBpZiAoaW5pdGlhbExpc3QgPT09IHZvaWQgMCkgeyBpbml0aWFsTGlzdCA9IFtdOyB9XG4gICAgdmFyIGxpc3QgPSB1c2VSZWYocmVzb2x2ZUhvb2tTdGF0ZShpbml0aWFsTGlzdCkpO1xuICAgIHZhciB1cGRhdGUgPSB1c2VVcGRhdGUoKTtcbiAgICB2YXIgYWN0aW9ucyA9IHVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYSA9IHtcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKG5ld0xpc3QpIHtcbiAgICAgICAgICAgICAgICBsaXN0LmN1cnJlbnQgPSByZXNvbHZlSG9va1N0YXRlKG5ld0xpc3QsIGxpc3QuY3VycmVudCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcHVzaDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtcyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGl0ZW1zLmxlbmd0aCAmJiBhY3Rpb25zLnNldChmdW5jdGlvbiAoY3VycikgeyByZXR1cm4gY3Vyci5jb25jYXQoaXRlbXMpOyB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1cGRhdGVBdDogZnVuY3Rpb24gKGluZGV4LCBpdGVtKSB7XG4gICAgICAgICAgICAgICAgYWN0aW9ucy5zZXQoZnVuY3Rpb24gKGN1cnIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFyciA9IGN1cnIuc2xpY2UoKTtcbiAgICAgICAgICAgICAgICAgICAgYXJyW2luZGV4XSA9IGl0ZW07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcnI7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaW5zZXJ0QXQ6IGZ1bmN0aW9uIChpbmRleCwgaXRlbSkge1xuICAgICAgICAgICAgICAgIGFjdGlvbnMuc2V0KGZ1bmN0aW9uIChjdXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhcnIgPSBjdXJyLnNsaWNlKCk7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID4gYXJyLmxlbmd0aCA/IChhcnJbaW5kZXhdID0gaXRlbSkgOiBhcnIuc3BsaWNlKGluZGV4LCAwLCBpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFycjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uIChwcmVkaWNhdGUsIG5ld0l0ZW0pIHtcbiAgICAgICAgICAgICAgICBhY3Rpb25zLnNldChmdW5jdGlvbiAoY3VycikgeyByZXR1cm4gY3Vyci5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIChwcmVkaWNhdGUoaXRlbSwgbmV3SXRlbSkgPyBuZXdJdGVtIDogaXRlbSk7IH0pOyB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1cGRhdGVGaXJzdDogZnVuY3Rpb24gKHByZWRpY2F0ZSwgbmV3SXRlbSkge1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGxpc3QuY3VycmVudC5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIHByZWRpY2F0ZShpdGVtLCBuZXdJdGVtKTsgfSk7XG4gICAgICAgICAgICAgICAgaW5kZXggPj0gMCAmJiBhY3Rpb25zLnVwZGF0ZUF0KGluZGV4LCBuZXdJdGVtKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1cHNlcnQ6IGZ1bmN0aW9uIChwcmVkaWNhdGUsIG5ld0l0ZW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBsaXN0LmN1cnJlbnQuZmluZEluZGV4KGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiBwcmVkaWNhdGUoaXRlbSwgbmV3SXRlbSk7IH0pO1xuICAgICAgICAgICAgICAgIGluZGV4ID49IDAgPyBhY3Rpb25zLnVwZGF0ZUF0KGluZGV4LCBuZXdJdGVtKSA6IGFjdGlvbnMucHVzaChuZXdJdGVtKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzb3J0OiBmdW5jdGlvbiAoY29tcGFyZUZuKSB7XG4gICAgICAgICAgICAgICAgYWN0aW9ucy5zZXQoZnVuY3Rpb24gKGN1cnIpIHsgcmV0dXJuIGN1cnIuc2xpY2UoKS5zb3J0KGNvbXBhcmVGbik7IH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZpbHRlcjogZnVuY3Rpb24gKGNhbGxiYWNrRm4sIHRoaXNBcmcpIHtcbiAgICAgICAgICAgICAgICBhY3Rpb25zLnNldChmdW5jdGlvbiAoY3VycikgeyByZXR1cm4gY3Vyci5zbGljZSgpLmZpbHRlcihjYWxsYmFja0ZuLCB0aGlzQXJnKTsgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVtb3ZlQXQ6IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgICAgIGFjdGlvbnMuc2V0KGZ1bmN0aW9uIChjdXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhcnIgPSBjdXJyLnNsaWNlKCk7XG4gICAgICAgICAgICAgICAgICAgIGFyci5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJyO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNsZWFyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgYWN0aW9ucy5zZXQoW10pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlc2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgYWN0aW9ucy5zZXQocmVzb2x2ZUhvb2tTdGF0ZShpbml0aWFsTGlzdCkuc2xpY2UoKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQGRlcHJlY2F0ZWQgVXNlIHJlbW92ZUF0IG1ldGhvZCBpbnN0ZWFkXG4gICAgICAgICAqL1xuICAgICAgICBhLnJlbW92ZSA9IGEucmVtb3ZlQXQ7XG4gICAgICAgIHJldHVybiBhO1xuICAgIH0sIFtdKTtcbiAgICByZXR1cm4gW2xpc3QuY3VycmVudCwgYWN0aW9uc107XG59XG5leHBvcnQgZGVmYXVsdCB1c2VMaXN0O1xuIiwiaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZVN0YXRlLCB1c2VSZWYsIHVzZUxheW91dEVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGlzQnJvd3Nlciwgbm9vcCB9IGZyb20gJy4vbWlzYy91dGlsJztcbnZhciB1c2VMb2NhbFN0b3JhZ2UgPSBmdW5jdGlvbiAoa2V5LCBpbml0aWFsVmFsdWUsIG9wdGlvbnMpIHtcbiAgICBpZiAoIWlzQnJvd3Nlcikge1xuICAgICAgICByZXR1cm4gW2luaXRpYWxWYWx1ZSwgbm9vcCwgbm9vcF07XG4gICAgfVxuICAgIGlmICgha2V5KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigndXNlTG9jYWxTdG9yYWdlIGtleSBtYXkgbm90IGJlIGZhbHN5Jyk7XG4gICAgfVxuICAgIHZhciBkZXNlcmlhbGl6ZXIgPSBvcHRpb25zXG4gICAgICAgID8gb3B0aW9ucy5yYXdcbiAgICAgICAgICAgID8gZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB2YWx1ZTsgfVxuICAgICAgICAgICAgOiBvcHRpb25zLmRlc2VyaWFsaXplclxuICAgICAgICA6IEpTT04ucGFyc2U7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL3J1bGVzLW9mLWhvb2tzXG4gICAgdmFyIGluaXRpYWxpemVyID0gdXNlUmVmKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBzZXJpYWxpemVyID0gb3B0aW9ucyA/IChvcHRpb25zLnJhdyA/IFN0cmluZyA6IG9wdGlvbnMuc2VyaWFsaXplcikgOiBKU09OLnN0cmluZ2lmeTtcbiAgICAgICAgICAgIHZhciBsb2NhbFN0b3JhZ2VWYWx1ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICAgICAgICAgICBpZiAobG9jYWxTdG9yYWdlVmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVzZXJpYWxpemVyKGxvY2FsU3RvcmFnZVZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGluaXRpYWxWYWx1ZSAmJiBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIHNlcmlhbGl6ZXIoaW5pdGlhbFZhbHVlKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGluaXRpYWxWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgICAgIC8vIElmIHVzZXIgaXMgaW4gcHJpdmF0ZSBtb2RlIG9yIGhhcyBzdG9yYWdlIHJlc3RyaWN0aW9uXG4gICAgICAgICAgICAvLyBsb2NhbFN0b3JhZ2UgY2FuIHRocm93LiBKU09OLnBhcnNlIGFuZCBKU09OLnN0cmluZ2lmeVxuICAgICAgICAgICAgLy8gY2FuIHRocm93LCB0b28uXG4gICAgICAgICAgICByZXR1cm4gaW5pdGlhbFZhbHVlO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL3J1bGVzLW9mLWhvb2tzXG4gICAgdmFyIF9hID0gdXNlU3RhdGUoZnVuY3Rpb24gKCkgeyByZXR1cm4gaW5pdGlhbGl6ZXIuY3VycmVudChrZXkpOyB9KSwgc3RhdGUgPSBfYVswXSwgc2V0U3RhdGUgPSBfYVsxXTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvcnVsZXMtb2YtaG9va3NcbiAgICB1c2VMYXlvdXRFZmZlY3QoZnVuY3Rpb24gKCkgeyByZXR1cm4gc2V0U3RhdGUoaW5pdGlhbGl6ZXIuY3VycmVudChrZXkpKTsgfSwgW2tleV0pO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9ydWxlcy1vZi1ob29rc1xuICAgIHZhciBzZXQgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAodmFsT3JGdW5jKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgbmV3U3RhdGUgPSB0eXBlb2YgdmFsT3JGdW5jID09PSAnZnVuY3Rpb24nID8gdmFsT3JGdW5jKHN0YXRlKSA6IHZhbE9yRnVuYztcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbmV3U3RhdGUgPT09ICd1bmRlZmluZWQnKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHZvaWQgMDtcbiAgICAgICAgICAgIGlmIChvcHRpb25zKVxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnJhdylcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBuZXdTdGF0ZSA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IG5ld1N0YXRlO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IEpTT04uc3RyaW5naWZ5KG5ld1N0YXRlKTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChvcHRpb25zLnNlcmlhbGl6ZXIpXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gb3B0aW9ucy5zZXJpYWxpemVyKG5ld1N0YXRlKTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gSlNPTi5zdHJpbmdpZnkobmV3U3RhdGUpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHZhbHVlID0gSlNPTi5zdHJpbmdpZnkobmV3U3RhdGUpO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICBzZXRTdGF0ZShkZXNlcmlhbGl6ZXIodmFsdWUpKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgICAgIC8vIElmIHVzZXIgaXMgaW4gcHJpdmF0ZSBtb2RlIG9yIGhhcyBzdG9yYWdlIHJlc3RyaWN0aW9uXG4gICAgICAgICAgICAvLyBsb2NhbFN0b3JhZ2UgY2FuIHRocm93LiBBbHNvIEpTT04uc3RyaW5naWZ5IGNhbiB0aHJvdy5cbiAgICAgICAgfVxuICAgIH0sIFtrZXksIHNldFN0YXRlXSk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL3J1bGVzLW9mLWhvb2tzXG4gICAgdmFyIHJlbW92ZSA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG4gICAgICAgICAgICBzZXRTdGF0ZSh1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChfYSkge1xuICAgICAgICAgICAgLy8gSWYgdXNlciBpcyBpbiBwcml2YXRlIG1vZGUgb3IgaGFzIHN0b3JhZ2UgcmVzdHJpY3Rpb25cbiAgICAgICAgICAgIC8vIGxvY2FsU3RvcmFnZSBjYW4gdGhyb3cuXG4gICAgICAgIH1cbiAgICB9LCBba2V5LCBzZXRTdGF0ZV0pO1xuICAgIHJldHVybiBbc3RhdGUsIHNldCwgcmVtb3ZlXTtcbn07XG5leHBvcnQgZGVmYXVsdCB1c2VMb2NhbFN0b3JhZ2U7XG4iLCJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgaXNCcm93c2VyLCBvZmYsIG9uIH0gZnJvbSAnLi9taXNjL3V0aWwnO1xudmFyIHBhdGNoSGlzdG9yeU1ldGhvZCA9IGZ1bmN0aW9uIChtZXRob2QpIHtcbiAgICB2YXIgaGlzdG9yeSA9IHdpbmRvdy5oaXN0b3J5O1xuICAgIHZhciBvcmlnaW5hbCA9IGhpc3RvcnlbbWV0aG9kXTtcbiAgICBoaXN0b3J5W21ldGhvZF0gPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IG9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudChtZXRob2QudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgIGV2ZW50LnN0YXRlID0gc3RhdGU7XG4gICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xufTtcbmlmIChpc0Jyb3dzZXIpIHtcbiAgICBwYXRjaEhpc3RvcnlNZXRob2QoJ3B1c2hTdGF0ZScpO1xuICAgIHBhdGNoSGlzdG9yeU1ldGhvZCgncmVwbGFjZVN0YXRlJyk7XG59XG52YXIgdXNlTG9jYXRpb25TZXJ2ZXIgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgIHRyaWdnZXI6ICdsb2FkJyxcbiAgICBsZW5ndGg6IDEsXG59KTsgfTtcbnZhciBidWlsZFN0YXRlID0gZnVuY3Rpb24gKHRyaWdnZXIpIHtcbiAgICB2YXIgX2EgPSB3aW5kb3cuaGlzdG9yeSwgc3RhdGUgPSBfYS5zdGF0ZSwgbGVuZ3RoID0gX2EubGVuZ3RoO1xuICAgIHZhciBfYiA9IHdpbmRvdy5sb2NhdGlvbiwgaGFzaCA9IF9iLmhhc2gsIGhvc3QgPSBfYi5ob3N0LCBob3N0bmFtZSA9IF9iLmhvc3RuYW1lLCBocmVmID0gX2IuaHJlZiwgb3JpZ2luID0gX2Iub3JpZ2luLCBwYXRobmFtZSA9IF9iLnBhdGhuYW1lLCBwb3J0ID0gX2IucG9ydCwgcHJvdG9jb2wgPSBfYi5wcm90b2NvbCwgc2VhcmNoID0gX2Iuc2VhcmNoO1xuICAgIHJldHVybiB7XG4gICAgICAgIHRyaWdnZXI6IHRyaWdnZXIsXG4gICAgICAgIHN0YXRlOiBzdGF0ZSxcbiAgICAgICAgbGVuZ3RoOiBsZW5ndGgsXG4gICAgICAgIGhhc2g6IGhhc2gsXG4gICAgICAgIGhvc3Q6IGhvc3QsXG4gICAgICAgIGhvc3RuYW1lOiBob3N0bmFtZSxcbiAgICAgICAgaHJlZjogaHJlZixcbiAgICAgICAgb3JpZ2luOiBvcmlnaW4sXG4gICAgICAgIHBhdGhuYW1lOiBwYXRobmFtZSxcbiAgICAgICAgcG9ydDogcG9ydCxcbiAgICAgICAgcHJvdG9jb2w6IHByb3RvY29sLFxuICAgICAgICBzZWFyY2g6IHNlYXJjaCxcbiAgICB9O1xufTtcbnZhciB1c2VMb2NhdGlvbkJyb3dzZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9hID0gdXNlU3RhdGUoYnVpbGRTdGF0ZSgnbG9hZCcpKSwgc3RhdGUgPSBfYVswXSwgc2V0U3RhdGUgPSBfYVsxXTtcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgb25Qb3BzdGF0ZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNldFN0YXRlKGJ1aWxkU3RhdGUoJ3BvcHN0YXRlJykpOyB9O1xuICAgICAgICB2YXIgb25QdXNoc3RhdGUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBzZXRTdGF0ZShidWlsZFN0YXRlKCdwdXNoc3RhdGUnKSk7IH07XG4gICAgICAgIHZhciBvblJlcGxhY2VzdGF0ZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNldFN0YXRlKGJ1aWxkU3RhdGUoJ3JlcGxhY2VzdGF0ZScpKTsgfTtcbiAgICAgICAgb24od2luZG93LCAncG9wc3RhdGUnLCBvblBvcHN0YXRlKTtcbiAgICAgICAgb24od2luZG93LCAncHVzaHN0YXRlJywgb25QdXNoc3RhdGUpO1xuICAgICAgICBvbih3aW5kb3csICdyZXBsYWNlc3RhdGUnLCBvblJlcGxhY2VzdGF0ZSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBvZmYod2luZG93LCAncG9wc3RhdGUnLCBvblBvcHN0YXRlKTtcbiAgICAgICAgICAgIG9mZih3aW5kb3csICdwdXNoc3RhdGUnLCBvblB1c2hzdGF0ZSk7XG4gICAgICAgICAgICBvZmYod2luZG93LCAncmVwbGFjZXN0YXRlJywgb25SZXBsYWNlc3RhdGUpO1xuICAgICAgICB9O1xuICAgIH0sIFtdKTtcbiAgICByZXR1cm4gc3RhdGU7XG59O1xudmFyIGhhc0V2ZW50Q29uc3RydWN0b3IgPSB0eXBlb2YgRXZlbnQgPT09ICdmdW5jdGlvbic7XG5leHBvcnQgZGVmYXVsdCBpc0Jyb3dzZXIgJiYgaGFzRXZlbnRDb25zdHJ1Y3RvciA/IHVzZUxvY2F0aW9uQnJvd3NlciA6IHVzZUxvY2F0aW9uU2VydmVyO1xuIiwiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBpc0Jyb3dzZXIsIG9mZiwgb24gfSBmcm9tICcuL21pc2MvdXRpbCc7XG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2xvc2VzdEJvZHkoZWwpIHtcbiAgICBpZiAoIWVsKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBlbHNlIGlmIChlbC50YWdOYW1lID09PSAnQk9EWScpIHtcbiAgICAgICAgcmV0dXJuIGVsO1xuICAgIH1cbiAgICBlbHNlIGlmIChlbC50YWdOYW1lID09PSAnSUZSQU1FJykge1xuICAgICAgICB2YXIgZG9jdW1lbnRfMSA9IGVsLmNvbnRlbnREb2N1bWVudDtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50XzEgPyBkb2N1bWVudF8xLmJvZHkgOiBudWxsO1xuICAgIH1cbiAgICBlbHNlIGlmICghZWwub2Zmc2V0UGFyZW50KSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gZ2V0Q2xvc2VzdEJvZHkoZWwub2Zmc2V0UGFyZW50KTtcbn1cbmZ1bmN0aW9uIHByZXZlbnREZWZhdWx0KHJhd0V2ZW50KSB7XG4gICAgdmFyIGUgPSByYXdFdmVudCB8fCB3aW5kb3cuZXZlbnQ7XG4gICAgLy8gRG8gbm90IHByZXZlbnQgaWYgdGhlIGV2ZW50IGhhcyBtb3JlIHRoYW4gb25lIHRvdWNoICh1c3VhbGx5IG1lYW5pbmcgdGhpcyBpcyBhIG11bHRpIHRvdWNoIGdlc3R1cmUgbGlrZSBwaW5jaCB0byB6b29tKS5cbiAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA+IDEpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGlmIChlLnByZXZlbnREZWZhdWx0KVxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgcmV0dXJuIGZhbHNlO1xufVxudmFyIGlzSW9zRGV2aWNlID0gaXNCcm93c2VyICYmXG4gICAgd2luZG93Lm5hdmlnYXRvciAmJlxuICAgIHdpbmRvdy5uYXZpZ2F0b3IucGxhdGZvcm0gJiZcbiAgICAvaVAoYWR8aG9uZXxvZCkvLnRlc3Qod2luZG93Lm5hdmlnYXRvci5wbGF0Zm9ybSk7XG52YXIgYm9kaWVzID0gbmV3IE1hcCgpO1xudmFyIGRvYyA9IHR5cGVvZiBkb2N1bWVudCA9PT0gJ29iamVjdCcgPyBkb2N1bWVudCA6IHVuZGVmaW5lZDtcbnZhciBkb2N1bWVudExpc3RlbmVyQWRkZWQgPSBmYWxzZTtcbmV4cG9ydCBkZWZhdWx0ICFkb2NcbiAgICA/IGZ1bmN0aW9uIHVzZUxvY2tCb2R5TW9jayhfbG9ja2VkLCBfZWxlbWVudFJlZikge1xuICAgICAgICBpZiAoX2xvY2tlZCA9PT0gdm9pZCAwKSB7IF9sb2NrZWQgPSB0cnVlOyB9XG4gICAgfVxuICAgIDogZnVuY3Rpb24gdXNlTG9ja0JvZHkobG9ja2VkLCBlbGVtZW50UmVmKSB7XG4gICAgICAgIGlmIChsb2NrZWQgPT09IHZvaWQgMCkgeyBsb2NrZWQgPSB0cnVlOyB9XG4gICAgICAgIHZhciBib2R5UmVmID0gdXNlUmVmKGRvYy5ib2R5KTtcbiAgICAgICAgZWxlbWVudFJlZiA9IGVsZW1lbnRSZWYgfHwgYm9keVJlZjtcbiAgICAgICAgdmFyIGxvY2sgPSBmdW5jdGlvbiAoYm9keSkge1xuICAgICAgICAgICAgdmFyIGJvZHlJbmZvID0gYm9kaWVzLmdldChib2R5KTtcbiAgICAgICAgICAgIGlmICghYm9keUluZm8pIHtcbiAgICAgICAgICAgICAgICBib2RpZXMuc2V0KGJvZHksIHsgY291bnRlcjogMSwgaW5pdGlhbE92ZXJmbG93OiBib2R5LnN0eWxlLm92ZXJmbG93IH0pO1xuICAgICAgICAgICAgICAgIGlmIChpc0lvc0RldmljZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWRvY3VtZW50TGlzdGVuZXJBZGRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb24oZG9jdW1lbnQsICd0b3VjaG1vdmUnLCBwcmV2ZW50RGVmYXVsdCwgeyBwYXNzaXZlOiBmYWxzZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50TGlzdGVuZXJBZGRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBib2RpZXMuc2V0KGJvZHksIHtcbiAgICAgICAgICAgICAgICAgICAgY291bnRlcjogYm9keUluZm8uY291bnRlciArIDEsXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxPdmVyZmxvdzogYm9keUluZm8uaW5pdGlhbE92ZXJmbG93LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB2YXIgdW5sb2NrID0gZnVuY3Rpb24gKGJvZHkpIHtcbiAgICAgICAgICAgIHZhciBib2R5SW5mbyA9IGJvZGllcy5nZXQoYm9keSk7XG4gICAgICAgICAgICBpZiAoYm9keUluZm8pIHtcbiAgICAgICAgICAgICAgICBpZiAoYm9keUluZm8uY291bnRlciA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBib2RpZXMuZGVsZXRlKGJvZHkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNJb3NEZXZpY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkub250b3VjaG1vdmUgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50TGlzdGVuZXJBZGRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZihkb2N1bWVudCwgJ3RvdWNobW92ZScsIHByZXZlbnREZWZhdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudExpc3RlbmVyQWRkZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkuc3R5bGUub3ZlcmZsb3cgPSBib2R5SW5mby5pbml0aWFsT3ZlcmZsb3c7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJvZGllcy5zZXQoYm9keSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY291bnRlcjogYm9keUluZm8uY291bnRlciAtIDEsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsT3ZlcmZsb3c6IGJvZHlJbmZvLmluaXRpYWxPdmVyZmxvdyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGJvZHkgPSBnZXRDbG9zZXN0Qm9keShlbGVtZW50UmVmLmN1cnJlbnQpO1xuICAgICAgICAgICAgaWYgKCFib2R5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGxvY2tlZCkge1xuICAgICAgICAgICAgICAgIGxvY2soYm9keSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1bmxvY2soYm9keSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIFtsb2NrZWQsIGVsZW1lbnRSZWYuY3VycmVudF0pO1xuICAgICAgICAvLyBjbGVhbiB1cCwgb24gdW4tbW91bnRcbiAgICAgICAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBib2R5ID0gZ2V0Q2xvc2VzdEJvZHkoZWxlbWVudFJlZi5jdXJyZW50KTtcbiAgICAgICAgICAgIGlmICghYm9keSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdW5sb2NrKGJvZHkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSwgW10pO1xuICAgIH07XG4iLCJpbXBvcnQgeyBfX3NwcmVhZEFycmF5cyB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHVzZUVmZmVjdE9uY2UgZnJvbSAnLi91c2VFZmZlY3RPbmNlJztcbmltcG9ydCB1c2VVcGRhdGVFZmZlY3QgZnJvbSAnLi91c2VVcGRhdGVFZmZlY3QnO1xudmFyIHVzZUxvZ2dlciA9IGZ1bmN0aW9uIChjb21wb25lbnROYW1lKSB7XG4gICAgdmFyIHJlc3QgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICByZXN0W19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICB1c2VFZmZlY3RPbmNlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgX19zcHJlYWRBcnJheXMoW2NvbXBvbmVudE5hbWUgKyBcIiBtb3VudGVkXCJdLCByZXN0KSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiBjb25zb2xlLmxvZyhjb21wb25lbnROYW1lICsgXCIgdW5tb3VudGVkXCIpOyB9O1xuICAgIH0pO1xuICAgIHVzZVVwZGF0ZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIF9fc3ByZWFkQXJyYXlzKFtjb21wb25lbnROYW1lICsgXCIgdXBkYXRlZFwiXSwgcmVzdCkpO1xuICAgIH0pO1xufTtcbmV4cG9ydCBkZWZhdWx0IHVzZUxvZ2dlcjtcbiIsImltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBvZmYsIG9uIH0gZnJvbSAnLi9taXNjL3V0aWwnO1xudmFyIGlzVG91Y2hFdmVudCA9IGZ1bmN0aW9uIChldikge1xuICAgIHJldHVybiAndG91Y2hlcycgaW4gZXY7XG59O1xudmFyIHByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24gKGV2KSB7XG4gICAgaWYgKCFpc1RvdWNoRXZlbnQoZXYpKVxuICAgICAgICByZXR1cm47XG4gICAgaWYgKGV2LnRvdWNoZXMubGVuZ3RoIDwgMiAmJiBldi5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbn07XG52YXIgdXNlTG9uZ1ByZXNzID0gZnVuY3Rpb24gKGNhbGxiYWNrLCBfYSkge1xuICAgIHZhciBfYiA9IF9hID09PSB2b2lkIDAgPyB7fSA6IF9hLCBfYyA9IF9iLmlzUHJldmVudERlZmF1bHQsIGlzUHJldmVudERlZmF1bHQgPSBfYyA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9jLCBfZCA9IF9iLmRlbGF5LCBkZWxheSA9IF9kID09PSB2b2lkIDAgPyAzMDAgOiBfZDtcbiAgICB2YXIgdGltZW91dCA9IHVzZVJlZigpO1xuICAgIHZhciB0YXJnZXQgPSB1c2VSZWYoKTtcbiAgICB2YXIgc3RhcnQgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgLy8gcHJldmVudCBnaG9zdCBjbGljayBvbiBtb2JpbGUgZGV2aWNlc1xuICAgICAgICBpZiAoaXNQcmV2ZW50RGVmYXVsdCAmJiBldmVudC50YXJnZXQpIHtcbiAgICAgICAgICAgIG9uKGV2ZW50LnRhcmdldCwgJ3RvdWNoZW5kJywgcHJldmVudERlZmF1bHQsIHsgcGFzc2l2ZTogZmFsc2UgfSk7XG4gICAgICAgICAgICB0YXJnZXQuY3VycmVudCA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgfVxuICAgICAgICB0aW1lb3V0LmN1cnJlbnQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNhbGxiYWNrKGV2ZW50KTsgfSwgZGVsYXkpO1xuICAgIH0sIFtjYWxsYmFjaywgZGVsYXksIGlzUHJldmVudERlZmF1bHRdKTtcbiAgICB2YXIgY2xlYXIgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIGNsZWFyVGltZW91dCBhbmQgcmVtb3ZlRXZlbnRMaXN0ZW5lclxuICAgICAgICB0aW1lb3V0LmN1cnJlbnQgJiYgY2xlYXJUaW1lb3V0KHRpbWVvdXQuY3VycmVudCk7XG4gICAgICAgIGlmIChpc1ByZXZlbnREZWZhdWx0ICYmIHRhcmdldC5jdXJyZW50KSB7XG4gICAgICAgICAgICBvZmYodGFyZ2V0LmN1cnJlbnQsICd0b3VjaGVuZCcsIHByZXZlbnREZWZhdWx0KTtcbiAgICAgICAgfVxuICAgIH0sIFtpc1ByZXZlbnREZWZhdWx0XSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgb25Nb3VzZURvd246IGZ1bmN0aW9uIChlKSB7IHJldHVybiBzdGFydChlKTsgfSxcbiAgICAgICAgb25Ub3VjaFN0YXJ0OiBmdW5jdGlvbiAoZSkgeyByZXR1cm4gc3RhcnQoZSk7IH0sXG4gICAgICAgIG9uTW91c2VVcDogY2xlYXIsXG4gICAgICAgIG9uTW91c2VMZWF2ZTogY2xlYXIsXG4gICAgICAgIG9uVG91Y2hFbmQ6IGNsZWFyLFxuICAgIH07XG59O1xuZXhwb3J0IGRlZmF1bHQgdXNlTG9uZ1ByZXNzO1xuIiwiaW1wb3J0IHsgX19hc3NpZ24sIF9fcmVzdCB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZU1lbW8sIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xudmFyIHVzZU1hcCA9IGZ1bmN0aW9uIChpbml0aWFsTWFwKSB7XG4gICAgaWYgKGluaXRpYWxNYXAgPT09IHZvaWQgMCkgeyBpbml0aWFsTWFwID0ge307IH1cbiAgICB2YXIgX2EgPSB1c2VTdGF0ZShpbml0aWFsTWFwKSwgbWFwID0gX2FbMF0sIHNldCA9IF9hWzFdO1xuICAgIHZhciBzdGFibGVBY3Rpb25zID0gdXNlTWVtbyhmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChrZXksIGVudHJ5KSB7XG4gICAgICAgICAgICBzZXQoZnVuY3Rpb24gKHByZXZNYXApIHtcbiAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChfX2Fzc2lnbihfX2Fzc2lnbih7fSwgcHJldk1hcCksIChfYSA9IHt9LCBfYVtrZXldID0gZW50cnksIF9hKSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldEFsbDogZnVuY3Rpb24gKG5ld01hcCkge1xuICAgICAgICAgICAgc2V0KG5ld01hcCk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgc2V0KGZ1bmN0aW9uIChwcmV2TWFwKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9hID0gcHJldk1hcCwgX2IgPSBrZXksIG9taXQgPSBfYVtfYl0sIHJlc3QgPSBfX3Jlc3QoX2EsIFt0eXBlb2YgX2IgPT09IFwic3ltYm9sXCIgPyBfYiA6IF9iICsgXCJcIl0pO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN0O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlc2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZXQoaW5pdGlhbE1hcCk7IH0sXG4gICAgfSk7IH0sIFtzZXRdKTtcbiAgICB2YXIgdXRpbHMgPSBfX2Fzc2lnbih7IGdldDogdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gbWFwW2tleV07IH0sIFttYXBdKSB9LCBzdGFibGVBY3Rpb25zKTtcbiAgICByZXR1cm4gW21hcCwgdXRpbHNdO1xufTtcbmV4cG9ydCBkZWZhdWx0IHVzZU1hcDtcbiIsImltcG9ydCB7IHVzZU1lbW8sIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QgZnJvbSAnLi91c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0JztcbmltcG9ydCB7IGlzQnJvd3Nlciwgbm9vcCB9IGZyb20gJy4vbWlzYy91dGlsJztcbnZhciBkZWZhdWx0U3RhdGUgPSB7XG4gICAgeDogMCxcbiAgICB5OiAwLFxuICAgIHdpZHRoOiAwLFxuICAgIGhlaWdodDogMCxcbiAgICB0b3A6IDAsXG4gICAgbGVmdDogMCxcbiAgICBib3R0b206IDAsXG4gICAgcmlnaHQ6IDAsXG59O1xuZnVuY3Rpb24gdXNlTWVhc3VyZSgpIHtcbiAgICB2YXIgX2EgPSB1c2VTdGF0ZShudWxsKSwgZWxlbWVudCA9IF9hWzBdLCByZWYgPSBfYVsxXTtcbiAgICB2YXIgX2IgPSB1c2VTdGF0ZShkZWZhdWx0U3RhdGUpLCByZWN0ID0gX2JbMF0sIHNldFJlY3QgPSBfYlsxXTtcbiAgICB2YXIgb2JzZXJ2ZXIgPSB1c2VNZW1vKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB3aW5kb3cuUmVzaXplT2JzZXJ2ZXIoZnVuY3Rpb24gKGVudHJpZXMpIHtcbiAgICAgICAgICAgIGlmIChlbnRyaWVzWzBdKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9hID0gZW50cmllc1swXS5jb250ZW50UmVjdCwgeCA9IF9hLngsIHkgPSBfYS55LCB3aWR0aCA9IF9hLndpZHRoLCBoZWlnaHQgPSBfYS5oZWlnaHQsIHRvcF8xID0gX2EudG9wLCBsZWZ0ID0gX2EubGVmdCwgYm90dG9tID0gX2EuYm90dG9tLCByaWdodCA9IF9hLnJpZ2h0O1xuICAgICAgICAgICAgICAgIHNldFJlY3QoeyB4OiB4LCB5OiB5LCB3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0LCB0b3A6IHRvcF8xLCBsZWZ0OiBsZWZ0LCBib3R0b206IGJvdHRvbSwgcmlnaHQ6IHJpZ2h0IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LCBbXSk7XG4gICAgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghZWxlbWVudClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShlbGVtZW50KTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgfTtcbiAgICB9LCBbZWxlbWVudF0pO1xuICAgIHJldHVybiBbcmVmLCByZWN0XTtcbn1cbmV4cG9ydCBkZWZhdWx0IGlzQnJvd3NlciAmJiB0eXBlb2Ygd2luZG93LlJlc2l6ZU9ic2VydmVyICE9PSAndW5kZWZpbmVkJ1xuICAgID8gdXNlTWVhc3VyZVxuICAgIDogKGZ1bmN0aW9uICgpIHsgcmV0dXJuIFtub29wLCBkZWZhdWx0U3RhdGVdOyB9KTtcbiIsImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBpc0Jyb3dzZXIgfSBmcm9tICcuL21pc2MvdXRpbCc7XG52YXIgdXNlTWVkaWEgPSBmdW5jdGlvbiAocXVlcnksIGRlZmF1bHRTdGF0ZSkge1xuICAgIGlmIChkZWZhdWx0U3RhdGUgPT09IHZvaWQgMCkgeyBkZWZhdWx0U3RhdGUgPSBmYWxzZTsgfVxuICAgIHZhciBfYSA9IHVzZVN0YXRlKGlzQnJvd3NlciA/IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHdpbmRvdy5tYXRjaE1lZGlhKHF1ZXJ5KS5tYXRjaGVzOyB9IDogZGVmYXVsdFN0YXRlKSwgc3RhdGUgPSBfYVswXSwgc2V0U3RhdGUgPSBfYVsxXTtcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbW91bnRlZCA9IHRydWU7XG4gICAgICAgIHZhciBtcWwgPSB3aW5kb3cubWF0Y2hNZWRpYShxdWVyeSk7XG4gICAgICAgIHZhciBvbkNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghbW91bnRlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldFN0YXRlKCEhbXFsLm1hdGNoZXMpO1xuICAgICAgICB9O1xuICAgICAgICBtcWwuYWRkTGlzdGVuZXIob25DaGFuZ2UpO1xuICAgICAgICBzZXRTdGF0ZShtcWwubWF0Y2hlcyk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBtb3VudGVkID0gZmFsc2U7XG4gICAgICAgICAgICBtcWwucmVtb3ZlTGlzdGVuZXIob25DaGFuZ2UpO1xuICAgICAgICB9O1xuICAgIH0sIFtxdWVyeV0pO1xuICAgIHJldHVybiBzdGF0ZTtcbn07XG5leHBvcnQgZGVmYXVsdCB1c2VNZWRpYTtcbiIsImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBpc05hdmlnYXRvciwgbm9vcCwgb2ZmLCBvbiB9IGZyb20gJy4vbWlzYy91dGlsJztcbnZhciB1c2VNZWRpYURldmljZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9hID0gdXNlU3RhdGUoe30pLCBzdGF0ZSA9IF9hWzBdLCBzZXRTdGF0ZSA9IF9hWzFdO1xuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBtb3VudGVkID0gdHJ1ZTtcbiAgICAgICAgdmFyIG9uQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlc1xuICAgICAgICAgICAgICAgIC5lbnVtZXJhdGVEZXZpY2VzKClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZGV2aWNlcykge1xuICAgICAgICAgICAgICAgIGlmIChtb3VudGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldmljZXM6IGRldmljZXMubWFwKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZXZpY2VJZCA9IF9hLmRldmljZUlkLCBncm91cElkID0gX2EuZ3JvdXBJZCwga2luZCA9IF9hLmtpbmQsIGxhYmVsID0gX2EubGFiZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldmljZUlkOiBkZXZpY2VJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogZ3JvdXBJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2luZDoga2luZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGxhYmVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKG5vb3ApO1xuICAgICAgICB9O1xuICAgICAgICBvbihuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLCAnZGV2aWNlY2hhbmdlJywgb25DaGFuZ2UpO1xuICAgICAgICBvbkNoYW5nZSgpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbW91bnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgb2ZmKG5hdmlnYXRvci5tZWRpYURldmljZXMsICdkZXZpY2VjaGFuZ2UnLCBvbkNoYW5nZSk7XG4gICAgICAgIH07XG4gICAgfSwgW10pO1xuICAgIHJldHVybiBzdGF0ZTtcbn07XG52YXIgdXNlTWVkaWFEZXZpY2VzTW9jayA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7fSk7IH07XG5leHBvcnQgZGVmYXVsdCBpc05hdmlnYXRvciAmJiAhIW5hdmlnYXRvci5tZWRpYURldmljZXMgPyB1c2VNZWRpYURldmljZXMgOiB1c2VNZWRpYURldmljZXNNb2NrO1xuIiwiaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5leHBvcnQgZnVuY3Rpb24gdXNlTWVkaWF0ZWRTdGF0ZShtZWRpYXRvciwgaW5pdGlhbFN0YXRlKSB7XG4gICAgdmFyIG1lZGlhdG9yRm4gPSB1c2VSZWYobWVkaWF0b3IpO1xuICAgIHZhciBfYSA9IHVzZVN0YXRlKGluaXRpYWxTdGF0ZSksIHN0YXRlID0gX2FbMF0sIHNldE1lZGlhdGVkU3RhdGUgPSBfYVsxXTtcbiAgICB2YXIgc2V0U3RhdGUgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAobmV3U3RhdGUpIHtcbiAgICAgICAgaWYgKG1lZGlhdG9yRm4uY3VycmVudC5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgIG1lZGlhdG9yRm4uY3VycmVudChuZXdTdGF0ZSwgc2V0TWVkaWF0ZWRTdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzZXRNZWRpYXRlZFN0YXRlKG1lZGlhdG9yRm4uY3VycmVudChuZXdTdGF0ZSkpO1xuICAgICAgICB9XG4gICAgfSwgW3N0YXRlXSk7XG4gICAgcmV0dXJuIFtzdGF0ZSwgc2V0U3RhdGVdO1xufVxuIiwiaW1wb3J0IHsgdXNlTWVtbywgdXNlUmVkdWNlciB9IGZyb20gJ3JlYWN0JztcbnZhciB1c2VNZXRob2RzID0gZnVuY3Rpb24gKGNyZWF0ZU1ldGhvZHMsIGluaXRpYWxTdGF0ZSkge1xuICAgIHZhciByZWR1Y2VyID0gdXNlTWVtbyhmdW5jdGlvbiAoKSB7IHJldHVybiBmdW5jdGlvbiAocmVkdWNlclN0YXRlLCBhY3Rpb24pIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gKF9hID0gY3JlYXRlTWV0aG9kcyhyZWR1Y2VyU3RhdGUpKVthY3Rpb24udHlwZV0uYXBwbHkoX2EsIGFjdGlvbi5wYXlsb2FkKTtcbiAgICB9OyB9LCBbY3JlYXRlTWV0aG9kc10pO1xuICAgIHZhciBfYSA9IHVzZVJlZHVjZXIocmVkdWNlciwgaW5pdGlhbFN0YXRlKSwgc3RhdGUgPSBfYVswXSwgZGlzcGF0Y2ggPSBfYVsxXTtcbiAgICB2YXIgd3JhcHBlZE1ldGhvZHMgPSB1c2VNZW1vKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFjdGlvblR5cGVzID0gT2JqZWN0LmtleXMoY3JlYXRlTWV0aG9kcyhpbml0aWFsU3RhdGUpKTtcbiAgICAgICAgcmV0dXJuIGFjdGlvblR5cGVzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCB0eXBlKSB7XG4gICAgICAgICAgICBhY2NbdHlwZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBheWxvYWQgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCh7IHR5cGU6IHR5cGUsIHBheWxvYWQ6IHBheWxvYWQgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwge30pO1xuICAgIH0sIFtjcmVhdGVNZXRob2RzLCBpbml0aWFsU3RhdGVdKTtcbiAgICByZXR1cm4gW3N0YXRlLCB3cmFwcGVkTWV0aG9kc107XG59O1xuZXhwb3J0IGRlZmF1bHQgdXNlTWV0aG9kcztcbiIsImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBvZmYsIG9uIH0gZnJvbSAnLi9taXNjL3V0aWwnO1xudmFyIGRlZmF1bHRTdGF0ZSA9IHtcbiAgICBhY2NlbGVyYXRpb246IHtcbiAgICAgICAgeDogbnVsbCxcbiAgICAgICAgeTogbnVsbCxcbiAgICAgICAgejogbnVsbCxcbiAgICB9LFxuICAgIGFjY2VsZXJhdGlvbkluY2x1ZGluZ0dyYXZpdHk6IHtcbiAgICAgICAgeDogbnVsbCxcbiAgICAgICAgeTogbnVsbCxcbiAgICAgICAgejogbnVsbCxcbiAgICB9LFxuICAgIHJvdGF0aW9uUmF0ZToge1xuICAgICAgICBhbHBoYTogbnVsbCxcbiAgICAgICAgYmV0YTogbnVsbCxcbiAgICAgICAgZ2FtbWE6IG51bGwsXG4gICAgfSxcbiAgICBpbnRlcnZhbDogMTYsXG59O1xudmFyIHVzZU1vdGlvbiA9IGZ1bmN0aW9uIChpbml0aWFsU3RhdGUpIHtcbiAgICBpZiAoaW5pdGlhbFN0YXRlID09PSB2b2lkIDApIHsgaW5pdGlhbFN0YXRlID0gZGVmYXVsdFN0YXRlOyB9XG4gICAgdmFyIF9hID0gdXNlU3RhdGUoaW5pdGlhbFN0YXRlKSwgc3RhdGUgPSBfYVswXSwgc2V0U3RhdGUgPSBfYVsxXTtcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIGFjY2VsZXJhdGlvbiA9IGV2ZW50LmFjY2VsZXJhdGlvbiwgYWNjZWxlcmF0aW9uSW5jbHVkaW5nR3Jhdml0eSA9IGV2ZW50LmFjY2VsZXJhdGlvbkluY2x1ZGluZ0dyYXZpdHksIHJvdGF0aW9uUmF0ZSA9IGV2ZW50LnJvdGF0aW9uUmF0ZSwgaW50ZXJ2YWwgPSBldmVudC5pbnRlcnZhbDtcbiAgICAgICAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBhY2NlbGVyYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgeDogYWNjZWxlcmF0aW9uLngsXG4gICAgICAgICAgICAgICAgICAgIHk6IGFjY2VsZXJhdGlvbi55LFxuICAgICAgICAgICAgICAgICAgICB6OiBhY2NlbGVyYXRpb24ueixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGFjY2VsZXJhdGlvbkluY2x1ZGluZ0dyYXZpdHk6IHtcbiAgICAgICAgICAgICAgICAgICAgeDogYWNjZWxlcmF0aW9uSW5jbHVkaW5nR3Jhdml0eS54LFxuICAgICAgICAgICAgICAgICAgICB5OiBhY2NlbGVyYXRpb25JbmNsdWRpbmdHcmF2aXR5LnksXG4gICAgICAgICAgICAgICAgICAgIHo6IGFjY2VsZXJhdGlvbkluY2x1ZGluZ0dyYXZpdHkueixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJvdGF0aW9uUmF0ZToge1xuICAgICAgICAgICAgICAgICAgICBhbHBoYTogcm90YXRpb25SYXRlLmFscGhhLFxuICAgICAgICAgICAgICAgICAgICBiZXRhOiByb3RhdGlvblJhdGUuYmV0YSxcbiAgICAgICAgICAgICAgICAgICAgZ2FtbWE6IHJvdGF0aW9uUmF0ZS5nYW1tYSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGludGVydmFsOiBpbnRlcnZhbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBvbih3aW5kb3csICdkZXZpY2Vtb3Rpb24nLCBoYW5kbGVyKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG9mZih3aW5kb3csICdkZXZpY2Vtb3Rpb24nLCBoYW5kbGVyKTtcbiAgICAgICAgfTtcbiAgICB9LCBbXSk7XG4gICAgcmV0dXJuIHN0YXRlO1xufTtcbmV4cG9ydCBkZWZhdWx0IHVzZU1vdGlvbjtcbiIsImltcG9ydCB1c2VFZmZlY3RPbmNlIGZyb20gJy4vdXNlRWZmZWN0T25jZSc7XG52YXIgdXNlTW91bnQgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICB1c2VFZmZlY3RPbmNlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm4oKTtcbiAgICB9KTtcbn07XG5leHBvcnQgZGVmYXVsdCB1c2VNb3VudDtcbiIsImltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZU1vdW50ZWRTdGF0ZSgpIHtcbiAgICB2YXIgbW91bnRlZFJlZiA9IHVzZVJlZihmYWxzZSk7XG4gICAgdmFyIGdldCA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1vdW50ZWRSZWYuY3VycmVudDsgfSwgW10pO1xuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIG1vdW50ZWRSZWYuY3VycmVudCA9IHRydWU7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBtb3VudGVkUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICB9LCBbXSk7XG4gICAgcmV0dXJuIGdldDtcbn1cbiIsImltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB1c2VSYWZTdGF0ZSBmcm9tICcuL3VzZVJhZlN0YXRlJztcbmltcG9ydCB7IG9mZiwgb24gfSBmcm9tICcuL21pc2MvdXRpbCc7XG52YXIgdXNlTW91c2UgPSBmdW5jdGlvbiAocmVmKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcmVmICE9PSAnb2JqZWN0JyB8fCB0eXBlb2YgcmVmLmN1cnJlbnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCd1c2VNb3VzZSBleHBlY3RzIGEgc2luZ2xlIHJlZiBhcmd1bWVudC4nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgX2EgPSB1c2VSYWZTdGF0ZSh7XG4gICAgICAgIGRvY1g6IDAsXG4gICAgICAgIGRvY1k6IDAsXG4gICAgICAgIHBvc1g6IDAsXG4gICAgICAgIHBvc1k6IDAsXG4gICAgICAgIGVsWDogMCxcbiAgICAgICAgZWxZOiAwLFxuICAgICAgICBlbEg6IDAsXG4gICAgICAgIGVsVzogMCxcbiAgICB9KSwgc3RhdGUgPSBfYVswXSwgc2V0U3RhdGUgPSBfYVsxXTtcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbW92ZUhhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChyZWYgJiYgcmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2EgPSByZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgbGVmdCA9IF9hLmxlZnQsIHRvcF8xID0gX2EudG9wLCBlbFcgPSBfYS53aWR0aCwgZWxIID0gX2EuaGVpZ2h0O1xuICAgICAgICAgICAgICAgIHZhciBwb3NYID0gbGVmdCArIHdpbmRvdy5wYWdlWE9mZnNldDtcbiAgICAgICAgICAgICAgICB2YXIgcG9zWSA9IHRvcF8xICsgd2luZG93LnBhZ2VZT2Zmc2V0O1xuICAgICAgICAgICAgICAgIHZhciBlbFggPSBldmVudC5wYWdlWCAtIHBvc1g7XG4gICAgICAgICAgICAgICAgdmFyIGVsWSA9IGV2ZW50LnBhZ2VZIC0gcG9zWTtcbiAgICAgICAgICAgICAgICBzZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIGRvY1g6IGV2ZW50LnBhZ2VYLFxuICAgICAgICAgICAgICAgICAgICBkb2NZOiBldmVudC5wYWdlWSxcbiAgICAgICAgICAgICAgICAgICAgcG9zWDogcG9zWCxcbiAgICAgICAgICAgICAgICAgICAgcG9zWTogcG9zWSxcbiAgICAgICAgICAgICAgICAgICAgZWxYOiBlbFgsXG4gICAgICAgICAgICAgICAgICAgIGVsWTogZWxZLFxuICAgICAgICAgICAgICAgICAgICBlbEg6IGVsSCxcbiAgICAgICAgICAgICAgICAgICAgZWxXOiBlbFcsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIG9uKGRvY3VtZW50LCAnbW91c2Vtb3ZlJywgbW92ZUhhbmRsZXIpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgb2ZmKGRvY3VtZW50LCAnbW91c2Vtb3ZlJywgbW92ZUhhbmRsZXIpO1xuICAgICAgICB9O1xuICAgIH0sIFtyZWZdKTtcbiAgICByZXR1cm4gc3RhdGU7XG59O1xuZXhwb3J0IGRlZmF1bHQgdXNlTW91c2U7XG4iLCJpbXBvcnQgdXNlSG92ZXJEaXJ0eSBmcm9tICcuL3VzZUhvdmVyRGlydHknO1xuaW1wb3J0IHVzZU1vdXNlIGZyb20gJy4vdXNlTW91c2UnO1xudmFyIG51bGxSZWYgPSB7IGN1cnJlbnQ6IG51bGwgfTtcbnZhciB1c2VNb3VzZUhvdmVyZWQgPSBmdW5jdGlvbiAocmVmLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cbiAgICB2YXIgd2hlbkhvdmVyZWQgPSAhIW9wdGlvbnMud2hlbkhvdmVyZWQ7XG4gICAgdmFyIGJvdW5kID0gISFvcHRpb25zLmJvdW5kO1xuICAgIHZhciBpc0hvdmVyZWQgPSB1c2VIb3ZlckRpcnR5KHJlZiwgd2hlbkhvdmVyZWQpO1xuICAgIHZhciBzdGF0ZSA9IHVzZU1vdXNlKHdoZW5Ib3ZlcmVkICYmICFpc0hvdmVyZWQgPyBudWxsUmVmIDogcmVmKTtcbiAgICBpZiAoYm91bmQpIHtcbiAgICAgICAgc3RhdGUuZWxYID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oc3RhdGUuZWxYLCBzdGF0ZS5lbFcpKTtcbiAgICAgICAgc3RhdGUuZWxZID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oc3RhdGUuZWxZLCBzdGF0ZS5lbEgpKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0YXRlO1xufTtcbmV4cG9ydCBkZWZhdWx0IHVzZU1vdXNlSG92ZXJlZDtcbiIsImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBvZmYsIG9uIH0gZnJvbSAnLi9taXNjL3V0aWwnO1xuZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX2EgPSB1c2VTdGF0ZSgwKSwgbW91c2VXaGVlbFNjcm9sbGVkID0gX2FbMF0sIHNldE1vdXNlV2hlZWxTY3JvbGxlZCA9IF9hWzFdO1xuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB1cGRhdGVTY3JvbGwgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgc2V0TW91c2VXaGVlbFNjcm9sbGVkKGUuZGVsdGFZICsgbW91c2VXaGVlbFNjcm9sbGVkKTtcbiAgICAgICAgfTtcbiAgICAgICAgb24od2luZG93LCAnd2hlZWwnLCB1cGRhdGVTY3JvbGwsIGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIG9mZih3aW5kb3csICd3aGVlbCcsIHVwZGF0ZVNjcm9sbCk7IH07XG4gICAgfSk7XG4gICAgcmV0dXJuIG1vdXNlV2hlZWxTY3JvbGxlZDtcbn0pO1xuIiwiaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmV4cG9ydCBmdW5jdGlvbiB1c2VNdWx0aVN0YXRlVmFsaWRhdG9yKHN0YXRlcywgdmFsaWRhdG9yLCBpbml0aWFsVmFsaWRpdHkpIHtcbiAgICBpZiAoaW5pdGlhbFZhbGlkaXR5ID09PSB2b2lkIDApIHsgaW5pdGlhbFZhbGlkaXR5ID0gW3VuZGVmaW5lZF07IH1cbiAgICBpZiAodHlwZW9mIHN0YXRlcyAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzdGF0ZXMgZXhwZWN0ZWQgdG8gYmUgYW4gb2JqZWN0IG9yIGFycmF5LCBnb3QgJyArIHR5cGVvZiBzdGF0ZXMpO1xuICAgIH1cbiAgICB2YXIgdmFsaWRhdG9ySW5uZXIgPSB1c2VSZWYodmFsaWRhdG9yKTtcbiAgICB2YXIgc3RhdGVzSW5uZXIgPSB1c2VSZWYoc3RhdGVzKTtcbiAgICB2YWxpZGF0b3JJbm5lci5jdXJyZW50ID0gdmFsaWRhdG9yO1xuICAgIHN0YXRlc0lubmVyLmN1cnJlbnQgPSBzdGF0ZXM7XG4gICAgdmFyIF9hID0gdXNlU3RhdGUoaW5pdGlhbFZhbGlkaXR5KSwgdmFsaWRpdHkgPSBfYVswXSwgc2V0VmFsaWRpdHkgPSBfYVsxXTtcbiAgICB2YXIgdmFsaWRhdGUgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh2YWxpZGF0b3JJbm5lci5jdXJyZW50Lmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgICB2YWxpZGF0b3JJbm5lci5jdXJyZW50KHN0YXRlc0lubmVyLmN1cnJlbnQsIHNldFZhbGlkaXR5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNldFZhbGlkaXR5KHZhbGlkYXRvcklubmVyLmN1cnJlbnQoc3RhdGVzSW5uZXIuY3VycmVudCkpO1xuICAgICAgICB9XG4gICAgfSwgW3NldFZhbGlkaXR5XSk7XG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFsaWRhdGUoKTtcbiAgICB9LCBPYmplY3QudmFsdWVzKHN0YXRlcykpO1xuICAgIHJldHVybiBbdmFsaWRpdHksIHZhbGlkYXRlXTtcbn1cbiIsImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBpc05hdmlnYXRvciwgb2ZmLCBvbiB9IGZyb20gJy4vbWlzYy91dGlsJztcbnZhciBuYXYgPSBpc05hdmlnYXRvciA/IG5hdmlnYXRvciA6IHVuZGVmaW5lZDtcbnZhciBjb25uID0gbmF2ICYmIChuYXYuY29ubmVjdGlvbiB8fCBuYXYubW96Q29ubmVjdGlvbiB8fCBuYXYud2Via2l0Q29ubmVjdGlvbik7XG5mdW5jdGlvbiBnZXRDb25uZWN0aW9uU3RhdGUocHJldmlvdXNTdGF0ZSkge1xuICAgIHZhciBvbmxpbmUgPSBuYXYgPT09IG51bGwgfHwgbmF2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBuYXYub25MaW5lO1xuICAgIHZhciBwcmV2aW91c09ubGluZSA9IHByZXZpb3VzU3RhdGUgPT09IG51bGwgfHwgcHJldmlvdXNTdGF0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcHJldmlvdXNTdGF0ZS5vbmxpbmU7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgb25saW5lOiBvbmxpbmUsXG4gICAgICAgIHByZXZpb3VzOiBwcmV2aW91c09ubGluZSxcbiAgICAgICAgc2luY2U6IG9ubGluZSAhPT0gcHJldmlvdXNPbmxpbmUgPyBuZXcgRGF0ZSgpIDogcHJldmlvdXNTdGF0ZSA9PT0gbnVsbCB8fCBwcmV2aW91c1N0YXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwcmV2aW91c1N0YXRlLnNpbmNlLFxuICAgICAgICBkb3dubGluazogY29ubiA9PT0gbnVsbCB8fCBjb25uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb25uLmRvd25saW5rLFxuICAgICAgICBkb3dubGlua01heDogY29ubiA9PT0gbnVsbCB8fCBjb25uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb25uLmRvd25saW5rTWF4LFxuICAgICAgICBlZmZlY3RpdmVUeXBlOiBjb25uID09PSBudWxsIHx8IGNvbm4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbm4uZWZmZWN0aXZlVHlwZSxcbiAgICAgICAgcnR0OiBjb25uID09PSBudWxsIHx8IGNvbm4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbm4ucnR0LFxuICAgICAgICBzYXZlRGF0YTogY29ubiA9PT0gbnVsbCB8fCBjb25uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb25uLnNhdmVEYXRhLFxuICAgICAgICB0eXBlOiBjb25uID09PSBudWxsIHx8IGNvbm4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbm4udHlwZSxcbiAgICB9O1xufVxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlTmV0d29ya1N0YXRlKGluaXRpYWxTdGF0ZSkge1xuICAgIHZhciBfYSA9IHVzZVN0YXRlKGluaXRpYWxTdGF0ZSAhPT0gbnVsbCAmJiBpbml0aWFsU3RhdGUgIT09IHZvaWQgMCA/IGluaXRpYWxTdGF0ZSA6IGdldENvbm5lY3Rpb25TdGF0ZSksIHN0YXRlID0gX2FbMF0sIHNldFN0YXRlID0gX2FbMV07XG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGhhbmRsZVN0YXRlQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2V0U3RhdGUoZ2V0Q29ubmVjdGlvblN0YXRlKTtcbiAgICAgICAgfTtcbiAgICAgICAgb24od2luZG93LCAnb25saW5lJywgaGFuZGxlU3RhdGVDaGFuZ2UsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICAgICAgb24od2luZG93LCAnb2ZmbGluZScsIGhhbmRsZVN0YXRlQ2hhbmdlLCB7IHBhc3NpdmU6IHRydWUgfSk7XG4gICAgICAgIGlmIChjb25uKSB7XG4gICAgICAgICAgICBvbihjb25uLCAnY2hhbmdlJywgaGFuZGxlU3RhdGVDaGFuZ2UsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgb2ZmKHdpbmRvdywgJ29ubGluZScsIGhhbmRsZVN0YXRlQ2hhbmdlKTtcbiAgICAgICAgICAgIG9mZih3aW5kb3csICdvZmZsaW5lJywgaGFuZGxlU3RhdGVDaGFuZ2UpO1xuICAgICAgICAgICAgaWYgKGNvbm4pIHtcbiAgICAgICAgICAgICAgICBvZmYoY29ubiwgJ2NoYW5nZScsIGhhbmRsZVN0YXRlQ2hhbmdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9LCBbXSk7XG4gICAgcmV0dXJuIHN0YXRlO1xufVxuIiwiaW1wb3J0IHVzZU51bWJlciBmcm9tICcuL3VzZUNvdW50ZXInO1xuZXhwb3J0IGRlZmF1bHQgdXNlTnVtYmVyO1xuIiwiaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCBmcm9tICcuL3VzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QnO1xuZnVuY3Rpb24gdXNlT2JzZXJ2YWJsZShvYnNlcnZhYmxlJCwgaW5pdGlhbFZhbHVlKSB7XG4gICAgdmFyIF9hID0gdXNlU3RhdGUoaW5pdGlhbFZhbHVlKSwgdmFsdWUgPSBfYVswXSwgdXBkYXRlID0gX2FbMV07XG4gICAgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzID0gb2JzZXJ2YWJsZSQuc3Vic2NyaWJlKHVwZGF0ZSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiBzLnVuc3Vic2NyaWJlKCk7IH07XG4gICAgfSwgW29ic2VydmFibGUkXSk7XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuZXhwb3J0IGRlZmF1bHQgdXNlT2JzZXJ2YWJsZTtcbiIsImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBvZmYsIG9uIH0gZnJvbSAnLi9taXNjL3V0aWwnO1xudmFyIGRlZmF1bHRTdGF0ZSA9IHtcbiAgICBhbmdsZTogMCxcbiAgICB0eXBlOiAnbGFuZHNjYXBlLXByaW1hcnknLFxufTtcbnZhciB1c2VPcmllbnRhdGlvbiA9IGZ1bmN0aW9uIChpbml0aWFsU3RhdGUpIHtcbiAgICBpZiAoaW5pdGlhbFN0YXRlID09PSB2b2lkIDApIHsgaW5pdGlhbFN0YXRlID0gZGVmYXVsdFN0YXRlOyB9XG4gICAgdmFyIF9hID0gdXNlU3RhdGUoaW5pdGlhbFN0YXRlKSwgc3RhdGUgPSBfYVswXSwgc2V0U3RhdGUgPSBfYVsxXTtcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2NyZWVuID0gd2luZG93LnNjcmVlbjtcbiAgICAgICAgdmFyIG1vdW50ZWQgPSB0cnVlO1xuICAgICAgICB2YXIgb25DaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAobW91bnRlZCkge1xuICAgICAgICAgICAgICAgIHZhciBvcmllbnRhdGlvbl8xID0gc2NyZWVuLm9yaWVudGF0aW9uO1xuICAgICAgICAgICAgICAgIGlmIChvcmllbnRhdGlvbl8xKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhbmdsZSA9IG9yaWVudGF0aW9uXzEuYW5nbGUsIHR5cGUgPSBvcmllbnRhdGlvbl8xLnR5cGU7XG4gICAgICAgICAgICAgICAgICAgIHNldFN0YXRlKHsgYW5nbGU6IGFuZ2xlLCB0eXBlOiB0eXBlIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh3aW5kb3cub3JpZW50YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbmdsZTogdHlwZW9mIHdpbmRvdy5vcmllbnRhdGlvbiA9PT0gJ251bWJlcicgPyB3aW5kb3cub3JpZW50YXRpb24gOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJycsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0U3RhdGUoaW5pdGlhbFN0YXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIG9uKHdpbmRvdywgJ29yaWVudGF0aW9uY2hhbmdlJywgb25DaGFuZ2UpO1xuICAgICAgICBvbkNoYW5nZSgpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbW91bnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgb2ZmKHdpbmRvdywgJ29yaWVudGF0aW9uY2hhbmdlJywgb25DaGFuZ2UpO1xuICAgICAgICB9O1xuICAgIH0sIFtdKTtcbiAgICByZXR1cm4gc3RhdGU7XG59O1xuZXhwb3J0IGRlZmF1bHQgdXNlT3JpZW50YXRpb247XG4iLCJpbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBvZmYsIG9uIH0gZnJvbSAnLi9taXNjL3V0aWwnO1xudmFyIHVzZVBhZ2VMZWF2ZSA9IGZ1bmN0aW9uIChvblBhZ2VMZWF2ZSwgYXJncykge1xuICAgIGlmIChhcmdzID09PSB2b2lkIDApIHsgYXJncyA9IFtdOyB9XG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFvblBhZ2VMZWF2ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudCA9IGV2ZW50ID8gZXZlbnQgOiB3aW5kb3cuZXZlbnQ7XG4gICAgICAgICAgICB2YXIgZnJvbSA9IGV2ZW50LnJlbGF0ZWRUYXJnZXQgfHwgZXZlbnQudG9FbGVtZW50O1xuICAgICAgICAgICAgaWYgKCFmcm9tIHx8IGZyb20ubm9kZU5hbWUgPT09ICdIVE1MJykge1xuICAgICAgICAgICAgICAgIG9uUGFnZUxlYXZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIG9uKGRvY3VtZW50LCAnbW91c2VvdXQnLCBoYW5kbGVyKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG9mZihkb2N1bWVudCwgJ21vdXNlb3V0JywgaGFuZGxlcik7XG4gICAgICAgIH07XG4gICAgfSwgYXJncyk7XG59O1xuZXhwb3J0IGRlZmF1bHQgdXNlUGFnZUxlYXZlO1xuIiwiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IG5vb3AsIG9mZiwgb24gfSBmcm9tICcuL21pc2MvdXRpbCc7XG4vLyBjb25zdCB1c2VQZXJtaXNzaW9uID0gPFQgZXh0ZW5kcyBQZXJtaXNzaW9uRGVzY3JpcHRvcj4ocGVybWlzc2lvbkRlc2M6IFQpOiBJU3RhdGUgPT4ge1xudmFyIHVzZVBlcm1pc3Npb24gPSBmdW5jdGlvbiAocGVybWlzc2lvbkRlc2MpIHtcbiAgICB2YXIgX2EgPSB1c2VTdGF0ZSgnJyksIHN0YXRlID0gX2FbMF0sIHNldFN0YXRlID0gX2FbMV07XG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1vdW50ZWQgPSB0cnVlO1xuICAgICAgICB2YXIgcGVybWlzc2lvblN0YXR1cyA9IG51bGw7XG4gICAgICAgIHZhciBvbkNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghbW91bnRlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldFN0YXRlKGZ1bmN0aW9uICgpIHsgdmFyIF9hOyByZXR1cm4gKF9hID0gcGVybWlzc2lvblN0YXR1cyA9PT0gbnVsbCB8fCBwZXJtaXNzaW9uU3RhdHVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwZXJtaXNzaW9uU3RhdHVzLnN0YXRlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJzsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIG5hdmlnYXRvci5wZXJtaXNzaW9uc1xuICAgICAgICAgICAgLnF1ZXJ5KHBlcm1pc3Npb25EZXNjKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHN0YXR1cykge1xuICAgICAgICAgICAgcGVybWlzc2lvblN0YXR1cyA9IHN0YXR1cztcbiAgICAgICAgICAgIG9uKHBlcm1pc3Npb25TdGF0dXMsICdjaGFuZ2UnLCBvbkNoYW5nZSk7XG4gICAgICAgICAgICBvbkNoYW5nZSgpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKG5vb3ApO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcGVybWlzc2lvblN0YXR1cyAmJiBvZmYocGVybWlzc2lvblN0YXR1cywgJ2NoYW5nZScsIG9uQ2hhbmdlKTtcbiAgICAgICAgICAgIG1vdW50ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHBlcm1pc3Npb25TdGF0dXMgPSBudWxsO1xuICAgICAgICB9O1xuICAgIH0sIFtwZXJtaXNzaW9uRGVzY10pO1xuICAgIHJldHVybiBzdGF0ZTtcbn07XG5leHBvcnQgZGVmYXVsdCB1c2VQZXJtaXNzaW9uO1xuIiwiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VQcmV2aW91cyhzdGF0ZSkge1xuICAgIHZhciByZWYgPSB1c2VSZWYoKTtcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICByZWYuY3VycmVudCA9IHN0YXRlO1xuICAgIH0pO1xuICAgIHJldHVybiByZWYuY3VycmVudDtcbn1cbiIsImltcG9ydCB7IHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUZpcnN0TW91bnRTdGF0ZSB9IGZyb20gJy4vdXNlRmlyc3RNb3VudFN0YXRlJztcbnZhciBzdHJpY3RFcXVhbHMgPSBmdW5jdGlvbiAocHJldiwgbmV4dCkgeyByZXR1cm4gcHJldiA9PT0gbmV4dDsgfTtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZVByZXZpb3VzRGlzdGluY3QodmFsdWUsIGNvbXBhcmUpIHtcbiAgICBpZiAoY29tcGFyZSA9PT0gdm9pZCAwKSB7IGNvbXBhcmUgPSBzdHJpY3RFcXVhbHM7IH1cbiAgICB2YXIgcHJldlJlZiA9IHVzZVJlZigpO1xuICAgIHZhciBjdXJSZWYgPSB1c2VSZWYodmFsdWUpO1xuICAgIHZhciBpc0ZpcnN0TW91bnQgPSB1c2VGaXJzdE1vdW50U3RhdGUoKTtcbiAgICBpZiAoIWlzRmlyc3RNb3VudCAmJiAhY29tcGFyZShjdXJSZWYuY3VycmVudCwgdmFsdWUpKSB7XG4gICAgICAgIHByZXZSZWYuY3VycmVudCA9IGN1clJlZi5jdXJyZW50O1xuICAgICAgICBjdXJSZWYuY3VycmVudCA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gcHJldlJlZi5jdXJyZW50O1xufVxuIiwiaW1wb3J0IHsgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgdXNlTW91bnRlZFN0YXRlIGZyb20gJy4vdXNlTW91bnRlZFN0YXRlJztcbnZhciB1c2VQcm9taXNlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBpc01vdW50ZWQgPSB1c2VNb3VudGVkU3RhdGUoKTtcbiAgICByZXR1cm4gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKHByb21pc2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHZhciBvblZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaXNNb3VudGVkKCkgJiYgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIG9uRXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpc01vdW50ZWQoKSAmJiByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHByb21pc2UudGhlbihvblZhbHVlLCBvbkVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfSwgW10pO1xufTtcbmV4cG9ydCBkZWZhdWx0IHVzZVByb21pc2U7XG4iLCJpbXBvcnQgeyBfX3NwcmVhZEFycmF5cyB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG52YXIgdXNlUXVldWUgPSBmdW5jdGlvbiAoaW5pdGlhbFZhbHVlKSB7XG4gICAgaWYgKGluaXRpYWxWYWx1ZSA9PT0gdm9pZCAwKSB7IGluaXRpYWxWYWx1ZSA9IFtdOyB9XG4gICAgdmFyIF9hID0gdXNlU3RhdGUoaW5pdGlhbFZhbHVlKSwgc3RhdGUgPSBfYVswXSwgc2V0ID0gX2FbMV07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWRkOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHNldChmdW5jdGlvbiAocXVldWUpIHsgcmV0dXJuIF9fc3ByZWFkQXJyYXlzKHF1ZXVlLCBbdmFsdWVdKTsgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgICAgIHNldChmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlyc3QgPSBfYVswXSwgcmVzdCA9IF9hLnNsaWNlKDEpO1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZpcnN0O1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN0O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9LFxuICAgICAgICBnZXQgZmlyc3QoKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RhdGVbMF07XG4gICAgICAgIH0sXG4gICAgICAgIGdldCBsYXN0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHN0YXRlW3N0YXRlLmxlbmd0aCAtIDFdO1xuICAgICAgICB9LFxuICAgICAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZS5sZW5ndGg7XG4gICAgICAgIH0sXG4gICAgfTtcbn07XG5leHBvcnQgZGVmYXVsdCB1c2VRdWV1ZTtcbiIsImltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QgZnJvbSAnLi91c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0JztcbnZhciB1c2VSYWYgPSBmdW5jdGlvbiAobXMsIGRlbGF5KSB7XG4gICAgaWYgKG1zID09PSB2b2lkIDApIHsgbXMgPSAxZTEyOyB9XG4gICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsgZGVsYXkgPSAwOyB9XG4gICAgdmFyIF9hID0gdXNlU3RhdGUoMCksIGVsYXBzZWQgPSBfYVswXSwgc2V0ID0gX2FbMV07XG4gICAgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByYWY7XG4gICAgICAgIHZhciB0aW1lclN0b3A7XG4gICAgICAgIHZhciBzdGFydDtcbiAgICAgICAgdmFyIG9uRnJhbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGltZSA9IE1hdGgubWluKDEsIChEYXRlLm5vdygpIC0gc3RhcnQpIC8gbXMpO1xuICAgICAgICAgICAgc2V0KHRpbWUpO1xuICAgICAgICAgICAgbG9vcCgpO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgbG9vcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJhZiA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShvbkZyYW1lKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIG9uU3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aW1lclN0b3AgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShyYWYpO1xuICAgICAgICAgICAgICAgIHNldCgxKTtcbiAgICAgICAgICAgIH0sIG1zKTtcbiAgICAgICAgICAgIHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIGxvb3AoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHRpbWVyRGVsYXkgPSBzZXRUaW1lb3V0KG9uU3RhcnQsIGRlbGF5KTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lclN0b3ApO1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyRGVsYXkpO1xuICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUocmFmKTtcbiAgICAgICAgfTtcbiAgICB9LCBbbXMsIGRlbGF5XSk7XG4gICAgcmV0dXJuIGVsYXBzZWQ7XG59O1xuZXhwb3J0IGRlZmF1bHQgdXNlUmFmO1xuIiwiaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlUmFmTG9vcChjYWxsYmFjaywgaW5pdGlhbGx5QWN0aXZlKSB7XG4gICAgaWYgKGluaXRpYWxseUFjdGl2ZSA9PT0gdm9pZCAwKSB7IGluaXRpYWxseUFjdGl2ZSA9IHRydWU7IH1cbiAgICB2YXIgcmFmID0gdXNlUmVmKG51bGwpO1xuICAgIHZhciByYWZBY3Rpdml0eSA9IHVzZVJlZihmYWxzZSk7XG4gICAgdmFyIHJhZkNhbGxiYWNrID0gdXNlUmVmKGNhbGxiYWNrKTtcbiAgICByYWZDYWxsYmFjay5jdXJyZW50ID0gY2FsbGJhY2s7XG4gICAgdmFyIHN0ZXAgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAodGltZSkge1xuICAgICAgICBpZiAocmFmQWN0aXZpdHkuY3VycmVudCkge1xuICAgICAgICAgICAgcmFmQ2FsbGJhY2suY3VycmVudCh0aW1lKTtcbiAgICAgICAgICAgIHJhZi5jdXJyZW50ID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApO1xuICAgICAgICB9XG4gICAgfSwgW10pO1xuICAgIHZhciByZXN1bHQgPSB1c2VNZW1vKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAvLyBzdG9wXG4gICAgICAgICAgICAgICAgaWYgKHJhZkFjdGl2aXR5LmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmFmQWN0aXZpdHkuY3VycmVudCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICByYWYuY3VycmVudCAmJiBjYW5jZWxBbmltYXRpb25GcmFtZShyYWYuY3VycmVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAvLyBzdGFydFxuICAgICAgICAgICAgICAgIGlmICghcmFmQWN0aXZpdHkuY3VycmVudCkge1xuICAgICAgICAgICAgICAgICAgICByYWZBY3Rpdml0eS5jdXJyZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmFmLmN1cnJlbnQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJhZkFjdGl2aXR5LmN1cnJlbnQ7IH0sXG4gICAgICAgIF07XG4gICAgfSwgW10pO1xuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChpbml0aWFsbHlBY3RpdmUpIHtcbiAgICAgICAgICAgIHJlc3VsdFsxXSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHRbMF07XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgICB9LCBbXSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbiIsImltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHVzZVVubW91bnQgZnJvbSAnLi91c2VVbm1vdW50JztcbnZhciB1c2VSYWZTdGF0ZSA9IGZ1bmN0aW9uIChpbml0aWFsU3RhdGUpIHtcbiAgICB2YXIgZnJhbWUgPSB1c2VSZWYoMCk7XG4gICAgdmFyIF9hID0gdXNlU3RhdGUoaW5pdGlhbFN0YXRlKSwgc3RhdGUgPSBfYVswXSwgc2V0U3RhdGUgPSBfYVsxXTtcbiAgICB2YXIgc2V0UmFmU3RhdGUgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoZnJhbWUuY3VycmVudCk7XG4gICAgICAgIGZyYW1lLmN1cnJlbnQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2V0U3RhdGUodmFsdWUpO1xuICAgICAgICB9KTtcbiAgICB9LCBbXSk7XG4gICAgdXNlVW5tb3VudChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGZyYW1lLmN1cnJlbnQpO1xuICAgIH0pO1xuICAgIHJldHVybiBbc3RhdGUsIHNldFJhZlN0YXRlXTtcbn07XG5leHBvcnQgZGVmYXVsdCB1c2VSYWZTdGF0ZTtcbiIsImltcG9ydCB7IHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmV4cG9ydCBmdW5jdGlvbiB1c2VSZW5kZXJzQ291bnQoKSB7XG4gICAgcmV0dXJuICsrdXNlUmVmKDApLmN1cnJlbnQ7XG59XG4iLCJpbXBvcnQgeyBfX2Fzc2lnbiwgX19yZXN0IH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBjbG9uZUVsZW1lbnQsIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHJlbmRlciB9IGZyb20gJ3JlYWN0LXVuaXZlcnNhbC1pbnRlcmZhY2UnO1xuaW1wb3J0IHVzZUxhdGVzdCBmcm9tICcuL3VzZUxhdGVzdCc7XG5pbXBvcnQgeyBub29wLCBvZmYsIG9uIH0gZnJvbSAnLi9taXNjL3V0aWwnO1xudmFyIHVzZVNjcmF0Y2ggPSBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgaWYgKHBhcmFtcyA9PT0gdm9pZCAwKSB7IHBhcmFtcyA9IHt9OyB9XG4gICAgdmFyIGRpc2FibGVkID0gcGFyYW1zLmRpc2FibGVkO1xuICAgIHZhciBwYXJhbXNSZWYgPSB1c2VMYXRlc3QocGFyYW1zKTtcbiAgICB2YXIgX2EgPSB1c2VTdGF0ZSh7IGlzU2NyYXRjaGluZzogZmFsc2UgfSksIHN0YXRlID0gX2FbMF0sIHNldFN0YXRlID0gX2FbMV07XG4gICAgdmFyIHJlZlN0YXRlID0gdXNlUmVmKHN0YXRlKTtcbiAgICB2YXIgcmVmU2NyYXRjaGluZyA9IHVzZVJlZihmYWxzZSk7XG4gICAgdmFyIHJlZkFuaW1hdGlvbkZyYW1lID0gdXNlUmVmKG51bGwpO1xuICAgIHZhciBfYiA9IHVzZVN0YXRlKG51bGwpLCBlbCA9IF9iWzBdLCBzZXRFbCA9IF9iWzFdO1xuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChkaXNhYmxlZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKCFlbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIG9uTW92ZUV2ZW50ID0gZnVuY3Rpb24gKGRvY1gsIGRvY1kpIHtcbiAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHJlZkFuaW1hdGlvbkZyYW1lLmN1cnJlbnQpO1xuICAgICAgICAgICAgcmVmQW5pbWF0aW9uRnJhbWUuY3VycmVudCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9hID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIGxlZnQgPSBfYS5sZWZ0LCB0b3AgPSBfYS50b3A7XG4gICAgICAgICAgICAgICAgdmFyIGVsWCA9IGxlZnQgKyB3aW5kb3cuc2Nyb2xsWDtcbiAgICAgICAgICAgICAgICB2YXIgZWxZID0gdG9wICsgd2luZG93LnNjcm9sbFk7XG4gICAgICAgICAgICAgICAgdmFyIHggPSBkb2NYIC0gZWxYO1xuICAgICAgICAgICAgICAgIHZhciB5ID0gZG9jWSAtIGVsWTtcbiAgICAgICAgICAgICAgICBzZXRTdGF0ZShmdW5jdGlvbiAob2xkU3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1N0YXRlID0gX19hc3NpZ24oX19hc3NpZ24oe30sIG9sZFN0YXRlKSwgeyBkeDogeCAtIChvbGRTdGF0ZS54IHx8IDApLCBkeTogeSAtIChvbGRTdGF0ZS55IHx8IDApLCBlbmQ6IERhdGUubm93KCksIGlzU2NyYXRjaGluZzogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmVmU3RhdGUuY3VycmVudCA9IG5ld1N0YXRlO1xuICAgICAgICAgICAgICAgICAgICAocGFyYW1zUmVmLmN1cnJlbnQub25TY3JhdGNoIHx8IG5vb3ApKG5ld1N0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld1N0YXRlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBvbk1vdXNlTW92ZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgb25Nb3ZlRXZlbnQoZXZlbnQucGFnZVgsIGV2ZW50LnBhZ2VZKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIG9uVG91Y2hNb3ZlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBvbk1vdmVFdmVudChldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWCwgZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVkpO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgb25Nb3VzZVVwO1xuICAgICAgICB2YXIgb25Ub3VjaEVuZDtcbiAgICAgICAgdmFyIHN0b3BTY3JhdGNoaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCFyZWZTY3JhdGNoaW5nLmN1cnJlbnQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgcmVmU2NyYXRjaGluZy5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgICAgICByZWZTdGF0ZS5jdXJyZW50ID0gX19hc3NpZ24oX19hc3NpZ24oe30sIHJlZlN0YXRlLmN1cnJlbnQpLCB7IGlzU2NyYXRjaGluZzogZmFsc2UgfSk7XG4gICAgICAgICAgICAocGFyYW1zUmVmLmN1cnJlbnQub25TY3JhdGNoRW5kIHx8IG5vb3ApKHJlZlN0YXRlLmN1cnJlbnQpO1xuICAgICAgICAgICAgc2V0U3RhdGUoeyBpc1NjcmF0Y2hpbmc6IGZhbHNlIH0pO1xuICAgICAgICAgICAgb2ZmKHdpbmRvdywgJ21vdXNlbW92ZScsIG9uTW91c2VNb3ZlKTtcbiAgICAgICAgICAgIG9mZih3aW5kb3csICd0b3VjaG1vdmUnLCBvblRvdWNoTW92ZSk7XG4gICAgICAgICAgICBvZmYod2luZG93LCAnbW91c2V1cCcsIG9uTW91c2VVcCk7XG4gICAgICAgICAgICBvZmYod2luZG93LCAndG91Y2hlbmQnLCBvblRvdWNoRW5kKTtcbiAgICAgICAgfTtcbiAgICAgICAgb25Nb3VzZVVwID0gc3RvcFNjcmF0Y2hpbmc7XG4gICAgICAgIG9uVG91Y2hFbmQgPSBzdG9wU2NyYXRjaGluZztcbiAgICAgICAgdmFyIHN0YXJ0U2NyYXRjaGluZyA9IGZ1bmN0aW9uIChkb2NYLCBkb2NZKSB7XG4gICAgICAgICAgICBpZiAoIXJlZlNjcmF0Y2hpbmcuY3VycmVudClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB2YXIgX2EgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgbGVmdCA9IF9hLmxlZnQsIHRvcCA9IF9hLnRvcDtcbiAgICAgICAgICAgIHZhciBlbFggPSBsZWZ0ICsgd2luZG93LnNjcm9sbFg7XG4gICAgICAgICAgICB2YXIgZWxZID0gdG9wICsgd2luZG93LnNjcm9sbFk7XG4gICAgICAgICAgICB2YXIgeCA9IGRvY1ggLSBlbFg7XG4gICAgICAgICAgICB2YXIgeSA9IGRvY1kgLSBlbFk7XG4gICAgICAgICAgICB2YXIgdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgICB2YXIgbmV3U3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgaXNTY3JhdGNoaW5nOiB0cnVlLFxuICAgICAgICAgICAgICAgIHN0YXJ0OiB0aW1lLFxuICAgICAgICAgICAgICAgIGVuZDogdGltZSxcbiAgICAgICAgICAgICAgICBkb2NYOiBkb2NYLFxuICAgICAgICAgICAgICAgIGRvY1k6IGRvY1ksXG4gICAgICAgICAgICAgICAgeDogeCxcbiAgICAgICAgICAgICAgICB5OiB5LFxuICAgICAgICAgICAgICAgIGR4OiAwLFxuICAgICAgICAgICAgICAgIGR5OiAwLFxuICAgICAgICAgICAgICAgIGVsSDogZWwub2Zmc2V0SGVpZ2h0LFxuICAgICAgICAgICAgICAgIGVsVzogZWwub2Zmc2V0V2lkdGgsXG4gICAgICAgICAgICAgICAgZWxYOiBlbFgsXG4gICAgICAgICAgICAgICAgZWxZOiBlbFksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmVmU3RhdGUuY3VycmVudCA9IG5ld1N0YXRlO1xuICAgICAgICAgICAgKHBhcmFtc1JlZi5jdXJyZW50Lm9uU2NyYXRjaFN0YXJ0IHx8IG5vb3ApKG5ld1N0YXRlKTtcbiAgICAgICAgICAgIHNldFN0YXRlKG5ld1N0YXRlKTtcbiAgICAgICAgICAgIG9uKHdpbmRvdywgJ21vdXNlbW92ZScsIG9uTW91c2VNb3ZlKTtcbiAgICAgICAgICAgIG9uKHdpbmRvdywgJ3RvdWNobW92ZScsIG9uVG91Y2hNb3ZlKTtcbiAgICAgICAgICAgIG9uKHdpbmRvdywgJ21vdXNldXAnLCBvbk1vdXNlVXApO1xuICAgICAgICAgICAgb24od2luZG93LCAndG91Y2hlbmQnLCBvblRvdWNoRW5kKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIG9uTW91c2VEb3duID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICByZWZTY3JhdGNoaW5nLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgICAgICAgc3RhcnRTY3JhdGNoaW5nKGV2ZW50LnBhZ2VYLCBldmVudC5wYWdlWSk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBvblRvdWNoU3RhcnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHJlZlNjcmF0Y2hpbmcuY3VycmVudCA9IHRydWU7XG4gICAgICAgICAgICBzdGFydFNjcmF0Y2hpbmcoZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVgsIGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VZKTtcbiAgICAgICAgfTtcbiAgICAgICAgb24oZWwsICdtb3VzZWRvd24nLCBvbk1vdXNlRG93bik7XG4gICAgICAgIG9uKGVsLCAndG91Y2hzdGFydCcsIG9uVG91Y2hTdGFydCk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBvZmYoZWwsICdtb3VzZWRvd24nLCBvbk1vdXNlRG93bik7XG4gICAgICAgICAgICBvZmYoZWwsICd0b3VjaHN0YXJ0Jywgb25Ub3VjaFN0YXJ0KTtcbiAgICAgICAgICAgIG9mZih3aW5kb3csICdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSk7XG4gICAgICAgICAgICBvZmYod2luZG93LCAndG91Y2htb3ZlJywgb25Ub3VjaE1vdmUpO1xuICAgICAgICAgICAgb2ZmKHdpbmRvdywgJ21vdXNldXAnLCBvbk1vdXNlVXApO1xuICAgICAgICAgICAgb2ZmKHdpbmRvdywgJ3RvdWNoZW5kJywgb25Ub3VjaEVuZCk7XG4gICAgICAgICAgICBpZiAocmVmQW5pbWF0aW9uRnJhbWUuY3VycmVudClcbiAgICAgICAgICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShyZWZBbmltYXRpb25GcmFtZS5jdXJyZW50KTtcbiAgICAgICAgICAgIHJlZkFuaW1hdGlvbkZyYW1lLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICAgICAgcmVmU2NyYXRjaGluZy5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgICAgICByZWZTdGF0ZS5jdXJyZW50ID0geyBpc1NjcmF0Y2hpbmc6IGZhbHNlIH07XG4gICAgICAgICAgICBzZXRTdGF0ZShyZWZTdGF0ZS5jdXJyZW50KTtcbiAgICAgICAgfTtcbiAgICB9LCBbZWwsIGRpc2FibGVkLCBwYXJhbXNSZWZdKTtcbiAgICByZXR1cm4gW3NldEVsLCBzdGF0ZV07XG59O1xuZXhwb3J0IHZhciBTY3JhdGNoU2Vuc29yID0gZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgdmFyIGNoaWxkcmVuID0gcHJvcHMuY2hpbGRyZW4sIHBhcmFtcyA9IF9fcmVzdChwcm9wcywgW1wiY2hpbGRyZW5cIl0pO1xuICAgIHZhciBfYSA9IHVzZVNjcmF0Y2gocGFyYW1zKSwgcmVmID0gX2FbMF0sIHN0YXRlID0gX2FbMV07XG4gICAgdmFyIGVsZW1lbnQgPSByZW5kZXIocHJvcHMsIHN0YXRlKTtcbiAgICByZXR1cm4gY2xvbmVFbGVtZW50KGVsZW1lbnQsIF9fYXNzaWduKF9fYXNzaWduKHt9LCBlbGVtZW50LnByb3BzKSwgeyByZWY6IGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQucHJvcHMucmVmKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50LnByb3BzLnJlZiA9PT0gJ29iamVjdCcpXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucHJvcHMucmVmLmN1cnJlbnQgPSBlbDtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnQucHJvcHMucmVmID09PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnByb3BzLnJlZihlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZWYoZWwpO1xuICAgICAgICB9IH0pKTtcbn07XG5leHBvcnQgZGVmYXVsdCB1c2VTY3JhdGNoO1xuIiwiaW1wb3J0IHsgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHVzZVJhZlN0YXRlIGZyb20gJy4vdXNlUmFmU3RhdGUnO1xuaW1wb3J0IHsgb2ZmLCBvbiB9IGZyb20gJy4vbWlzYy91dGlsJztcbnZhciB1c2VTY3JvbGwgPSBmdW5jdGlvbiAocmVmKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcmVmICE9PSAnb2JqZWN0JyB8fCB0eXBlb2YgcmVmLmN1cnJlbnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdgdXNlU2Nyb2xsYCBleHBlY3RzIGEgc2luZ2xlIHJlZiBhcmd1bWVudC4nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgX2EgPSB1c2VSYWZTdGF0ZSh7XG4gICAgICAgIHg6IDAsXG4gICAgICAgIHk6IDAsXG4gICAgfSksIHN0YXRlID0gX2FbMF0sIHNldFN0YXRlID0gX2FbMV07XG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAocmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICBzZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIHg6IHJlZi5jdXJyZW50LnNjcm9sbExlZnQsXG4gICAgICAgICAgICAgICAgICAgIHk6IHJlZi5jdXJyZW50LnNjcm9sbFRvcCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICBvbihyZWYuY3VycmVudCwgJ3Njcm9sbCcsIGhhbmRsZXIsIHtcbiAgICAgICAgICAgICAgICBjYXB0dXJlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBwYXNzaXZlOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChyZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICAgIG9mZihyZWYuY3VycmVudCwgJ3Njcm9sbCcsIGhhbmRsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0sIFtyZWZdKTtcbiAgICByZXR1cm4gc3RhdGU7XG59O1xuZXhwb3J0IGRlZmF1bHQgdXNlU2Nyb2xsO1xuIiwiaW1wb3J0IHsgc2Nyb2xsYmFyV2lkdGggfSBmcm9tICdAeG9ib3R5aS9zY3JvbGxiYXItd2lkdGgnO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmV4cG9ydCBmdW5jdGlvbiB1c2VTY3JvbGxiYXJXaWR0aCgpIHtcbiAgICB2YXIgX2EgPSB1c2VTdGF0ZShzY3JvbGxiYXJXaWR0aCgpKSwgc2J3ID0gX2FbMF0sIHNldFNidyA9IF9hWzFdO1xuICAgIC8vIHRoaXMgbmVlZGVkIHRvIGVuc3VyZSB0aGUgc2Nyb2xsYmFyIHdpZHRoIGluIGNhc2UgaG9vayBjYWxsZWQgYmVmb3JlIHRoZSBET00gaXMgcmVhZHlcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodHlwZW9mIHNidyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmFmID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNldFNidyhzY3JvbGxiYXJXaWR0aCgpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiBjYW5jZWxBbmltYXRpb25GcmFtZShyYWYpOyB9O1xuICAgIH0sIFtdKTtcbiAgICByZXR1cm4gc2J3O1xufVxuIiwiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IG9mZiwgb24gfSBmcm9tICcuL21pc2MvdXRpbCc7XG52YXIgdXNlU2Nyb2xsaW5nID0gZnVuY3Rpb24gKHJlZikge1xuICAgIHZhciBfYSA9IHVzZVN0YXRlKGZhbHNlKSwgc2Nyb2xsaW5nID0gX2FbMF0sIHNldFNjcm9sbGluZyA9IF9hWzFdO1xuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChyZWYuY3VycmVudCkge1xuICAgICAgICAgICAgdmFyIHNjcm9sbGluZ1RpbWVvdXRfMTtcbiAgICAgICAgICAgIHZhciBoYW5kbGVTY3JvbGxFbmRfMSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBzZXRTY3JvbGxpbmcoZmFsc2UpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBoYW5kbGVTY3JvbGxfMSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBzZXRTY3JvbGxpbmcodHJ1ZSk7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHNjcm9sbGluZ1RpbWVvdXRfMSk7XG4gICAgICAgICAgICAgICAgc2Nyb2xsaW5nVGltZW91dF8xID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBoYW5kbGVTY3JvbGxFbmRfMSgpOyB9LCAxNTApO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG9uKHJlZi5jdXJyZW50LCAnc2Nyb2xsJywgaGFuZGxlU2Nyb2xsXzEsIGZhbHNlKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIG9mZihyZWYuY3VycmVudCwgJ3Njcm9sbCcsIGhhbmRsZVNjcm9sbF8xLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyB9O1xuICAgIH0sIFtyZWZdKTtcbiAgICByZXR1cm4gc2Nyb2xsaW5nO1xufTtcbmV4cG9ydCBkZWZhdWx0IHVzZVNjcm9sbGluZztcbiIsImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBpc0Jyb3dzZXIsIG9mZiwgb24gfSBmcm9tICcuL21pc2MvdXRpbCc7XG52YXIgZ2V0VmFsdWUgPSBmdW5jdGlvbiAoc2VhcmNoLCBwYXJhbSkgeyByZXR1cm4gbmV3IFVSTFNlYXJjaFBhcmFtcyhzZWFyY2gpLmdldChwYXJhbSk7IH07XG52YXIgdXNlU2VhcmNoUGFyYW0gPSBmdW5jdGlvbiAocGFyYW0pIHtcbiAgICB2YXIgbG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb247XG4gICAgdmFyIF9hID0gdXNlU3RhdGUoZnVuY3Rpb24gKCkgeyByZXR1cm4gZ2V0VmFsdWUobG9jYXRpb24uc2VhcmNoLCBwYXJhbSk7IH0pLCB2YWx1ZSA9IF9hWzBdLCBzZXRWYWx1ZSA9IF9hWzFdO1xuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBvbkNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNldFZhbHVlKGdldFZhbHVlKGxvY2F0aW9uLnNlYXJjaCwgcGFyYW0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgb24od2luZG93LCAncG9wc3RhdGUnLCBvbkNoYW5nZSk7XG4gICAgICAgIG9uKHdpbmRvdywgJ3B1c2hzdGF0ZScsIG9uQ2hhbmdlKTtcbiAgICAgICAgb24od2luZG93LCAncmVwbGFjZXN0YXRlJywgb25DaGFuZ2UpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgb2ZmKHdpbmRvdywgJ3BvcHN0YXRlJywgb25DaGFuZ2UpO1xuICAgICAgICAgICAgb2ZmKHdpbmRvdywgJ3B1c2hzdGF0ZScsIG9uQ2hhbmdlKTtcbiAgICAgICAgICAgIG9mZih3aW5kb3csICdyZXBsYWNlc3RhdGUnLCBvbkNoYW5nZSk7XG4gICAgICAgIH07XG4gICAgfSwgW10pO1xuICAgIHJldHVybiB2YWx1ZTtcbn07XG52YXIgdXNlU2VhcmNoUGFyYW1TZXJ2ZXIgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBudWxsOyB9O1xuZXhwb3J0IGRlZmF1bHQgaXNCcm93c2VyID8gdXNlU2VhcmNoUGFyYW0gOiB1c2VTZWFyY2hQYXJhbVNlcnZlcjtcbiIsImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBpc0Jyb3dzZXIgfSBmcm9tICcuL21pc2MvdXRpbCc7XG52YXIgdXNlU2Vzc2lvblN0b3JhZ2UgPSBmdW5jdGlvbiAoa2V5LCBpbml0aWFsVmFsdWUsIHJhdykge1xuICAgIGlmICghaXNCcm93c2VyKSB7XG4gICAgICAgIHJldHVybiBbaW5pdGlhbFZhbHVlLCBmdW5jdGlvbiAoKSB7IH1dO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvcnVsZXMtb2YtaG9va3NcbiAgICB2YXIgX2EgPSB1c2VTdGF0ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgc2Vzc2lvblN0b3JhZ2VWYWx1ZSA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2Vzc2lvblN0b3JhZ2VWYWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKGtleSwgcmF3ID8gU3RyaW5nKGluaXRpYWxWYWx1ZSkgOiBKU09OLnN0cmluZ2lmeShpbml0aWFsVmFsdWUpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5pdGlhbFZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJhdyA/IHNlc3Npb25TdG9yYWdlVmFsdWUgOiBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlVmFsdWUgfHwgJ251bGwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgICAgIC8vIElmIHVzZXIgaXMgaW4gcHJpdmF0ZSBtb2RlIG9yIGhhcyBzdG9yYWdlIHJlc3RyaWN0aW9uXG4gICAgICAgICAgICAvLyBzZXNzaW9uU3RvcmFnZSBjYW4gdGhyb3cuIEpTT04ucGFyc2UgYW5kIEpTT04uc3RyaW5naWZ5XG4gICAgICAgICAgICAvLyBjYXQgdGhyb3csIHRvby5cbiAgICAgICAgICAgIHJldHVybiBpbml0aWFsVmFsdWU7XG4gICAgICAgIH1cbiAgICB9KSwgc3RhdGUgPSBfYVswXSwgc2V0U3RhdGUgPSBfYVsxXTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvcnVsZXMtb2YtaG9va3NcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHNlcmlhbGl6ZWRTdGF0ZSA9IHJhdyA/IFN0cmluZyhzdGF0ZSkgOiBKU09OLnN0cmluZ2lmeShzdGF0ZSk7XG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKGtleSwgc2VyaWFsaXplZFN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgICAgIC8vIElmIHVzZXIgaXMgaW4gcHJpdmF0ZSBtb2RlIG9yIGhhcyBzdG9yYWdlIHJlc3RyaWN0aW9uXG4gICAgICAgICAgICAvLyBzZXNzaW9uU3RvcmFnZSBjYW4gdGhyb3cuIEFsc28gSlNPTi5zdHJpbmdpZnkgY2FuIHRocm93LlxuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIFtzdGF0ZSwgc2V0U3RhdGVdO1xufTtcbmV4cG9ydCBkZWZhdWx0IHVzZVNlc3Npb25TdG9yYWdlO1xuIiwiaW1wb3J0IHsgX19hc3NpZ24sIF9fc3ByZWFkQXJyYXlzIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlTWVtbywgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG52YXIgdXNlU2V0ID0gZnVuY3Rpb24gKGluaXRpYWxTZXQpIHtcbiAgICBpZiAoaW5pdGlhbFNldCA9PT0gdm9pZCAwKSB7IGluaXRpYWxTZXQgPSBuZXcgU2V0KCk7IH1cbiAgICB2YXIgX2EgPSB1c2VTdGF0ZShpbml0aWFsU2V0KSwgc2V0ID0gX2FbMF0sIHNldFNldCA9IF9hWzFdO1xuICAgIHZhciBzdGFibGVBY3Rpb25zID0gdXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhZGQgPSBmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gc2V0U2V0KGZ1bmN0aW9uIChwcmV2U2V0KSB7IHJldHVybiBuZXcgU2V0KF9fc3ByZWFkQXJyYXlzKEFycmF5LmZyb20ocHJldlNldCksIFtpdGVtXSkpOyB9KTsgfTtcbiAgICAgICAgdmFyIHJlbW92ZSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gc2V0U2V0KGZ1bmN0aW9uIChwcmV2U2V0KSB7IHJldHVybiBuZXcgU2V0KEFycmF5LmZyb20ocHJldlNldCkuZmlsdGVyKGZ1bmN0aW9uIChpKSB7IHJldHVybiBpICE9PSBpdGVtOyB9KSk7IH0pO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgdG9nZ2xlID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHJldHVybiBzZXRTZXQoZnVuY3Rpb24gKHByZXZTZXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJldlNldC5oYXMoaXRlbSlcbiAgICAgICAgICAgICAgICAgICAgPyBuZXcgU2V0KEFycmF5LmZyb20ocHJldlNldCkuZmlsdGVyKGZ1bmN0aW9uIChpKSB7IHJldHVybiBpICE9PSBpdGVtOyB9KSlcbiAgICAgICAgICAgICAgICAgICAgOiBuZXcgU2V0KF9fc3ByZWFkQXJyYXlzKEFycmF5LmZyb20ocHJldlNldCksIFtpdGVtXSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB7IGFkZDogYWRkLCByZW1vdmU6IHJlbW92ZSwgdG9nZ2xlOiB0b2dnbGUsIHJlc2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZXRTZXQoaW5pdGlhbFNldCk7IH0gfTtcbiAgICB9LCBbc2V0U2V0XSk7XG4gICAgdmFyIHV0aWxzID0gX19hc3NpZ24oeyBoYXM6IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiBzZXQuaGFzKGl0ZW0pOyB9LCBbc2V0XSkgfSwgc3RhYmxlQWN0aW9ucyk7XG4gICAgcmV0dXJuIFtzZXQsIHV0aWxzXTtcbn07XG5leHBvcnQgZGVmYXVsdCB1c2VTZXQ7XG4iLCJpbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG52YXIgdXNlU2V0U3RhdGUgPSBmdW5jdGlvbiAoaW5pdGlhbFN0YXRlKSB7XG4gICAgaWYgKGluaXRpYWxTdGF0ZSA9PT0gdm9pZCAwKSB7IGluaXRpYWxTdGF0ZSA9IHt9OyB9XG4gICAgdmFyIF9hID0gdXNlU3RhdGUoaW5pdGlhbFN0YXRlKSwgc3RhdGUgPSBfYVswXSwgc2V0ID0gX2FbMV07XG4gICAgdmFyIHNldFN0YXRlID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKHBhdGNoKSB7XG4gICAgICAgIHNldChmdW5jdGlvbiAocHJldlN0YXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgcHJldlN0YXRlLCBwYXRjaCBpbnN0YW5jZW9mIEZ1bmN0aW9uID8gcGF0Y2gocHJldlN0YXRlKSA6IHBhdGNoKTtcbiAgICAgICAgfSk7XG4gICAgfSwgW10pO1xuICAgIHJldHVybiBbc3RhdGUsIHNldFN0YXRlXTtcbn07XG5leHBvcnQgZGVmYXVsdCB1c2VTZXRTdGF0ZTtcbiIsImltcG9ydCB7IGVxdWFsIGFzIGlzU2hhbGxvd0VxdWFsIH0gZnJvbSAnZmFzdC1zaGFsbG93LWVxdWFsJztcbmltcG9ydCB1c2VDdXN0b21Db21wYXJlRWZmZWN0IGZyb20gJy4vdXNlQ3VzdG9tQ29tcGFyZUVmZmVjdCc7XG52YXIgaXNQcmltaXRpdmUgPSBmdW5jdGlvbiAodmFsKSB7IHJldHVybiB2YWwgIT09IE9iamVjdCh2YWwpOyB9O1xudmFyIHNoYWxsb3dFcXVhbERlcHNMaXN0ID0gZnVuY3Rpb24gKHByZXZEZXBzLCBuZXh0RGVwcykge1xuICAgIHJldHVybiBwcmV2RGVwcy5ldmVyeShmdW5jdGlvbiAoZGVwLCBpbmRleCkgeyByZXR1cm4gaXNTaGFsbG93RXF1YWwoZGVwLCBuZXh0RGVwc1tpbmRleF0pOyB9KTtcbn07XG52YXIgdXNlU2hhbGxvd0NvbXBhcmVFZmZlY3QgPSBmdW5jdGlvbiAoZWZmZWN0LCBkZXBzKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgaWYgKCEoZGVwcyBpbnN0YW5jZW9mIEFycmF5KSB8fCAhZGVwcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignYHVzZVNoYWxsb3dDb21wYXJlRWZmZWN0YCBzaG91bGQgbm90IGJlIHVzZWQgd2l0aCBubyBkZXBlbmRlbmNpZXMuIFVzZSBSZWFjdC51c2VFZmZlY3QgaW5zdGVhZC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVwcy5ldmVyeShpc1ByaW1pdGl2ZSkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignYHVzZVNoYWxsb3dDb21wYXJlRWZmZWN0YCBzaG91bGQgbm90IGJlIHVzZWQgd2l0aCBkZXBlbmRlbmNpZXMgdGhhdCBhcmUgYWxsIHByaW1pdGl2ZSB2YWx1ZXMuIFVzZSBSZWFjdC51c2VFZmZlY3QgaW5zdGVhZC4nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1c2VDdXN0b21Db21wYXJlRWZmZWN0KGVmZmVjdCwgZGVwcywgc2hhbGxvd0VxdWFsRGVwc0xpc3QpO1xufTtcbmV4cG9ydCBkZWZhdWx0IHVzZVNoYWxsb3dDb21wYXJlRWZmZWN0O1xuIiwiaW1wb3J0IHsgX19zcHJlYWRBcnJheXMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGlzQnJvd3Nlciwgb2ZmLCBvbiB9IGZyb20gJy4vbWlzYy91dGlsJztcbnZhciB1c2VTdGF0ZSA9IFJlYWN0LnVzZVN0YXRlLCB1c2VFZmZlY3QgPSBSZWFjdC51c2VFZmZlY3QsIHVzZVJlZiA9IFJlYWN0LnVzZVJlZjtcbnZhciBEUkFGID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7IHJldHVybiBzZXRUaW1lb3V0KGNhbGxiYWNrLCAzNSk7IH07XG52YXIgdXNlU2l6ZSA9IGZ1bmN0aW9uIChlbGVtZW50LCBfYSkge1xuICAgIHZhciBfYiA9IF9hID09PSB2b2lkIDAgPyB7fSA6IF9hLCBfYyA9IF9iLndpZHRoLCB3aWR0aCA9IF9jID09PSB2b2lkIDAgPyBJbmZpbml0eSA6IF9jLCBfZCA9IF9iLmhlaWdodCwgaGVpZ2h0ID0gX2QgPT09IHZvaWQgMCA/IEluZmluaXR5IDogX2Q7XG4gICAgaWYgKCFpc0Jyb3dzZXIpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHR5cGVvZiBlbGVtZW50ID09PSAnZnVuY3Rpb24nID8gZWxlbWVudCh7IHdpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHQgfSkgOiBlbGVtZW50LFxuICAgICAgICAgICAgeyB3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0IH0sXG4gICAgICAgIF07XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9ydWxlcy1vZi1ob29rc1xuICAgIHZhciBfZSA9IHVzZVN0YXRlKHsgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodCB9KSwgc3RhdGUgPSBfZVswXSwgc2V0U3RhdGUgPSBfZVsxXTtcbiAgICBpZiAodHlwZW9mIGVsZW1lbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQoc3RhdGUpO1xuICAgIH1cbiAgICB2YXIgc3R5bGUgPSBlbGVtZW50LnByb3BzLnN0eWxlIHx8IHt9O1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9ydWxlcy1vZi1ob29rc1xuICAgIHZhciByZWYgPSB1c2VSZWYobnVsbCk7XG4gICAgdmFyIHdpbmRvdyA9IG51bGw7XG4gICAgdmFyIHNldFNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpZnJhbWUgPSByZWYuY3VycmVudDtcbiAgICAgICAgdmFyIHNpemUgPSBpZnJhbWVcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiBpZnJhbWUub2Zmc2V0V2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBpZnJhbWUub2Zmc2V0SGVpZ2h0LFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7IHdpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHQgfTtcbiAgICAgICAgc2V0U3RhdGUoc2l6ZSk7XG4gICAgfTtcbiAgICB2YXIgb25XaW5kb3cgPSBmdW5jdGlvbiAod2luZG93VG9MaXN0ZW5Pbikge1xuICAgICAgICBvbih3aW5kb3dUb0xpc3Rlbk9uLCAncmVzaXplJywgc2V0U2l6ZSk7XG4gICAgICAgIERSQUYoc2V0U2l6ZSk7XG4gICAgfTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvcnVsZXMtb2YtaG9va3NcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaWZyYW1lID0gcmVmLmN1cnJlbnQ7XG4gICAgICAgIGlmICghaWZyYW1lKSB7XG4gICAgICAgICAgICAvLyBpZnJhbWUgd2lsbCBiZSB1bmRlZmluZWQgaWYgY29tcG9uZW50IGlzIGFscmVhZHkgdW5tb3VudGVkXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlmcmFtZS5jb250ZW50V2luZG93KSB7XG4gICAgICAgICAgICB3aW5kb3cgPSBpZnJhbWUuY29udGVudFdpbmRvdztcbiAgICAgICAgICAgIG9uV2luZG93KHdpbmRvdyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgb25Mb2FkXzEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgb24oaWZyYW1lLCAnbG9hZCcsIG9uTG9hZF8xKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cgPSBpZnJhbWUuY29udGVudFdpbmRvdztcbiAgICAgICAgICAgICAgICBvbldpbmRvdyh3aW5kb3cpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG9mZihpZnJhbWUsICdsb2FkJywgb25Mb2FkXzEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAod2luZG93ICYmIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKSB7XG4gICAgICAgICAgICAgICAgb2ZmKHdpbmRvdywgJ3Jlc2l6ZScsIHNldFNpemUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0sIFtdKTtcbiAgICBzdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgdmFyIHNpemVkID0gUmVhY3QuY2xvbmVFbGVtZW50LmFwcGx5KFJlYWN0LCBfX3NwcmVhZEFycmF5cyhbZWxlbWVudCwgeyBzdHlsZTogc3R5bGUgfV0sIF9fc3ByZWFkQXJyYXlzKFtcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgnaWZyYW1lJywge1xuICAgICAgICAgICAgcmVmOiByZWYsXG4gICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICd0cmFuc3BhcmVudCcsXG4gICAgICAgICAgICAgICAgYm9yZGVyOiAnbm9uZScsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAnMTAwJScsXG4gICAgICAgICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgICAgICAgICB6SW5kZXg6IC0xLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSlcbiAgICBdLCBSZWFjdC5DaGlsZHJlbi50b0FycmF5KGVsZW1lbnQucHJvcHMuY2hpbGRyZW4pKSkpO1xuICAgIHJldHVybiBbc2l6ZWQsIHN0YXRlXTtcbn07XG5leHBvcnQgZGVmYXVsdCB1c2VTaXplO1xuIiwiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBpc0Jyb3dzZXIsIG5vb3AsIG9mZiwgb24gfSBmcm9tICcuL21pc2MvdXRpbCc7XG5pbXBvcnQgdXNlTW91bnRlZFN0YXRlIGZyb20gJy4vdXNlTW91bnRlZFN0YXRlJztcbmltcG9ydCB1c2VTZXRTdGF0ZSBmcm9tICcuL3VzZVNldFN0YXRlJztcbnZhciB1c2VTbGlkZXIgPSBmdW5jdGlvbiAocmVmLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cbiAgICB2YXIgaXNNb3VudGVkID0gdXNlTW91bnRlZFN0YXRlKCk7XG4gICAgdmFyIGlzU2xpZGluZyA9IHVzZVJlZihmYWxzZSk7XG4gICAgdmFyIHZhbHVlUmVmID0gdXNlUmVmKDApO1xuICAgIHZhciBmcmFtZSA9IHVzZVJlZigwKTtcbiAgICB2YXIgX2EgPSB1c2VTZXRTdGF0ZSh7XG4gICAgICAgIGlzU2xpZGluZzogZmFsc2UsXG4gICAgICAgIHZhbHVlOiAwLFxuICAgIH0pLCBzdGF0ZSA9IF9hWzBdLCBzZXRTdGF0ZSA9IF9hWzFdO1xuICAgIHZhbHVlUmVmLmN1cnJlbnQgPSBzdGF0ZS52YWx1ZTtcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoaXNCcm93c2VyKSB7XG4gICAgICAgICAgICB2YXIgc3R5bGVzID0gb3B0aW9ucy5zdHlsZXMgPT09IHVuZGVmaW5lZCA/IHRydWUgOiBvcHRpb25zLnN0eWxlcztcbiAgICAgICAgICAgIHZhciByZXZlcnNlXzEgPSBvcHRpb25zLnJldmVyc2UgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogb3B0aW9ucy5yZXZlcnNlO1xuICAgICAgICAgICAgaWYgKHJlZi5jdXJyZW50ICYmIHN0eWxlcykge1xuICAgICAgICAgICAgICAgIHJlZi5jdXJyZW50LnN0eWxlLnVzZXJTZWxlY3QgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc3RhcnRTY3J1YmJpbmdfMSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzU2xpZGluZy5jdXJyZW50ICYmIGlzTW91bnRlZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIChvcHRpb25zLm9uU2NydWJTdGFydCB8fCBub29wKSgpO1xuICAgICAgICAgICAgICAgICAgICBpc1NsaWRpbmcuY3VycmVudCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHNldFN0YXRlKHsgaXNTbGlkaW5nOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgICAgICBiaW5kRXZlbnRzXzEoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIHN0b3BTY3J1YmJpbmdfMSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNTbGlkaW5nLmN1cnJlbnQgJiYgaXNNb3VudGVkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgKG9wdGlvbnMub25TY3J1YlN0b3AgfHwgbm9vcCkodmFsdWVSZWYuY3VycmVudCk7XG4gICAgICAgICAgICAgICAgICAgIGlzU2xpZGluZy5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHNldFN0YXRlKHsgaXNTbGlkaW5nOiBmYWxzZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgdW5iaW5kRXZlbnRzXzEoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIG9uTW91c2VEb3duXzEgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBzdGFydFNjcnViYmluZ18xKCk7XG4gICAgICAgICAgICAgICAgb25Nb3VzZU1vdmVfMShldmVudCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIG9uTW91c2VNb3ZlXzEgPSBvcHRpb25zLnZlcnRpY2FsXG4gICAgICAgICAgICAgICAgPyBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIG9uU2NydWJfMShldmVudC5jbGllbnRZKTsgfVxuICAgICAgICAgICAgICAgIDogZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBvblNjcnViXzEoZXZlbnQuY2xpZW50WCk7IH07XG4gICAgICAgICAgICB2YXIgb25Ub3VjaFN0YXJ0XzEgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBzdGFydFNjcnViYmluZ18xKCk7XG4gICAgICAgICAgICAgICAgb25Ub3VjaE1vdmVfMShldmVudCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIG9uVG91Y2hNb3ZlXzEgPSBvcHRpb25zLnZlcnRpY2FsXG4gICAgICAgICAgICAgICAgPyBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIG9uU2NydWJfMShldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZKTsgfVxuICAgICAgICAgICAgICAgIDogZnVuY3Rpb24gKGV2ZW50KSB7IHJldHVybiBvblNjcnViXzEoZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WCk7IH07XG4gICAgICAgICAgICB2YXIgYmluZEV2ZW50c18xID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIG9uKGRvY3VtZW50LCAnbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmVfMSk7XG4gICAgICAgICAgICAgICAgb24oZG9jdW1lbnQsICdtb3VzZXVwJywgc3RvcFNjcnViYmluZ18xKTtcbiAgICAgICAgICAgICAgICBvbihkb2N1bWVudCwgJ3RvdWNobW92ZScsIG9uVG91Y2hNb3ZlXzEpO1xuICAgICAgICAgICAgICAgIG9uKGRvY3VtZW50LCAndG91Y2hlbmQnLCBzdG9wU2NydWJiaW5nXzEpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciB1bmJpbmRFdmVudHNfMSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBvZmYoZG9jdW1lbnQsICdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZV8xKTtcbiAgICAgICAgICAgICAgICBvZmYoZG9jdW1lbnQsICdtb3VzZXVwJywgc3RvcFNjcnViYmluZ18xKTtcbiAgICAgICAgICAgICAgICBvZmYoZG9jdW1lbnQsICd0b3VjaG1vdmUnLCBvblRvdWNoTW92ZV8xKTtcbiAgICAgICAgICAgICAgICBvZmYoZG9jdW1lbnQsICd0b3VjaGVuZCcsIHN0b3BTY3J1YmJpbmdfMSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIG9uU2NydWJfMSA9IGZ1bmN0aW9uIChjbGllbnRYWSkge1xuICAgICAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGZyYW1lLmN1cnJlbnQpO1xuICAgICAgICAgICAgICAgIGZyYW1lLmN1cnJlbnQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNNb3VudGVkKCkgJiYgcmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWN0ID0gcmVmLmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9zID0gb3B0aW9ucy52ZXJ0aWNhbCA/IHJlY3QudG9wIDogcmVjdC5sZWZ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxlbmd0aF8xID0gb3B0aW9ucy52ZXJ0aWNhbCA/IHJlY3QuaGVpZ2h0IDogcmVjdC53aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgcmV0dXJuaW5nIDAgd2hlbiBlbGVtZW50IGlzIGhpZGRlbiBieSBDU1NcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbGVuZ3RoXzEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSAoY2xpZW50WFkgLSBwb3MpIC8gbGVuZ3RoXzE7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJldmVyc2VfMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gMSAtIHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgKG9wdGlvbnMub25TY3J1YiB8fCBub29wKSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBvbihyZWYuY3VycmVudCwgJ21vdXNlZG93bicsIG9uTW91c2VEb3duXzEpO1xuICAgICAgICAgICAgb24ocmVmLmN1cnJlbnQsICd0b3VjaHN0YXJ0Jywgb25Ub3VjaFN0YXJ0XzEpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBvZmYocmVmLmN1cnJlbnQsICdtb3VzZWRvd24nLCBvbk1vdXNlRG93bl8xKTtcbiAgICAgICAgICAgICAgICBvZmYocmVmLmN1cnJlbnQsICd0b3VjaHN0YXJ0Jywgb25Ub3VjaFN0YXJ0XzEpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9LCBbcmVmLCBvcHRpb25zLnZlcnRpY2FsXSk7XG4gICAgcmV0dXJuIHN0YXRlO1xufTtcbmV4cG9ydCBkZWZhdWx0IHVzZVNsaWRlcjtcbiIsImltcG9ydCB7IF9fYXNzaWduIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xudmFyIFN0YXR1cztcbihmdW5jdGlvbiAoU3RhdHVzKSB7XG4gICAgU3RhdHVzW1N0YXR1c1tcImluaXRcIl0gPSAwXSA9IFwiaW5pdFwiO1xuICAgIFN0YXR1c1tTdGF0dXNbXCJwbGF5XCJdID0gMV0gPSBcInBsYXlcIjtcbiAgICBTdGF0dXNbU3RhdHVzW1wicGF1c2VcIl0gPSAyXSA9IFwicGF1c2VcIjtcbiAgICBTdGF0dXNbU3RhdHVzW1wiZW5kXCJdID0gM10gPSBcImVuZFwiO1xufSkoU3RhdHVzIHx8IChTdGF0dXMgPSB7fSkpO1xudmFyIHVzZVNwZWVjaCA9IGZ1bmN0aW9uICh0ZXh0LCBvcHRpb25zKSB7XG4gICAgdmFyIG1vdW50ZWQgPSB1c2VSZWYoZmFsc2UpO1xuICAgIHZhciBfYSA9IHVzZVN0YXRlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hID0gb3B0aW9ucy52b2ljZSB8fCB7fSwgX2IgPSBfYS5sYW5nLCBsYW5nID0gX2IgPT09IHZvaWQgMCA/ICdkZWZhdWx0JyA6IF9iLCBfYyA9IF9hLm5hbWUsIG5hbWUgPSBfYyA9PT0gdm9pZCAwID8gJycgOiBfYztcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlzUGxheWluZzogZmFsc2UsXG4gICAgICAgICAgICBzdGF0dXM6IFN0YXR1c1tTdGF0dXMuaW5pdF0sXG4gICAgICAgICAgICBsYW5nOiBvcHRpb25zLmxhbmcgfHwgJ2RlZmF1bHQnLFxuICAgICAgICAgICAgdm9pY2VJbmZvOiB7IGxhbmc6IGxhbmcsIG5hbWU6IG5hbWUgfSxcbiAgICAgICAgICAgIHJhdGU6IG9wdGlvbnMucmF0ZSB8fCAxLFxuICAgICAgICAgICAgcGl0Y2g6IG9wdGlvbnMucGl0Y2ggfHwgMSxcbiAgICAgICAgICAgIHZvbHVtZTogb3B0aW9ucy52b2x1bWUgfHwgMSxcbiAgICAgICAgfTtcbiAgICB9KSwgc3RhdGUgPSBfYVswXSwgc2V0U3RhdGUgPSBfYVsxXTtcbiAgICB2YXIgaGFuZGxlUGxheSA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFtb3VudGVkLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzZXRTdGF0ZShmdW5jdGlvbiAocHJlU3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgcHJlU3RhdGUpLCB7IGlzUGxheWluZzogdHJ1ZSwgc3RhdHVzOiBTdGF0dXNbU3RhdHVzLnBsYXldIH0pO1xuICAgICAgICB9KTtcbiAgICB9LCBbXSk7XG4gICAgdmFyIGhhbmRsZVBhdXNlID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIW1vdW50ZWQuY3VycmVudCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNldFN0YXRlKGZ1bmN0aW9uIChwcmVTdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBwcmVTdGF0ZSksIHsgaXNQbGF5aW5nOiBmYWxzZSwgc3RhdHVzOiBTdGF0dXNbU3RhdHVzLnBhdXNlXSB9KTtcbiAgICAgICAgfSk7XG4gICAgfSwgW10pO1xuICAgIHZhciBoYW5kbGVFbmQgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghbW91bnRlZC5jdXJyZW50KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2V0U3RhdGUoZnVuY3Rpb24gKHByZVN0YXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIHByZVN0YXRlKSwgeyBpc1BsYXlpbmc6IGZhbHNlLCBzdGF0dXM6IFN0YXR1c1tTdGF0dXMuZW5kXSB9KTtcbiAgICAgICAgfSk7XG4gICAgfSwgW10pO1xuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIG1vdW50ZWQuY3VycmVudCA9IHRydWU7XG4gICAgICAgIHZhciB1dHRlcmFuY2UgPSBuZXcgU3BlZWNoU3ludGhlc2lzVXR0ZXJhbmNlKHRleHQpO1xuICAgICAgICBvcHRpb25zLmxhbmcgJiYgKHV0dGVyYW5jZS5sYW5nID0gb3B0aW9ucy5sYW5nKTtcbiAgICAgICAgb3B0aW9ucy52b2ljZSAmJiAodXR0ZXJhbmNlLnZvaWNlID0gb3B0aW9ucy52b2ljZSk7XG4gICAgICAgIHV0dGVyYW5jZS5yYXRlID0gb3B0aW9ucy5yYXRlIHx8IDE7XG4gICAgICAgIHV0dGVyYW5jZS5waXRjaCA9IG9wdGlvbnMucGl0Y2ggfHwgMTtcbiAgICAgICAgdXR0ZXJhbmNlLnZvbHVtZSA9IG9wdGlvbnMudm9sdW1lIHx8IDE7XG4gICAgICAgIHV0dGVyYW5jZS5vbnN0YXJ0ID0gaGFuZGxlUGxheTtcbiAgICAgICAgdXR0ZXJhbmNlLm9ucGF1c2UgPSBoYW5kbGVQYXVzZTtcbiAgICAgICAgdXR0ZXJhbmNlLm9ucmVzdW1lID0gaGFuZGxlUGxheTtcbiAgICAgICAgdXR0ZXJhbmNlLm9uZW5kID0gaGFuZGxlRW5kO1xuICAgICAgICB3aW5kb3cuc3BlZWNoU3ludGhlc2lzLnNwZWFrKHV0dGVyYW5jZSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBtb3VudGVkLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgICAgfTtcbiAgICB9LCBbXSk7XG4gICAgcmV0dXJuIHN0YXRlO1xufTtcbmV4cG9ydCBkZWZhdWx0IHVzZVNwZWVjaDtcbiIsImltcG9ydCB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0IGZyb20gJy4vdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCc7XG5pbXBvcnQgeyBvZmYsIG9uIH0gZnJvbSAnLi9taXNjL3V0aWwnO1xudmFyIGlzRm9jdXNlZEVsZW1lbnRFZGl0YWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYWN0aXZlRWxlbWVudCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsIGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuICAgIGlmICghYWN0aXZlRWxlbWVudCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIElmIG5vdCBlbGVtZW50IGhhcyBmb2N1cywgd2UgYXNzdW1lIGl0IGlzIG5vdCBlZGl0YWJsZSwgdG9vLlxuICAgIGlmIChhY3RpdmVFbGVtZW50ID09PSBib2R5KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gQXNzdW1lIDxpbnB1dD4gYW5kIDx0ZXh0YXJlYT4gZWxlbWVudHMgYXJlIGVkaXRhYmxlLlxuICAgIHN3aXRjaCAoYWN0aXZlRWxlbWVudC50YWdOYW1lKSB7XG4gICAgICAgIGNhc2UgJ0lOUFVUJzpcbiAgICAgICAgY2FzZSAnVEVYVEFSRUEnOlxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vIENoZWNrIGlmIGFueSBvdGhlciBmb2N1c2VkIGVsZW1lbnQgaWQgZWRpdGFibGUuXG4gICAgcmV0dXJuIGFjdGl2ZUVsZW1lbnQuaGFzQXR0cmlidXRlKCdjb250ZW50ZWRpdGFibGUnKTtcbn07XG52YXIgaXNUeXBlZENoYXJHb29kID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgdmFyIGtleUNvZGUgPSBfYS5rZXlDb2RlLCBtZXRhS2V5ID0gX2EubWV0YUtleSwgY3RybEtleSA9IF9hLmN0cmxLZXksIGFsdEtleSA9IF9hLmFsdEtleTtcbiAgICBpZiAobWV0YUtleSB8fCBjdHJsS2V5IHx8IGFsdEtleSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIDAuLi45XG4gICAgaWYgKGtleUNvZGUgPj0gNDggJiYga2V5Q29kZSA8PSA1Nykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy8gYS4uLnpcbiAgICBpZiAoa2V5Q29kZSA+PSA2NSAmJiBrZXlDb2RlIDw9IDkwKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLyBBbGwgb3RoZXIga2V5cy5cbiAgICByZXR1cm4gZmFsc2U7XG59O1xudmFyIHVzZVN0YXJ0VHlwaW5nID0gZnVuY3Rpb24gKG9uU3RhcnRUeXBpbmcpIHtcbiAgICB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGtleWRvd24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICFpc0ZvY3VzZWRFbGVtZW50RWRpdGFibGUoKSAmJiBpc1R5cGVkQ2hhckdvb2QoZXZlbnQpICYmIG9uU3RhcnRUeXBpbmcoZXZlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBvbihkb2N1bWVudCwgJ2tleWRvd24nLCBrZXlkb3duKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG9mZihkb2N1bWVudCwgJ2tleWRvd24nLCBrZXlkb3duKTtcbiAgICAgICAgfTtcbiAgICB9LCBbXSk7XG59O1xuZXhwb3J0IGRlZmF1bHQgdXNlU3RhcnRUeXBpbmc7XG4iLCJpbXBvcnQgeyBfX2Fzc2lnbiB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgdXNlTWVtbywgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHVzZU1vdW50ZWRTdGF0ZSBmcm9tICcuL3VzZU1vdW50ZWRTdGF0ZSc7XG5pbXBvcnQgdXNlVXBkYXRlIGZyb20gJy4vdXNlVXBkYXRlJztcbmltcG9ydCB1c2VVcGRhdGVFZmZlY3QgZnJvbSAnLi91c2VVcGRhdGVFZmZlY3QnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlU3RhdGVMaXN0KHN0YXRlU2V0KSB7XG4gICAgaWYgKHN0YXRlU2V0ID09PSB2b2lkIDApIHsgc3RhdGVTZXQgPSBbXTsgfVxuICAgIHZhciBpc01vdW50ZWQgPSB1c2VNb3VudGVkU3RhdGUoKTtcbiAgICB2YXIgdXBkYXRlID0gdXNlVXBkYXRlKCk7XG4gICAgdmFyIGluZGV4ID0gdXNlUmVmKDApO1xuICAgIC8vIElmIG5ldyBzdGF0ZSBsaXN0IGlzIHNob3J0ZXIgdGhhdCBiZWZvcmUgLSBzd2l0Y2ggdG8gdGhlIGxhc3QgZWxlbWVudFxuICAgIHVzZVVwZGF0ZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChzdGF0ZVNldC5sZW5ndGggPD0gaW5kZXguY3VycmVudCkge1xuICAgICAgICAgICAgaW5kZXguY3VycmVudCA9IHN0YXRlU2V0Lmxlbmd0aCAtIDE7XG4gICAgICAgICAgICB1cGRhdGUoKTtcbiAgICAgICAgfVxuICAgIH0sIFtzdGF0ZVNldC5sZW5ndGhdKTtcbiAgICB2YXIgYWN0aW9ucyA9IHVzZU1lbW8oZnVuY3Rpb24gKCkgeyByZXR1cm4gKHtcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYWN0aW9ucy5zZXRTdGF0ZUF0KGluZGV4LmN1cnJlbnQgKyAxKTsgfSxcbiAgICAgICAgcHJldjogZnVuY3Rpb24gKCkgeyByZXR1cm4gYWN0aW9ucy5zZXRTdGF0ZUF0KGluZGV4LmN1cnJlbnQgLSAxKTsgfSxcbiAgICAgICAgc2V0U3RhdGVBdDogZnVuY3Rpb24gKG5ld0luZGV4KSB7XG4gICAgICAgICAgICAvLyBkbyBub3RoaW5nIG9uIHVubW91bnRlZCBjb21wb25lbnRcbiAgICAgICAgICAgIGlmICghaXNNb3VudGVkKCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgLy8gZG8gbm90aGluZyBvbiBlbXB0eSBzdGF0ZXMgbGlzdFxuICAgICAgICAgICAgaWYgKCFzdGF0ZVNldC5sZW5ndGgpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgLy8gaW4gY2FzZSBuZXcgaW5kZXggaXMgZXF1YWwgY3VycmVudCAtIGRvIG5vdGhpbmdcbiAgICAgICAgICAgIGlmIChuZXdJbmRleCA9PT0gaW5kZXguY3VycmVudClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAvLyBpdCBnaXZlcyB0aGUgYWJpbGl0eSB0byB0cmF2ZWwgdGhyb3VnaCB0aGUgbGVmdCBhbmQgcmlnaHQgYm9yZGVycy5cbiAgICAgICAgICAgIC8vIDRleDogaWYgbGlzdCBjb250YWlucyA1IGVsZW1lbnRzLCBhdHRlbXB0IHRvIHNldCBpbmRleCA5IHdpbGwgYnJpbmcgdXNlIHRvIDV0aCBlbGVtZW50XG4gICAgICAgICAgICAvLyBpbiBjYXNlIG9mIG5lZ2F0aXZlIGluZGV4IGl0IHdpbGwgc3RhcnQgY291bnRpbmcgZnJvbSB0aGUgcmlnaHQsIHNvIC0xNyB3aWxsIGJyaW5nIHVzIHRvIDR0aCBlbGVtZW50XG4gICAgICAgICAgICBpbmRleC5jdXJyZW50ID1cbiAgICAgICAgICAgICAgICBuZXdJbmRleCA+PSAwXG4gICAgICAgICAgICAgICAgICAgID8gbmV3SW5kZXggJSBzdGF0ZVNldC5sZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgOiBzdGF0ZVNldC5sZW5ndGggKyAobmV3SW5kZXggJSBzdGF0ZVNldC5sZW5ndGgpO1xuICAgICAgICAgICAgdXBkYXRlKCk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldFN0YXRlOiBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgICAgIC8vIGRvIG5vdGhpbmcgb24gdW5tb3VudGVkIGNvbXBvbmVudFxuICAgICAgICAgICAgaWYgKCFpc01vdW50ZWQoKSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB2YXIgbmV3SW5kZXggPSBzdGF0ZVNldC5sZW5ndGggPyBzdGF0ZVNldC5pbmRleE9mKHN0YXRlKSA6IC0xO1xuICAgICAgICAgICAgaWYgKG5ld0luZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN0YXRlICdcIiArIHN0YXRlICsgXCInIGlzIG5vdCBhIHZhbGlkIHN0YXRlIChkb2VzIG5vdCBleGlzdCBpbiBzdGF0ZSBsaXN0KVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGluZGV4LmN1cnJlbnQgPSBuZXdJbmRleDtcbiAgICAgICAgICAgIHVwZGF0ZSgpO1xuICAgICAgICB9LFxuICAgIH0pOyB9LCBbc3RhdGVTZXRdKTtcbiAgICByZXR1cm4gX19hc3NpZ24oeyBzdGF0ZTogc3RhdGVTZXRbaW5kZXguY3VycmVudF0sIGN1cnJlbnRJbmRleDogaW5kZXguY3VycmVudCB9LCBhY3Rpb25zKTtcbn1cbiIsImltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VTdGF0ZVZhbGlkYXRvcihzdGF0ZSwgdmFsaWRhdG9yLCBpbml0aWFsU3RhdGUpIHtcbiAgICBpZiAoaW5pdGlhbFN0YXRlID09PSB2b2lkIDApIHsgaW5pdGlhbFN0YXRlID0gW3VuZGVmaW5lZF07IH1cbiAgICB2YXIgdmFsaWRhdG9ySW5uZXIgPSB1c2VSZWYodmFsaWRhdG9yKTtcbiAgICB2YXIgc3RhdGVJbm5lciA9IHVzZVJlZihzdGF0ZSk7XG4gICAgdmFsaWRhdG9ySW5uZXIuY3VycmVudCA9IHZhbGlkYXRvcjtcbiAgICBzdGF0ZUlubmVyLmN1cnJlbnQgPSBzdGF0ZTtcbiAgICB2YXIgX2EgPSB1c2VTdGF0ZShpbml0aWFsU3RhdGUpLCB2YWxpZGl0eSA9IF9hWzBdLCBzZXRWYWxpZGl0eSA9IF9hWzFdO1xuICAgIHZhciB2YWxpZGF0ZSA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHZhbGlkYXRvcklubmVyLmN1cnJlbnQubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICAgIHZhbGlkYXRvcklubmVyLmN1cnJlbnQoc3RhdGVJbm5lci5jdXJyZW50LCBzZXRWYWxpZGl0eSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzZXRWYWxpZGl0eSh2YWxpZGF0b3JJbm5lci5jdXJyZW50KHN0YXRlSW5uZXIuY3VycmVudCkpO1xuICAgICAgICB9XG4gICAgfSwgW3NldFZhbGlkaXR5XSk7XG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFsaWRhdGUoKTtcbiAgICB9LCBbc3RhdGVdKTtcbiAgICByZXR1cm4gW3ZhbGlkaXR5LCB2YWxpZGF0ZV07XG59XG4iLCJpbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlTWVtbywgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUZpcnN0TW91bnRTdGF0ZSB9IGZyb20gJy4vdXNlRmlyc3RNb3VudFN0YXRlJztcbmltcG9ydCB7IHJlc29sdmVIb29rU3RhdGUgfSBmcm9tICcuL21pc2MvaG9va1N0YXRlJztcbmV4cG9ydCBmdW5jdGlvbiB1c2VTdGF0ZVdpdGhIaXN0b3J5KGluaXRpYWxTdGF0ZSwgY2FwYWNpdHksIGluaXRpYWxIaXN0b3J5KSB7XG4gICAgaWYgKGNhcGFjaXR5ID09PSB2b2lkIDApIHsgY2FwYWNpdHkgPSAxMDsgfVxuICAgIGlmIChjYXBhY2l0eSA8IDEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FwYWNpdHkgaGFzIHRvIGJlIGdyZWF0ZXIgdGhhbiAxLCBnb3QgJ1wiICsgY2FwYWNpdHkgKyBcIidcIik7XG4gICAgfVxuICAgIHZhciBpc0ZpcnN0TW91bnQgPSB1c2VGaXJzdE1vdW50U3RhdGUoKTtcbiAgICB2YXIgX2EgPSB1c2VTdGF0ZShpbml0aWFsU3RhdGUpLCBzdGF0ZSA9IF9hWzBdLCBpbm5lclNldFN0YXRlID0gX2FbMV07XG4gICAgdmFyIGhpc3RvcnkgPSB1c2VSZWYoKGluaXRpYWxIaXN0b3J5ICE9PSBudWxsICYmIGluaXRpYWxIaXN0b3J5ICE9PSB2b2lkIDAgPyBpbml0aWFsSGlzdG9yeSA6IFtdKSk7XG4gICAgdmFyIGhpc3RvcnlQb3NpdGlvbiA9IHVzZVJlZigwKTtcbiAgICAvLyBkbyB0aGUgc3RhdGVzIG1hbmlwdWxhdGlvbiBvbmx5IG9uIGZpcnN0IG1vdW50LCBubyBzZW5zZSB0byBsb2FkIHJlLXJlbmRlcnMgd2l0aCB1c2VsZXNzIGNhbGN1bGF0aW9uc1xuICAgIGlmIChpc0ZpcnN0TW91bnQpIHtcbiAgICAgICAgaWYgKGhpc3RvcnkuY3VycmVudC5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIGlmIGxhc3QgZWxlbWVudCBvZiBoaXN0b3J5ICE9PSBpbml0aWFsIC0gcHVzaCBpbml0aWFsIHRvIGhpc3RvcnlcbiAgICAgICAgICAgIGlmIChoaXN0b3J5LmN1cnJlbnRbaGlzdG9yeS5jdXJyZW50Lmxlbmd0aCAtIDFdICE9PSBpbml0aWFsU3RhdGUpIHtcbiAgICAgICAgICAgICAgICBoaXN0b3J5LmN1cnJlbnQucHVzaChpbml0aWFsU3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaWYgaW5pdGlhbCBoaXN0b3J5IGJpZ2dlciB0aGF0IGNhcGFjaXR5IC0gY3JvcCB0aGUgZmlyc3QgZWxlbWVudHMgb3V0XG4gICAgICAgICAgICBpZiAoaGlzdG9yeS5jdXJyZW50Lmxlbmd0aCA+IGNhcGFjaXR5KSB7XG4gICAgICAgICAgICAgICAgaGlzdG9yeS5jdXJyZW50ID0gaGlzdG9yeS5jdXJyZW50LnNsaWNlKGhpc3RvcnkuY3VycmVudC5sZW5ndGggLSBjYXBhY2l0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBpbml0aWF0ZSB0aGUgaGlzdG9yeSB3aXRoIGluaXRpYWwgc3RhdGVcbiAgICAgICAgICAgIGhpc3RvcnkuY3VycmVudC5wdXNoKGluaXRpYWxTdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaGlzdG9yeVBvc2l0aW9uLmN1cnJlbnQgPSBoaXN0b3J5LmN1cnJlbnQubGVuZ3RoICYmIGhpc3RvcnkuY3VycmVudC5sZW5ndGggLSAxO1xuICAgIH1cbiAgICB2YXIgc2V0U3RhdGUgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAobmV3U3RhdGUpIHtcbiAgICAgICAgaW5uZXJTZXRTdGF0ZShmdW5jdGlvbiAoY3VycmVudFN0YXRlKSB7XG4gICAgICAgICAgICBuZXdTdGF0ZSA9IHJlc29sdmVIb29rU3RhdGUobmV3U3RhdGUsIGN1cnJlbnRTdGF0ZSk7XG4gICAgICAgICAgICAvLyBpcyBzdGF0ZSBoYXMgY2hhbmdlZFxuICAgICAgICAgICAgaWYgKG5ld1N0YXRlICE9PSBjdXJyZW50U3RhdGUpIHtcbiAgICAgICAgICAgICAgICAvLyBpZiBjdXJyZW50IHBvc2l0aW9uIGlzIG5vdCB0aGUgbGFzdCAtIHBvcCBlbGVtZW50IHRvIHRoZSByaWdodFxuICAgICAgICAgICAgICAgIGlmIChoaXN0b3J5UG9zaXRpb24uY3VycmVudCA8IGhpc3RvcnkuY3VycmVudC5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGhpc3RvcnkuY3VycmVudCA9IGhpc3RvcnkuY3VycmVudC5zbGljZSgwLCBoaXN0b3J5UG9zaXRpb24uY3VycmVudCArIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBoaXN0b3J5UG9zaXRpb24uY3VycmVudCA9IGhpc3RvcnkuY3VycmVudC5wdXNoKG5ld1N0YXRlKSAtIDE7XG4gICAgICAgICAgICAgICAgLy8gaWYgY2FwYWNpdHkgaXMgcmVhY2hlZCAtIHNoaWZ0IGZpcnN0IGVsZW1lbnRzXG4gICAgICAgICAgICAgICAgaWYgKGhpc3RvcnkuY3VycmVudC5sZW5ndGggPiBjYXBhY2l0eSkge1xuICAgICAgICAgICAgICAgICAgICBoaXN0b3J5LmN1cnJlbnQgPSBoaXN0b3J5LmN1cnJlbnQuc2xpY2UoaGlzdG9yeS5jdXJyZW50Lmxlbmd0aCAtIGNhcGFjaXR5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3U3RhdGU7XG4gICAgICAgIH0pO1xuICAgIH0sIFtzdGF0ZSwgY2FwYWNpdHldKTtcbiAgICB2YXIgaGlzdG9yeVN0YXRlID0gdXNlTWVtbyhmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xuICAgICAgICBoaXN0b3J5OiBoaXN0b3J5LmN1cnJlbnQsXG4gICAgICAgIHBvc2l0aW9uOiBoaXN0b3J5UG9zaXRpb24uY3VycmVudCxcbiAgICAgICAgY2FwYWNpdHk6IGNhcGFjaXR5LFxuICAgICAgICBiYWNrOiBmdW5jdGlvbiAoYW1vdW50KSB7XG4gICAgICAgICAgICBpZiAoYW1vdW50ID09PSB2b2lkIDApIHsgYW1vdW50ID0gMTsgfVxuICAgICAgICAgICAgLy8gZG9uJ3QgZG8gYW55dGhpbmcgaWYgd2UgYWxyZWFkeSBhdCB0aGUgbGVmdCBib3JkZXJcbiAgICAgICAgICAgIGlmICghaGlzdG9yeVBvc2l0aW9uLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbm5lclNldFN0YXRlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBoaXN0b3J5UG9zaXRpb24uY3VycmVudCAtPSBNYXRoLm1pbihhbW91bnQsIGhpc3RvcnlQb3NpdGlvbi5jdXJyZW50KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaGlzdG9yeS5jdXJyZW50W2hpc3RvcnlQb3NpdGlvbi5jdXJyZW50XTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBmb3J3YXJkOiBmdW5jdGlvbiAoYW1vdW50KSB7XG4gICAgICAgICAgICBpZiAoYW1vdW50ID09PSB2b2lkIDApIHsgYW1vdW50ID0gMTsgfVxuICAgICAgICAgICAgLy8gZG9uJ3QgZG8gYW55dGhpbmcgaWYgd2UgYWxyZWFkeSBhdCB0aGUgcmlnaHQgYm9yZGVyXG4gICAgICAgICAgICBpZiAoaGlzdG9yeVBvc2l0aW9uLmN1cnJlbnQgPT09IGhpc3RvcnkuY3VycmVudC5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5uZXJTZXRTdGF0ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaGlzdG9yeVBvc2l0aW9uLmN1cnJlbnQgPSBNYXRoLm1pbihoaXN0b3J5UG9zaXRpb24uY3VycmVudCArIGFtb3VudCwgaGlzdG9yeS5jdXJyZW50Lmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgICAgIHJldHVybiBoaXN0b3J5LmN1cnJlbnRbaGlzdG9yeVBvc2l0aW9uLmN1cnJlbnRdO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGdvOiBmdW5jdGlvbiAocG9zaXRpb24pIHtcbiAgICAgICAgICAgIGlmIChwb3NpdGlvbiA9PT0gaGlzdG9yeVBvc2l0aW9uLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbm5lclNldFN0YXRlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBoaXN0b3J5UG9zaXRpb24uY3VycmVudCA9XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uIDwgMFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBNYXRoLm1heChoaXN0b3J5LmN1cnJlbnQubGVuZ3RoICsgcG9zaXRpb24sIDApXG4gICAgICAgICAgICAgICAgICAgICAgICA6IE1hdGgubWluKGhpc3RvcnkuY3VycmVudC5sZW5ndGggLSAxLCBwb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhpc3RvcnkuY3VycmVudFtoaXN0b3J5UG9zaXRpb24uY3VycmVudF07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICB9KTsgfSwgW3N0YXRlXSk7XG4gICAgcmV0dXJuIFtzdGF0ZSwgc2V0U3RhdGUsIGhpc3RvcnlTdGF0ZV07XG59XG4iLCJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgdXNlVW5tb3VudCBmcm9tICcuL3VzZVVubW91bnQnO1xudmFyIHVzZVRocm90dGxlID0gZnVuY3Rpb24gKHZhbHVlLCBtcykge1xuICAgIGlmIChtcyA9PT0gdm9pZCAwKSB7IG1zID0gMjAwOyB9XG4gICAgdmFyIF9hID0gdXNlU3RhdGUodmFsdWUpLCBzdGF0ZSA9IF9hWzBdLCBzZXRTdGF0ZSA9IF9hWzFdO1xuICAgIHZhciB0aW1lb3V0ID0gdXNlUmVmKCk7XG4gICAgdmFyIG5leHRWYWx1ZSA9IHVzZVJlZihudWxsKTtcbiAgICB2YXIgaGFzTmV4dFZhbHVlID0gdXNlUmVmKDApO1xuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGltZW91dC5jdXJyZW50KSB7XG4gICAgICAgICAgICBzZXRTdGF0ZSh2YWx1ZSk7XG4gICAgICAgICAgICB2YXIgdGltZW91dENhbGxiYWNrXzEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhc05leHRWYWx1ZS5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGhhc05leHRWYWx1ZS5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHNldFN0YXRlKG5leHRWYWx1ZS5jdXJyZW50KTtcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dC5jdXJyZW50ID0gc2V0VGltZW91dCh0aW1lb3V0Q2FsbGJhY2tfMSwgbXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dC5jdXJyZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aW1lb3V0LmN1cnJlbnQgPSBzZXRUaW1lb3V0KHRpbWVvdXRDYWxsYmFja18xLCBtcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBuZXh0VmFsdWUuY3VycmVudCA9IHZhbHVlO1xuICAgICAgICAgICAgaGFzTmV4dFZhbHVlLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSwgW3ZhbHVlXSk7XG4gICAgdXNlVW5tb3VudChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRpbWVvdXQuY3VycmVudCAmJiBjbGVhclRpbWVvdXQodGltZW91dC5jdXJyZW50KTtcbiAgICB9KTtcbiAgICByZXR1cm4gc3RhdGU7XG59O1xuZXhwb3J0IGRlZmF1bHQgdXNlVGhyb3R0bGU7XG4iLCJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgdXNlVW5tb3VudCBmcm9tICcuL3VzZVVubW91bnQnO1xudmFyIHVzZVRocm90dGxlRm4gPSBmdW5jdGlvbiAoZm4sIG1zLCBhcmdzKSB7XG4gICAgaWYgKG1zID09PSB2b2lkIDApIHsgbXMgPSAyMDA7IH1cbiAgICB2YXIgX2EgPSB1c2VTdGF0ZShudWxsKSwgc3RhdGUgPSBfYVswXSwgc2V0U3RhdGUgPSBfYVsxXTtcbiAgICB2YXIgdGltZW91dCA9IHVzZVJlZigpO1xuICAgIHZhciBuZXh0QXJncyA9IHVzZVJlZigpO1xuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGltZW91dC5jdXJyZW50KSB7XG4gICAgICAgICAgICBzZXRTdGF0ZShmbi5hcHBseSh2b2lkIDAsIGFyZ3MpKTtcbiAgICAgICAgICAgIHZhciB0aW1lb3V0Q2FsbGJhY2tfMSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAobmV4dEFyZ3MuY3VycmVudCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRTdGF0ZShmbi5hcHBseSh2b2lkIDAsIG5leHRBcmdzLmN1cnJlbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgbmV4dEFyZ3MuY3VycmVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dC5jdXJyZW50ID0gc2V0VGltZW91dCh0aW1lb3V0Q2FsbGJhY2tfMSwgbXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dC5jdXJyZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aW1lb3V0LmN1cnJlbnQgPSBzZXRUaW1lb3V0KHRpbWVvdXRDYWxsYmFja18xLCBtcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBuZXh0QXJncy5jdXJyZW50ID0gYXJncztcbiAgICAgICAgfVxuICAgIH0sIGFyZ3MpO1xuICAgIHVzZVVubW91bnQoZnVuY3Rpb24gKCkge1xuICAgICAgICB0aW1lb3V0LmN1cnJlbnQgJiYgY2xlYXJUaW1lb3V0KHRpbWVvdXQuY3VycmVudCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHN0YXRlO1xufTtcbmV4cG9ydCBkZWZhdWx0IHVzZVRocm90dGxlRm47XG4iLCJpbXBvcnQgdXNlVGltZW91dEZuIGZyb20gJy4vdXNlVGltZW91dEZuJztcbmltcG9ydCB1c2VVcGRhdGUgZnJvbSAnLi91c2VVcGRhdGUnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlVGltZW91dChtcykge1xuICAgIGlmIChtcyA9PT0gdm9pZCAwKSB7IG1zID0gMDsgfVxuICAgIHZhciB1cGRhdGUgPSB1c2VVcGRhdGUoKTtcbiAgICByZXR1cm4gdXNlVGltZW91dEZuKHVwZGF0ZSwgbXMpO1xufVxuIiwiaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlVGltZW91dEZuKGZuLCBtcykge1xuICAgIGlmIChtcyA9PT0gdm9pZCAwKSB7IG1zID0gMDsgfVxuICAgIHZhciByZWFkeSA9IHVzZVJlZihmYWxzZSk7XG4gICAgdmFyIHRpbWVvdXQgPSB1c2VSZWYoKTtcbiAgICB2YXIgY2FsbGJhY2sgPSB1c2VSZWYoZm4pO1xuICAgIHZhciBpc1JlYWR5ID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVhZHkuY3VycmVudDsgfSwgW10pO1xuICAgIHZhciBzZXQgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJlYWR5LmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgICAgdGltZW91dC5jdXJyZW50ICYmIGNsZWFyVGltZW91dCh0aW1lb3V0LmN1cnJlbnQpO1xuICAgICAgICB0aW1lb3V0LmN1cnJlbnQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlYWR5LmN1cnJlbnQgPSB0cnVlO1xuICAgICAgICAgICAgY2FsbGJhY2suY3VycmVudCgpO1xuICAgICAgICB9LCBtcyk7XG4gICAgfSwgW21zXSk7XG4gICAgdmFyIGNsZWFyID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKCkge1xuICAgICAgICByZWFkeS5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgdGltZW91dC5jdXJyZW50ICYmIGNsZWFyVGltZW91dCh0aW1lb3V0LmN1cnJlbnQpO1xuICAgIH0sIFtdKTtcbiAgICAvLyB1cGRhdGUgcmVmIHdoZW4gZnVuY3Rpb24gY2hhbmdlc1xuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNhbGxiYWNrLmN1cnJlbnQgPSBmbjtcbiAgICB9LCBbZm5dKTtcbiAgICAvLyBzZXQgb24gbW91bnQsIGNsZWFyIG9uIHVubW91bnRcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICBzZXQoKTtcbiAgICAgICAgcmV0dXJuIGNsZWFyO1xuICAgIH0sIFttc10pO1xuICAgIHJldHVybiBbaXNSZWFkeSwgY2xlYXIsIHNldF07XG59XG4iLCJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbnZhciBERUZBVUxUX1VTRV9USVRMRV9PUFRJT05TID0ge1xuICAgIHJlc3RvcmVPblVubW91bnQ6IGZhbHNlLFxufTtcbmZ1bmN0aW9uIHVzZVRpdGxlKHRpdGxlLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0gREVGQVVMVF9VU0VfVElUTEVfT1BUSU9OUzsgfVxuICAgIHZhciBwcmV2VGl0bGVSZWYgPSB1c2VSZWYoZG9jdW1lbnQudGl0bGUpO1xuICAgIGlmIChkb2N1bWVudC50aXRsZSAhPT0gdGl0bGUpXG4gICAgICAgIGRvY3VtZW50LnRpdGxlID0gdGl0bGU7XG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5yZXN0b3JlT25Vbm1vdW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LnRpdGxlID0gcHJldlRpdGxlUmVmLmN1cnJlbnQ7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfSwgW10pO1xufVxuZXhwb3J0IGRlZmF1bHQgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyA/IHVzZVRpdGxlIDogZnVuY3Rpb24gKF90aXRsZSkgeyB9O1xuIiwiaW1wb3J0IHsgdXNlUmVkdWNlciB9IGZyb20gJ3JlYWN0JztcbnZhciB0b2dnbGVSZWR1Y2VyID0gZnVuY3Rpb24gKHN0YXRlLCBuZXh0VmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIG5leHRWYWx1ZSA9PT0gJ2Jvb2xlYW4nID8gbmV4dFZhbHVlIDogIXN0YXRlO1xufTtcbnZhciB1c2VUb2dnbGUgPSBmdW5jdGlvbiAoaW5pdGlhbFZhbHVlKSB7XG4gICAgcmV0dXJuIHVzZVJlZHVjZXIodG9nZ2xlUmVkdWNlciwgaW5pdGlhbFZhbHVlKTtcbn07XG5leHBvcnQgZGVmYXVsdCB1c2VUb2dnbGU7XG4iLCJpbXBvcnQgeyBlYXNpbmcgfSBmcm9tICd0cy1lYXNpbmcnO1xuaW1wb3J0IHVzZVJhZiBmcm9tICcuL3VzZVJhZic7XG52YXIgdXNlVHdlZW4gPSBmdW5jdGlvbiAoZWFzaW5nTmFtZSwgbXMsIGRlbGF5KSB7XG4gICAgaWYgKGVhc2luZ05hbWUgPT09IHZvaWQgMCkgeyBlYXNpbmdOYW1lID0gJ2luQ2lyYyc7IH1cbiAgICBpZiAobXMgPT09IHZvaWQgMCkgeyBtcyA9IDIwMDsgfVxuICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7IGRlbGF5ID0gMDsgfVxuICAgIHZhciBmbiA9IGVhc2luZ1tlYXNpbmdOYW1lXTtcbiAgICB2YXIgdCA9IHVzZVJhZihtcywgZGVsYXkpO1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3VzZVR3ZWVuKCkgZXhwZWN0ZWQgXCJlYXNpbmdOYW1lXCIgcHJvcGVydHkgdG8gYmUgYSB2YWxpZCBlYXNpbmcgZnVuY3Rpb24gbmFtZSwgbGlrZTonICtcbiAgICAgICAgICAgICAgICAnXCInICtcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhlYXNpbmcpLmpvaW4oJ1wiLCBcIicpICtcbiAgICAgICAgICAgICAgICAnXCIuJyk7XG4gICAgICAgICAgICBjb25zb2xlLnRyYWNlKCk7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZm4odCk7XG59O1xuZXhwb3J0IGRlZmF1bHQgdXNlVHdlZW47XG4iLCJpbXBvcnQgeyB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgdXNlRWZmZWN0T25jZSBmcm9tICcuL3VzZUVmZmVjdE9uY2UnO1xudmFyIHVzZVVubW91bnQgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICB2YXIgZm5SZWYgPSB1c2VSZWYoZm4pO1xuICAgIC8vIHVwZGF0ZSB0aGUgcmVmIGVhY2ggcmVuZGVyIHNvIGlmIGl0IGNoYW5nZSB0aGUgbmV3ZXN0IGNhbGxiYWNrIHdpbGwgYmUgaW52b2tlZFxuICAgIGZuUmVmLmN1cnJlbnQgPSBmbjtcbiAgICB1c2VFZmZlY3RPbmNlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZuUmVmLmN1cnJlbnQoKTsgfTsgfSk7XG59O1xuZXhwb3J0IGRlZmF1bHQgdXNlVW5tb3VudDtcbiIsImltcG9ydCB7IHVzZU1lbW8sIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB1c2VFZmZlY3RPbmNlIGZyb20gJy4vdXNlRWZmZWN0T25jZSc7XG52YXIgdXNlVW5tb3VudFByb21pc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHJlZlVubW91bnRlZCA9IHVzZVJlZihmYWxzZSk7XG4gICAgdXNlRWZmZWN0T25jZShmdW5jdGlvbiAoKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJlZlVubW91bnRlZC5jdXJyZW50ID0gdHJ1ZTtcbiAgICB9OyB9KTtcbiAgICB2YXIgd3JhcHBlciA9IHVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmFjZSA9IGZ1bmN0aW9uIChwcm9taXNlLCBvbkVycm9yKSB7XG4gICAgICAgICAgICB2YXIgbmV3UHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlZlVubW91bnRlZC5jdXJyZW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlZlVubW91bnRlZC5jdXJyZW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob25FcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCd1c2VVbm1vdW50UHJvbWlzZScsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIG5ld1Byb21pc2U7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiByYWNlO1xuICAgIH0sIFtdKTtcbiAgICByZXR1cm4gd3JhcHBlcjtcbn07XG5leHBvcnQgZGVmYXVsdCB1c2VVbm1vdW50UHJvbWlzZTtcbiIsImltcG9ydCB7IHVzZVJlZHVjZXIgfSBmcm9tICdyZWFjdCc7XG52YXIgdXBkYXRlUmVkdWNlciA9IGZ1bmN0aW9uIChudW0pIHsgcmV0dXJuIChudW0gKyAxKSAlIDEwMDAwMDA7IH07XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VVcGRhdGUoKSB7XG4gICAgdmFyIF9hID0gdXNlUmVkdWNlcih1cGRhdGVSZWR1Y2VyLCAwKSwgdXBkYXRlID0gX2FbMV07XG4gICAgcmV0dXJuIHVwZGF0ZTtcbn1cbiIsImltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUZpcnN0TW91bnRTdGF0ZSB9IGZyb20gJy4vdXNlRmlyc3RNb3VudFN0YXRlJztcbnZhciB1c2VVcGRhdGVFZmZlY3QgPSBmdW5jdGlvbiAoZWZmZWN0LCBkZXBzKSB7XG4gICAgdmFyIGlzRmlyc3RNb3VudCA9IHVzZUZpcnN0TW91bnRTdGF0ZSgpO1xuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghaXNGaXJzdE1vdW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZWZmZWN0KCk7XG4gICAgICAgIH1cbiAgICB9LCBkZXBzKTtcbn07XG5leHBvcnQgZGVmYXVsdCB1c2VVcGRhdGVFZmZlY3Q7XG4iLCJpbXBvcnQgeyBfX2Fzc2lnbiB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHVzZUxpc3QgZnJvbSAnLi91c2VMaXN0Jztcbi8qKlxuICogQGRlcHJlY2F0ZWQgVXNlIGB1c2VMaXN0YCBob29rJ3MgdXBzZXJ0IGFjdGlvbiBpbnN0ZWFkXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZVVwc2VydChwcmVkaWNhdGUsIGluaXRpYWxMaXN0KSB7XG4gICAgaWYgKGluaXRpYWxMaXN0ID09PSB2b2lkIDApIHsgaW5pdGlhbExpc3QgPSBbXTsgfVxuICAgIHZhciBfYSA9IHVzZUxpc3QoaW5pdGlhbExpc3QpLCBsaXN0ID0gX2FbMF0sIGxpc3RBY3Rpb25zID0gX2FbMV07XG4gICAgcmV0dXJuIFtcbiAgICAgICAgbGlzdCxcbiAgICAgICAgX19hc3NpZ24oX19hc3NpZ24oe30sIGxpc3RBY3Rpb25zKSwgeyB1cHNlcnQ6IGZ1bmN0aW9uIChuZXdJdGVtKSB7XG4gICAgICAgICAgICAgICAgbGlzdEFjdGlvbnMudXBzZXJ0KHByZWRpY2F0ZSwgbmV3SXRlbSk7XG4gICAgICAgICAgICB9IH0pLFxuICAgIF07XG59XG4iLCJpbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBpc05hdmlnYXRvciwgbm9vcCB9IGZyb20gJy4vbWlzYy91dGlsJztcbnZhciBpc1ZpYnJhdGlvbkFwaVN1cHBvcnRlZCA9IGlzTmF2aWdhdG9yICYmICd2aWJyYXRlJyBpbiBuYXZpZ2F0b3I7XG5mdW5jdGlvbiB1c2VWaWJyYXRlKGVuYWJsZWQsIHBhdHRlcm4sIGxvb3ApIHtcbiAgICBpZiAoZW5hYmxlZCA9PT0gdm9pZCAwKSB7IGVuYWJsZWQgPSB0cnVlOyB9XG4gICAgaWYgKHBhdHRlcm4gPT09IHZvaWQgMCkgeyBwYXR0ZXJuID0gWzEwMDAsIDEwMDBdOyB9XG4gICAgaWYgKGxvb3AgPT09IHZvaWQgMCkgeyBsb29wID0gdHJ1ZTsgfVxuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpbnRlcnZhbDtcbiAgICAgICAgaWYgKGVuYWJsZWQpIHtcbiAgICAgICAgICAgIG5hdmlnYXRvci52aWJyYXRlKHBhdHRlcm4pO1xuICAgICAgICAgICAgaWYgKGxvb3ApIHtcbiAgICAgICAgICAgICAgICB2YXIgZHVyYXRpb24gPSBwYXR0ZXJuIGluc3RhbmNlb2YgQXJyYXkgPyBwYXR0ZXJuLnJlZHVjZShmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYSArIGI7IH0pIDogcGF0dGVybjtcbiAgICAgICAgICAgICAgICBpbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLnZpYnJhdGUocGF0dGVybik7XG4gICAgICAgICAgICAgICAgfSwgZHVyYXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoZW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIG5hdmlnYXRvci52aWJyYXRlKDApO1xuICAgICAgICAgICAgICAgIGlmIChsb29wKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9LCBbZW5hYmxlZF0pO1xufVxuZXhwb3J0IGRlZmF1bHQgaXNWaWJyYXRpb25BcGlTdXBwb3J0ZWQgPyB1c2VWaWJyYXRlIDogbm9vcDtcbiIsImltcG9ydCBjcmVhdGVIVE1MTWVkaWFIb29rIGZyb20gJy4vZmFjdG9yeS9jcmVhdGVIVE1MTWVkaWFIb29rJztcbnZhciB1c2VWaWRlbyA9IGNyZWF0ZUhUTUxNZWRpYUhvb2soJ3ZpZGVvJyk7XG5leHBvcnQgZGVmYXVsdCB1c2VWaWRlbztcbiIsImltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGlzQnJvd3Nlciwgb2ZmLCBvbiB9IGZyb20gJy4vbWlzYy91dGlsJztcbmltcG9ydCB1c2VSYWZTdGF0ZSBmcm9tICcuL3VzZVJhZlN0YXRlJztcbnZhciB1c2VXaW5kb3dTY3JvbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9hID0gdXNlUmFmU3RhdGUoZnVuY3Rpb24gKCkgeyByZXR1cm4gKHtcbiAgICAgICAgeDogaXNCcm93c2VyID8gd2luZG93LnBhZ2VYT2Zmc2V0IDogMCxcbiAgICAgICAgeTogaXNCcm93c2VyID8gd2luZG93LnBhZ2VZT2Zmc2V0IDogMCxcbiAgICB9KTsgfSksIHN0YXRlID0gX2FbMF0sIHNldFN0YXRlID0gX2FbMV07XG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZXRTdGF0ZShmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFnZVhPZmZzZXQgPSB3aW5kb3cucGFnZVhPZmZzZXQsIHBhZ2VZT2Zmc2V0ID0gd2luZG93LnBhZ2VZT2Zmc2V0O1xuICAgICAgICAgICAgICAgIC8vQ2hlY2sgc3RhdGUgZm9yIGNoYW5nZSwgcmV0dXJuIHNhbWUgc3RhdGUgaWYgbm8gY2hhbmdlIGhhcHBlbmVkIHRvIHByZXZlbnQgcmVyZW5kZXJcbiAgICAgICAgICAgICAgICAvLyhzZWUgdXNlU3RhdGUvc2V0U3RhdGUgZG9jdW1lbnRhdGlvbikuIHVzZVN0YXRlL3NldFN0YXRlIGlzIHVzZWQgaW50ZXJuYWxseSBpbiB1c2VSYWZTdGF0ZS9zZXRTdGF0ZS5cbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGUueCAhPT0gcGFnZVhPZmZzZXQgfHwgc3RhdGUueSAhPT0gcGFnZVlPZmZzZXRcbiAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4OiBwYWdlWE9mZnNldCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IHBhZ2VZT2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDogc3RhdGU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgLy9XZSBoYXZlIHRvIHVwZGF0ZSB3aW5kb3cgc2Nyb2xsIGF0IG1vdW50LCBiZWZvcmUgc3Vic2NyaXB0aW9uLlxuICAgICAgICAvL1dpbmRvdyBzY3JvbGwgbWF5IGJlIGNoYW5nZWQgYmV0d2VlbiByZW5kZXIgYW5kIGVmZmVjdCBoYW5kbGVyLlxuICAgICAgICBoYW5kbGVyKCk7XG4gICAgICAgIG9uKHdpbmRvdywgJ3Njcm9sbCcsIGhhbmRsZXIsIHtcbiAgICAgICAgICAgIGNhcHR1cmU6IGZhbHNlLFxuICAgICAgICAgICAgcGFzc2l2ZTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBvZmYod2luZG93LCAnc2Nyb2xsJywgaGFuZGxlcik7XG4gICAgICAgIH07XG4gICAgfSwgW10pO1xuICAgIHJldHVybiBzdGF0ZTtcbn07XG5leHBvcnQgZGVmYXVsdCB1c2VXaW5kb3dTY3JvbGw7XG4iLCJpbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgdXNlUmFmU3RhdGUgZnJvbSAnLi91c2VSYWZTdGF0ZSc7XG5pbXBvcnQgeyBpc0Jyb3dzZXIsIG9mZiwgb24gfSBmcm9tICcuL21pc2MvdXRpbCc7XG52YXIgdXNlV2luZG93U2l6ZSA9IGZ1bmN0aW9uIChpbml0aWFsV2lkdGgsIGluaXRpYWxIZWlnaHQpIHtcbiAgICBpZiAoaW5pdGlhbFdpZHRoID09PSB2b2lkIDApIHsgaW5pdGlhbFdpZHRoID0gSW5maW5pdHk7IH1cbiAgICBpZiAoaW5pdGlhbEhlaWdodCA9PT0gdm9pZCAwKSB7IGluaXRpYWxIZWlnaHQgPSBJbmZpbml0eTsgfVxuICAgIHZhciBfYSA9IHVzZVJhZlN0YXRlKHtcbiAgICAgICAgd2lkdGg6IGlzQnJvd3NlciA/IHdpbmRvdy5pbm5lcldpZHRoIDogaW5pdGlhbFdpZHRoLFxuICAgICAgICBoZWlnaHQ6IGlzQnJvd3NlciA/IHdpbmRvdy5pbm5lckhlaWdodCA6IGluaXRpYWxIZWlnaHQsXG4gICAgfSksIHN0YXRlID0gX2FbMF0sIHNldFN0YXRlID0gX2FbMV07XG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGlzQnJvd3Nlcikge1xuICAgICAgICAgICAgdmFyIGhhbmRsZXJfMSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBzZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiB3aW5kb3cuaW5uZXJXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgb24od2luZG93LCAncmVzaXplJywgaGFuZGxlcl8xKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgb2ZmKHdpbmRvdywgJ3Jlc2l6ZScsIGhhbmRsZXJfMSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfSwgW10pO1xuICAgIHJldHVybiBzdGF0ZTtcbn07XG5leHBvcnQgZGVmYXVsdCB1c2VXaW5kb3dTaXplO1xuIiwiLyohXG4qIHNjcmVlbmZ1bGxcbiogdjUuMS4wIC0gMjAyMC0xMi0yNFxuKiAoYykgU2luZHJlIFNvcmh1czsgTUlUIExpY2Vuc2VcbiovXG4oZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIGRvY3VtZW50ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpbmRvdy5kb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cuZG9jdW1lbnQgOiB7fTtcblx0dmFyIGlzQ29tbW9uanMgPSB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cztcblxuXHR2YXIgZm4gPSAoZnVuY3Rpb24gKCkge1xuXHRcdHZhciB2YWw7XG5cblx0XHR2YXIgZm5NYXAgPSBbXG5cdFx0XHRbXG5cdFx0XHRcdCdyZXF1ZXN0RnVsbHNjcmVlbicsXG5cdFx0XHRcdCdleGl0RnVsbHNjcmVlbicsXG5cdFx0XHRcdCdmdWxsc2NyZWVuRWxlbWVudCcsXG5cdFx0XHRcdCdmdWxsc2NyZWVuRW5hYmxlZCcsXG5cdFx0XHRcdCdmdWxsc2NyZWVuY2hhbmdlJyxcblx0XHRcdFx0J2Z1bGxzY3JlZW5lcnJvcidcblx0XHRcdF0sXG5cdFx0XHQvLyBOZXcgV2ViS2l0XG5cdFx0XHRbXG5cdFx0XHRcdCd3ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbicsXG5cdFx0XHRcdCd3ZWJraXRFeGl0RnVsbHNjcmVlbicsXG5cdFx0XHRcdCd3ZWJraXRGdWxsc2NyZWVuRWxlbWVudCcsXG5cdFx0XHRcdCd3ZWJraXRGdWxsc2NyZWVuRW5hYmxlZCcsXG5cdFx0XHRcdCd3ZWJraXRmdWxsc2NyZWVuY2hhbmdlJyxcblx0XHRcdFx0J3dlYmtpdGZ1bGxzY3JlZW5lcnJvcidcblxuXHRcdFx0XSxcblx0XHRcdC8vIE9sZCBXZWJLaXRcblx0XHRcdFtcblx0XHRcdFx0J3dlYmtpdFJlcXVlc3RGdWxsU2NyZWVuJyxcblx0XHRcdFx0J3dlYmtpdENhbmNlbEZ1bGxTY3JlZW4nLFxuXHRcdFx0XHQnd2Via2l0Q3VycmVudEZ1bGxTY3JlZW5FbGVtZW50Jyxcblx0XHRcdFx0J3dlYmtpdENhbmNlbEZ1bGxTY3JlZW4nLFxuXHRcdFx0XHQnd2Via2l0ZnVsbHNjcmVlbmNoYW5nZScsXG5cdFx0XHRcdCd3ZWJraXRmdWxsc2NyZWVuZXJyb3InXG5cblx0XHRcdF0sXG5cdFx0XHRbXG5cdFx0XHRcdCdtb3pSZXF1ZXN0RnVsbFNjcmVlbicsXG5cdFx0XHRcdCdtb3pDYW5jZWxGdWxsU2NyZWVuJyxcblx0XHRcdFx0J21vekZ1bGxTY3JlZW5FbGVtZW50Jyxcblx0XHRcdFx0J21vekZ1bGxTY3JlZW5FbmFibGVkJyxcblx0XHRcdFx0J21vemZ1bGxzY3JlZW5jaGFuZ2UnLFxuXHRcdFx0XHQnbW96ZnVsbHNjcmVlbmVycm9yJ1xuXHRcdFx0XSxcblx0XHRcdFtcblx0XHRcdFx0J21zUmVxdWVzdEZ1bGxzY3JlZW4nLFxuXHRcdFx0XHQnbXNFeGl0RnVsbHNjcmVlbicsXG5cdFx0XHRcdCdtc0Z1bGxzY3JlZW5FbGVtZW50Jyxcblx0XHRcdFx0J21zRnVsbHNjcmVlbkVuYWJsZWQnLFxuXHRcdFx0XHQnTVNGdWxsc2NyZWVuQ2hhbmdlJyxcblx0XHRcdFx0J01TRnVsbHNjcmVlbkVycm9yJ1xuXHRcdFx0XVxuXHRcdF07XG5cblx0XHR2YXIgaSA9IDA7XG5cdFx0dmFyIGwgPSBmbk1hcC5sZW5ndGg7XG5cdFx0dmFyIHJldCA9IHt9O1xuXG5cdFx0Zm9yICg7IGkgPCBsOyBpKyspIHtcblx0XHRcdHZhbCA9IGZuTWFwW2ldO1xuXHRcdFx0aWYgKHZhbCAmJiB2YWxbMV0gaW4gZG9jdW1lbnQpIHtcblx0XHRcdFx0Zm9yIChpID0gMDsgaSA8IHZhbC5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdHJldFtmbk1hcFswXVtpXV0gPSB2YWxbaV07XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHJldDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0pKCk7XG5cblx0dmFyIGV2ZW50TmFtZU1hcCA9IHtcblx0XHRjaGFuZ2U6IGZuLmZ1bGxzY3JlZW5jaGFuZ2UsXG5cdFx0ZXJyb3I6IGZuLmZ1bGxzY3JlZW5lcnJvclxuXHR9O1xuXG5cdHZhciBzY3JlZW5mdWxsID0ge1xuXHRcdHJlcXVlc3Q6IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zKSB7XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XHR2YXIgb25GdWxsU2NyZWVuRW50ZXJlZCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHR0aGlzLm9mZignY2hhbmdlJywgb25GdWxsU2NyZWVuRW50ZXJlZCk7XG5cdFx0XHRcdFx0cmVzb2x2ZSgpO1xuXHRcdFx0XHR9LmJpbmQodGhpcyk7XG5cblx0XHRcdFx0dGhpcy5vbignY2hhbmdlJywgb25GdWxsU2NyZWVuRW50ZXJlZCk7XG5cblx0XHRcdFx0ZWxlbWVudCA9IGVsZW1lbnQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXG5cdFx0XHRcdHZhciByZXR1cm5Qcm9taXNlID0gZWxlbWVudFtmbi5yZXF1ZXN0RnVsbHNjcmVlbl0ob3B0aW9ucyk7XG5cblx0XHRcdFx0aWYgKHJldHVyblByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG5cdFx0XHRcdFx0cmV0dXJuUHJvbWlzZS50aGVuKG9uRnVsbFNjcmVlbkVudGVyZWQpLmNhdGNoKHJlamVjdCk7XG5cdFx0XHRcdH1cblx0XHRcdH0uYmluZCh0aGlzKSk7XG5cdFx0fSxcblx0XHRleGl0OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XHRpZiAoIXRoaXMuaXNGdWxsc2NyZWVuKSB7XG5cdFx0XHRcdFx0cmVzb2x2ZSgpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciBvbkZ1bGxTY3JlZW5FeGl0ID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdHRoaXMub2ZmKCdjaGFuZ2UnLCBvbkZ1bGxTY3JlZW5FeGl0KTtcblx0XHRcdFx0XHRyZXNvbHZlKCk7XG5cdFx0XHRcdH0uYmluZCh0aGlzKTtcblxuXHRcdFx0XHR0aGlzLm9uKCdjaGFuZ2UnLCBvbkZ1bGxTY3JlZW5FeGl0KTtcblxuXHRcdFx0XHR2YXIgcmV0dXJuUHJvbWlzZSA9IGRvY3VtZW50W2ZuLmV4aXRGdWxsc2NyZWVuXSgpO1xuXG5cdFx0XHRcdGlmIChyZXR1cm5Qcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuXHRcdFx0XHRcdHJldHVyblByb21pc2UudGhlbihvbkZ1bGxTY3JlZW5FeGl0KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LmJpbmQodGhpcykpO1xuXHRcdH0sXG5cdFx0dG9nZ2xlOiBmdW5jdGlvbiAoZWxlbWVudCwgb3B0aW9ucykge1xuXHRcdFx0cmV0dXJuIHRoaXMuaXNGdWxsc2NyZWVuID8gdGhpcy5leGl0KCkgOiB0aGlzLnJlcXVlc3QoZWxlbWVudCwgb3B0aW9ucyk7XG5cdFx0fSxcblx0XHRvbmNoYW5nZTogZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG5cdFx0XHR0aGlzLm9uKCdjaGFuZ2UnLCBjYWxsYmFjayk7XG5cdFx0fSxcblx0XHRvbmVycm9yOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcblx0XHRcdHRoaXMub24oJ2Vycm9yJywgY2FsbGJhY2spO1xuXHRcdH0sXG5cdFx0b246IGZ1bmN0aW9uIChldmVudCwgY2FsbGJhY2spIHtcblx0XHRcdHZhciBldmVudE5hbWUgPSBldmVudE5hbWVNYXBbZXZlbnRdO1xuXHRcdFx0aWYgKGV2ZW50TmFtZSkge1xuXHRcdFx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgY2FsbGJhY2ssIGZhbHNlKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcdG9mZjogZnVuY3Rpb24gKGV2ZW50LCBjYWxsYmFjaykge1xuXHRcdFx0dmFyIGV2ZW50TmFtZSA9IGV2ZW50TmFtZU1hcFtldmVudF07XG5cdFx0XHRpZiAoZXZlbnROYW1lKSB7XG5cdFx0XHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBjYWxsYmFjaywgZmFsc2UpO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0cmF3OiBmblxuXHR9O1xuXG5cdGlmICghZm4pIHtcblx0XHRpZiAoaXNDb21tb25qcykge1xuXHRcdFx0bW9kdWxlLmV4cG9ydHMgPSB7aXNFbmFibGVkOiBmYWxzZX07XG5cdFx0fSBlbHNlIHtcblx0XHRcdHdpbmRvdy5zY3JlZW5mdWxsID0ge2lzRW5hYmxlZDogZmFsc2V9O1xuXHRcdH1cblxuXHRcdHJldHVybjtcblx0fVxuXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHNjcmVlbmZ1bGwsIHtcblx0XHRpc0Z1bGxzY3JlZW46IHtcblx0XHRcdGdldDogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRyZXR1cm4gQm9vbGVhbihkb2N1bWVudFtmbi5mdWxsc2NyZWVuRWxlbWVudF0pO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0ZWxlbWVudDoge1xuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdGdldDogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRyZXR1cm4gZG9jdW1lbnRbZm4uZnVsbHNjcmVlbkVsZW1lbnRdO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0aXNFbmFibGVkOiB7XG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0Z2V0OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdC8vIENvZXJjZSB0byBib29sZWFuIGluIGNhc2Ugb2Ygb2xkIFdlYktpdFxuXHRcdFx0XHRyZXR1cm4gQm9vbGVhbihkb2N1bWVudFtmbi5mdWxsc2NyZWVuRW5hYmxlZF0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG5cblx0aWYgKGlzQ29tbW9uanMpIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IHNjcmVlbmZ1bGw7XG5cdH0gZWxzZSB7XG5cdFx0d2luZG93LnNjcmVlbmZ1bGwgPSBzY3JlZW5mdWxsO1xuXHR9XG59KSgpO1xuIiwidmFyIGNvdW50ZXIgPSAwO1xyXG52YXIgYnVja2V0cyA9IHt9O1xyXG52YXIgc2V0SGFybW9uaWNJbnRlcnZhbCA9IGZ1bmN0aW9uIChmbiwgbXMpIHtcclxuICAgIHZhciBfYTtcclxuICAgIHZhciBpZCA9IGNvdW50ZXIrKztcclxuICAgIGlmIChidWNrZXRzW21zXSkge1xyXG4gICAgICAgIGJ1Y2tldHNbbXNdLmxpc3RlbmVyc1tpZF0gPSBmbjtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHZhciB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGxpc3RlbmVycyA9IGJ1Y2tldHNbbXNdLmxpc3RlbmVycztcclxuICAgICAgICAgICAgdmFyIGRpZFRocm93ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciBsYXN0RXJyb3I7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3QudmFsdWVzKGxpc3RlbmVycyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGlzdGVuZXIgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBkaWRUaHJvdyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdEVycm9yID0gZXJyb3I7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGRpZFRocm93KVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbGFzdEVycm9yO1xyXG4gICAgICAgIH0sIG1zKTtcclxuICAgICAgICBidWNrZXRzW21zXSA9IHtcclxuICAgICAgICAgICAgbXM6IG1zLFxyXG4gICAgICAgICAgICB0aW1lcjogdGltZXIsXHJcbiAgICAgICAgICAgIGxpc3RlbmVyczogKF9hID0ge30sXHJcbiAgICAgICAgICAgICAgICBfYVtpZF0gPSBmbixcclxuICAgICAgICAgICAgICAgIF9hKSxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBidWNrZXQ6IGJ1Y2tldHNbbXNdLFxyXG4gICAgICAgIGlkOiBpZCxcclxuICAgIH07XHJcbn07XHJcbnZhciBjbGVhckhhcm1vbmljSW50ZXJ2YWwgPSBmdW5jdGlvbiAoX2EpIHtcclxuICAgIHZhciBidWNrZXQgPSBfYS5idWNrZXQsIGlkID0gX2EuaWQ7XHJcbiAgICBkZWxldGUgYnVja2V0Lmxpc3RlbmVyc1tpZF07XHJcbiAgICB2YXIgaGFzTGlzdGVuZXJzID0gZmFsc2U7XHJcbiAgICBmb3IgKHZhciBsaXN0ZW5lciBpbiBidWNrZXQubGlzdGVuZXJzKSB7XHJcbiAgICAgICAgaGFzTGlzdGVuZXJzID0gdHJ1ZTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICAgIGlmICghaGFzTGlzdGVuZXJzKSB7XHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbChidWNrZXQudGltZXIpO1xyXG4gICAgICAgIGRlbGV0ZSBidWNrZXRzW2J1Y2tldC5tc107XHJcbiAgICB9XHJcbn07XG5cbmV4cG9ydCB7IGNsZWFySGFybW9uaWNJbnRlcnZhbCwgc2V0SGFybW9uaWNJbnRlcnZhbCB9O1xuIiwiLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZWZpbmVkLG5vLXBhcmFtLXJlYXNzaWduLG5vLXNoYWRvdyAqL1xuXG4vKipcbiAqIFRocm90dGxlIGV4ZWN1dGlvbiBvZiBhIGZ1bmN0aW9uLiBFc3BlY2lhbGx5IHVzZWZ1bCBmb3IgcmF0ZSBsaW1pdGluZ1xuICogZXhlY3V0aW9uIG9mIGhhbmRsZXJzIG9uIGV2ZW50cyBsaWtlIHJlc2l6ZSBhbmQgc2Nyb2xsLlxuICpcbiAqIEBwYXJhbSAge251bWJlcn0gICAgZGVsYXkgLSAgICAgICAgICBBIHplcm8tb3ItZ3JlYXRlciBkZWxheSBpbiBtaWxsaXNlY29uZHMuIEZvciBldmVudCBjYWxsYmFja3MsIHZhbHVlcyBhcm91bmQgMTAwIG9yIDI1MCAob3IgZXZlbiBoaWdoZXIpIGFyZSBtb3N0IHVzZWZ1bC5cbiAqIEBwYXJhbSAge2Jvb2xlYW59ICAgW25vVHJhaWxpbmddIC0gICBPcHRpb25hbCwgZGVmYXVsdHMgdG8gZmFsc2UuIElmIG5vVHJhaWxpbmcgaXMgdHJ1ZSwgY2FsbGJhY2sgd2lsbCBvbmx5IGV4ZWN1dGUgZXZlcnkgYGRlbGF5YCBtaWxsaXNlY29uZHMgd2hpbGUgdGhlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm90dGxlZC1mdW5jdGlvbiBpcyBiZWluZyBjYWxsZWQuIElmIG5vVHJhaWxpbmcgaXMgZmFsc2Ugb3IgdW5zcGVjaWZpZWQsIGNhbGxiYWNrIHdpbGwgYmUgZXhlY3V0ZWQgb25lIGZpbmFsIHRpbWVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWZ0ZXIgdGhlIGxhc3QgdGhyb3R0bGVkLWZ1bmN0aW9uIGNhbGwuIChBZnRlciB0aGUgdGhyb3R0bGVkLWZ1bmN0aW9uIGhhcyBub3QgYmVlbiBjYWxsZWQgZm9yIGBkZWxheWAgbWlsbGlzZWNvbmRzLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgaW50ZXJuYWwgY291bnRlciBpcyByZXNldCkuXG4gKiBAcGFyYW0gIHtGdW5jdGlvbn0gIGNhbGxiYWNrIC0gICAgICAgQSBmdW5jdGlvbiB0byBiZSBleGVjdXRlZCBhZnRlciBkZWxheSBtaWxsaXNlY29uZHMuIFRoZSBgdGhpc2AgY29udGV4dCBhbmQgYWxsIGFyZ3VtZW50cyBhcmUgcGFzc2VkIHRocm91Z2gsIGFzLWlzLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0byBgY2FsbGJhY2tgIHdoZW4gdGhlIHRocm90dGxlZC1mdW5jdGlvbiBpcyBleGVjdXRlZC5cbiAqIEBwYXJhbSAge2Jvb2xlYW59ICAgW2RlYm91bmNlTW9kZV0gLSBJZiBgZGVib3VuY2VNb2RlYCBpcyB0cnVlIChhdCBiZWdpbiksIHNjaGVkdWxlIGBjbGVhcmAgdG8gZXhlY3V0ZSBhZnRlciBgZGVsYXlgIG1zLiBJZiBgZGVib3VuY2VNb2RlYCBpcyBmYWxzZSAoYXQgZW5kKSxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGUgYGNhbGxiYWNrYCB0byBleGVjdXRlIGFmdGVyIGBkZWxheWAgbXMuXG4gKlxuICogQHJldHVybnMge0Z1bmN0aW9ufSAgQSBuZXcsIHRocm90dGxlZCwgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIHRocm90dGxlIChkZWxheSwgbm9UcmFpbGluZywgY2FsbGJhY2ssIGRlYm91bmNlTW9kZSkge1xuICAvKlxuICAgKiBBZnRlciB3cmFwcGVyIGhhcyBzdG9wcGVkIGJlaW5nIGNhbGxlZCwgdGhpcyB0aW1lb3V0IGVuc3VyZXMgdGhhdFxuICAgKiBgY2FsbGJhY2tgIGlzIGV4ZWN1dGVkIGF0IHRoZSBwcm9wZXIgdGltZXMgaW4gYHRocm90dGxlYCBhbmQgYGVuZGBcbiAgICogZGVib3VuY2UgbW9kZXMuXG4gICAqL1xuICB2YXIgdGltZW91dElEO1xuICB2YXIgY2FuY2VsbGVkID0gZmFsc2U7IC8vIEtlZXAgdHJhY2sgb2YgdGhlIGxhc3QgdGltZSBgY2FsbGJhY2tgIHdhcyBleGVjdXRlZC5cblxuICB2YXIgbGFzdEV4ZWMgPSAwOyAvLyBGdW5jdGlvbiB0byBjbGVhciBleGlzdGluZyB0aW1lb3V0XG5cbiAgZnVuY3Rpb24gY2xlYXJFeGlzdGluZ1RpbWVvdXQoKSB7XG4gICAgaWYgKHRpbWVvdXRJRCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJRCk7XG4gICAgfVxuICB9IC8vIEZ1bmN0aW9uIHRvIGNhbmNlbCBuZXh0IGV4ZWNcblxuXG4gIGZ1bmN0aW9uIGNhbmNlbCgpIHtcbiAgICBjbGVhckV4aXN0aW5nVGltZW91dCgpO1xuICAgIGNhbmNlbGxlZCA9IHRydWU7XG4gIH0gLy8gYG5vVHJhaWxpbmdgIGRlZmF1bHRzIHRvIGZhbHN5LlxuXG5cbiAgaWYgKHR5cGVvZiBub1RyYWlsaW5nICE9PSAnYm9vbGVhbicpIHtcbiAgICBkZWJvdW5jZU1vZGUgPSBjYWxsYmFjaztcbiAgICBjYWxsYmFjayA9IG5vVHJhaWxpbmc7XG4gICAgbm9UcmFpbGluZyA9IHVuZGVmaW5lZDtcbiAgfVxuICAvKlxuICAgKiBUaGUgYHdyYXBwZXJgIGZ1bmN0aW9uIGVuY2Fwc3VsYXRlcyBhbGwgb2YgdGhlIHRocm90dGxpbmcgLyBkZWJvdW5jaW5nXG4gICAqIGZ1bmN0aW9uYWxpdHkgYW5kIHdoZW4gZXhlY3V0ZWQgd2lsbCBsaW1pdCB0aGUgcmF0ZSBhdCB3aGljaCBgY2FsbGJhY2tgXG4gICAqIGlzIGV4ZWN1dGVkLlxuICAgKi9cblxuXG4gIGZ1bmN0aW9uIHdyYXBwZXIoKSB7XG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3VtZW50c18gPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmd1bWVudHNfW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZWxhcHNlZCA9IERhdGUubm93KCkgLSBsYXN0RXhlYztcblxuICAgIGlmIChjYW5jZWxsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9IC8vIEV4ZWN1dGUgYGNhbGxiYWNrYCBhbmQgdXBkYXRlIHRoZSBgbGFzdEV4ZWNgIHRpbWVzdGFtcC5cblxuXG4gICAgZnVuY3Rpb24gZXhlYygpIHtcbiAgICAgIGxhc3RFeGVjID0gRGF0ZS5ub3coKTtcbiAgICAgIGNhbGxiYWNrLmFwcGx5KHNlbGYsIGFyZ3VtZW50c18pO1xuICAgIH1cbiAgICAvKlxuICAgICAqIElmIGBkZWJvdW5jZU1vZGVgIGlzIHRydWUgKGF0IGJlZ2luKSB0aGlzIGlzIHVzZWQgdG8gY2xlYXIgdGhlIGZsYWdcbiAgICAgKiB0byBhbGxvdyBmdXR1cmUgYGNhbGxiYWNrYCBleGVjdXRpb25zLlxuICAgICAqL1xuXG5cbiAgICBmdW5jdGlvbiBjbGVhcigpIHtcbiAgICAgIHRpbWVvdXRJRCA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBpZiAoZGVib3VuY2VNb2RlICYmICF0aW1lb3V0SUQpIHtcbiAgICAgIC8qXG4gICAgICAgKiBTaW5jZSBgd3JhcHBlcmAgaXMgYmVpbmcgY2FsbGVkIGZvciB0aGUgZmlyc3QgdGltZSBhbmRcbiAgICAgICAqIGBkZWJvdW5jZU1vZGVgIGlzIHRydWUgKGF0IGJlZ2luKSwgZXhlY3V0ZSBgY2FsbGJhY2tgLlxuICAgICAgICovXG4gICAgICBleGVjKCk7XG4gICAgfVxuXG4gICAgY2xlYXJFeGlzdGluZ1RpbWVvdXQoKTtcblxuICAgIGlmIChkZWJvdW5jZU1vZGUgPT09IHVuZGVmaW5lZCAmJiBlbGFwc2VkID4gZGVsYXkpIHtcbiAgICAgIC8qXG4gICAgICAgKiBJbiB0aHJvdHRsZSBtb2RlLCBpZiBgZGVsYXlgIHRpbWUgaGFzIGJlZW4gZXhjZWVkZWQsIGV4ZWN1dGVcbiAgICAgICAqIGBjYWxsYmFja2AuXG4gICAgICAgKi9cbiAgICAgIGV4ZWMoKTtcbiAgICB9IGVsc2UgaWYgKG5vVHJhaWxpbmcgIT09IHRydWUpIHtcbiAgICAgIC8qXG4gICAgICAgKiBJbiB0cmFpbGluZyB0aHJvdHRsZSBtb2RlLCBzaW5jZSBgZGVsYXlgIHRpbWUgaGFzIG5vdCBiZWVuXG4gICAgICAgKiBleGNlZWRlZCwgc2NoZWR1bGUgYGNhbGxiYWNrYCB0byBleGVjdXRlIGBkZWxheWAgbXMgYWZ0ZXIgbW9zdFxuICAgICAgICogcmVjZW50IGV4ZWN1dGlvbi5cbiAgICAgICAqXG4gICAgICAgKiBJZiBgZGVib3VuY2VNb2RlYCBpcyB0cnVlIChhdCBiZWdpbiksIHNjaGVkdWxlIGBjbGVhcmAgdG8gZXhlY3V0ZVxuICAgICAgICogYWZ0ZXIgYGRlbGF5YCBtcy5cbiAgICAgICAqXG4gICAgICAgKiBJZiBgZGVib3VuY2VNb2RlYCBpcyBmYWxzZSAoYXQgZW5kKSwgc2NoZWR1bGUgYGNhbGxiYWNrYCB0b1xuICAgICAgICogZXhlY3V0ZSBhZnRlciBgZGVsYXlgIG1zLlxuICAgICAgICovXG4gICAgICB0aW1lb3V0SUQgPSBzZXRUaW1lb3V0KGRlYm91bmNlTW9kZSA/IGNsZWFyIDogZXhlYywgZGVib3VuY2VNb2RlID09PSB1bmRlZmluZWQgPyBkZWxheSAtIGVsYXBzZWQgOiBkZWxheSk7XG4gICAgfVxuICB9XG5cbiAgd3JhcHBlci5jYW5jZWwgPSBjYW5jZWw7IC8vIFJldHVybiB0aGUgd3JhcHBlciBmdW5jdGlvbi5cblxuICByZXR1cm4gd3JhcHBlcjtcbn1cblxuLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZWZpbmVkICovXG4vKipcbiAqIERlYm91bmNlIGV4ZWN1dGlvbiBvZiBhIGZ1bmN0aW9uLiBEZWJvdW5jaW5nLCB1bmxpa2UgdGhyb3R0bGluZyxcbiAqIGd1YXJhbnRlZXMgdGhhdCBhIGZ1bmN0aW9uIGlzIG9ubHkgZXhlY3V0ZWQgYSBzaW5nbGUgdGltZSwgZWl0aGVyIGF0IHRoZVxuICogdmVyeSBiZWdpbm5pbmcgb2YgYSBzZXJpZXMgb2YgY2FsbHMsIG9yIGF0IHRoZSB2ZXJ5IGVuZC5cbiAqXG4gKiBAcGFyYW0gIHtudW1iZXJ9ICAgZGVsYXkgLSAgICAgICAgIEEgemVyby1vci1ncmVhdGVyIGRlbGF5IGluIG1pbGxpc2Vjb25kcy4gRm9yIGV2ZW50IGNhbGxiYWNrcywgdmFsdWVzIGFyb3VuZCAxMDAgb3IgMjUwIChvciBldmVuIGhpZ2hlcikgYXJlIG1vc3QgdXNlZnVsLlxuICogQHBhcmFtICB7Ym9vbGVhbn0gIFthdEJlZ2luXSAtICAgICBPcHRpb25hbCwgZGVmYXVsdHMgdG8gZmFsc2UuIElmIGF0QmVnaW4gaXMgZmFsc2Ugb3IgdW5zcGVjaWZpZWQsIGNhbGxiYWNrIHdpbGwgb25seSBiZSBleGVjdXRlZCBgZGVsYXlgIG1pbGxpc2Vjb25kc1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWZ0ZXIgdGhlIGxhc3QgZGVib3VuY2VkLWZ1bmN0aW9uIGNhbGwuIElmIGF0QmVnaW4gaXMgdHJ1ZSwgY2FsbGJhY2sgd2lsbCBiZSBleGVjdXRlZCBvbmx5IGF0IHRoZSBmaXJzdCBkZWJvdW5jZWQtZnVuY3Rpb24gY2FsbC5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChBZnRlciB0aGUgdGhyb3R0bGVkLWZ1bmN0aW9uIGhhcyBub3QgYmVlbiBjYWxsZWQgZm9yIGBkZWxheWAgbWlsbGlzZWNvbmRzLCB0aGUgaW50ZXJuYWwgY291bnRlciBpcyByZXNldCkuXG4gKiBAcGFyYW0gIHtGdW5jdGlvbn0gY2FsbGJhY2sgLSAgICAgIEEgZnVuY3Rpb24gdG8gYmUgZXhlY3V0ZWQgYWZ0ZXIgZGVsYXkgbWlsbGlzZWNvbmRzLiBUaGUgYHRoaXNgIGNvbnRleHQgYW5kIGFsbCBhcmd1bWVudHMgYXJlIHBhc3NlZCB0aHJvdWdoLCBhcy1pcyxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGBjYWxsYmFja2Agd2hlbiB0aGUgZGVib3VuY2VkLWZ1bmN0aW9uIGlzIGV4ZWN1dGVkLlxuICpcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQSBuZXcsIGRlYm91bmNlZCBmdW5jdGlvbi5cbiAqL1xuXG5mdW5jdGlvbiBkZWJvdW5jZSAoZGVsYXksIGF0QmVnaW4sIGNhbGxiYWNrKSB7XG4gIHJldHVybiBjYWxsYmFjayA9PT0gdW5kZWZpbmVkID8gdGhyb3R0bGUoZGVsYXksIGF0QmVnaW4sIGZhbHNlKSA6IHRocm90dGxlKGRlbGF5LCBjYWxsYmFjaywgYXRCZWdpbiAhPT0gZmFsc2UpO1xufVxuXG5leHBvcnQgeyBkZWJvdW5jZSwgdGhyb3R0bGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIiwiXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHNlbGVjdGlvbiA9IGRvY3VtZW50LmdldFNlbGVjdGlvbigpO1xuICBpZiAoIXNlbGVjdGlvbi5yYW5nZUNvdW50KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHt9O1xuICB9XG4gIHZhciBhY3RpdmUgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuXG4gIHZhciByYW5nZXMgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxlY3Rpb24ucmFuZ2VDb3VudDsgaSsrKSB7XG4gICAgcmFuZ2VzLnB1c2goc2VsZWN0aW9uLmdldFJhbmdlQXQoaSkpO1xuICB9XG5cbiAgc3dpdGNoIChhY3RpdmUudGFnTmFtZS50b1VwcGVyQ2FzZSgpKSB7IC8vIC50b1VwcGVyQ2FzZSBoYW5kbGVzIFhIVE1MXG4gICAgY2FzZSAnSU5QVVQnOlxuICAgIGNhc2UgJ1RFWFRBUkVBJzpcbiAgICAgIGFjdGl2ZS5ibHVyKCk7XG4gICAgICBicmVhaztcblxuICAgIGRlZmF1bHQ6XG4gICAgICBhY3RpdmUgPSBudWxsO1xuICAgICAgYnJlYWs7XG4gIH1cblxuICBzZWxlY3Rpb24ucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgc2VsZWN0aW9uLnR5cGUgPT09ICdDYXJldCcgJiZcbiAgICBzZWxlY3Rpb24ucmVtb3ZlQWxsUmFuZ2VzKCk7XG5cbiAgICBpZiAoIXNlbGVjdGlvbi5yYW5nZUNvdW50KSB7XG4gICAgICByYW5nZXMuZm9yRWFjaChmdW5jdGlvbihyYW5nZSkge1xuICAgICAgICBzZWxlY3Rpb24uYWRkUmFuZ2UocmFuZ2UpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgYWN0aXZlICYmXG4gICAgYWN0aXZlLmZvY3VzKCk7XG4gIH07XG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmVhc2luZyA9IHtcbiAgICAvLyBObyBlYXNpbmcsIG5vIGFjY2VsZXJhdGlvblxuICAgIGxpbmVhcjogZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHQ7IH0sXG4gICAgLy8gQWNjZWxlcmF0ZXMgZmFzdCwgdGhlbiBzbG93cyBxdWlja2x5IHRvd2FyZHMgZW5kLlxuICAgIHF1YWRyYXRpYzogZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHQgKiAoLSh0ICogdCkgKiB0ICsgNCAqIHQgKiB0IC0gNiAqIHQgKyA0KTsgfSxcbiAgICAvLyBPdmVyc2hvb3RzIG92ZXIgMSBhbmQgdGhlbiByZXR1cm5zIHRvIDEgdG93YXJkcyBlbmQuXG4gICAgY3ViaWM6IGZ1bmN0aW9uICh0KSB7IHJldHVybiB0ICogKDQgKiB0ICogdCAtIDkgKiB0ICsgNik7IH0sXG4gICAgLy8gT3ZlcnNob290cyBvdmVyIDEgbXVsdGlwbGUgdGltZXMgLSB3aWdnbGVzIGFyb3VuZCAxLlxuICAgIGVsYXN0aWM6IGZ1bmN0aW9uICh0KSB7IHJldHVybiB0ICogKDMzICogdCAqIHQgKiB0ICogdCAtIDEwNiAqIHQgKiB0ICogdCArIDEyNiAqIHQgKiB0IC0gNjcgKiB0ICsgMTUpOyB9LFxuICAgIC8vIEFjY2VsZXJhdGluZyBmcm9tIHplcm8gdmVsb2NpdHlcbiAgICBpblF1YWQ6IGZ1bmN0aW9uICh0KSB7IHJldHVybiB0ICogdDsgfSxcbiAgICAvLyBEZWNlbGVyYXRpbmcgdG8gemVybyB2ZWxvY2l0eVxuICAgIG91dFF1YWQ6IGZ1bmN0aW9uICh0KSB7IHJldHVybiB0ICogKDIgLSB0KTsgfSxcbiAgICAvLyBBY2NlbGVyYXRpb24gdW50aWwgaGFsZndheSwgdGhlbiBkZWNlbGVyYXRpb25cbiAgICBpbk91dFF1YWQ6IGZ1bmN0aW9uICh0KSB7IHJldHVybiB0IDwgLjUgPyAyICogdCAqIHQgOiAtMSArICg0IC0gMiAqIHQpICogdDsgfSxcbiAgICAvLyBBY2NlbGVyYXRpbmcgZnJvbSB6ZXJvIHZlbG9jaXR5XG4gICAgaW5DdWJpYzogZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHQgKiB0ICogdDsgfSxcbiAgICAvLyBEZWNlbGVyYXRpbmcgdG8gemVybyB2ZWxvY2l0eVxuICAgIG91dEN1YmljOiBmdW5jdGlvbiAodCkgeyByZXR1cm4gKC0tdCkgKiB0ICogdCArIDE7IH0sXG4gICAgLy8gQWNjZWxlcmF0aW9uIHVudGlsIGhhbGZ3YXksIHRoZW4gZGVjZWxlcmF0aW9uXG4gICAgaW5PdXRDdWJpYzogZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHQgPCAuNSA/IDQgKiB0ICogdCAqIHQgOiAodCAtIDEpICogKDIgKiB0IC0gMikgKiAoMiAqIHQgLSAyKSArIDE7IH0sXG4gICAgLy8gQWNjZWxlcmF0aW5nIGZyb20gemVybyB2ZWxvY2l0eVxuICAgIGluUXVhcnQ6IGZ1bmN0aW9uICh0KSB7IHJldHVybiB0ICogdCAqIHQgKiB0OyB9LFxuICAgIC8vIERlY2VsZXJhdGluZyB0byB6ZXJvIHZlbG9jaXR5XG4gICAgb3V0UXVhcnQ6IGZ1bmN0aW9uICh0KSB7IHJldHVybiAxIC0gKC0tdCkgKiB0ICogdCAqIHQ7IH0sXG4gICAgLy8gQWNjZWxlcmF0aW9uIHVudGlsIGhhbGZ3YXksIHRoZW4gZGVjZWxlcmF0aW9uXG4gICAgaW5PdXRRdWFydDogZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHQgPCAuNSA/IDggKiB0ICogdCAqIHQgKiB0IDogMSAtIDggKiAoLS10KSAqIHQgKiB0ICogdDsgfSxcbiAgICAvLyBBY2NlbGVyYXRpbmcgZnJvbSB6ZXJvIHZlbG9jaXR5XG4gICAgaW5RdWludDogZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHQgKiB0ICogdCAqIHQgKiB0OyB9LFxuICAgIC8vIERlY2VsZXJhdGluZyB0byB6ZXJvIHZlbG9jaXR5XG4gICAgb3V0UXVpbnQ6IGZ1bmN0aW9uICh0KSB7IHJldHVybiAxICsgKC0tdCkgKiB0ICogdCAqIHQgKiB0OyB9LFxuICAgIC8vIEFjY2VsZXJhdGlvbiB1bnRpbCBoYWxmd2F5LCB0aGVuIGRlY2VsZXJhdGlvblxuICAgIGluT3V0UXVpbnQ6IGZ1bmN0aW9uICh0KSB7IHJldHVybiB0IDwgLjUgPyAxNiAqIHQgKiB0ICogdCAqIHQgKiB0IDogMSArIDE2ICogKC0tdCkgKiB0ICogdCAqIHQgKiB0OyB9LFxuICAgIC8vIEFjY2VsZXJhdGluZyBmcm9tIHplcm8gdmVsb2NpdHlcbiAgICBpblNpbmU6IGZ1bmN0aW9uICh0KSB7IHJldHVybiAtTWF0aC5jb3ModCAqIChNYXRoLlBJIC8gMikpICsgMTsgfSxcbiAgICAvLyBEZWNlbGVyYXRpbmcgdG8gemVybyB2ZWxvY2l0eVxuICAgIG91dFNpbmU6IGZ1bmN0aW9uICh0KSB7IHJldHVybiBNYXRoLnNpbih0ICogKE1hdGguUEkgLyAyKSk7IH0sXG4gICAgLy8gQWNjZWxlcmF0aW5nIHVudGlsIGhhbGZ3YXksIHRoZW4gZGVjZWxlcmF0aW5nXG4gICAgaW5PdXRTaW5lOiBmdW5jdGlvbiAodCkgeyByZXR1cm4gLShNYXRoLmNvcyhNYXRoLlBJICogdCkgLSAxKSAvIDI7IH0sXG4gICAgLy8gRXhwb25lbnRpYWwgYWNjZWxlcmF0aW5nIGZyb20gemVybyB2ZWxvY2l0eVxuICAgIGluRXhwbzogZnVuY3Rpb24gKHQpIHsgcmV0dXJuIE1hdGgucG93KDIsIDEwICogKHQgLSAxKSk7IH0sXG4gICAgLy8gRXhwb25lbnRpYWwgZGVjZWxlcmF0aW5nIHRvIHplcm8gdmVsb2NpdHlcbiAgICBvdXRFeHBvOiBmdW5jdGlvbiAodCkgeyByZXR1cm4gLU1hdGgucG93KDIsIC0xMCAqIHQpICsgMTsgfSxcbiAgICAvLyBFeHBvbmVudGlhbCBhY2NlbGVyYXRpbmcgdW50aWwgaGFsZndheSwgdGhlbiBkZWNlbGVyYXRpbmdcbiAgICBpbk91dEV4cG86IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHQgLz0gLjU7XG4gICAgICAgIGlmICh0IDwgMSlcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnBvdygyLCAxMCAqICh0IC0gMSkpIC8gMjtcbiAgICAgICAgdC0tO1xuICAgICAgICByZXR1cm4gKC1NYXRoLnBvdygyLCAtMTAgKiB0KSArIDIpIC8gMjtcbiAgICB9LFxuICAgIC8vIENpcmN1bGFyIGFjY2VsZXJhdGluZyBmcm9tIHplcm8gdmVsb2NpdHlcbiAgICBpbkNpcmM6IGZ1bmN0aW9uICh0KSB7IHJldHVybiAtTWF0aC5zcXJ0KDEgLSB0ICogdCkgKyAxOyB9LFxuICAgIC8vIENpcmN1bGFyIGRlY2VsZXJhdGluZyB0byB6ZXJvIHZlbG9jaXR5IE1vdmVzIFZFUlkgZmFzdCBhdCB0aGUgYmVnaW5uaW5nIGFuZFxuICAgIC8vIHRoZW4gcXVpY2tseSBzbG93cyBkb3duIGluIHRoZSBtaWRkbGUuIFRoaXMgdHdlZW4gY2FuIGFjdHVhbGx5IGJlIHVzZWRcbiAgICAvLyBpbiBjb250aW51b3VzIHRyYW5zaXRpb25zIHdoZXJlIHRhcmdldCB2YWx1ZSBjaGFuZ2VzIGFsbCB0aGUgdGltZSxcbiAgICAvLyBiZWNhdXNlIG9mIHRoZSB2ZXJ5IHF1aWNrIHN0YXJ0LCBpdCBoaWRlcyB0aGUgaml0dGVyIGJldHdlZW4gdGFyZ2V0IHZhbHVlIGNoYW5nZXMuXG4gICAgb3V0Q2lyYzogZnVuY3Rpb24gKHQpIHsgcmV0dXJuIE1hdGguc3FydCgxIC0gKHQgPSB0IC0gMSkgKiB0KTsgfSxcbiAgICAvLyBDaXJjdWxhciBhY2NlbGVyYXRpb24gdW50aWwgaGFsZndheSwgdGhlbiBkZWNlbGVyYXRpb25cbiAgICBpbk91dENpcmM6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHQgLz0gLjU7XG4gICAgICAgIGlmICh0IDwgMSlcbiAgICAgICAgICAgIHJldHVybiAtKE1hdGguc3FydCgxIC0gdCAqIHQpIC0gMSkgLyAyO1xuICAgICAgICB0IC09IDI7XG4gICAgICAgIHJldHVybiAoTWF0aC5zcXJ0KDEgLSB0ICogdCkgKyAxKSAvIDI7XG4gICAgfVxufTtcbiIsInZhciBfX3Jlc3QgPSAodGhpcyAmJiB0aGlzLl9fcmVzdCkgfHwgZnVuY3Rpb24gKHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59O1xyXG5pbXBvcnQgUmVhY3QsIHsgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgZGVlcEVxdWFscyBmcm9tICcuLi91dGlscy9kZWVwRXF1YWxzJztcclxuaW1wb3J0IHsgQ2FsbGJhY2tzQ29udGV4dCB9IGZyb20gJy4uL2NvbXBvbmVudHMvaG9va3MnO1xyXG52YXIgQ2FsbGJhY2tzUHJvdmlkZXIgPSBmdW5jdGlvbiAoX2EpIHtcclxuICAgIHZhciBjaGlsZHJlbiA9IF9hLmNoaWxkcmVuLCBjYWxsYmFja3MgPSBfX3Jlc3QoX2EsIFtcImNoaWxkcmVuXCJdKTtcclxuICAgIHZhciBsYXN0Q2FsbGJhY2tzID0gdXNlUmVmKCk7XHJcbiAgICB2YXIgaXNFcXVhbCA9IGxhc3RDYWxsYmFja3MuY3VycmVudFxyXG4gICAgICAgID8gZGVlcEVxdWFscyhsYXN0Q2FsbGJhY2tzLmN1cnJlbnQsIGNhbGxiYWNrcylcclxuICAgICAgICA6IGZhbHNlO1xyXG4gICAgaWYgKCFpc0VxdWFsKSB7XHJcbiAgICAgICAgbGFzdENhbGxiYWNrcy5jdXJyZW50ID0gY2FsbGJhY2tzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KENhbGxiYWNrc0NvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IGxhc3RDYWxsYmFja3MuY3VycmVudCB9LCBjaGlsZHJlbikpO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBDYWxsYmFja3NQcm92aWRlcjtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q2FsbGJhY2tzUHJvdmlkZXIuanMubWFwIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgRG5kUHJvdmlkZXIgYXMgRG5kUHJvdmlkZXJPcmcgfSBmcm9tICdyZWFjdC1kbmQnO1xyXG5pbXBvcnQgeyB1c2VPcHRpb24gfSBmcm9tICcuLi9jb21wb25lbnRzL2hvb2tzJztcclxudmFyIERuZFByb3ZpZGVyID0gZnVuY3Rpb24gKF9hKSB7XHJcbiAgICB2YXIgY2hpbGRyZW4gPSBfYS5jaGlsZHJlbjtcclxuICAgIHZhciBkbmRCYWNrZW5kID0gdXNlT3B0aW9uKCdkbmRCYWNrZW5kJyk7XHJcbiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChEbmRQcm92aWRlck9yZywgeyBiYWNrZW5kOiBkbmRCYWNrZW5kIH0sIGNoaWxkcmVuKTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgRG5kUHJvdmlkZXI7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURuZFByb3ZpZGVyLmpzLm1hcCIsInZhciBfX3JlYWQgPSAodGhpcyAmJiB0aGlzLl9fcmVhZCkgfHwgZnVuY3Rpb24gKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufTtcclxudmFyIF9fc3ByZWFkQXJyYXkgPSAodGhpcyAmJiB0aGlzLl9fc3ByZWFkQXJyYXkpIHx8IGZ1bmN0aW9uICh0bywgZnJvbSwgcGFjaykge1xyXG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XHJcbiAgICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XHJcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcclxufTtcclxuaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyB1cGRhdGVWYWx1ZSB9IGZyb20gJy4uL2FjdGlvbnMvdmFsdWUnO1xyXG5pbXBvcnQgeyB1c2VDYWxsYmFja09wdGlvbiwgdXNlT3B0aW9uLCB1c2VSZW5kZXJPcHRpb24sIH0gZnJvbSAnLi4vY29tcG9uZW50cy9ob29rcyc7XHJcbmltcG9ydCBFZGl0b3JTdG9yZSwgeyBFZGl0b3JDb250ZXh0IH0gZnJvbSAnLi4vRWRpdG9yU3RvcmUnO1xyXG5pbXBvcnQgeyBtaWdyYXRlVmFsdWUgfSBmcm9tICcuLi9taWdyYXRpb25zL21pZ3JhdGUnO1xyXG5pbXBvcnQgeyBzZXJpYWx6ZVZhbHVlIH0gZnJvbSAnLi4vbWlncmF0aW9ucy9zZXJpYWx6ZVZhbHVlJztcclxuaW1wb3J0IHsgaW5pdGlhbFN0YXRlIH0gZnJvbSAnLi4vcmVkdWNlcic7XHJcbmltcG9ydCB7IFJlZHV4UHJvdmlkZXIgfSBmcm9tICcuLi9yZWR1eENvbm5lY3QnO1xyXG5pbXBvcnQgZGVlcEVxdWFscyBmcm9tICcuLi91dGlscy9kZWVwRXF1YWxzJztcclxudmFyIEVkaXRvclN0b3JlUHJvdmlkZXIgPSBmdW5jdGlvbiAoX2EpIHtcclxuICAgIHZhciBjaGlsZHJlbiA9IF9hLmNoaWxkcmVuLCBsYW5nID0gX2EubGFuZywgdmFsdWUgPSBfYS52YWx1ZTtcclxuICAgIHZhciBjZWxsUGx1Z2lucyA9IHVzZVJlbmRlck9wdGlvbignY2VsbFBsdWdpbnMnKTtcclxuICAgIHZhciBtaWRkbGV3YXJlID0gdXNlT3B0aW9uKCdtaWRkbGV3YXJlJyk7XHJcbiAgICB2YXIgb25DaGFuZ2VMYW5nID0gdXNlQ2FsbGJhY2tPcHRpb24oJ29uQ2hhbmdlTGFuZycpO1xyXG4gICAgdmFyIG9uQ2hhbmdlID0gdXNlQ2FsbGJhY2tPcHRpb24oJ29uQ2hhbmdlJyk7XHJcbiAgICB2YXIgc3RvcmVGcm9tT3B0aW9ucyA9IHVzZU9wdGlvbignc3RvcmUnKTtcclxuICAgIHZhciBlZGl0b3JTdG9yZSA9IHVzZU1lbW8oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBzdG9yZSA9IG5ldyBFZGl0b3JTdG9yZSh7XHJcbiAgICAgICAgICAgIGluaXRpYWxTdGF0ZTogaW5pdGlhbFN0YXRlKG1pZ3JhdGVWYWx1ZSh2YWx1ZSwge1xyXG4gICAgICAgICAgICAgICAgY2VsbFBsdWdpbnM6IGNlbGxQbHVnaW5zLFxyXG4gICAgICAgICAgICAgICAgbGFuZzogbGFuZyxcclxuICAgICAgICAgICAgfSksIGxhbmcpLFxyXG4gICAgICAgICAgICBzdG9yZTogc3RvcmVGcm9tT3B0aW9ucyxcclxuICAgICAgICAgICAgbWlkZGxld2FyZTogbWlkZGxld2FyZSxcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gc3RvcmU7XHJcbiAgICB9LCBfX3NwcmVhZEFycmF5KFtzdG9yZUZyb21PcHRpb25zXSwgX19yZWFkKG1pZGRsZXdhcmUpLCBmYWxzZSkpO1xyXG4gICAgdmFyIGxhc3RWYWx1ZVJlZiA9IHVzZVJlZih2YWx1ZSk7XHJcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBvbGRMYW5nID0gbGFuZztcclxuICAgICAgICB2YXIgaGFuZGxlQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gbm90aWZ5IG91dHNpZGVycyB0byBuZXcgbGFuZ3VhZ2UsIHdoZW4gY2hhZ25lZCBpbiB1aVxyXG4gICAgICAgICAgICB2YXIgbmV3TGFuZyA9IGVkaXRvclN0b3JlLnN0b3JlLmdldFN0YXRlKCkucmVhY3RQYWdlLnNldHRpbmdzLmxhbmc7XHJcbiAgICAgICAgICAgIGlmIChuZXdMYW5nICE9PSBvbGRMYW5nIHx8IG5ld0xhbmcgIT09IGxhbmcpIHtcclxuICAgICAgICAgICAgICAgIG9sZExhbmcgPSBuZXdMYW5nO1xyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2VMYW5nID09PSBudWxsIHx8IG9uQ2hhbmdlTGFuZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25DaGFuZ2VMYW5nKG5ld0xhbmcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghb25DaGFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL2NvbnNvbGUudGltZSgnY2FsY3VsYXRlIG5vdGlmaXkgb24gY2hhbmdlJyk7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50VmFsdWUgPSBlZGl0b3JTdG9yZS5zdG9yZS5nZXRTdGF0ZSgpLnJlYWN0UGFnZS52YWx1ZXMucHJlc2VudDtcclxuICAgICAgICAgICAgaWYgKCFjdXJyZW50VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUudGltZUVuZCgnY2FsY3VsYXRlIG5vdGlmaXkgb24gY2hhbmdlJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHNlcmlhbGl6ZWRWYWx1ZSA9IHNlcmlhbHplVmFsdWUoY3VycmVudFZhbHVlLCBjZWxsUGx1Z2lucyk7XHJcbiAgICAgICAgICAgIHZhciBzZXJpYWxpemVkRXF1YWwgPSBkZWVwRXF1YWxzKGxhc3RWYWx1ZVJlZi5jdXJyZW50LCBzZXJpYWxpemVkVmFsdWUpO1xyXG4gICAgICAgICAgICBpZiAoc2VyaWFsaXplZEVxdWFsKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICBjb25zb2xlLnRpbWVFbmQoJ2NhbGN1bGF0ZSBub3RpZml5IG9uIGNoYW5nZScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxhc3RWYWx1ZVJlZi5jdXJyZW50ID0gc2VyaWFsaXplZFZhbHVlO1xyXG4gICAgICAgICAgICAvLyAgIGNvbnNvbGUudGltZUVuZCgnY2FsY3VsYXRlIG5vdGlmaXkgb24gY2hhbmdlJyk7XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlKHNlcmlhbGl6ZWRWYWx1ZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgdW5zdWJzY3JpYmUgPSBlZGl0b3JTdG9yZS5zdG9yZS5zdWJzY3JpYmUoaGFuZGxlQ2hhbmdlcyk7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdW5zdWJzY3JpYmUoKTtcclxuICAgICAgICB9O1xyXG4gICAgfSwgW2VkaXRvclN0b3JlLCBvbkNoYW5nZSwgY2VsbFBsdWdpbnNdKTtcclxuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVxdWFsID0gZGVlcEVxdWFscyh2YWx1ZSwgbGFzdFZhbHVlUmVmLmN1cnJlbnQpO1xyXG4gICAgICAgIC8vIHZhbHVlIGNoYW5nZWQgZnJvbSBvdXRzaWRlXHJcbiAgICAgICAgaWYgKCFlcXVhbCkge1xyXG4gICAgICAgICAgICBsYXN0VmFsdWVSZWYuY3VycmVudCA9IHZhbHVlO1xyXG4gICAgICAgICAgICB2YXIgbWlncmF0ZWRWYWx1ZSA9IG1pZ3JhdGVWYWx1ZSh2YWx1ZSwge1xyXG4gICAgICAgICAgICAgICAgY2VsbFBsdWdpbnM6IGNlbGxQbHVnaW5zLFxyXG4gICAgICAgICAgICAgICAgbGFuZzogbGFuZyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGVkaXRvclN0b3JlLnN0b3JlLmRpc3BhdGNoKHVwZGF0ZVZhbHVlKG1pZ3JhdGVkVmFsdWUpKTtcclxuICAgICAgICB9XHJcbiAgICB9LCBbdmFsdWUsIGNlbGxQbHVnaW5zLCBsYW5nXSk7XHJcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIGlmIGNoYW5nZWQgZnJvbSBvdXRzaWRlXHJcbiAgICAgICAgZWRpdG9yU3RvcmUuc2V0TGFuZyhsYW5nKTtcclxuICAgIH0sIFtlZGl0b3JTdG9yZSwgbGFuZ10pO1xyXG4gICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFJlZHV4UHJvdmlkZXIsIHsgc3RvcmU6IGVkaXRvclN0b3JlLnN0b3JlIH0sXHJcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChFZGl0b3JDb250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiBlZGl0b3JTdG9yZSB9LCBjaGlsZHJlbikpKTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgRWRpdG9yU3RvcmVQcm92aWRlcjtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RWRpdG9yU3RvcmVQcm92aWRlci5qcy5tYXAiLCJ2YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXHJcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn07XHJcbnZhciBfX3Jlc3QgPSAodGhpcyAmJiB0aGlzLl9fcmVzdCkgfHwgZnVuY3Rpb24gKHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59O1xyXG5pbXBvcnQgUmVhY3QsIHsgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgZGVlcEVxdWFscyBmcm9tICcuLi91dGlscy9kZWVwRXF1YWxzJztcclxuaW1wb3J0IHsgT3B0aW9uc0NvbnRleHQgfSBmcm9tICcuLi9jb21wb25lbnRzL2hvb2tzJztcclxuaW1wb3J0IHsgREVGQVVMVF9PUFRJT05TIH0gZnJvbSAnLi4vZGVmYXVsdE9wdGlvbnMnO1xyXG4vKlxyXG53ZSBtZW1vaXplIHRoZSBvcHRpb25zLCBzbyB0aGF0IGlmIHlvdSBhY2Nlc3MgdGhlbSwgeW91IHdvbid0IGdldCBhIGZyZXNoIG9iamVjdCBldmVyeSB0aW1lLlxyXG4qL1xyXG52YXIgT3B0aW9uc1Byb3ZpZGVyID0gZnVuY3Rpb24gKF9hKSB7XHJcbiAgICB2YXIgY2hpbGRyZW4gPSBfYS5jaGlsZHJlbiwgb3B0aW9ucyA9IF9fcmVzdChfYSwgW1wiY2hpbGRyZW5cIl0pO1xyXG4gICAgdmFyIGxhc3RPcHRpb25zID0gdXNlUmVmKCk7XHJcbiAgICB2YXIgZnVsbE9wdGlvbnMgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgREVGQVVMVF9PUFRJT05TKSwgb3B0aW9ucyk7XHJcbiAgICB2YXIgaXNFcXVhbCA9IGxhc3RPcHRpb25zLmN1cnJlbnRcclxuICAgICAgICA/IGRlZXBFcXVhbHMobGFzdE9wdGlvbnMuY3VycmVudCwgZnVsbE9wdGlvbnMpXHJcbiAgICAgICAgOiBmYWxzZTtcclxuICAgIGlmICghaXNFcXVhbCkge1xyXG4gICAgICAgIGxhc3RPcHRpb25zLmN1cnJlbnQgPSBmdWxsT3B0aW9ucztcclxuICAgIH1cclxuICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChPcHRpb25zQ29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZTogbGFzdE9wdGlvbnMuY3VycmVudCB9LCBjaGlsZHJlbikpO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBPcHRpb25zUHJvdmlkZXI7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9wdGlvbnNQcm92aWRlci5qcy5tYXAiLCJ2YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXHJcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn07XHJcbnZhciBfX3Jlc3QgPSAodGhpcyAmJiB0aGlzLl9fcmVzdCkgfHwgZnVuY3Rpb24gKHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59O1xyXG5pbXBvcnQgUmVhY3QsIHsgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgZGVlcEVxdWFscyBmcm9tICcuLi91dGlscy9kZWVwRXF1YWxzJztcclxuaW1wb3J0IHsgUmVuZGVyT3B0aW9uc0NvbnRleHQgfSBmcm9tICcuLi9jb21wb25lbnRzL2hvb2tzJztcclxuaW1wb3J0IHsgREVGQVVMVF9SRU5ERVJfT1BUSU9OUyB9IGZyb20gJy4uL2RlZmF1bHRPcHRpb25zJztcclxuLypcclxud2UgbWVtb2l6ZSB0aGUgUmVuZGVyT3B0aW9ucywgc28gdGhhdCBpZiB5b3UgYWNjZXNzIHRoZW0sIHlvdSB3b24ndCBnZXQgYSBmcmVzaCBvYmplY3QgZXZlcnkgdGltZS5cclxuXHJcbiovXHJcbnZhciBSZW5kZXJPcHRpb25zUHJvdmlkZXIgPSBmdW5jdGlvbiAoX2EpIHtcclxuICAgIHZhciBjaGlsZHJlbiA9IF9hLmNoaWxkcmVuLCByZW5kZXJPcHRpb25zID0gX19yZXN0KF9hLCBbXCJjaGlsZHJlblwiXSk7XHJcbiAgICB2YXIgbGFzdFJlbmRlck9wdGlvbnMgPSB1c2VSZWYoKTtcclxuICAgIHZhciBmdWxsUmVuZGVyT3B0aW9ucyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBERUZBVUxUX1JFTkRFUl9PUFRJT05TKSwgcmVuZGVyT3B0aW9ucyk7XHJcbiAgICB2YXIgaXNFcXVhbCA9IGxhc3RSZW5kZXJPcHRpb25zLmN1cnJlbnRcclxuICAgICAgICA/IGRlZXBFcXVhbHMobGFzdFJlbmRlck9wdGlvbnMuY3VycmVudCwgZnVsbFJlbmRlck9wdGlvbnMpXHJcbiAgICAgICAgOiBmYWxzZTtcclxuICAgIGlmICghaXNFcXVhbCkge1xyXG4gICAgICAgIGxhc3RSZW5kZXJPcHRpb25zLmN1cnJlbnQgPSBmdWxsUmVuZGVyT3B0aW9ucztcclxuICAgIH1cclxuICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChSZW5kZXJPcHRpb25zQ29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZTogbGFzdFJlbmRlck9wdGlvbnMuY3VycmVudCB9LCBjaGlsZHJlbikpO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBSZW5kZXJPcHRpb25zUHJvdmlkZXI7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlbmRlck9wdGlvbnNQcm92aWRlci5qcy5tYXAiLCJ2YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXHJcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn07XHJcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBEbmRQcm92aWRlciBmcm9tICcuL0RuZFByb3ZpZGVyJztcclxuaW1wb3J0IEJsdXJHYXRlIGZyb20gJy4uL2NvbXBvbmVudHMvQmx1ckdhdGUnO1xyXG5pbXBvcnQgQ2FsbGJhY2tzUHJvdmlkZXIgZnJvbSAnLi9DYWxsYmFja3NQcm92aWRlcic7XHJcbmltcG9ydCBFZGl0b3JTdG9yZVByb3ZpZGVyIGZyb20gJy4vRWRpdG9yU3RvcmVQcm92aWRlcic7XHJcbmltcG9ydCBPcHRpb25zUHJvdmlkZXIgZnJvbSAnLi9PcHRpb25zUHJvdmlkZXInO1xyXG5pbXBvcnQgUmVuZGVyT3B0aW9uc1Byb3ZpZGVyIGZyb20gJy4vUmVuZGVyT3B0aW9uc1Byb3ZpZGVyJztcclxudmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKF9hKSB7XHJcbiAgICB2YXIgbGFuZyA9IF9hLmxhbmcsIHZhbHVlID0gX2EudmFsdWUsIF9iID0gX2EuY2hpbGRyZW4sIGNoaWxkcmVuID0gX2IgPT09IHZvaWQgMCA/IFtdIDogX2IsIHJlbmRlck9wdGlvbnMgPSBfYS5yZW5kZXJPcHRpb25zLCBjYWxsYmFja3MgPSBfYS5jYWxsYmFja3MsIG9wdGlvbnMgPSBfYS5vcHRpb25zO1xyXG4gICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KE9wdGlvbnNQcm92aWRlciwgX19hc3NpZ24oe30sIG9wdGlvbnMpLFxyXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmVuZGVyT3B0aW9uc1Byb3ZpZGVyLCBfX2Fzc2lnbih7fSwgcmVuZGVyT3B0aW9ucyksXHJcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ2FsbGJhY2tzUHJvdmlkZXIsIF9fYXNzaWduKHt9LCBjYWxsYmFja3MpLFxyXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChEbmRQcm92aWRlciwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEVkaXRvclN0b3JlUHJvdmlkZXIsIHsgbGFuZzogbGFuZywgdmFsdWU6IHZhbHVlIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQmx1ckdhdGUsIG51bGwsIGNoaWxkcmVuKSkpKSkpKTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgUHJvdmlkZXI7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IERJU1BMQVlfTU9ERV9FRElUIH0gZnJvbSAnLi4vYWN0aW9ucy9kaXNwbGF5JztcclxuaW1wb3J0IHsgdXNlQmx1ckFsbENlbGxzLCB1c2VJc0luc2VydE1vZGUsIHVzZU9wdGlvbiwgdXNlU2V0TW9kZSwgfSBmcm9tICcuL2hvb2tzJztcclxuLy8gdGhpcyBtaWdodCBicmVhayBpbiBmdXR1cmUsIGJ1dCBpdHMgYmV0dGVyIHRoYW4gbm90aGluZ1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG5mdW5jdGlvbiBmaW5kUmVhY3RFbGVtZW50KG5vZGUpIHtcclxuICAgIGZvciAodmFyIGtleSBpbiBub2RlKSB7XHJcbiAgICAgICAgaWYgKGtleS5zdGFydHNXaXRoKCdfX3JlYWN0SW50ZXJuYWxJbnN0YW5jZSQnKSB8fFxyXG4gICAgICAgICAgICBrZXkuc3RhcnRzV2l0aCgnX19yZWFjdEZpYmVyJCcpIC8vIHJlYWN0IDE3XHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBub2RlW2tleV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cclxuLy8gd2UgZ28gdXAgdGhlIHJlYWMtdHJlZS4gVGhpcyB3b3JrcyBldmVuIHRocm91Z2ggcG9ydGFscywgd2hpY2ggd291bGQgbm90IGJlIHBvc3NpYmxlIHdpdGggdHJhdmVyc2luZyB0aGUgZG9tIHRyZWUhXHJcbnZhciBpc0luU2FtZVRyZWUgPSBmdW5jdGlvbiAocGFyZW50LCBjaGlsZCkge1xyXG4gICAgaWYgKCFwYXJlbnQpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICB2YXIgZWxlbWVudCA9IGZpbmRSZWFjdEVsZW1lbnQoY2hpbGQpO1xyXG4gICAgd2hpbGUgKGVsZW1lbnQpIHtcclxuICAgICAgICBpZiAoZWxlbWVudC5zdGF0ZU5vZGUgPT09IHBhcmVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQucmV0dXJuO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59O1xyXG52YXIgdXNlQmx1ckFsbCA9IGZ1bmN0aW9uIChfYSkge1xyXG4gICAgdmFyIF9iID0gX2EuZGVmYXVsdE1vZGUsIGRlZmF1bHRNb2RlID0gX2IgPT09IHZvaWQgMCA/IERJU1BMQVlfTU9ERV9FRElUIDogX2IsIGRpc2FibGVkID0gX2EuZGlzYWJsZWQ7XHJcbiAgICB2YXIgcmVmID0gUmVhY3QudXNlUmVmKCk7XHJcbiAgICB2YXIgYmx1ckFsbENlbGxzID0gdXNlQmx1ckFsbENlbGxzKCk7XHJcbiAgICB2YXIgc2V0TW9kZSA9IHVzZVNldE1vZGUoKTtcclxuICAgIHZhciBpc0luc2VydE1vZGUgPSB1c2VJc0luc2VydE1vZGUoKTtcclxuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFyZWYuY3VycmVudCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghZG9jdW1lbnQgJiYgIWRvY3VtZW50LmJvZHkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgb25Nb3VzZURvd24gPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBpZiAoIWlzSW5TYW1lVHJlZShyZWYuY3VycmVudCwgZS50YXJnZXQpKSB7XHJcbiAgICAgICAgICAgICAgICBibHVyQWxsQ2VsbHMoKTtcclxuICAgICAgICAgICAgICAgIC8vIHNldCB1cyBpbiBkZWZhdWx0IG1vZGUgaWYgY3VycmVudCBtb2RlIGlzIFwiaW5zZXJ0XCJcclxuICAgICAgICAgICAgICAgIGlmIChpc0luc2VydE1vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRNb2RlKGRlZmF1bHRNb2RlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbk1vdXNlRG93bik7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbk1vdXNlRG93bik7XHJcbiAgICAgICAgfTtcclxuICAgIH0sIFtyZWYuY3VycmVudCwgZGlzYWJsZWQsIGlzSW5zZXJ0TW9kZSwgc2V0TW9kZSwgYmx1ckFsbENlbGxzXSk7XHJcbiAgICByZXR1cm4gcmVmO1xyXG59O1xyXG52YXIgQmx1ckdhdGUgPSBmdW5jdGlvbiAoX2EpIHtcclxuICAgIHZhciBjaGlsZHJlbiA9IF9hLmNoaWxkcmVuO1xyXG4gICAgdmFyIGRlZmF1bHRNb2RlID0gdXNlT3B0aW9uKCdibHVyR2F0ZURlZmF1bHRNb2RlJyk7XHJcbiAgICB2YXIgZGlzYWJsZWQgPSB1c2VPcHRpb24oJ2JsdXJHYXRlRGlzYWJsZWQnKTtcclxuICAgIHZhciByZWYgPSB1c2VCbHVyQWxsKHsgZGVmYXVsdE1vZGU6IGRlZmF1bHRNb2RlLCBkaXNhYmxlZDogZGlzYWJsZWQgfSk7XHJcbiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHJlZjogcmVmIH0sIGNoaWxkcmVuKTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgQmx1ckdhdGU7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUJsdXJHYXRlLmpzLm1hcCIsInZhciBfX3JlYWQgPSAodGhpcyAmJiB0aGlzLl9fcmVhZCkgfHwgZnVuY3Rpb24gKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufTtcclxuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XHJcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IHVzZUNlbGwsIHVzZUZvY3VzQ2VsbCwgdXNlSXNMYXlvdXRNb2RlLCB1c2VPcHRpb24gfSBmcm9tICcuLi8uLi9ob29rcyc7XHJcbmltcG9ydCB7IHVzZURyYWdIYW5kbGUgfSBmcm9tICcuL3VzZURyYWdIYW5kbGUnO1xyXG52YXIgRGVmYXVsdFNtYWxsSGFuZGxlID0gZnVuY3Rpb24gKF9hKSB7XHJcbiAgICB2YXIgb25DbGljayA9IF9hLm9uQ2xpY2s7XHJcbiAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwicmVhY3QtcGFnZS1jZWxsLWRyYWdnYWJsZS1vdmVybGF5LWhhbmRsZVwiLCBvbkNsaWNrOiBvbkNsaWNrIH0sXHJcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJyZWFjdC1wYWdlLWNlbGwtZHJhZ2dhYmxlLW92ZXJsYXktaGFuZGxlLWljb25cIiB9KSkpO1xyXG59O1xyXG52YXIgRHJhZ2dhYmxlID0gZnVuY3Rpb24gKF9hKSB7XHJcbiAgICB2YXIgX2I7XHJcbiAgICB2YXIgX2M7XHJcbiAgICB2YXIgaXNMZWFmID0gX2EuaXNMZWFmLCBjaGlsZHJlbiA9IF9hLmNoaWxkcmVuLCBub2RlSWQgPSBfYS5ub2RlSWQ7XHJcbiAgICB2YXIgY2VsbCA9IHVzZUNlbGwobm9kZUlkKTtcclxuICAgIHZhciBfZCA9IF9fcmVhZCh1c2VEcmFnSGFuZGxlKG5vZGVJZCksIDMpLCBpc0RyYWdnaW5nID0gX2RbMF0sIGRyYWdSZWYgPSBfZFsxXSwgcHJldmlld0VsZW1lbnQgPSBfZFsyXTtcclxuICAgIHZhciBmb2N1cyA9IHVzZUZvY3VzQ2VsbChub2RlSWQpO1xyXG4gICAgdmFyIGlzTGF5b3V0TW9kZSA9IHVzZUlzTGF5b3V0TW9kZSgpO1xyXG4gICAgdmFyIGFsbG93TW92ZUluRWRpdE1vZGUgPSB1c2VPcHRpb24oJ2FsbG93TW92ZUluRWRpdE1vZGUnKTtcclxuICAgIHZhciBjb21wb25lbnRzID0gdXNlT3B0aW9uKCdjb21wb25lbnRzJyk7XHJcbiAgICB2YXIgUmVzaXplSGFuZGxlID0gKF9jID0gY29tcG9uZW50cyA9PT0gbnVsbCB8fCBjb21wb25lbnRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb21wb25lbnRzLkVkaXRNb2RlUmVzaXplSGFuZGxlKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBEZWZhdWx0U21hbGxIYW5kbGU7XHJcbiAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsXHJcbiAgICAgICAgcHJldmlld0VsZW1lbnQsXHJcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHJlZjogaXNMYXlvdXRNb2RlID8gZHJhZ1JlZiA6IHVuZGVmaW5lZCwgc3R5bGU6IHtcclxuICAgICAgICAgICAgICAgIGhlaWdodDogJzEwMCUnLFxyXG4gICAgICAgICAgICB9LCBjbGFzc05hbWU6IGNsYXNzTmFtZXMoe1xyXG4gICAgICAgICAgICAgICAgJ3JlYWN0LXBhZ2UtY2VsbC1kcmFnZ2FibGUtaW4tZWRpdCc6ICFpc0xheW91dE1vZGUgJiYgYWxsb3dNb3ZlSW5FZGl0TW9kZSxcclxuICAgICAgICAgICAgICAgICdyZWFjdC1wYWdlLWNlbGwtZHJhZ2dhYmxlJzogaXNMYXlvdXRNb2RlLFxyXG4gICAgICAgICAgICAgICAgJ3JlYWN0LXBhZ2UtY2VsbC1kcmFnZ2FibGUtaXMtZHJhZ2dpbmcnOiBpc0RyYWdnaW5nLFxyXG4gICAgICAgICAgICB9KSB9LFxyXG4gICAgICAgICAgICBpc0xheW91dE1vZGUgPyAoUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IG9uQ2xpY2s6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1vZGUgPSBlLm1ldGFLZXkgfHwgZS5jdHJsS2V5ID8gJ2FkZCcgOiAncmVwbGFjZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9jdXMoZmFsc2UsIG1vZGUpO1xyXG4gICAgICAgICAgICAgICAgfSwgY2xhc3NOYW1lOiBjbGFzc05hbWVzKChfYiA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3JlYWN0LXBhZ2UtY2VsbC1kcmFnZ2FibGUtb3ZlcmxheSc6IGlzTGF5b3V0TW9kZVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgX2JbXCJyZWFjdC1wYWdlLWNlbGwtZHJhZ2dhYmxlLWlubGluZS1cIiArIGNlbGwuaW5saW5lXSA9IGNlbGwuaW5saW5lLFxyXG4gICAgICAgICAgICAgICAgICAgIF9iWydyZWFjdC1wYWdlLWNlbGwtZHJhZ2dhYmxlLWxlYWYnXSA9IGlzTGVhZixcclxuICAgICAgICAgICAgICAgICAgICBfYikpIH0pKSA6IGFsbG93TW92ZUluRWRpdE1vZGUgPyAoUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHJlZjogZHJhZ1JlZiB9LFxyXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChSZXNpemVIYW5kbGUsIHsgb25DbGljazogZm9jdXMgfSkpKSA6IG51bGwsXHJcbiAgICAgICAgICAgIGNoaWxkcmVuKSkpO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBEcmFnZ2FibGU7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsImltcG9ydCB0aHJvdHRsZSBmcm9tICdsb2Rhc2gudGhyb3R0bGUnO1xyXG5pbXBvcnQgeyBkZWxheSB9IGZyb20gJy4uLy4uLy4uLy4uL2hlbHBlci90aHJvdHRsZSc7XHJcbmltcG9ydCB7IGNvbXB1dGVBbmREaXNwYXRjaEhvdmVyLCBjb21wdXRlQW5kRGlzcGF0Y2hJbnNlcnQsIH0gZnJvbSAnLi4vLi4vLi4vLi4vc2VydmljZS9ob3Zlci9pbnB1dCc7XHJcbmltcG9ydCBsb2dnZXIgZnJvbSAnLi4vLi4vLi4vLi4vc2VydmljZS9sb2dnZXInO1xyXG52YXIgbGFzdCA9IHsgaG92ZXJJZDogJycsIGRyYWdJZDogJycgfTtcclxudmFyIHNob3VsZENsZWFyID0gZnVuY3Rpb24gKGhvdmVySWQsIGRyYWdJZCkge1xyXG4gICAgaWYgKGhvdmVySWQgPT09IGxhc3QuaG92ZXJJZCAmJiBkcmFnSWQgPT09IGxhc3QuZHJhZ0lkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgbGFzdCA9IHsgaG92ZXJJZDogaG92ZXJJZCwgZHJhZ0lkOiBkcmFnSWQgfTtcclxuICAgIHJldHVybiB0cnVlO1xyXG59O1xyXG5leHBvcnQgdmFyIG9uSG92ZXIgPSB0aHJvdHRsZShmdW5jdGlvbiAodGFyZ2V0LCBtb25pdG9yLCBlbGVtZW50LCBhY3Rpb25zLCBjZWxsUGx1Z2lucykge1xyXG4gICAgdmFyIGRyYWcgPSBtb25pdG9yLmdldEl0ZW0oKTtcclxuICAgIGlmICghZHJhZyB8fCAhdGFyZ2V0KSB7XHJcbiAgICAgICAgLy8gaXRlbSB1bmRlZmluZWQsIGhhcHBlbnMgd2hlbiB0aHJvdHRsZSB0cmlnZ2VycyBhZnRlciBkcm9wXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKGRyYWcuY2VsbC5pZCA9PT0gdGFyZ2V0LmlkKSB7XHJcbiAgICAgICAgLy8gSWYgaG92ZXJpbmcgb3ZlciBpdHNlbGYsIGRvIG5vdGhpbmdcclxuICAgICAgICBpZiAoc2hvdWxkQ2xlYXIodGFyZ2V0LmlkLCBkcmFnLmNlbGwuaWQpKSB7XHJcbiAgICAgICAgICAgIGFjdGlvbnMuY2xlYXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoIW1vbml0b3IuaXNPdmVyKHsgc2hhbGxvdzogdHJ1ZSB9KSkge1xyXG4gICAgICAgIC8vIElmIGhvdmVyaW5nIG92ZXIgYW5jZXN0b3IgY2VsbCwgZG8gbm90aGluZyAod2UgYXJlIGdvaW5nIHRvIHByb3BhZ2F0ZSBsYXRlciBpbiB0aGUgdHJlZSBhbnl3YXlzKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHRhcmdldC5hbmNlc3Rvcklkcy5pbmNsdWRlcyhkcmFnLmNlbGwuaWQpKSB7XHJcbiAgICAgICAgaWYgKHNob3VsZENsZWFyKHRhcmdldC5pZCwgZHJhZy5jZWxsLmlkKSkge1xyXG4gICAgICAgICAgICBhY3Rpb25zLmNsZWFyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKCF0YXJnZXQuaWQpIHtcclxuICAgICAgICAvLyBJZiBob3ZlcmluZyBvdmVyIHNvbWV0aGluZyB0aGF0IGlzbid0IGEgY2VsbCBvciBoYXNuJ3QgYW4gaWQsIGRvIG5vdGhpbmcuIFNob3VsZCBiZSBhbiBlZGdlIGNhc2VcclxuICAgICAgICBsb2dnZXIud2FybignQ2FuY2VsZWQgY2VsbCBkcm9wLCBubyBpZCBnaXZlbi4nLCB0YXJnZXQsIGRyYWcpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGxhc3QgPSB7IGhvdmVySWQ6IHRhcmdldC5pZCwgZHJhZ0lkOiBkcmFnLmNlbGwuaWQgfTtcclxuICAgIGNvbXB1dGVBbmREaXNwYXRjaEhvdmVyKHRhcmdldCwgZHJhZy5jZWxsLCBtb25pdG9yLCBlbGVtZW50LCBhY3Rpb25zLCBjZWxsUGx1Z2lucyk7XHJcbn0sIGRlbGF5LCB7IGxlYWRpbmc6IGZhbHNlIH0pO1xyXG5leHBvcnQgdmFyIG9uRHJvcCA9IGZ1bmN0aW9uICh0YXJnZXQsIG1vbml0b3IsIGVsZW1lbnQsIGFjdGlvbnMsIGNlbGxQbHVnaW5zKSB7XHJcbiAgICB2YXIgZHJhZyA9IG1vbml0b3IuZ2V0SXRlbSgpO1xyXG4gICAgaWYgKG1vbml0b3IuZGlkRHJvcCgpIHx8ICFtb25pdG9yLmlzT3Zlcih7IHNoYWxsb3c6IHRydWUgfSkgfHwgIXRhcmdldCkge1xyXG4gICAgICAgIC8vIElmIHRoZSBpdGVtIGRyb3Agb2NjdXJyZWQgZGVlcGVyIGRvd24gdGhlIHRyZWUsIGRvbid0IGRvIGFueXRoaW5nXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZHJhZy5jZWxsLmlkID09PSB0YXJnZXQuaWQpIHtcclxuICAgICAgICAvLyBJZiB0aGUgaXRlbSBiZWluZyBkcm9wcGVkIG9uIGl0c2VsZiBkbyBub3RoaW5nXHJcbiAgICAgICAgYWN0aW9ucy5jYW5jZWxDZWxsRHJhZygpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHRhcmdldC5hbmNlc3Rvcklkcy5pbmNsdWRlcyhkcmFnLmNlbGwuaWQpKSB7XHJcbiAgICAgICAgLy8gSWYgaG92ZXJpbmcgb3ZlciBhIGNoaWxkIG9mIGl0c2VsZiwgZG9uJ3QgcHJvcGFnYXRlIGZ1cnRoZXJcclxuICAgICAgICBhY3Rpb25zLmNhbmNlbENlbGxEcmFnKCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGFzdCA9IHsgaG92ZXJJZDogdGFyZ2V0LmlkLCBkcmFnSWQ6IGRyYWcuY2VsbC5pZCB9O1xyXG4gICAgY29tcHV0ZUFuZERpc3BhdGNoSW5zZXJ0KHRhcmdldCwgZHJhZy5jZWxsLCBtb25pdG9yLCBlbGVtZW50LCBhY3Rpb25zLCBjZWxsUGx1Z2lucyk7XHJcbn07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRuZC5qcy5tYXAiLCJ2YXIgX19yZWFkID0gKHRoaXMgJiYgdGhpcy5fX3JlYWQpIHx8IGZ1bmN0aW9uIChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn07XHJcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xyXG5pbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlRHJvcCB9IGZyb20gJ3JlYWN0LWRuZCc7XHJcbmltcG9ydCB7IHVzZVNlbGVjdG9yIH0gZnJvbSAnLi4vLi4vLi4vcmVkdXhDb25uZWN0JztcclxuaW1wb3J0IHsgdXNlTm9kZUFzSG92ZXJUYXJnZXQsIHVzZUNlbGxIYXNQbHVnaW4sIHVzZUNlbGxJc0FsbG93ZWRIZXJlLCB1c2VDZWxsU3BhY2luZywgdXNlRHJvcEFjdGlvbnMsIHVzZUhvdmVyQWN0aW9ucywgdXNlSXNJbnNlcnRNb2RlLCB1c2VJc0xheW91dE1vZGUsIHVzZU5vZGVIb3ZlclBvc2l0aW9uLCB1c2VQbHVnaW5PZkNlbGwsIHVzZU9wdGlvbiwgdXNlQWxsQ2VsbFBsdWdpbnNGb3JOb2RlLCB9IGZyb20gJy4uLy4uL2hvb2tzJztcclxuaW1wb3J0IHsgb25Ecm9wLCBvbkhvdmVyIH0gZnJvbSAnLi9oZWxwZXIvZG5kJztcclxuZXhwb3J0IHZhciB1c2VDZWxsRHJvcCA9IGZ1bmN0aW9uIChub2RlSWQpIHtcclxuICAgIHZhciBfYTtcclxuICAgIHZhciByZWYgPSBSZWFjdC51c2VSZWYobnVsbCk7XHJcbiAgICB2YXIgaG92ZXJUYXJnZXQgPSB1c2VOb2RlQXNIb3ZlclRhcmdldChub2RlSWQpO1xyXG4gICAgdmFyIHRhcmdldFBhcmVudE5vZGVJZCA9IChfYSA9IGhvdmVyVGFyZ2V0ID09PSBudWxsIHx8IGhvdmVyVGFyZ2V0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBob3ZlclRhcmdldC5hbmNlc3RvcklkcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hWzBdO1xyXG4gICAgdmFyIGNoZWNrSWZBbGxvd2VkID0gdXNlQ2VsbElzQWxsb3dlZEhlcmUodGFyZ2V0UGFyZW50Tm9kZUlkKTtcclxuICAgIHZhciBwbHVnaW4gPSB1c2VQbHVnaW5PZkNlbGwobm9kZUlkKTtcclxuICAgIHZhciBjZWxsUGx1Z2lucyA9IHVzZUFsbENlbGxQbHVnaW5zRm9yTm9kZSh0YXJnZXRQYXJlbnROb2RlSWQpO1xyXG4gICAgdmFyIGhvdmVyQWN0aW9ucyA9IHVzZUhvdmVyQWN0aW9ucygpO1xyXG4gICAgdmFyIGRyb3BBY3Rpb25zID0gdXNlRHJvcEFjdGlvbnModGFyZ2V0UGFyZW50Tm9kZUlkKTtcclxuICAgIHZhciBpc0hvdmVyaW5nT3ZlclRoaXMgPSB1c2VTZWxlY3RvcihmdW5jdGlvbiAoc3RhdGUpIHsgdmFyIF9hOyByZXR1cm4gKChfYSA9IHN0YXRlLnJlYWN0UGFnZS5ob3ZlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm5vZGVJZCkgPT09IG5vZGVJZDsgfSk7XHJcbiAgICB2YXIgX2IgPSBfX3JlYWQodXNlRHJvcCh7XHJcbiAgICAgICAgYWNjZXB0OiAnY2VsbCcsXHJcbiAgICAgICAgY2FuRHJvcDogZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgLy8gY2hlY2sgaWYgcGx1Z2luIGlzIGFsbG93ZWQgaGVyZVxyXG4gICAgICAgICAgICBpZiAoIWNoZWNrSWZBbGxvd2VkKGl0ZW0pKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHBsdWdpbiA9PT0gbnVsbCB8fCBwbHVnaW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBsdWdpbi5hbGxvd05laWdoYm91cikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFwbHVnaW4uYWxsb3dOZWlnaGJvdXIoaXRlbS5jZWxsKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gKGl0ZW0uY2VsbC5pZCAhPT0gbm9kZUlkICYmXHJcbiAgICAgICAgICAgICAgICAhKGhvdmVyVGFyZ2V0ID09PSBudWxsIHx8IGhvdmVyVGFyZ2V0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBob3ZlclRhcmdldC5hbmNlc3Rvcklkcy5pbmNsdWRlcyhpdGVtLmNlbGwuaWQpKSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb2xsZWN0OiBmdW5jdGlvbiAobW9uaXRvcikgeyByZXR1cm4gKHtcclxuICAgICAgICAgICAgaXNPdmVyOiBtb25pdG9yLmlzT3ZlcigpLFxyXG4gICAgICAgICAgICBpc0FsbG93ZWQ6IGNoZWNrSWZBbGxvd2VkKG1vbml0b3IuZ2V0SXRlbSgpKSxcclxuICAgICAgICB9KTsgfSxcclxuICAgICAgICBob3ZlcjogZnVuY3Rpb24gKGl0ZW0sIG1vbml0b3IpIHtcclxuICAgICAgICAgICAgaWYgKHBsdWdpbiA9PT0gbnVsbCB8fCBwbHVnaW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBsdWdpbi5hbGxvd05laWdoYm91cikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFwbHVnaW4uYWxsb3dOZWlnaGJvdXIoaXRlbS5jZWxsKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvbkhvdmVyKGhvdmVyVGFyZ2V0LCBtb25pdG9yLCByZWYuY3VycmVudCwgaG92ZXJBY3Rpb25zLCBjZWxsUGx1Z2lucyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBkcm9wOiBmdW5jdGlvbiAoaXRlbSwgbW9uaXRvcikge1xyXG4gICAgICAgICAgICBvbkRyb3AoaG92ZXJUYXJnZXQsIG1vbml0b3IsIHJlZi5jdXJyZW50LCBkcm9wQWN0aW9ucywgY2VsbFBsdWdpbnMpO1xyXG4gICAgICAgIH0sXHJcbiAgICB9KSwgMiksIF9jID0gX2JbMF0sIGlzT3ZlciA9IF9jLmlzT3ZlciwgaXNBbGxvd2VkID0gX2MuaXNBbGxvd2VkLCBkcm9wUmVmID0gX2JbMV07XHJcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghaXNPdmVyICYmIGlzSG92ZXJpbmdPdmVyVGhpcykge1xyXG4gICAgICAgICAgICBob3ZlckFjdGlvbnMuY2xlYXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9LCBbaXNPdmVyLCBpc0hvdmVyaW5nT3ZlclRoaXMsIGhvdmVyQWN0aW9ucy5jbGVhcl0pO1xyXG4gICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9yZWFjdC1kbmQvcmVhY3QtZG5kL2lzc3Vlcy8xOTU1XHJcbiAgICB2YXIgYXR0YWNoID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGRvbUVsZW1lbnQpIHtcclxuICAgICAgICBkcm9wUmVmKGRvbUVsZW1lbnQpO1xyXG4gICAgICAgIHJlZi5jdXJyZW50ID0gZG9tRWxlbWVudDtcclxuICAgICAgICAvLyB1c2UgZG9tIGVsZW1lbnQgaGVyZSBmb3IgbWVhc3VyaW5nXHJcbiAgICB9LCBbZHJvcFJlZl0pO1xyXG4gICAgcmV0dXJuIFthdHRhY2gsIGlzQWxsb3dlZF07XHJcbn07XHJcbnZhciBEcm9wcGFibGUgPSBmdW5jdGlvbiAocHJvcHMpIHtcclxuICAgIHZhciBfYTtcclxuICAgIHZhciBpc0xheW91dE1vZGUgPSB1c2VJc0xheW91dE1vZGUoKTtcclxuICAgIHZhciBpc0luc2VydE1vZGUgPSB1c2VJc0luc2VydE1vZGUoKTtcclxuICAgIHZhciBfYiA9IF9fcmVhZCh1c2VDZWxsRHJvcChwcm9wcy5ub2RlSWQpLCAyKSwgYXR0YWNoID0gX2JbMF0sIGlzQWxsb3dlZCA9IF9iWzFdO1xyXG4gICAgdmFyIGhvdmVyUG9zaXRpb24gPSB1c2VOb2RlSG92ZXJQb3NpdGlvbihwcm9wcy5ub2RlSWQpO1xyXG4gICAgdmFyIGFsbG93TW92ZUluRWRpdE1vZGUgPSB1c2VPcHRpb24oJ2FsbG93TW92ZUluRWRpdE1vZGUnKTtcclxuICAgIHZhciBoYXNQbHVnaW4gPSB1c2VDZWxsSGFzUGx1Z2luKHByb3BzLm5vZGVJZCk7XHJcbiAgICB2YXIgY2VsbFNwYWNpbmdZID0gdXNlQ2VsbFNwYWNpbmcoKS55O1xyXG4gICAgdmFyIG5lZWRWZXJ0aWNhbE1hcmdpbiA9ICFwcm9wcy5pc0xlYWYgJiYgIWhhc1BsdWdpbjtcclxuICAgIGlmICghKGlzTGF5b3V0TW9kZSB8fCBpc0luc2VydE1vZGUpICYmICFhbGxvd01vdmVJbkVkaXRNb2RlKSB7XHJcbiAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiAncmVhY3QtcGFnZS1jZWxsLWRyb3BwYWJsZS1jb250YWluZXInIH0sIHByb3BzLmNoaWxkcmVuKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyByZWY6IGF0dGFjaCwgc3R5bGU6IHtcclxuICAgICAgICAgICAgaGVpZ2h0OiAnMTAwJScsXHJcbiAgICAgICAgfSwgY2xhc3NOYW1lOiBcInJlYWN0LXBhZ2UtY2VsbC1kcm9wcGFibGVcIiB9LFxyXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBzdHlsZToge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXHJcbiAgICAgICAgICAgICAgICBwb2ludGVyRXZlbnRzOiAnbm9uZScsXHJcbiAgICAgICAgICAgICAgICB0b3A6IG5lZWRWZXJ0aWNhbE1hcmdpbiA/IGNlbGxTcGFjaW5nWSAvIDIgKyBcInB4XCIgOiAwLFxyXG4gICAgICAgICAgICAgICAgbGVmdDogMCxcclxuICAgICAgICAgICAgICAgIGJvdHRvbTogbmVlZFZlcnRpY2FsTWFyZ2luID8gY2VsbFNwYWNpbmdZIC8gMiArIFwicHhcIiA6IDAsXHJcbiAgICAgICAgICAgICAgICByaWdodDogMCxcclxuICAgICAgICAgICAgfSwgY2xhc3NOYW1lOiBjbGFzc05hbWVzKChfYSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAncmVhY3QtcGFnZS1jZWxsLWRyb3BwYWJsZS1ub3QtYWxsb3dlZCc6ICFpc0FsbG93ZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3JlYWN0LXBhZ2UtY2VsbC1kcm9wcGFibGUtaXMtb3Zlci1jdXJyZW50JzogaXNBbGxvd2VkICYmIGhvdmVyUG9zaXRpb25cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBfYVtcInJlYWN0LXBhZ2UtY2VsbC1kcm9wcGFibGUtaXMtb3Zlci1cIiArIGhvdmVyUG9zaXRpb25dID0gaXNBbGxvd2VkICYmIGhvdmVyUG9zaXRpb24sXHJcbiAgICAgICAgICAgICAgICBfYVsncmVhY3QtcGFnZS1jZWxsLWRyb3BwYWJsZS1sZWFmJ10gPSBwcm9wcy5pc0xlYWYsXHJcbiAgICAgICAgICAgICAgICBfYSkpIH0pLFxyXG4gICAgICAgIHByb3BzLmNoaWxkcmVuKSk7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IERyb3BwYWJsZTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlSXNFZGl0TW9kZSwgdXNlUmVtb3ZlQ2VsbCwgdXNlVWlUcmFuc2xhdG9yIH0gZnJvbSAnLi4vLi4vaG9va3MnO1xyXG52YXIgRXJyb3JDZWxsID0gZnVuY3Rpb24gKF9hKSB7XHJcbiAgICB2YXIgbm9kZUlkID0gX2Eubm9kZUlkLCBlcnJvciA9IF9hLmVycm9yO1xyXG4gICAgdmFyIGlzRWRpdE1vZGUgPSB1c2VJc0VkaXRNb2RlKCk7XHJcbiAgICB2YXIgcmVtb3ZlQ2VsbCA9IHVzZVJlbW92ZUNlbGwobm9kZUlkKTtcclxuICAgIHZhciB0ID0gdXNlVWlUcmFuc2xhdG9yKCkudDtcclxuICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJyZWFjdC1wYWdlLWNlbGwtZXJyb3JcIiB9LFxyXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzdHJvbmdcIiwgbnVsbCwgdCgnQW4gZXJyb3Igb2NjdXJyZWQhJykpLFxyXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzbWFsbFwiLCBudWxsLFxyXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGxcIiwgbnVsbCxcclxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkdFwiLCBudWxsLCB0KCdDYXVzZTonKSksXHJcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGRcIiwgbnVsbCwgZXJyb3IubWVzc2FnZSksXHJcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZHRcIiwgbnVsbCwgdCgnQ2VsbDonKSksXHJcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGRcIiwgbnVsbCwgbm9kZUlkKSkpLFxyXG4gICAgICAgIGlzRWRpdE1vZGUgPyAoUmVhY3QuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7IG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlbW92ZUNlbGwoKTsgfSB9LCB0KCdSZW1vdmUnKSkpIDogbnVsbCkpO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBFcnJvckNlbGw7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsInZhciBfX3JlYWQgPSAodGhpcyAmJiB0aGlzLl9fcmVhZCkgfHwgZnVuY3Rpb24gKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufTtcclxuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XHJcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IHVzZUZvY3VzQ2VsbCwgdXNlSXNMYXlvdXRNb2RlLCB1c2VPcHRpb24sIHVzZVBsdWdpbk9mQ2VsbCwgdXNlVWlUcmFuc2xhdG9yLCB9IGZyb20gJy4uLy4uL2hvb2tzJztcclxuaW1wb3J0IHsgdXNlRHJhZ0hhbmRsZSB9IGZyb20gJy4uL0RyYWdnYWJsZS91c2VEcmFnSGFuZGxlJztcclxudmFyIEhhbmRsZSA9IGZ1bmN0aW9uIChfYSkge1xyXG4gICAgdmFyIG5vZGVJZCA9IF9hLm5vZGVJZDtcclxuICAgIHZhciBhbGxvd01vdmVJbkVkaXRNb2RlID0gdXNlT3B0aW9uKCdhbGxvd01vdmVJbkVkaXRNb2RlJyk7XHJcbiAgICB2YXIgaXNMYXlvdXRNb2RlID0gdXNlSXNMYXlvdXRNb2RlKCk7XHJcbiAgICB2YXIgZHJhZ0VuYWJsZWQgPSBhbGxvd01vdmVJbkVkaXRNb2RlIHx8IGlzTGF5b3V0TW9kZTtcclxuICAgIHZhciBfYiA9IF9fcmVhZCh1c2VEcmFnSGFuZGxlKG5vZGVJZCwgZHJhZ0VuYWJsZWQpLCAzKSwgaXNEcmFnZ2luZyA9IF9iWzBdLCBkcmFnUmVmID0gX2JbMV0sIHByZXZpZXdFbGVtZW50ID0gX2JbMl07XHJcbiAgICB2YXIgZm9jdXMgPSB1c2VGb2N1c0NlbGwobm9kZUlkKTtcclxuICAgIHZhciBwbHVnaW4gPSB1c2VQbHVnaW5PZkNlbGwobm9kZUlkKTtcclxuICAgIHZhciB0ID0gdXNlVWlUcmFuc2xhdG9yKCkudDtcclxuICAgIGlmICghcGx1Z2luKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsXHJcbiAgICAgICAgcHJldmlld0VsZW1lbnQsXHJcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcygncmVhY3QtcGFnZS1jZWxsLWhhbmRsZScsIHtcclxuICAgICAgICAgICAgICAgICdyZWFjdC1wYWdlLWNlbGwtaGFuZGxlLWRyYWctZW5hYmxlZCc6IGRyYWdFbmFibGVkLFxyXG4gICAgICAgICAgICAgICAgJ3JlYWN0LXBhZ2UtY2VsbC1oYW5kbGUtaXMtZHJhZ2dpbmcnOiBpc0RyYWdnaW5nLFxyXG4gICAgICAgICAgICB9KSwgcmVmOiBkcmFnUmVmLCBvbkNsaWNrOiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1vZGUgPSBlLm1ldGFLZXkgfHwgZS5jdHJsS2V5ID8gJ2FkZCcgOiAncmVwbGFjZSc7XHJcbiAgICAgICAgICAgICAgICBmb2N1cyhmYWxzZSwgbW9kZSk7XHJcbiAgICAgICAgICAgIH0gfSwgdCgocGx1Z2luID09PSBudWxsIHx8IHBsdWdpbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGx1Z2luLnRpdGxlKSB8fCAocGx1Z2luID09PSBudWxsIHx8IHBsdWdpbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGx1Z2luLnRleHQpKSkpKTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgUmVhY3QubWVtbyhIYW5kbGUpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJ2YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXHJcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn07XHJcbnZhciBfX3JlYWQgPSAodGhpcyAmJiB0aGlzLl9fcmVhZCkgfHwgZnVuY3Rpb24gKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufTtcclxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgZ2V0UGx1Z2luQ2VsbFNwYWNpbmcsIG5vcm1hbGl6ZUNlbGxTcGFjaW5nLCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL2dldENlbGxTcGFjaW5nJztcclxuaW1wb3J0IHsgdXNlQ2VsbERhdGEsIHVzZUNlbGxIYXNQbHVnaW4sIHVzZUNlbGxJbm5lckRpdlN0eWxpbmdQcm9wcywgdXNlQ2VsbFNwYWNpbmcsIHVzZUNlbGxTcGFjaW5nUHJvdmlkZXIsIHVzZUZvY3VzQ2VsbCwgdXNlSXNFZGl0TW9kZSwgdXNlSXNGb2N1c2VkLCB1c2VJc1ByZXZpZXdNb2RlLCB1c2VOb2RlQ2hpbGRyZW5JZHMsIHVzZU9wdGlvbiwgdXNlUGx1Z2luT2ZDZWxsLCB1c2VTZXRFZGl0TW9kZSwgfSBmcm9tICcuLi8uLi9ob29rcyc7XHJcbmltcG9ydCBSb3cgZnJvbSAnLi4vLi4vUm93JztcclxuaW1wb3J0IERyYWdnYWJsZSBmcm9tICcuLi9EcmFnZ2FibGUnO1xyXG5pbXBvcnQgRHJvcHBhYmxlIGZyb20gJy4uL0Ryb3BwYWJsZSc7XHJcbmltcG9ydCBJbnNlcnROZXcgZnJvbSAnLi4vSW5zZXJ0TmV3JztcclxuaW1wb3J0IFBsdWdpbkNvbXBvbmVudCBmcm9tICcuLi9QbHVnaW5Db21wb25lbnQnO1xyXG52YXIgSW5uZXIgPSBmdW5jdGlvbiAoX2EpIHtcclxuICAgIHZhciBfYiwgX2MsIF9kO1xyXG4gICAgdmFyIG5vZGVJZCA9IF9hLm5vZGVJZDtcclxuICAgIHZhciBpc1ByZXZpZXdNb2RlID0gdXNlSXNQcmV2aWV3TW9kZSgpO1xyXG4gICAgdmFyIGlzRWRpdE1vZGUgPSB1c2VJc0VkaXRNb2RlKCk7XHJcbiAgICB2YXIgY2VsbFNob3VsZEhhdmVQbHVnaW4gPSB1c2VDZWxsSGFzUGx1Z2luKG5vZGVJZCk7XHJcbiAgICB2YXIgcGx1Z2luID0gdXNlUGx1Z2luT2ZDZWxsKG5vZGVJZCk7XHJcbiAgICB2YXIgc2V0RWRpdE1vZGUgPSB1c2VTZXRFZGl0TW9kZSgpO1xyXG4gICAgdmFyIGZvY3VzID0gdXNlRm9jdXNDZWxsKG5vZGVJZCk7XHJcbiAgICB2YXIgZm9jdXNlZCA9IHVzZUlzRm9jdXNlZChub2RlSWQpO1xyXG4gICAgdmFyIGNoaWxkcmVuSWRzID0gdXNlTm9kZUNoaWxkcmVuSWRzKG5vZGVJZCk7XHJcbiAgICB2YXIgY2VsbFNwYWNpbmdZID0gdXNlQ2VsbFNwYWNpbmcoKS55O1xyXG4gICAgdmFyIHJlZiA9IFJlYWN0LnVzZVJlZigpO1xyXG4gICAgdmFyIGhhc0NoaWxkcmVuID0gY2hpbGRyZW5JZHMubGVuZ3RoID4gMDtcclxuICAgIHZhciBkYXRhID0gdXNlQ2VsbERhdGEobm9kZUlkKTtcclxuICAgIHZhciBwbHVnaW5DZWxsU3BhY2luZyA9IGdldFBsdWdpbkNlbGxTcGFjaW5nKHBsdWdpbiwgZGF0YSk7XHJcbiAgICB2YXIgX2UgPSBfX3JlYWQodXNlQ2VsbFNwYWNpbmdQcm92aWRlcihwbHVnaW5DZWxsU3BhY2luZyksIDIpLCBQcm92aWRlciA9IF9lWzBdLCBwcm92aWRlclZhbHVlID0gX2VbMV07XHJcbiAgICBpZiAodHlwZW9mIHBsdWdpbkNlbGxTcGFjaW5nICE9PSAndW5kZWZpbmVkJyAmJiBwbHVnaW5DZWxsU3BhY2luZyAhPSBudWxsKSB7XHJcbiAgICAgICAgY2VsbFNwYWNpbmdZID0gbm9ybWFsaXplQ2VsbFNwYWNpbmcocGx1Z2luQ2VsbFNwYWNpbmcpLnk7XHJcbiAgICB9XHJcbiAgICB2YXIgb25DbGljayA9IFJlYWN0LnVzZUNhbGxiYWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDtcclxuICAgICAgICAvLyBjaGVjayB3aGV0aGVyIHRoZSBjbGljayB3YXMgaW5zaWRlIGNlbGwtaW5uZXIsIGJ1dCBub3QgaW5zaWRlIGEgbmVzdGVkIGNlbGxcclxuICAgICAgICBpZiAoIWZvY3VzZWQgJiZcclxuICAgICAgICAgICAgaXNFZGl0TW9kZSAmJlxyXG4gICAgICAgICAgICAvLyB0aGlzIGFycml2ZXMgd2hlbiB0aGV5IHN0b3AgcmVzaXppbmdcclxuICAgICAgICAgICAgISgoX2EgPSB0YXJnZXQuY2xhc3NMaXN0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY29udGFpbnMoJ3JlYWN0LXBhZ2Utcm93JykpICYmXHJcbiAgICAgICAgICAgICh0YXJnZXQgPT09IG51bGwgfHwgdGFyZ2V0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0YXJnZXQuY2xvc2VzdCkgJiZcclxuICAgICAgICAgICAgdGFyZ2V0LmNsb3Nlc3QoJy5yZWFjdC1wYWdlLWNlbGwtaW5uZXInKSA9PT0gcmVmLmN1cnJlbnQgJiZcclxuICAgICAgICAgICAgdGFyZ2V0LmNsb3Nlc3QoJy5yZWFjdC1wYWdlLWNlbGwucmVhY3QtcGFnZS1jZWxsLWhhcy1wbHVnaW4nKSA9PT1cclxuICAgICAgICAgICAgICAgIHJlZi5jdXJyZW50LmNsb3Nlc3QoJy5yZWFjdC1wYWdlLWNlbGwnKSkge1xyXG4gICAgICAgICAgICB2YXIgbW9kZSA9IGUubWV0YUtleSB8fCBlLmN0cmxLZXkgPyAnYWRkJyA6ICdyZXBsYWNlJztcclxuICAgICAgICAgICAgZm9jdXMoZmFsc2UsIG1vZGUpO1xyXG4gICAgICAgICAgICBzZXRFZGl0TW9kZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sIFtmb2N1cywgZm9jdXNlZCwgaXNFZGl0TW9kZSwgc2V0RWRpdE1vZGVdKTtcclxuICAgIHZhciBpbnNlcnRBbGxvd2VkID0gKChfYiA9IHBsdWdpbiA9PT0gbnVsbCB8fCBwbHVnaW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBsdWdpbi5jaGlsZENvbnN0cmFpbnRzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IubWF4Q2hpbGRyZW4pXHJcbiAgICAgICAgPyAoKF9jID0gcGx1Z2luID09PSBudWxsIHx8IHBsdWdpbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGx1Z2luLmNoaWxkQ29uc3RyYWludHMpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5tYXhDaGlsZHJlbikgPiBjaGlsZHJlbklkcy5sZW5ndGhcclxuICAgICAgICA6IHRydWU7XHJcbiAgICB2YXIgaW5uZXJEaXZQcm9wcyA9IHVzZUNlbGxJbm5lckRpdlN0eWxpbmdQcm9wcyhub2RlSWQpO1xyXG4gICAgdmFyIGNoaWxkcmVuID0gY2hpbGRyZW5JZHMubWFwKGZ1bmN0aW9uIChpZCkgeyByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChSb3csIHsgbm9kZUlkOiBpZCwga2V5OiBpZCB9KTsgfSk7XHJcbiAgICB2YXIgY29tcG9uZW50cyA9IHVzZU9wdGlvbignY29tcG9uZW50cycpO1xyXG4gICAgdmFyIEluc2VydE5ld1dpdGhEZWZhdWx0ID0gKF9kID0gY29tcG9uZW50cyA9PT0gbnVsbCB8fCBjb21wb25lbnRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb21wb25lbnRzLkluc2VydE5ldykgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogSW5zZXJ0TmV3O1xyXG4gICAgaWYgKCFjZWxsU2hvdWxkSGF2ZVBsdWdpbikge1xyXG4gICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KERyb3BwYWJsZSwgeyBub2RlSWQ6IG5vZGVJZCB9LCBjaGlsZHJlbik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoRHJvcHBhYmxlLCB7IG5vZGVJZDogbm9kZUlkLCBpc0xlYWY6ICFoYXNDaGlsZHJlbiB9LFxyXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRHJhZ2dhYmxlLCB7IG5vZGVJZDogbm9kZUlkLCBpc0xlYWY6ICFoYXNDaGlsZHJlbiB9LFxyXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIF9fYXNzaWduKHsgb25DbGljazogIWlzUHJldmlld01vZGUgPyBvbkNsaWNrIDogdW5kZWZpbmVkLCB0YWJJbmRleDogLTEsIHJlZjogcmVmIH0sIGlubmVyRGl2UHJvcHMpLFxyXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChQbHVnaW5Db21wb25lbnQsIHsgbm9kZUlkOiBub2RlSWQsIGhhc0NoaWxkcmVuOiBoYXNDaGlsZHJlbiB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGhhc0NoaWxkcmVuID8gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoUHJvdmlkZXIsIHsgdmFsdWU6IHByb3ZpZGVyVmFsdWUgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHN0eWxlOiBjZWxsU3BhY2luZ1kgIT09IDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHsgbWFyZ2luOiAtY2VsbFNwYWNpbmdZIC8gMiArIFwicHggMFwiIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCB9LCBjaGlsZHJlbikpKSA6IChjaGlsZHJlbiksXHJcbiAgICAgICAgICAgICAgICAgICAgaW5zZXJ0QWxsb3dlZCA/IChSZWFjdC5jcmVhdGVFbGVtZW50KEluc2VydE5ld1dpdGhEZWZhdWx0LCB7IHBhcmVudENlbGxJZDogbm9kZUlkLCBjaGlsZHJlbklkczogY2hpbGRyZW5JZHMgfSkpIDogbnVsbCkpKSkpO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBSZWFjdC5tZW1vKElubmVyKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwidmFyIF9fcmVhZCA9ICh0aGlzICYmIHRoaXMuX19yZWFkKSB8fCBmdW5jdGlvbiAobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59O1xyXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyB1c2VEcm9wIH0gZnJvbSAncmVhY3QtZG5kJztcclxuaW1wb3J0IHsgdXNlQ2VsbElzQWxsb3dlZEhlcmUsIHVzZUluc2VydE5ldywgdXNlSXNMYXlvdXRNb2RlLCB1c2VJc1ByZXZpZXdNb2RlLCB1c2VTZXREaXNwbGF5UmVmZXJlbmNlTm9kZUlkLCB1c2VTZXRJbnNlcnRNb2RlLCB9IGZyb20gJy4uL2hvb2tzJztcclxudmFyIEluc2VydE5ldyA9IGZ1bmN0aW9uIChfYSkge1xyXG4gICAgdmFyIHBhcmVudENlbGxJZCA9IF9hLnBhcmVudENlbGxJZDtcclxuICAgIHZhciBzZXRJbnNlcnRNb2RlID0gdXNlU2V0SW5zZXJ0TW9kZSgpO1xyXG4gICAgdmFyIGluc2VydE5ldyA9IHVzZUluc2VydE5ldyhwYXJlbnRDZWxsSWQpO1xyXG4gICAgdmFyIGlzUHJldmlld01vZGUgPSB1c2VJc1ByZXZpZXdNb2RlKCk7XHJcbiAgICB2YXIgaXNMYXlvdXRNb2RlID0gdXNlSXNMYXlvdXRNb2RlKCk7XHJcbiAgICB2YXIgc2V0UmVmZXJlbmNlTm9kZUlkID0gdXNlU2V0RGlzcGxheVJlZmVyZW5jZU5vZGVJZCgpO1xyXG4gICAgdmFyIGNoZWNrSWZBbGxvd2VkID0gdXNlQ2VsbElzQWxsb3dlZEhlcmUocGFyZW50Q2VsbElkKTtcclxuICAgIHZhciBfYiA9IF9fcmVhZCh1c2VEcm9wKHtcclxuICAgICAgICBhY2NlcHQ6ICdjZWxsJyxcclxuICAgICAgICBjYW5Ecm9wOiBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICByZXR1cm4gY2hlY2tJZkFsbG93ZWQoaXRlbSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb2xsZWN0OiBmdW5jdGlvbiAobW9uaXRvcikgeyByZXR1cm4gKHtcclxuICAgICAgICAgICAgaXNPdmVyOiBtb25pdG9yLmlzT3ZlcigpLFxyXG4gICAgICAgICAgICBpc0FsbG93ZWQ6IGNoZWNrSWZBbGxvd2VkKG1vbml0b3IuZ2V0SXRlbSgpKSxcclxuICAgICAgICB9KTsgfSxcclxuICAgICAgICBkcm9wOiBmdW5jdGlvbiAoaXRlbSwgbW9uaXRvcikge1xyXG4gICAgICAgICAgICAvLyBmYWxsYmFjayBkcm9wXHJcbiAgICAgICAgICAgIGlmICghbW9uaXRvci5kaWREcm9wKCkpIHtcclxuICAgICAgICAgICAgICAgIGluc2VydE5ldyhpdGVtLmNlbGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgIH0pLCAyKSwgX2MgPSBfYlswXSwgaXNPdmVyID0gX2MuaXNPdmVyLCBpc0FsbG93ZWQgPSBfYy5pc0FsbG93ZWQsIGRyb3BSZWYgPSBfYlsxXTtcclxuICAgIGlmIChpc1ByZXZpZXdNb2RlKVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgcmVmOiBkcm9wUmVmLCBjbGFzc05hbWU6ICdyZWFjdC1wYWdlLWNlbGwtaW5zZXJ0LW5ldycgKyAoaXNPdmVyICYmIGlzQWxsb3dlZCA/ICcgaG92ZXInIDogJycpLCBzdHlsZToge1xyXG4gICAgICAgICAgICBwb2ludGVyRXZlbnRzOiAnYWxsJyxcclxuICAgICAgICAgICAgekluZGV4OiBpc0xheW91dE1vZGUgPyAxMCA6IDEsXHJcbiAgICAgICAgICAgIG92ZXJmbG93OiAnaGlkZGVuJyxcclxuICAgICAgICAgICAgd2lkdGg6ICc1MCUnLFxyXG4gICAgICAgICAgICBtaW5XaWR0aDogMTIwLFxyXG4gICAgICAgICAgICBtYXJnaW46ICdhdXRvJyxcclxuICAgICAgICAgICAgY3Vyc29yOiBpc092ZXIgJiYgIWlzQWxsb3dlZCA/ICdub3QtYWxsb3dlZCcgOiAncG9pbnRlcicsXHJcbiAgICAgICAgfSwgb25DbGljazogZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgc2V0UmVmZXJlbmNlTm9kZUlkKHBhcmVudENlbGxJZCk7XHJcbiAgICAgICAgICAgIHNldEluc2VydE1vZGUoKTtcclxuICAgICAgICB9IH0pKTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgUmVhY3QubWVtbyhJbnNlcnROZXcpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbnNlcnROZXcuanMubWFwIiwidmFyIF9fYXNzaWduID0gKHRoaXMgJiYgdGhpcy5fX2Fzc2lnbikgfHwgZnVuY3Rpb24gKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKVxyXG4gICAgICAgICAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59O1xyXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBNb3ZlRG93biwgTW92ZUxlZnQsIE1vdmVSaWdodCwgTW92ZVVwLCB9IGZyb20gJy4uLy4uLy4uLy4uL3VpL21vdmVCdXR0b25zJztcclxudmFyIGJhc2VTdHlsZSA9IHtcclxuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxyXG4gICAgbWFyZ2luOiAwLFxyXG59O1xyXG52YXIgTUFSR0lOID0gMTA7XHJcbnZhciBNb3ZlQWN0aW9ucyA9IGZ1bmN0aW9uIChfYSkge1xyXG4gICAgdmFyIG5vZGVJZCA9IF9hLm5vZGVJZDtcclxuICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJyZWFjdC1wYWdlLWNlbGwtbW92ZS1hY3Rpb25zXCIsIHN0eWxlOiBfX2Fzc2lnbih7IGxlZnQ6IDAsIHJpZ2h0OiAwLCBib3R0b206IDAsIHRvcDogMCwgekluZGV4OiAxMDAsIHBvaW50ZXJFdmVudHM6ICdub25lJyB9LCBiYXNlU3R5bGUpIH0sXHJcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChNb3ZlVXAsIHsgbm9kZUlkOiBub2RlSWQsIHN0eWxlOiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgYmFzZVN0eWxlKSwgeyB0b3A6IE1BUkdJTiwgbGVmdDogJzUwJScsIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoLTUwJSknIH0pIH0pLFxyXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTW92ZUxlZnQsIHsgbm9kZUlkOiBub2RlSWQsIHN0eWxlOiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgYmFzZVN0eWxlKSwgeyBsZWZ0OiBNQVJHSU4sIHRvcDogJzUwJScsIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVkoLTUwJSknIH0pIH0pLFxyXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTW92ZVJpZ2h0LCB7IG5vZGVJZDogbm9kZUlkLCBzdHlsZTogX19hc3NpZ24oX19hc3NpZ24oe30sIGJhc2VTdHlsZSksIHsgcmlnaHQ6IE1BUkdJTiwgdG9wOiAnNTAlJywgdHJhbnNmb3JtOiAndHJhbnNsYXRlWSgtNTAlKScgfSkgfSksXHJcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChNb3ZlRG93biwgeyBub2RlSWQ6IG5vZGVJZCwgc3R5bGU6IF9fYXNzaWduKF9fYXNzaWduKHt9LCBiYXNlU3R5bGUpLCB7IGJvdHRvbTogTUFSR0lOLCBsZWZ0OiAnNTAlJywgdHJhbnNmb3JtOiAndHJhbnNsYXRlWCgtNTAlKScgfSkgfSkpKTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgTW92ZUFjdGlvbnM7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsInZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSlcclxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufTtcclxudmFyIF9fcmVhZCA9ICh0aGlzICYmIHRoaXMuX19yZWFkKSB8fCBmdW5jdGlvbiAobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59O1xyXG5pbXBvcnQgUmVhY3QsIHsgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgQm90dG9tVG9vbGJhciB9IGZyb20gJy4uLy4uLy4uLy4uL3VpJztcclxuaW1wb3J0IHsgdXNlUGx1Z2luT2ZDZWxsLCB1c2VEZWJvdW5jZWRDZWxsRGF0YSwgdXNlSXNFZGl0TW9kZSwgdXNlSXNQcmV2aWV3TW9kZSwgdXNlTGFuZywgdXNlUmVtb3ZlQ2VsbCwgdXNlQ2VsbFByb3BzLCB1c2VPcHRpb24sIHVzZUlzRXhjbHVzaXZseUZvY3VzZWQsIH0gZnJvbSAnLi4vLi4vaG9va3MnO1xyXG5pbXBvcnQgUGx1Z2luQ29udHJvbHMgZnJvbSAnLi4vUGx1Z2luQ29udHJvbHMnO1xyXG5pbXBvcnQgUGx1Z2luTWlzc2luZyBmcm9tICcuLi9QbHVnaW5NaXNzaW5nJztcclxuaW1wb3J0IE5vb3BQcm92aWRlciBmcm9tICcuLi9Ob29wUHJvdmlkZXInO1xyXG52YXIgUGx1Z2luQ29tcG9uZW50ID0gZnVuY3Rpb24gKF9hKSB7XHJcbiAgICB2YXIgX2IsIF9jLCBfZDtcclxuICAgIHZhciBub2RlSWQgPSBfYS5ub2RlSWQsIGNoaWxkcmVuID0gX2EuY2hpbGRyZW4sIGhhc0NoaWxkcmVuID0gX2EuaGFzQ2hpbGRyZW47XHJcbiAgICB2YXIgbGFuZyA9IHVzZUxhbmcoKTtcclxuICAgIHZhciBjb21wb25lbnRzID0gdXNlT3B0aW9uKCdjb21wb25lbnRzJyk7XHJcbiAgICB2YXIgQ3VzdG9tUGx1Z2luTWlzc2luZyA9IGNvbXBvbmVudHMgPT09IG51bGwgfHwgY29tcG9uZW50cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29tcG9uZW50cy5DZWxsUGx1Z2luTWlzc2luZztcclxuICAgIHZhciBpc1ByZXZpZXdNb2RlID0gdXNlSXNQcmV2aWV3TW9kZSgpO1xyXG4gICAgdmFyIGlzRWRpdE1vZGUgPSB1c2VJc0VkaXRNb2RlKCk7XHJcbiAgICB2YXIgX2UgPSBfX3JlYWQodXNlRGVib3VuY2VkQ2VsbERhdGEobm9kZUlkKSwgMiksIGRhdGEgPSBfZVswXSwgb25DaGFuZ2UgPSBfZVsxXTtcclxuICAgIHZhciBwbHVnaW5JZCA9IHVzZUNlbGxQcm9wcyhub2RlSWQsIGZ1bmN0aW9uIChjKSB7IHZhciBfYTsgcmV0dXJuIChfYSA9IGMucGx1Z2luKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaWQ7IH0pO1xyXG4gICAgdmFyIHBsdWdpbiA9IHVzZVBsdWdpbk9mQ2VsbChub2RlSWQpO1xyXG4gICAgdmFyIGZvY3VzZWQgPSB1c2VJc0V4Y2x1c2l2bHlGb2N1c2VkKG5vZGVJZCk7XHJcbiAgICB2YXIgaGFzSW5saW5lTmVpZ2hib3VyID0gdXNlQ2VsbFByb3BzKG5vZGVJZCwgZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGMuaGFzSW5saW5lTmVpZ2hib3VyOyB9KTtcclxuICAgIHZhciBSZW5kZXJlciA9IHBsdWdpbiA9PT0gbnVsbCB8fCBwbHVnaW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBsdWdpbi5SZW5kZXJlcjtcclxuICAgIHZhciBNaXNzaW5nID0gQ3VzdG9tUGx1Z2luTWlzc2luZyAhPT0gbnVsbCAmJiBDdXN0b21QbHVnaW5NaXNzaW5nICE9PSB2b2lkIDAgPyBDdXN0b21QbHVnaW5NaXNzaW5nIDogUGx1Z2luTWlzc2luZztcclxuICAgIHZhciBQcm92aWRlciA9IChfYiA9IHBsdWdpbiA9PT0gbnVsbCB8fCBwbHVnaW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBsdWdpbi5Qcm92aWRlcikgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogTm9vcFByb3ZpZGVyO1xyXG4gICAgdmFyIHJlbW92ZSA9IHVzZVJlbW92ZUNlbGwobm9kZUlkKTtcclxuICAgIHZhciBUb29sYmFyID0gKF9jID0gY29tcG9uZW50cyA9PT0gbnVsbCB8fCBjb21wb25lbnRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb21wb25lbnRzLkJvdHRvbVRvb2xiYXIpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IEJvdHRvbVRvb2xiYXI7XHJcbiAgICB2YXIgY29tcG9uZW50UHJvcHMgPSB1c2VNZW1vKGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7XHJcbiAgICAgICAgbm9kZUlkOiBub2RlSWQsXHJcbiAgICAgICAgbGFuZzogbGFuZyxcclxuICAgICAgICBkYXRhOiBkYXRhLFxyXG4gICAgICAgIHBsdWdpbkNvbmZpZzogcGx1Z2luLFxyXG4gICAgICAgIGZvY3VzZWQ6IGlzRWRpdE1vZGUgJiYgZm9jdXNlZCxcclxuICAgICAgICByZWFkT25seTogIWlzRWRpdE1vZGUsXHJcbiAgICAgICAgb25DaGFuZ2U6IG9uQ2hhbmdlLFxyXG4gICAgICAgIGlzRWRpdE1vZGU6IGlzRWRpdE1vZGUsXHJcbiAgICAgICAgaXNQcmV2aWV3TW9kZTogaXNQcmV2aWV3TW9kZSxcclxuICAgICAgICByZW1vdmU6IHJlbW92ZSxcclxuICAgIH0pOyB9LCBbXHJcbiAgICAgICAgbm9kZUlkLFxyXG4gICAgICAgIGxhbmcsXHJcbiAgICAgICAgZGF0YSxcclxuICAgICAgICBwbHVnaW4sXHJcbiAgICAgICAgaXNFZGl0TW9kZSxcclxuICAgICAgICBmb2N1c2VkLFxyXG4gICAgICAgIG9uQ2hhbmdlLFxyXG4gICAgICAgIGlzRWRpdE1vZGUsXHJcbiAgICAgICAgaXNQcmV2aWV3TW9kZSxcclxuICAgICAgICByZW1vdmUsXHJcbiAgICBdKTtcclxuICAgIC8vIEluIGNhc2Ugb2Ygbm9uLXplcm8gY2VsbCBzcGFjaW5nLCBuZXN0ZWQgbGF5b3V0cyAobGF5b3V0IHBsdWdpbnMgd2l0aCBjaGlsZHJlbikgc2hvdWxkIGhhdmUgdGhlaXJcclxuICAgIC8vIG1hcmdpbiBjb2xsYXBzaW5nIGZ1bmN0aW9uYWxpdHkgb2ZmLiBUaGUgc2ltcGxlc3Qgc29sdXRpb24gaXMgdG8gdXNlIGRpc3BsYXk6ZmxleCBmb3IgdGhlIGJlbG93IHdyYXBwaW5nIDxkaXY+LlxyXG4gICAgLy8gVGhpcyBob3dldmVyIGlzIG5vdCBjb21wYXRpYmxlIHdpdGggaW5saW5lIGVsZW1lbnRzIGZsb3RhdGlvbiwgc28gaWYgYSBjZWxsIGhhcyBpbmxpbmUgbmVpZ2hib3JzLCB3ZSBhcmUgZ29pbmdcclxuICAgIC8vIHRvIGhhdmUgdG8ga2VlcCBkaXNwbGF5OmJsb2NrIHN0eWxlLiBMYXlvdXQgcGx1Z2lucyB3aXRoIGlubGluZSBjZWxsIHN1cHBvcnQgd2lsbCBoYXZlIHRvIHRha2UgY2FyZSBvZlxyXG4gICAgLy8gbWFyZ2luIGNvbGxhcHNpbmcgaW50ZXJuYWxseSBvbiB0aGVpciBvd24uXHJcbiAgICB2YXIgZGlzcGxheSA9IGhhc0lubGluZU5laWdoYm91clxyXG4gICAgICAgID8ge31cclxuICAgICAgICA6IHtcclxuICAgICAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxyXG4gICAgICAgICAgICBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyxcclxuICAgICAgICB9O1xyXG4gICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFByb3ZpZGVyLCBfX2Fzc2lnbih7fSwgY29tcG9uZW50UHJvcHMpLFxyXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsXHJcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBzdHlsZTogX19hc3NpZ24oX19hc3NpZ24oe30sIGRpc3BsYXkpLCB7IGhlaWdodDogJzEwMCUnLCBwb2ludGVyRXZlbnRzOiAhaXNQcmV2aWV3TW9kZSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW4gJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgIShwbHVnaW4gPT09IG51bGwgfHwgcGx1Z2luID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwbHVnaW4uYWxsb3dDbGlja0luc2lkZSkgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgIWhhc0NoaWxkcmVuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gJ25vbmUnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkIH0pIH0sIFJlbmRlcmVyID8gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmVuZGVyZXIsIF9fYXNzaWduKHt9LCBjb21wb25lbnRQcm9wcyksIGNoaWxkcmVuKSkgOiBwbHVnaW5JZCA/IChSZWFjdC5jcmVhdGVFbGVtZW50KE1pc3NpbmcsIF9fYXNzaWduKHt9LCBjb21wb25lbnRQcm9wcywgeyBwbHVnaW5JZDogcGx1Z2luSWQgfSkpKSA6IChjaGlsZHJlbikpLFxyXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFRvb2xiYXIsIHsgbm9kZUlkOiBub2RlSWQsIG9wZW46IGZvY3VzZWQsIGRhcms6IChfZCA9IHBsdWdpbiA9PT0gbnVsbCB8fCBwbHVnaW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBsdWdpbi5ib3R0b21Ub29sYmFyKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QuZGFyaywgcGx1Z2luQ29udHJvbHM6IGlzRWRpdE1vZGUgJiYgKHBsdWdpbiA9PT0gbnVsbCB8fCBwbHVnaW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBsdWdpbi5jb250cm9scykgPyAoUmVhY3QuY3JlYXRlRWxlbWVudChQbHVnaW5Db250cm9scywgeyBjb21wb25lbnRQcm9wczogY29tcG9uZW50UHJvcHMsIGNvbnRyb2xzOiBwbHVnaW4gPT09IG51bGwgfHwgcGx1Z2luID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwbHVnaW4uY29udHJvbHMgfSkpIDogbnVsbCB9KSkpKTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgUGx1Z2luQ29tcG9uZW50O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJ2YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXHJcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn07XHJcbnZhciBfX3JlYWQgPSAodGhpcyAmJiB0aGlzLl9fcmVhZCkgfHwgZnVuY3Rpb24gKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufTtcclxuaW1wb3J0IHsgVGFiLCBUYWJzIH0gZnJvbSAnQG1hdGVyaWFsLXVpL2NvcmUnO1xyXG5pbXBvcnQgeyB3aXRoU3R5bGVzIH0gZnJvbSAnQG1hdGVyaWFsLXVpL3N0eWxlcyc7XHJcbmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgQXV0b2Zvcm1Db250cm9scyB9IGZyb20gJy4uLy4uLy4uLy4uL3VpJztcclxudmFyIFN0eWxlZFRhYiA9IHdpdGhTdHlsZXMoZnVuY3Rpb24gKCkgeyByZXR1cm4gKHtcclxuICAgIHdyYXBwZXI6IHtcclxuICAgICAgICBhbGlnbkl0ZW1zOiAnZmxleC1zdGFydCcsXHJcbiAgICB9LFxyXG59KTsgfSkoVGFiKTtcclxudmFyIFN0eWxlZFRhYnMgPSB3aXRoU3R5bGVzKGZ1bmN0aW9uICh0aGVtZSkgeyByZXR1cm4gKHtcclxuICAgIHJvb3Q6IHtcclxuICAgICAgICBtYXJnaW5Ub3A6IC0xMixcclxuICAgICAgICBtYXJnaW5Cb3R0b206IC0xMixcclxuICAgICAgICBtYXJnaW5MZWZ0OiAtMjQsXHJcbiAgICAgICAgYWxpZ25JdGVtczogJ2ZsZXgtc3RhcnQnLFxyXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogdGhlbWUucGFsZXR0ZS5iYWNrZ3JvdW5kLmRlZmF1bHQsXHJcbiAgICB9LFxyXG59KTsgfSkoVGFicyk7XHJcbnZhciBDb250cm9sc0xpc3QgPSBSZWFjdC5tZW1vKGZ1bmN0aW9uIChfYSkge1xyXG4gICAgdmFyIF9iO1xyXG4gICAgdmFyIGNvbnRyb2xzID0gX2EuY29udHJvbHMsIGNvbXBvbmVudFByb3BzID0gX2EuY29tcG9uZW50UHJvcHM7XHJcbiAgICB2YXIgX2MgPSBfX3JlYWQodXNlU3RhdGUoMCksIDIpLCB0YWIgPSBfY1swXSwgc2V0VGFiID0gX2NbMV07XHJcbiAgICB2YXIgYWN0aXZlQ29udHJvbHMgPSAoX2IgPSBjb250cm9sc1t0YWJdKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY29udHJvbHM7XHJcbiAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBzdHlsZToge1xyXG4gICAgICAgICAgICBkaXNwbGF5OiAnZmxleCcsXHJcbiAgICAgICAgICAgIGZsZXhEaXJlY3Rpb246ICdyb3cnLFxyXG4gICAgICAgIH0gfSxcclxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFN0eWxlZFRhYnMsIHsgdmFsdWU6IHRhYiwgb25DaGFuZ2U6IGZ1bmN0aW9uIChlLCB2KSB7IHJldHVybiBzZXRUYWIodik7IH0sIG9yaWVudGF0aW9uOiBcInZlcnRpY2FsXCIsIHZhcmlhbnQ6IFwic2Nyb2xsYWJsZVwiIH0sIGNvbnRyb2xzLm1hcChmdW5jdGlvbiAodCwgaW5kZXgpIHsgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFN0eWxlZFRhYiwgeyBsYWJlbDogdC50aXRsZSwga2V5OiBpbmRleCB9KSk7IH0pKSxcclxuICAgICAgICBhY3RpdmVDb250cm9scyA/IChSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgc3R5bGU6IHtcclxuICAgICAgICAgICAgICAgIGZsZXg6IDEsXHJcbiAgICAgICAgICAgICAgICBtYXJnaW5MZWZ0OiAyNCxcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcclxuICAgICAgICAgICAgfSB9LFxyXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KENvbnRyb2xzLCB7IGNvbnRyb2xzOiBhY3RpdmVDb250cm9scywgY29tcG9uZW50UHJvcHM6IGNvbXBvbmVudFByb3BzIH0pKSkgOiBudWxsKSk7XHJcbn0pO1xyXG52YXIgQ29udHJvbHMgPSBSZWFjdC5tZW1vKGZ1bmN0aW9uIChfYSkge1xyXG4gICAgdmFyIGNvbnRyb2xzID0gX2EuY29udHJvbHMsIGNvbXBvbmVudFByb3BzID0gX2EuY29tcG9uZW50UHJvcHM7XHJcbiAgICB2YXIgcGx1Z2luQ29udHJvbHMgPSBudWxsO1xyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoY29udHJvbHMpKSB7XHJcbiAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29udHJvbHNMaXN0LCB7IGNvbXBvbmVudFByb3BzOiBjb21wb25lbnRQcm9wcywgY29udHJvbHM6IGNvbnRyb2xzIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKChjb250cm9scyA9PT0gbnVsbCB8fCBjb250cm9scyA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29udHJvbHMudHlwZSkgPT09ICdjdXN0b20nKSB7XHJcbiAgICAgICAgdmFyIENvbXBvbmVudCA9IGNvbnRyb2xzLkNvbXBvbmVudDtcclxuICAgICAgICBwbHVnaW5Db250cm9scyA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29tcG9uZW50LCBfX2Fzc2lnbih7fSwgY29tcG9uZW50UHJvcHMsIGNvbnRyb2xzKSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICgoY29udHJvbHMgPT09IG51bGwgfHwgY29udHJvbHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbnRyb2xzLnR5cGUpID09PSAnYXV0b2Zvcm0nKSB7XHJcbiAgICAgICAgcGx1Z2luQ29udHJvbHMgPSBSZWFjdC5jcmVhdGVFbGVtZW50KEF1dG9mb3JtQ29udHJvbHMsIF9fYXNzaWduKHt9LCBjb21wb25lbnRQcm9wcywgY29udHJvbHMpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgc3R5bGU6IHsgb3ZlcmZsb3c6ICdhdXRvJywgZmxleDogMSB9IH0sIHBsdWdpbkNvbnRyb2xzKTtcclxufSk7XHJcbnZhciBQbHVnaW5Db250cm9scyA9IGZ1bmN0aW9uIChfYSkge1xyXG4gICAgdmFyIGNvbnRyb2xzID0gX2EuY29udHJvbHMsIGNvbXBvbmVudFByb3BzID0gX2EuY29tcG9uZW50UHJvcHM7XHJcbiAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBzdHlsZToge1xyXG4gICAgICAgICAgICBtYXhIZWlnaHQ6ICc1MHZoJyxcclxuICAgICAgICAgICAgLy8gaWYgaXQgaGFzIHRhYnMsIHN0cmV0Y2ggdG8gYXZvaWQganVtcGluZyB0YWJzXHJcbiAgICAgICAgICAgIHdpZHRoOiBBcnJheS5pc0FycmF5KGNvbnRyb2xzKSA/ICcxMDB2dycgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIG1heFdpZHRoOiAnMTAwJScsXHJcbiAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcclxuICAgICAgICB9IH0sXHJcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChDb250cm9scywgeyBjb250cm9sczogY29udHJvbHMsIGNvbXBvbmVudFByb3BzOiBjb21wb25lbnRQcm9wcyB9KSkpO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBSZWFjdC5tZW1vKFBsdWdpbkNvbnRyb2xzKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwidmFyIF9fcmVzdCA9ICh0aGlzICYmIHRoaXMuX19yZXN0KSB8fCBmdW5jdGlvbiAocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxyXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICAgICAgfVxyXG4gICAgcmV0dXJuIHQ7XHJcbn07XHJcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbnZhciBQbHVnaW5NaXNzaW5nID0gZnVuY3Rpb24gKF9hKSB7XHJcbiAgICB2YXIgY2hpbGRyZW4gPSBfYS5jaGlsZHJlbiwgcHJvcHMgPSBfX3Jlc3QoX2EsIFtcImNoaWxkcmVuXCJdKTtcclxuICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLFxyXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBzdHlsZToge1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAncmVkJyxcclxuICAgICAgICAgICAgICAgIHBhZGRpbmc6ICc4cHgnLFxyXG4gICAgICAgICAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkIGJsYWNrJyxcclxuICAgICAgICAgICAgICAgIG1hcmdpbjogJzJweCcsXHJcbiAgICAgICAgICAgICAgICBvdmVyZmxvd1g6ICdzY3JvbGwnLFxyXG4gICAgICAgICAgICB9IH0sXHJcbiAgICAgICAgICAgIFwiVGhlIHJlcXVlc3RlZCBwbHVnaW4gYFwiLFxyXG4gICAgICAgICAgICBwcm9wcy5wbHVnaW5JZCxcclxuICAgICAgICAgICAgXCJgIGNvdWxkIG5vdCBiZSBmb3VuZC5cIixcclxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7IG9uQ2xpY2s6IHByb3BzLnJlbW92ZSB9LCBcIkRlbGV0ZSBQbHVnaW5cIiksXHJcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwcmVcIiwgbnVsbCwgSlNPTi5zdHJpbmdpZnkocHJvcHMsIG51bGwsIDIpKSksXHJcbiAgICAgICAgY2hpbGRyZW4pKTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgUGx1Z2luTWlzc2luZztcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UGx1Z2luTWlzc2luZy5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XHJcbmltcG9ydCBSZWFjdCwgeyB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgZ2V0Q2VsbE91dGVyRGl2Q2xhc3NOYW1lIH0gZnJvbSAnLi4vLi4vdXRpbHMvZ2V0Q2VsbFN0eWxpbmdQcm9wcyc7XHJcbmltcG9ydCB7IHVzZUFsbEZvY3VzZWROb2RlSWRzLCB1c2VDZWxsSGFzUGx1Z2luLCB1c2VDZWxsUHJvcHMsIHVzZUNlbGxTcGFjaW5nLCB1c2VJc0ZvY3VzZWQsIHVzZUlzSW5zZXJ0TW9kZSwgdXNlSXNMYXlvdXRNb2RlLCB1c2VJc1ByZXZpZXdNb2RlLCB1c2VJc1Jlc2l6ZU1vZGUsIHVzZUxhbmcsIHVzZU5vZGVIYXNDaGlsZHJlbiwgdXNlT3B0aW9uLCB1c2VTY3JvbGxUb1ZpZXdFZmZlY3QsIHVzZVNldERpc3BsYXlSZWZlcmVuY2VOb2RlSWQsIH0gZnJvbSAnLi4vaG9va3MnO1xyXG5pbXBvcnQgRXJyb3JDZWxsIGZyb20gJy4vRXJyb3JDZWxsJztcclxuaW1wb3J0IEhhbmRsZSBmcm9tICcuL0hhbmRsZSc7XHJcbmltcG9ydCBJbm5lciBmcm9tICcuL0lubmVyJztcclxuaW1wb3J0IE1vdmVBY3Rpb25zIGZyb20gJy4vTW92ZUFjdGlvbnMnO1xyXG5pbXBvcnQgc2Nyb2xsSW50b1ZpZXdXaXRoT2Zmc2V0IGZyb20gJy4vdXRpbHMvc2Nyb2xsSW50b1ZpZXdXaXRoT2Zmc2V0JztcclxudmFyIENlbGxFcnJvckdhdGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoY2xhc3NfMSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIGNsYXNzXzEoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIGVycm9yOiBudWxsLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgY2xhc3NfMS5wcm90b3R5cGUuY29tcG9uZW50RGlkQ2F0Y2ggPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgZXJyb3I6IGVycm9yIH0pO1xyXG4gICAgfTtcclxuICAgIGNsYXNzXzEucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5lcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChFcnJvckNlbGwsIHsgbm9kZUlkOiB0aGlzLnByb3BzLm5vZGVJZCwgZXJyb3I6IHRoaXMuc3RhdGUuZXJyb3IgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLmNoaWxkcmVuO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBjbGFzc18xO1xyXG59KFJlYWN0LkNvbXBvbmVudCkpO1xyXG52YXIgQ2VsbCA9IGZ1bmN0aW9uIChfYSkge1xyXG4gICAgdmFyIF9iO1xyXG4gICAgdmFyIG5vZGVJZCA9IF9hLm5vZGVJZCwgbWVhc3VyZVJlZiA9IF9hLm1lYXN1cmVSZWY7XHJcbiAgICB2YXIgZm9jdXNlZCA9IHVzZUlzRm9jdXNlZChub2RlSWQpO1xyXG4gICAgdmFyIF9jID0gdXNlQ2VsbFByb3BzKG5vZGVJZCwgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgdmFyIGlubGluZSA9IF9hLmlubGluZSwgaGFzSW5saW5lTmVpZ2hib3VyID0gX2EuaGFzSW5saW5lTmVpZ2hib3VyLCBpc0RyYWZ0ID0gX2EuaXNEcmFmdCwgaXNEcmFmdEkxOG4gPSBfYS5pc0RyYWZ0STE4biwgc2l6ZSA9IF9hLnNpemU7XHJcbiAgICAgICAgcmV0dXJuICh7XHJcbiAgICAgICAgICAgIGlubGluZTogaW5saW5lLFxyXG4gICAgICAgICAgICBoYXNJbmxpbmVOZWlnaGJvdXI6IGhhc0lubGluZU5laWdoYm91cixcclxuICAgICAgICAgICAgaXNEcmFmdDogaXNEcmFmdCxcclxuICAgICAgICAgICAgaXNEcmFmdEkxOG46IGlzRHJhZnRJMThuLFxyXG4gICAgICAgICAgICBzaXplOiBzaXplLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfSksIGlubGluZSA9IF9jLmlubGluZSwgaGFzSW5saW5lTmVpZ2hib3VyID0gX2MuaGFzSW5saW5lTmVpZ2hib3VyLCBpc0RyYWZ0ID0gX2MuaXNEcmFmdCwgaXNEcmFmdEkxOG4gPSBfYy5pc0RyYWZ0STE4biwgc2l6ZSA9IF9jLnNpemU7XHJcbiAgICB2YXIgbGFuZyA9IHVzZUxhbmcoKTtcclxuICAgIHZhciBpc1ByZXZpZXdNb2RlID0gdXNlSXNQcmV2aWV3TW9kZSgpO1xyXG4gICAgdmFyIGlzUmVzaXplTW9kZSA9IHVzZUlzUmVzaXplTW9kZSgpO1xyXG4gICAgdmFyIGlzTGF5b3V0TW9kZSA9IHVzZUlzTGF5b3V0TW9kZSgpO1xyXG4gICAgdmFyIGlzSW5zZXJ0TW9kZSA9IHVzZUlzSW5zZXJ0TW9kZSgpO1xyXG4gICAgdmFyIG11bHRpTm9kZXNTZWxlY3RlZCA9IHVzZUFsbEZvY3VzZWROb2RlSWRzKCkubGVuZ3RoID4gMTtcclxuICAgIHZhciBoYXNDaGlsZHJlbiA9IHVzZU5vZGVIYXNDaGlsZHJlbihub2RlSWQpO1xyXG4gICAgdmFyIHNob3dNb3ZlQnV0dG9ucyA9IHVzZU9wdGlvbignc2hvd01vdmVCdXR0b25zSW5MYXlvdXRNb2RlJyk7XHJcbiAgICB2YXIgaGFzUGx1Z2luID0gdXNlQ2VsbEhhc1BsdWdpbihub2RlSWQpO1xyXG4gICAgdmFyIF9kID0gdXNlQ2VsbFNwYWNpbmcoKSwgY2VsbFNwYWNpbmdYID0gX2QueCwgY2VsbFNwYWNpbmdZID0gX2QueTtcclxuICAgIHZhciBuZWVkVmVydGljYWxQYWRkaW5nID0gIWhhc0NoaWxkcmVuIHx8IGhhc1BsdWdpbjtcclxuICAgIHZhciBpc0RyYWZ0SW5MYW5nID0gKF9iID0gaXNEcmFmdEkxOG4gPT09IG51bGwgfHwgaXNEcmFmdEkxOG4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGlzRHJhZnRJMThuW2xhbmddKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBpc0RyYWZ0O1xyXG4gICAgdmFyIHJlZiA9IFJlYWN0LnVzZVJlZigpO1xyXG4gICAgdmFyIHNldFJlZmVyZW5jZU5vZGVJZCA9IHVzZVNldERpc3BsYXlSZWZlcmVuY2VOb2RlSWQoKTtcclxuICAgIHZhciBvbkNsaWNrID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBpZiAoaXNJbnNlcnRNb2RlKSB7XHJcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIHNldFJlZmVyZW5jZU5vZGVJZChub2RlSWQpO1xyXG4gICAgICAgIH1cclxuICAgIH0sIFtub2RlSWQsIGlzSW5zZXJ0TW9kZSwgc2V0UmVmZXJlbmNlTm9kZUlkXSk7XHJcbiAgICB1c2VTY3JvbGxUb1ZpZXdFZmZlY3Qobm9kZUlkLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHJlZi5jdXJyZW50KVxyXG4gICAgICAgICAgICBzY3JvbGxJbnRvVmlld1dpdGhPZmZzZXQocmVmLmN1cnJlbnQsIDEyMCk7IC8vIDEyMCBpcyBqdXN0IGEgc2FuZSBkZWZhdWx0LCB3ZSBtaWdodCBtYWtlIGludCBjb25maWd1cmFibGUgaW4gdGhlIGZ1dHVyZVxyXG4gICAgfSwgW3JlZi5jdXJyZW50XSk7XHJcbiAgICBpZiAoaXNEcmFmdEluTGFuZyAmJiBpc1ByZXZpZXdNb2RlKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICB2YXIgY2VsbE91dGVyU3RseWUgPSBjZWxsU3BhY2luZ1kgIT09IDAgfHwgY2VsbFNwYWNpbmdYICE9PSAwXHJcbiAgICAgICAgPyB7XHJcbiAgICAgICAgICAgIHBhZGRpbmc6IChuZWVkVmVydGljYWxQYWRkaW5nID8gY2VsbFNwYWNpbmdZIC8gMiA6IDApICsgXCJweCBcIiArIGNlbGxTcGFjaW5nWCAvIDIgKyBcInB4XCIsXHJcbiAgICAgICAgfVxyXG4gICAgICAgIDogdW5kZWZpbmVkO1xyXG4gICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgc3R5bGU6IGNlbGxPdXRlclN0bHllLCByZWY6IHJlZiwgY2xhc3NOYW1lOiBnZXRDZWxsT3V0ZXJEaXZDbGFzc05hbWUoe1xyXG4gICAgICAgICAgICBoYXNDaGlsZHJlbjogaGFzQ2hpbGRyZW4sXHJcbiAgICAgICAgICAgIGhhc0lubGluZU5laWdoYm91cjogaGFzSW5saW5lTmVpZ2hib3VyLFxyXG4gICAgICAgICAgICBzaXplOiBzaXplLFxyXG4gICAgICAgICAgICBpbmxpbmU6IGlubGluZSxcclxuICAgICAgICB9KSArXHJcbiAgICAgICAgICAgICcgJyArXHJcbiAgICAgICAgICAgIGNsYXNzTmFtZXMoe1xyXG4gICAgICAgICAgICAgICAgJ3JlYWN0LXBhZ2UtY2VsbC1oYXMtcGx1Z2luJzogaGFzUGx1Z2luLFxyXG4gICAgICAgICAgICAgICAgJ3JlYWN0LXBhZ2UtY2VsbC1mb2N1c2VkJzogZm9jdXNlZCxcclxuICAgICAgICAgICAgICAgICdyZWFjdC1wYWdlLWNlbGwtaXMtZHJhZnQnOiBpc0RyYWZ0SW5MYW5nLFxyXG4gICAgICAgICAgICAgICAgJ3JlYWN0LXBhZ2UtY2VsbC1icmluZy10by1mcm9udCc6ICFpc1Jlc2l6ZU1vZGUgJiYgIWlzTGF5b3V0TW9kZSAmJiBpbmxpbmUsIC8vIGlubGluZSBtdXN0IG5vdCBiZSBhY3RpdmUgZm9yIHJlc2l6ZS9sYXlvdXRcclxuICAgICAgICAgICAgfSksIG9uQ2xpY2s6IG9uQ2xpY2sgfSxcclxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEhhbmRsZSwgeyBub2RlSWQ6IG5vZGVJZCB9KSxcclxuICAgICAgICBzaG93TW92ZUJ1dHRvbnMgJiZcclxuICAgICAgICAgICAgaXNMYXlvdXRNb2RlICYmXHJcbiAgICAgICAgICAgICFoYXNDaGlsZHJlbiAmJlxyXG4gICAgICAgICAgICAhbXVsdGlOb2Rlc1NlbGVjdGVkID8gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoTW92ZUFjdGlvbnMsIHsgbm9kZUlkOiBub2RlSWQgfSkpIDogbnVsbCxcclxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgcmVmOiBtZWFzdXJlUmVmLCBzdHlsZToge1xyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAnMTAwJScsXHJcbiAgICAgICAgICAgICAgICBib3hTaXppbmc6ICdib3JkZXItYm94JyxcclxuICAgICAgICAgICAgfSB9LFxyXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KENlbGxFcnJvckdhdGUsIHsgbm9kZUlkOiBub2RlSWQgfSxcclxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5uZXIsIHsgbm9kZUlkOiBub2RlSWQgfSkpKSkpO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBSZWFjdC5tZW1vKENlbGwpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJleHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24gKGVsZW1lbnQsIG9mZnNldCwgYmVoYXZpb3IpIHtcclxuICAgIGlmIChvZmZzZXQgPT09IHZvaWQgMCkgeyBvZmZzZXQgPSAwOyB9XHJcbiAgICBpZiAoYmVoYXZpb3IgPT09IHZvaWQgMCkgeyBiZWhhdmlvciA9ICdzbW9vdGgnOyB9XHJcbiAgICBpZiAoIWVsZW1lbnQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB2YXIgYm9keVJlY3QgPSBkb2N1bWVudC5ib2R5LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcclxuICAgIHZhciBlbGVtZW50UmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xyXG4gICAgdmFyIGVsZW1lbnRQb3NpdGlvbiA9IGVsZW1lbnRSZWN0IC0gYm9keVJlY3Q7XHJcbiAgICB2YXIgb2Zmc2V0UG9zaXRpb24gPSBlbGVtZW50UG9zaXRpb24gLSBvZmZzZXQ7XHJcbiAgICB3aW5kb3cuc2Nyb2xsVG8oe1xyXG4gICAgICAgIHRvcDogb2Zmc2V0UG9zaXRpb24sXHJcbiAgICAgICAgYmVoYXZpb3I6IGJlaGF2aW9yLFxyXG4gICAgfSk7XHJcbn0pO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1zY3JvbGxJbnRvVmlld1dpdGhPZmZzZXQuanMubWFwIiwidmFyIF9fcmVhZCA9ICh0aGlzICYmIHRoaXMuX19yZWFkKSB8fCBmdW5jdGlvbiAobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59O1xyXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlRHJvcCB9IGZyb20gJ3JlYWN0LWRuZCc7XHJcbmltcG9ydCB7IHVzZUNlbGxJc0FsbG93ZWRIZXJlLCB1c2VJbnNlcnROZXcsIHVzZVNldERpc3BsYXlSZWZlcmVuY2VOb2RlSWQsIH0gZnJvbSAnLi4vaG9va3MnO1xyXG52YXIgRmFsbGJhY2tEcm9wQXJlYSA9IGZ1bmN0aW9uIChfYSkge1xyXG4gICAgdmFyIGNoaWxkcmVuID0gX2EuY2hpbGRyZW47XHJcbiAgICB2YXIgaW5zZXJ0TmV3ID0gdXNlSW5zZXJ0TmV3KCk7XHJcbiAgICB2YXIgaXNBbGxvd2VkID0gdXNlQ2VsbElzQWxsb3dlZEhlcmUoKTtcclxuICAgIHZhciBfYiA9IF9fcmVhZCh1c2VEcm9wKHtcclxuICAgICAgICBhY2NlcHQ6ICdjZWxsJyxcclxuICAgICAgICBjYW5Ecm9wOiBmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gaXNBbGxvd2VkKGl0ZW0pOyB9LFxyXG4gICAgICAgIGRyb3A6IGZ1bmN0aW9uIChpdGVtLCBtb25pdG9yKSB7XHJcbiAgICAgICAgICAgIC8vIGZhbGxiYWNrIGRyb3BcclxuICAgICAgICAgICAgaWYgKCFtb25pdG9yLmRpZERyb3AoKSkge1xyXG4gICAgICAgICAgICAgICAgaW5zZXJ0TmV3KGl0ZW0uY2VsbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgfSksIDIpLCBkcm9wUmVmID0gX2JbMV07XHJcbiAgICB2YXIgc2V0UmVmZXJlbmNlID0gdXNlU2V0RGlzcGxheVJlZmVyZW5jZU5vZGVJZCgpO1xyXG4gICAgdmFyIGNsZWFyUmVmZXJlbmNlID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgLy8gaWYgY2xpY2sgd2FzIG9uIHRoZSByb290LCBjbGVhciByZWZlcmVuY2VcclxuICAgICAgICBpZiAoKF9hID0gZS50YXJnZXQuY2xhc3NMaXN0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY29udGFpbnMoJ3JlYWN0LXBhZ2UtZWRpdGFibGUnKSlcclxuICAgICAgICAgICAgc2V0UmVmZXJlbmNlKG51bGwpO1xyXG4gICAgfSwgW3NldFJlZmVyZW5jZV0pO1xyXG4gICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgcmVmOiBkcm9wUmVmLCBvbkNsaWNrOiBjbGVhclJlZmVyZW5jZSB9LCBjaGlsZHJlbikpO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBGYWxsYmFja0Ryb3BBcmVhO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1GYWxsYmFja0Ryb3BBcmVhLmpzLm1hcCIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBJbnNlcnROZXcgZnJvbSAnLi4vLi4vQ2VsbC9JbnNlcnROZXcnO1xyXG5pbXBvcnQgeyB1c2VDZWxsU3BhY2luZywgdXNlT3B0aW9uLCB1c2VWYWx1ZU5vZGUgfSBmcm9tICcuLi8uLi9ob29rcyc7XHJcbmltcG9ydCBSb3cgZnJvbSAnLi4vLi4vUm93JztcclxudmFyIFJvd3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICB2YXIgcm93SWRzID0gdXNlVmFsdWVOb2RlKGZ1bmN0aW9uIChlZGl0YWJsZSkge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgcmV0dXJuICh7XHJcbiAgICAgICAgICAgIHJvd0lkczogKF9iID0gKF9hID0gZWRpdGFibGUgPT09IG51bGwgfHwgZWRpdGFibGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVkaXRhYmxlLnJvd3MpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tYXAoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGMuaWQ7IH0pKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBbXSxcclxuICAgICAgICB9KTtcclxuICAgIH0pLnJvd0lkcztcclxuICAgIHZhciBjaGlsZENvbnN0cmFpbnRzID0gdXNlT3B0aW9uKCdjaGlsZENvbnN0cmFpbnRzJyk7XHJcbiAgICB2YXIgY29tcG9uZW50cyA9IHVzZU9wdGlvbignY29tcG9uZW50cycpO1xyXG4gICAgdmFyIGNlbGxTcGFjaW5nWSA9IHVzZUNlbGxTcGFjaW5nKCkueTtcclxuICAgIHZhciBpbnNlcnRBbGxvd2VkID0gKGNoaWxkQ29uc3RyYWludHMgPT09IG51bGwgfHwgY2hpbGRDb25zdHJhaW50cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2hpbGRDb25zdHJhaW50cy5tYXhDaGlsZHJlbilcclxuICAgICAgICA/IChjaGlsZENvbnN0cmFpbnRzID09PSBudWxsIHx8IGNoaWxkQ29uc3RyYWludHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNoaWxkQ29uc3RyYWludHMubWF4Q2hpbGRyZW4pID4gcm93SWRzLmxlbmd0aFxyXG4gICAgICAgIDogdHJ1ZTtcclxuICAgIHZhciBJbnNlcnROZXdXaXRoRGVmYXVsdCA9IChfYSA9IGNvbXBvbmVudHMgPT09IG51bGwgfHwgY29tcG9uZW50cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29tcG9uZW50cy5JbnNlcnROZXcpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IEluc2VydE5ldztcclxuICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCxcclxuICAgICAgICByb3dJZHMubGVuZ3RoID4gMCA/IChSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgc3R5bGU6IGNlbGxTcGFjaW5nWSAhPT0gMFxyXG4gICAgICAgICAgICAgICAgPyB7IG1hcmdpbjogLWNlbGxTcGFjaW5nWSAvIDIgKyBcInB4IDBcIiB9XHJcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCB9LCByb3dJZHMubWFwKGZ1bmN0aW9uIChpZCkgeyByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoUm93LCB7IG5vZGVJZDogaWQsIGtleTogaWQgfSkpOyB9KSkpIDogbnVsbCxcclxuICAgICAgICBpbnNlcnRBbGxvd2VkID8gUmVhY3QuY3JlYXRlRWxlbWVudChJbnNlcnROZXdXaXRoRGVmYXVsdCwgeyBjaGlsZHJlbklkczogcm93SWRzIH0pIDogbnVsbCkpO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBSZWFjdC5tZW1vKFJvd3MpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Sb3dzLmpzLm1hcCIsImltcG9ydCBSZWFjdCwgeyB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IHVzZURpc3BsYXlNb2RlLCB1c2Vab29tIH0gZnJvbSAnLi4vLi4vaG9va3MnO1xyXG5pbXBvcnQgeyB1c2VLZWVwU2Nyb2xsUG9zaXRpb24gfSBmcm9tICcuLi9ob29rcy91c2VLZWVwU2Nyb2xsUG9zaXRpb24nO1xyXG5pbXBvcnQgUm93cyBmcm9tICcuL1Jvd3MnO1xyXG52YXIgSW5uZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICB2YXIgbW9kZSA9IHVzZURpc3BsYXlNb2RlKCk7XHJcbiAgICB2YXIgcmVmID0gdXNlUmVmKCk7XHJcbiAgICB2YXIgem9vbSA9IHVzZVpvb20oKTtcclxuICAgIHVzZUtlZXBTY3JvbGxQb3NpdGlvbihyZWYpO1xyXG4gICAgdmFyIHJlY3QgPSAoX2EgPSByZWYuY3VycmVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgdmFyIHpvb21UcmFuc2Zvcm1PcmlnaW5ZID0gd2luZG93LmlubmVySGVpZ2h0IC8gMiAtIChyZWN0ID09PSBudWxsIHx8IHJlY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlY3QudG9wKTtcclxuICAgIHZhciBvZmZzZXRQZXJjZW50ID0gem9vbVRyYW5zZm9ybU9yaWdpblkgLyAocmVjdCA9PT0gbnVsbCB8fCByZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZWN0LmhlaWdodCk7XHJcbiAgICB2YXIgYmFja2Ryb3BQZXJjZW50ID0gNTAgKiAoMSAtIHpvb20pO1xyXG4gICAgdmFyIGxlZnQgPSBiYWNrZHJvcFBlcmNlbnQgKyAnJSc7XHJcbiAgICB2YXIgcmlnaHQgPSAxMDAgLSBiYWNrZHJvcFBlcmNlbnQgKyAnJSc7XHJcbiAgICB2YXIgdG9wID0gYmFja2Ryb3BQZXJjZW50ICogb2Zmc2V0UGVyY2VudCAqIDIgKyAnJSc7XHJcbiAgICB2YXIgYm90dG9tID0gMTAwIC0gYmFja2Ryb3BQZXJjZW50ICogKDEgLSBvZmZzZXRQZXJjZW50KSAqIDIgKyAnJSc7XHJcbiAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyByZWY6IHJlZiwgc3R5bGU6IHtcclxuICAgICAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXHJcbiAgICAgICAgfSB9LFxyXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBzdHlsZToge1xyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogem9vbSA8IDEgPyAxIDogMCxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxyXG4gICAgICAgICAgICAgICAgdG9wOiAwLFxyXG4gICAgICAgICAgICAgICAgbGVmdDogMCxcclxuICAgICAgICAgICAgICAgIHJpZ2h0OiAwLFxyXG4gICAgICAgICAgICAgICAgYm90dG9tOiAwLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogJzAuNnMnLFxyXG4gICAgICAgICAgICAgICAgY2xpcFBhdGg6IFwicG9seWdvbigwJSAwJSwgMCUgMTAwJSwgXCIgKyBsZWZ0ICsgXCIgMTAwJSwgXCIgKyBsZWZ0ICsgXCIgXCIgKyB0b3AgKyBcIiwgXCIgKyByaWdodCArIFwiIFwiICsgdG9wICsgXCIsIFwiICsgcmlnaHQgKyBcIiBcIiArIGJvdHRvbSArIFwiLCBcIiArIGxlZnQgKyBcIiBcIiArIGJvdHRvbSArIFwiLCBcIiArIGxlZnQgKyBcIiAxMDAlLCAxMDAlIDEwMCUsIDEwMCUgMCUpXCIsXHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBcInVybChcXFwiZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScxNicgaGVpZ2h0PScxNiAgJyB2aWV3Qm94PScwIDAgOCA4JyUzRSUzQ2cgZmlsbD0nJTIzYzVjNWM1JyBmaWxsLW9wYWNpdHk9JzAuNCclM0UlM0NwYXRoIGZpbGwtcnVsZT0nZXZlbm9kZCcgZD0nTTAgMGg0djRIMFYwem00IDRoNHY0SDRWNHonLyUzRSUzQy9nJTNFJTNDL3N2ZyUzRVxcXCIpXCIsXHJcbiAgICAgICAgICAgIH0gfSksXHJcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHN0eWxlOiB7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1PcmlnaW46IFwiY2VudGVyIFwiICsgem9vbVRyYW5zZm9ybU9yaWdpblkgKyBcInB4XCIsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IFwic2NhbGUoXCIgKyB6b29tICsgXCIpXCIsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiAnMC42cycsXHJcbiAgICAgICAgICAgIH0sIGNsYXNzTmFtZTogJ3JlYWN0LXBhZ2UtZWRpdGFibGUgcmVhY3QtcGFnZS1lZGl0YWJsZS1tb2RlLScgKyBtb2RlIH0sXHJcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUm93cywgbnVsbCkpKSk7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IFJlYWN0Lm1lbW8oSW5uZXIpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJpbXBvcnQgdGhyb3R0bGUgZnJvbSAnbG9kYXNoLnRocm90dGxlJztcclxuaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHNjcm9sbEludG9WaWV3V2l0aE9mZnNldCBmcm9tICcuLi8uLi9DZWxsL3V0aWxzL3Njcm9sbEludG9WaWV3V2l0aE9mZnNldCc7XHJcbmltcG9ydCB7IHVzZURpc3BsYXlNb2RlIH0gZnJvbSAnLi4vLi4vaG9va3MnO1xyXG5mdW5jdGlvbiBpc0VsZW1lbnRJblZpZXdwb3J0KGVsKSB7XHJcbiAgICB2YXIgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgcmV0dXJuIChyZWN0LnRvcCA+PSAwICYmXHJcbiAgICAgICAgcmVjdC5sZWZ0ID49IDAgJiZcclxuICAgICAgICByZWN0LmJvdHRvbSA8PVxyXG4gICAgICAgICAgICAod2luZG93LmlubmVySGVpZ2h0IHx8XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KSAvKm9yICQod2luZG93KS5oZWlnaHQoKSAqLyAmJlxyXG4gICAgICAgIHJlY3QucmlnaHQgPD1cclxuICAgICAgICAgICAgKHdpbmRvdy5pbm5lcldpZHRoIHx8XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgpIC8qb3IgJCh3aW5kb3cpLndpZHRoKCkgKi8pO1xyXG59XHJcbmV4cG9ydCB2YXIgdXNlS2VlcFNjcm9sbFBvc2l0aW9uID0gZnVuY3Rpb24gKHJlZikge1xyXG4gICAgdmFyIG1vZGUgPSB1c2VEaXNwbGF5TW9kZSgpO1xyXG4gICAgdmFyIGZpcnN0RWxlbWVudEluVmlld1BvcnRyZWYgPSBSZWFjdC51c2VSZWYoKTtcclxuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG9uU2Nyb2xsID0gdGhyb3R0bGUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAocmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBmaXJzdEluVmlld3BvcnQgPSBBcnJheS5wcm90b3R5cGUuZmluZC5jYWxsKHJlZi5jdXJyZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3JlYWN0LXBhZ2UtY2VsbCcpLCBmdW5jdGlvbiAoY2VsbCkgeyByZXR1cm4gaXNFbGVtZW50SW5WaWV3cG9ydChjZWxsKTsgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlyc3RJblZpZXdwb3J0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RFbGVtZW50SW5WaWV3UG9ydHJlZi5jdXJyZW50ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbDogZmlyc3RJblZpZXdwb3J0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3BPZmZzZXQ6IGZpcnN0SW5WaWV3cG9ydC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AsXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpcnN0RWxlbWVudEluVmlld1BvcnRyZWYuY3VycmVudCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCA2MDApO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBvblNjcm9sbCk7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIG9uU2Nyb2xsKTtcclxuICAgICAgICB9O1xyXG4gICAgfSwgW10pO1xyXG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoZmlyc3RFbGVtZW50SW5WaWV3UG9ydHJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBfYSA9IGZpcnN0RWxlbWVudEluVmlld1BvcnRyZWYuY3VycmVudCwgZWxfMSA9IF9hLmVsLCB0b3BPZmZzZXRfMSA9IF9hLnRvcE9mZnNldDtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGxJbnRvVmlld1dpdGhPZmZzZXQoZWxfMSwgdG9wT2Zmc2V0XzEsICdhdXRvJyk7XHJcbiAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgIH1cclxuICAgIH0sIFttb2RlXSk7XHJcbn07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZUtlZXBTY3JvbGxQb3NpdGlvbi5qcy5tYXAiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgRmFsbGJhY2tEcm9wQXJlYSBmcm9tICcuL0ZhbGxiYWNrRHJvcEFyZWEnO1xyXG5pbXBvcnQgSW5uZXIgZnJvbSAnLi9Jbm5lcic7XHJcbnZhciBFZGl0YWJsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChGYWxsYmFja0Ryb3BBcmVhLCBudWxsLFxyXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSW5uZXIsIG51bGwpKSk7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IFJlYWN0Lm1lbW8oRWRpdGFibGUpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn07XHJcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufTtcclxuaW1wb3J0IGlzSG90a2V5IGZyb20gJ2lzLWhvdGtleSc7XHJcbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IG9iaklzTm9kZSB9IGZyb20gJy4uLy4uLy4uL2NvcmUvdXRpbHMvb2JqSXNOb2RlJztcclxuaW1wb3J0IHsgaXNSb3cgfSBmcm9tICcuLi8uLi90eXBlcy9ub2RlJztcclxuaW1wb3J0IHsgZ2V0Q29tbW9uQW5jZXN0b3JUcmVlIH0gZnJvbSAnLi4vLi4vdXRpbHMvYW5jZXN0b3JUcmVlJztcclxuaW1wb3J0IHsgY2xvbmVBc0NlbGwgfSBmcm9tICcuLi8uLi91dGlscy9jbG9uZVdpdGhOZXdJZHMnO1xyXG5pbXBvcnQgeyB1c2VBbGxDZWxsUGx1Z2luc0Zvck5vZGUsIHVzZUFsbEZvY3VzZWROb2RlSWRzLCB1c2VCbHVyQWxsQ2VsbHMsIHVzZUVkaXRvclN0b3JlLCB1c2VGb2N1c0NlbGxCeUlkLCB1c2VGb2N1c2VkTm9kZUlkLCB1c2VJbnNlcnRBZnRlciwgdXNlSXNFZGl0TW9kZSwgdXNlSXNJbnNlcnRNb2RlLCB1c2VQYXJlbnRDZWxsSWQsIHVzZVJlZG8sIHVzZVJlbW92ZU11bHRpcGxlTm9kZUlkcywgdXNlU2V0RWRpdE1vZGUsIHVzZVNldEluc2VydE1vZGUsIHVzZVVuZG8sIH0gZnJvbSAnLi4vaG9va3MnO1xyXG52YXIgbGFzdEZvY3VzZWQgPSBudWxsO1xyXG52YXIgR2xvYmFsSG90S2V5cyA9IGZ1bmN0aW9uIChfYSkge1xyXG4gICAgdmFyIGZvY3VzUmVmID0gX2EuZm9jdXNSZWY7XHJcbiAgICB2YXIgZWRpdG9yID0gdXNlRWRpdG9yU3RvcmUoKTtcclxuICAgIHZhciB1bmRvID0gdXNlVW5kbygpO1xyXG4gICAgdmFyIHJlZG8gPSB1c2VSZWRvKCk7XHJcbiAgICB2YXIgc2V0SW5zZXJ0TW9kZSA9IHVzZVNldEluc2VydE1vZGUoKTtcclxuICAgIHZhciBpc0VkaXRNb2RlID0gdXNlSXNFZGl0TW9kZSgpO1xyXG4gICAgdmFyIGJsdXJBbGxDZWxscyA9IHVzZUJsdXJBbGxDZWxscygpO1xyXG4gICAgdmFyIGZvY3VzZWROb2RlSWRzID0gdXNlQWxsRm9jdXNlZE5vZGVJZHMoKTtcclxuICAgIHZhciBzb21lQ2VsbElzRm9jdXNlZCA9IGZvY3VzZWROb2RlSWRzLmxlbmd0aCA+IDA7XHJcbiAgICB2YXIgZm9jdXNlZE5vZGVJZCA9IHVzZUZvY3VzZWROb2RlSWQoKTtcclxuICAgIHZhciBmb2N1c1BhcmVudElkID0gdXNlUGFyZW50Q2VsbElkKGZvY3VzZWROb2RlSWQpO1xyXG4gICAgdmFyIHBsdWdpbnMgPSB1c2VBbGxDZWxsUGx1Z2luc0Zvck5vZGUoZm9jdXNQYXJlbnRJZCk7XHJcbiAgICB2YXIgZm9jdXNDZWxsID0gdXNlRm9jdXNDZWxsQnlJZCgpO1xyXG4gICAgdmFyIHJlbW92ZUNlbGxzID0gdXNlUmVtb3ZlTXVsdGlwbGVOb2RlSWRzKCk7XHJcbiAgICB2YXIgaW5zZXJ0QWZ0ZXIgPSB1c2VJbnNlcnRBZnRlcigpO1xyXG4gICAgdmFyIGlzSW5zZXJ0TW9kZSA9IHVzZUlzSW5zZXJ0TW9kZSgpO1xyXG4gICAgdmFyIHNldEVkaXRNb2RlID0gdXNlU2V0RWRpdE1vZGUoKTtcclxuICAgIHZhciBkZWxlZ2F0ZVRvRm91bmRQbHVnaW4gPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoZXZlbnQsIG5vZGVJZCwgaGFuZGxlck5hbWUsIGRlZmF1bHRIYW5kbGVyKSB7IHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBub2RlLCBwbHVnaW4sIGVfMTtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBub2RlID0gZWRpdG9yLmdldE5vZGUobm9kZUlkKTtcclxuICAgICAgICAgICAgICAgICAgICBwbHVnaW4gPSBwbHVnaW5zLmZpbmQoZnVuY3Rpb24gKHApIHsgdmFyIF9hLCBfYjsgcmV0dXJuIHAuaWQgPT09ICgoX2IgPSAoX2EgPSBub2RlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucGx1Z2luKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuaWQpOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFsxLCA1LCAsIDZdKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIShpc0VkaXRNb2RlICYmIG5vZGUgJiYgcGx1Z2luW2hhbmRsZXJOYW1lXSkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHBsdWdpbltoYW5kbGVyTmFtZV0oZXZlbnQsIG5vZGUpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAzO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOiBcclxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBwbHVnaW4gaGFuZGxlciByZXNvbHZlIG9yIHRoZXJlIGlzIG5vLCB0aGV5IGRvIG5vdCBoYW5kbGUgaXQsIHNvIGRvIHRoZSBkZWZhdWx0XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBkZWZhdWx0SGFuZGxlcihldmVudCwgbm9kZSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBwbHVnaW4gaGFuZGxlciByZXNvbHZlIG9yIHRoZXJlIGlzIG5vLCB0aGV5IGRvIG5vdCBoYW5kbGUgaXQsIHNvIGRvIHRoZSBkZWZhdWx0XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgIGVfMSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZV8xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25zb2xlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZV8xKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7IH0sIFtlZGl0b3IsIGlzRWRpdE1vZGVdKTtcclxuICAgIHZhciBoYW5kbGVycyA9IHVzZU1lbW8oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBoYW5kbGVDb3B5ID0gZnVuY3Rpb24gKGRlbGV0ZUFmdGVyKSB7XHJcbiAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgdmFyIF9iO1xyXG4gICAgICAgICAgICBpZiAoZGVsZXRlQWZ0ZXIgPT09IHZvaWQgMCkgeyBkZWxldGVBZnRlciA9IGZhbHNlOyB9XHJcbiAgICAgICAgICAgIC8vIGNvcHkgY2VsbCwgdW5sZXNzIHRleHQgaXMgc2VsZWN0ZWRcclxuICAgICAgICAgICAgaWYgKCgoX2IgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi50eXBlKSAhPT0gJ1JhbmdlJyAmJlxyXG4gICAgICAgICAgICAgICAgKGZvY3VzZWROb2RlSWRzID09PSBudWxsIHx8IGZvY3VzZWROb2RlSWRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmb2N1c2VkTm9kZUlkcy5sZW5ndGgpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBnZXRDb21tb25BbmNlc3RvclRyZWUoZWRpdG9yLCBmb2N1c2VkTm9kZUlkcyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IGNsb25lQXNDZWxsKG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHR5cGUgPSAndGV4dC9wbGFpbic7IC8vIGpzb24gaXMgbm90IHN1cHBvcnRlZFxyXG4gICAgICAgICAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbSlNPTi5zdHJpbmdpZnkoY2VsbCldLCB7IHR5cGU6IHR5cGUgfSk7XHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBbbmV3IENsaXBib2FyZEl0ZW0oKF9hID0ge30sIF9hW3R5cGVdID0gYmxvYiwgX2EpKV07XHJcbiAgICAgICAgICAgICAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRlbGV0ZUFmdGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQ2VsbHMoZm9jdXNlZE5vZGVJZHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBob3RrZXlzOiBbJ0VzY2FwZSddLFxyXG4gICAgICAgICAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzb21lQ2VsbElzRm9jdXNlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBibHVyQWxsQ2VsbHMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSW5zZXJ0TW9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRFZGl0TW9kZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGhvdGtleXM6IFsnbW9kK3onXSxcclxuICAgICAgICAgICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB1bmRvKCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBob3RrZXlzOiBbJ21vZCtjJ10sXHJcbiAgICAgICAgICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlQ29weShmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBob3RrZXlzOiBbJ21vZCt4J10sXHJcbiAgICAgICAgICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlQ29weSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGhvdGtleXM6IFsnbW9kK3YnXSxcclxuICAgICAgICAgICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGUsIF9hLCBfYiwgY29tbW9uQW5jZXN0b3JOb2RlLCBpbnNlcnRBZnRlck5vZGVJZCwgZV8yO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfYy5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2IgPSAoX2EgPSBKU09OKS5wYXJzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBuYXZpZ2F0b3IuY2xpcGJvYXJkLnJlYWRUZXh0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUgPSBfYi5hcHBseShfYSwgW19jLnNlbnQoKV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmpJc05vZGUobm9kZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbW9uQW5jZXN0b3JOb2RlID0gZm9jdXNlZE5vZGVJZHMubGVuZ3RoID4gMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBnZXRDb21tb25BbmNlc3RvclRyZWUoZWRpdG9yLCBmb2N1c2VkTm9kZUlkcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0QWZ0ZXJOb2RlSWQgPSBjb21tb25BbmNlc3Rvck5vZGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gaXNSb3coY29tbW9uQW5jZXN0b3JOb2RlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gY29tbW9uQW5jZXN0b3JOb2RlLmNlbGxzLmxlbmd0aCA9PT0gMSAvLyBpZiBpdCBoYXMganVzdCBvbmUgY2VsbCwgYWRkIGJlbG93IHRoaXMgY2VsbC4gaWYgaXQgaGFzIG11bHRpcGxlLCBhZGQgYmVsb3cgdGhpcyByb3dcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBjb21tb25BbmNlc3Rvck5vZGUuY2VsbHNbMF0uaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBjb21tb25BbmNlc3Rvck5vZGUuaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGNvbW1vbkFuY2VzdG9yTm9kZS5yb3dzW2NvbW1vbkFuY2VzdG9yTm9kZS5yb3dzLmxlbmd0aCAtIDFdIC8vIGlmIGNvbW1vbiBhbmNlc3RvciBpcyBhIGNlbGwgKHVzdWFsbHkgdGhlIHJvb3QgY2VsbCwgYWRkIGJlbG93IGxhc3Qgcm93KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0QWZ0ZXIobm9kZSwgaW5zZXJ0QWZ0ZXJOb2RlSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlXzIgPSBfYy5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7IH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGhvdGtleXM6IFsnY3RybCtzaGlmdCt6JywgJ2N0cmwreScsICdjb21tYW5kK3NoaWZ0K3onLCAnY29tbWFuZCt5J10sXHJcbiAgICAgICAgICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVkbygpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaG90a2V5czogWydhbHQrZGVsJywgJ2FsdCtiYWNrc3BhY2UnXSxcclxuICAgICAgICAgICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGVnYXRlVG9Gb3VuZFBsdWdpbihldmVudCwgZm9jdXNlZE5vZGVJZCwgJ2hhbmRsZVJlbW92ZUhvdEtleScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQ2VsbHMoZm9jdXNlZE5vZGVJZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICBdO1xyXG4gICAgfSwgW1xyXG4gICAgICAgIGZvY3VzZWROb2RlSWQsXHJcbiAgICAgICAgZm9jdXNlZE5vZGVJZHMsXHJcbiAgICAgICAgc29tZUNlbGxJc0ZvY3VzZWQsXHJcbiAgICAgICAgYmx1ckFsbENlbGxzLFxyXG4gICAgICAgIGZvY3VzQ2VsbCxcclxuICAgICAgICByZW1vdmVDZWxscyxcclxuICAgICAgICBzZXRFZGl0TW9kZSxcclxuICAgICAgICBzZXRJbnNlcnRNb2RlLFxyXG4gICAgXSk7XHJcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIHdoZW4gd2UgaGF2ZSBtdWx0aXBsZSBpbnN0YW5jZXMsIHdlIHRyeSB0byBzZW5kIHRoZSBldmVudCBvbmx5IHRvIHRoZSByaWdodCBvbmVcclxuICAgICAgICAvLyB3ZSBkbyBhIGxpdHRsZSB0cmljayB3aXRoIGEgZ2xvYmFsIHZhcmlhYmxlIChpbnN0ZWFkIG9mIHJlcXVpcmluZyBhIHdyYXBwaW5nIGNvbnRleHQpXHJcbiAgICAgICAgbGFzdEZvY3VzZWQgPSBmb2N1c1JlZi5jdXJyZW50O1xyXG4gICAgICAgIHZhciBrZXlIYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChsYXN0Rm9jdXNlZCAhPT0gZm9jdXNSZWYuY3VycmVudClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgdmFyIG1hdGNoaW5nSGFuZGxlciA9IGhhbmRsZXJzLmZpbmQoZnVuY3Rpb24gKGhhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGVyLmhvdGtleXMuc29tZShmdW5jdGlvbiAoaG90a2V5KSB7IHJldHVybiBpc0hvdGtleShob3RrZXksIGV2ZW50KTsgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBtYXRjaGluZ0hhbmRsZXIgPT09IG51bGwgfHwgbWF0Y2hpbmdIYW5kbGVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtYXRjaGluZ0hhbmRsZXIuaGFuZGxlcihldmVudCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywga2V5SGFuZGxlcik7XHJcbiAgICAgICAgdmFyIGZvY3VzSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbGFzdEZvY3VzZWQgPSBmb2N1c1JlZi5jdXJyZW50O1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgZm9jdXNSZWYuY3VycmVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZvY3VzSGFuZGxlcik7XHJcbiAgICAgICAgZm9jdXNSZWYuY3VycmVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgZm9jdXNIYW5kbGVyKTtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywga2V5SGFuZGxlcik7XHJcbiAgICAgICAgICAgIChfYSA9IGZvY3VzUmVmLmN1cnJlbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgZm9jdXNIYW5kbGVyKTtcclxuICAgICAgICAgICAgKF9iID0gZm9jdXNSZWYuY3VycmVudCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZm9jdXNIYW5kbGVyKTtcclxuICAgICAgICAgICAgaWYgKGxhc3RGb2N1c2VkID09PSBmb2N1c1JlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICBsYXN0Rm9jdXNlZCA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSwgW2hhbmRsZXJzLCBzb21lQ2VsbElzRm9jdXNlZCwgaXNFZGl0TW9kZSwgZm9jdXNSZWZdKTtcclxuICAgIHJldHVybiBudWxsO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBHbG9iYWxIb3RLZXlzO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1HbG9iYWxIb3RLZXlzLmpzLm1hcCIsInZhciBfX3JlYWQgPSAodGhpcyAmJiB0aGlzLl9fcmVhZCkgfHwgZnVuY3Rpb24gKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufTtcclxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlQ2VsbERyb3AgfSBmcm9tICcuLi8uLi9DZWxsL0Ryb3BwYWJsZSc7XHJcbmltcG9ydCB7IHVzZUlzSW5zZXJ0TW9kZSwgdXNlSXNMYXlvdXRNb2RlIH0gZnJvbSAnLi4vLi4vaG9va3MnO1xyXG52YXIgRHJvcHBhYmxlID0gZnVuY3Rpb24gKF9hKSB7XHJcbiAgICB2YXIgY2hpbGRyZW4gPSBfYS5jaGlsZHJlbiwgbm9kZUlkID0gX2Eubm9kZUlkO1xyXG4gICAgdmFyIGlzTGF5b3V0TW9kZSA9IHVzZUlzTGF5b3V0TW9kZSgpO1xyXG4gICAgdmFyIGlzSW5zZXJ0TW9kZSA9IHVzZUlzSW5zZXJ0TW9kZSgpO1xyXG4gICAgdmFyIF9iID0gX19yZWFkKHVzZUNlbGxEcm9wKG5vZGVJZCksIDIpLCByZWYgPSBfYlswXSwgaXNBbGxvd2VkID0gX2JbMV07XHJcbiAgICBpZiAoIShpc0xheW91dE1vZGUgfHwgaXNJbnNlcnRNb2RlKSkge1xyXG4gICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInJlYWN0LXBhZ2Utcm93LWRyb3BwYWJsZS1jb250YWluZXJcIiB9LCBjaGlsZHJlbik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyByZWY6IHJlZiwgY2xhc3NOYW1lOiBcInJlYWN0LXBhZ2Utcm93LWRyb3BwYWJsZVwiIH0sIGNoaWxkcmVuKSk7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IERyb3BwYWJsZTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwidmFyIF9fcmVhZCA9ICh0aGlzICYmIHRoaXMuX19yZWFkKSB8fCBmdW5jdGlvbiAobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59O1xyXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgRHJhZ2dhYmxlIGZyb20gJ3JlYWN0LWRyYWdnYWJsZSc7XHJcbmltcG9ydCB7IHVzZU1lYXN1cmUgfSBmcm9tICdyZWFjdC11c2UnO1xyXG5pbXBvcnQgQ2VsbCBmcm9tICcuLi9DZWxsJztcclxuaW1wb3J0IHsgdXNlSXNFZGl0TW9kZSwgdXNlSXNQcmV2aWV3TW9kZSwgdXNlSXNSZXNpemVNb2RlLCB1c2VSZXNpemVDZWxsLCB1c2VDZWxsU3BhY2luZywgdXNlT3B0aW9uLCB9IGZyb20gJy4uL2hvb2tzJztcclxudmFyIFJlc2l6YWJsZVJvd0NlbGwgPSBmdW5jdGlvbiAoX2EpIHtcclxuICAgIHZhciBub2RlSWQgPSBfYS5ub2RlSWQsIHJvd1dpZHRoID0gX2Eucm93V2lkdGgsIHJvd0hhc0lubGluZUNoaWxkcmVuUG9zaXRpb24gPSBfYS5yb3dIYXNJbmxpbmVDaGlsZHJlblBvc2l0aW9uLCBpc0xhc3QgPSBfYS5pc0xhc3QsIG9mZnNldCA9IF9hLm9mZnNldCwgc2l6ZSA9IF9hLnNpemUsIG1heFNpemUgPSBfYS5tYXhTaXplO1xyXG4gICAgdmFyIHN0ZXBXaWR0aCA9IHJvd1dpZHRoIC8gMTI7IC8vIHdlJ3JlIGdvaW5nIHRvIGtlZXAgaXQgYSByZWFsIG51bWJlciB0byBwcmVzZXJ2ZSBzb21lIHByZWNpc2lvblxyXG4gICAgdmFyIGFsbG93UmVzaXplSW5FZGl0TW9kZSA9IHVzZU9wdGlvbignYWxsb3dSZXNpemVJbkVkaXRNb2RlJyk7XHJcbiAgICB2YXIgaXNSZXNpemVNb2RlID0gdXNlSXNSZXNpemVNb2RlKCk7XHJcbiAgICB2YXIgaXNFZGl0TW9kZSA9IHVzZUlzRWRpdE1vZGUoKTtcclxuICAgIHZhciBpc1ByZXZpZXdNb2RlID0gdXNlSXNQcmV2aWV3TW9kZSgpO1xyXG4gICAgdmFyIHJlc2l6ZSA9IHVzZVJlc2l6ZUNlbGwobm9kZUlkKTtcclxuICAgIHZhciBfYiA9IF9fcmVhZCh1c2VNZWFzdXJlKCksIDIpLCByZWYgPSBfYlswXSwgY2VsbEhlaWdodCA9IF9iWzFdLmhlaWdodDtcclxuICAgIHZhciBjZWxsU3BhY2luZ1kgPSB1c2VDZWxsU3BhY2luZygpLnk7XHJcbiAgICB2YXIgc2hvd1Jlc2l6ZUhhbmRsZSA9ICFpc1ByZXZpZXdNb2RlICYmXHJcbiAgICAgICAgIWlzTGFzdCAmJlxyXG4gICAgICAgIChpc1Jlc2l6ZU1vZGUgfHwgKGFsbG93UmVzaXplSW5FZGl0TW9kZSAmJiBpc0VkaXRNb2RlKSk7XHJcbiAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsXHJcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChDZWxsLCB7IG5vZGVJZDogbm9kZUlkLCBtZWFzdXJlUmVmOiByZWYgfSksXHJcbiAgICAgICAgc2hvd1Jlc2l6ZUhhbmRsZSA/IChSZWFjdC5jcmVhdGVFbGVtZW50KERyYWdnYWJsZSwgeyBib3VuZHM6IHtcclxuICAgICAgICAgICAgICAgIHRvcDogMCxcclxuICAgICAgICAgICAgICAgIGJvdHRvbTogMCxcclxuICAgICAgICAgICAgICAgIGxlZnQ6IE1hdGgucm91bmQoc3RlcFdpZHRoKSxcclxuICAgICAgICAgICAgICAgIHJpZ2h0OiBNYXRoLnJvdW5kKHJvd1dpZHRoIC0gc3RlcFdpZHRoKSxcclxuICAgICAgICAgICAgfSwgcG9zaXRpb246IHtcclxuICAgICAgICAgICAgICAgIHg6IHJvd0hhc0lubGluZUNoaWxkcmVuUG9zaXRpb24gPT09ICdyaWdodCdcclxuICAgICAgICAgICAgICAgICAgICA/IE1hdGgucm91bmQoc3RlcFdpZHRoICogKDEyIC0gb2Zmc2V0KSlcclxuICAgICAgICAgICAgICAgICAgICA6IE1hdGgucm91bmQoc3RlcFdpZHRoICogb2Zmc2V0KSxcclxuICAgICAgICAgICAgICAgIHk6IDAsXHJcbiAgICAgICAgICAgIH0sIGF4aXM6IFwieFwiLCBvbkRyYWc6IGZ1bmN0aW9uIChlLCBkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGlmZiA9IE1hdGgucm91bmQoZGF0YS5kZWx0YVggLyBzdGVwV2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld1NpemUgPSByb3dIYXNJbmxpbmVDaGlsZHJlblBvc2l0aW9uID09PSAncmlnaHQnXHJcbiAgICAgICAgICAgICAgICAgICAgPyBzaXplIC0gZGlmZlxyXG4gICAgICAgICAgICAgICAgICAgIDogc2l6ZSArIGRpZmY7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV3U2l6ZSA+IDAgJiYgbmV3U2l6ZSA8PSBtYXhTaXplKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZShuZXdTaXplKTtcclxuICAgICAgICAgICAgfSwgZ3JpZDogW01hdGgucm91bmQoc3RlcFdpZHRoKSwgMF0gfSxcclxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJyZXNpemUtaGFuZGxlXCIsIHN0eWxlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZml4IGZsb2F0aW5nIHN0eWxlXHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiByb3dIYXNJbmxpbmVDaGlsZHJlblBvc2l0aW9uID8gY2VsbEhlaWdodCA6ICdhdXRvJyxcclxuICAgICAgICAgICAgICAgICAgICBtYXJnaW46IGNlbGxTcGFjaW5nWSAhPT0gMCA/IGNlbGxTcGFjaW5nWSAvIDIgKyBcInB4IDBcIiA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgIH0sIG9uQ2xpY2s6IGZ1bmN0aW9uIChlKSB7IHJldHVybiBlLnN0b3BQcm9wYWdhdGlvbigpOyB9IH0pKSkgOiBudWxsKSk7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IFJlYWN0Lm1lbW8oUmVzaXphYmxlUm93Q2VsbCk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlc2l6YWJsZVJvd0NlbGwuanMubWFwIiwidmFyIF9fcmVhZCA9ICh0aGlzICYmIHRoaXMuX19yZWFkKSB8fCBmdW5jdGlvbiAobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59O1xyXG52YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XHJcbiAgICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcclxuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcclxuICAgICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xyXG59O1xyXG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcclxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlTWVhc3VyZSB9IGZyb20gJ3JlYWN0LXVzZSc7XHJcbmltcG9ydCB7IGlzUm93IH0gZnJvbSAnLi4vLi4vdHlwZXMvbm9kZSc7XHJcbmltcG9ydCB7IHVzZUNlbGxTcGFjaW5nLCB1c2VOb2RlSG92ZXJQb3NpdGlvbiwgdXNlTm9kZVByb3BzIH0gZnJvbSAnLi4vaG9va3MnO1xyXG5pbXBvcnQgRHJvcHBhYmxlIGZyb20gJy4vRHJvcHBhYmxlJztcclxuaW1wb3J0IFJlc2l6YWJsZVJvd0NlbGwgZnJvbSAnLi9SZXNpemFibGVSb3dDZWxsJztcclxudmFyIHJlZHVjZVRvSWRBbmRTaXplQXJyYXkgPSBmdW5jdGlvbiAoYWNjLCBub2RlLCBpbmRleCwgYXJyYXkpIHtcclxuICAgIHZhciBfYSwgX2I7XHJcbiAgICB2YXIgbmV4dE5vZGUgPSBhcnJheVtpbmRleCArIDFdO1xyXG4gICAgdmFyIHNpemUgPSBpc1Jvdyhub2RlKSA/IDEyIDogbm9kZS5zaXplO1xyXG4gICAgdmFyIG5leHRTaXplID0gIW5leHROb2RlIHx8IGlzUm93KG5leHROb2RlKSA/IDAgOiBuZXh0Tm9kZS5zaXplO1xyXG4gICAgdmFyIG9mZnNldCA9IHNpemUgKyAoKF9iID0gKF9hID0gYWNjW2luZGV4IC0gMV0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5vZmZzZXQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IDApO1xyXG4gICAgcmV0dXJuIF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgX19yZWFkKGFjYyksIGZhbHNlKSwgW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWQ6IG5vZGUuaWQsXHJcbiAgICAgICAgICAgIHNpemU6IHNpemUsXHJcbiAgICAgICAgICAgIG1heFNpemU6IHNpemUgKyBuZXh0U2l6ZSAtIDEsXHJcbiAgICAgICAgICAgIG9mZnNldDogb2Zmc2V0LFxyXG4gICAgICAgIH0sXHJcbiAgICBdLCBmYWxzZSk7XHJcbn07XHJcbnZhciBSb3cgPSBmdW5jdGlvbiAoX2EpIHtcclxuICAgIHZhciBfYjtcclxuICAgIHZhciBub2RlSWQgPSBfYS5ub2RlSWQ7XHJcbiAgICB2YXIgX2MgPSBfX3JlYWQodXNlTWVhc3VyZSgpLCAyKSwgcmVmID0gX2NbMF0sIHJvd1dpZHRoID0gX2NbMV0ud2lkdGg7XHJcbiAgICB2YXIgaG92ZXJQb3NpdGlvbiA9IHVzZU5vZGVIb3ZlclBvc2l0aW9uKG5vZGVJZCk7XHJcbiAgICB2YXIgY2hpbGRyZW5XaXRoT2Zmc2V0cyA9IHVzZU5vZGVQcm9wcyhub2RlSWQsIGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xyXG4gICAgICAgIHJldHVybiBpc1Jvdyhub2RlKVxyXG4gICAgICAgICAgICA/IChfYiA9IChfYSA9IG5vZGUuY2VsbHMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5yZWR1Y2UocmVkdWNlVG9JZEFuZFNpemVBcnJheSwgW10pKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBbXVxyXG4gICAgICAgICAgICA6IChfZCA9IChfYyA9IG5vZGUucm93cykgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnJlZHVjZShyZWR1Y2VUb0lkQW5kU2l6ZUFycmF5LCBbXSkpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IFtdO1xyXG4gICAgfSk7XHJcbiAgICB2YXIgcm93SGFzSW5saW5lQ2hpbGRyZW5Qb3NpdGlvbiA9IHVzZU5vZGVQcm9wcyhub2RlSWQsIGZ1bmN0aW9uIChub2RlKSB7IHZhciBfYTsgcmV0dXJuIGlzUm93KG5vZGUpICYmIG5vZGUuY2VsbHMubGVuZ3RoID09PSAyICYmICgoX2EgPSBub2RlLmNlbGxzWzBdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaW5saW5lKTsgfSk7XHJcbiAgICB2YXIgX2QgPSB1c2VDZWxsU3BhY2luZygpLCBjZWxsU3BhY2luZ1ggPSBfZC54LCBjZWxsU3BhY2luZ1kgPSBfZC55O1xyXG4gICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KERyb3BwYWJsZSwgeyBub2RlSWQ6IG5vZGVJZCB9LFxyXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyByZWY6IHJlZiwgY2xhc3NOYW1lOiBjbGFzc05hbWVzKCdyZWFjdC1wYWdlLXJvdycsIHtcclxuICAgICAgICAgICAgICAgICdyZWFjdC1wYWdlLXJvdy1oYXMtZmxvYXRpbmctY2hpbGRyZW4nOiBCb29sZWFuKHJvd0hhc0lubGluZUNoaWxkcmVuUG9zaXRpb24pLFxyXG4gICAgICAgICAgICB9KSwgc3R5bGU6IHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxyXG4gICAgICAgICAgICAgICAgbWFyZ2luOiBjZWxsU3BhY2luZ1ggIT09IDAgPyBcIjAgXCIgKyAtY2VsbFNwYWNpbmdYIC8gMiArIFwicHhcIiA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgfSB9LFxyXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgc3R5bGU6IHtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcclxuICAgICAgICAgICAgICAgICAgICBwb2ludGVyRXZlbnRzOiAnbm9uZScsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiBjZWxsU3BhY2luZ1kgLyAyICsgXCJweFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IGNlbGxTcGFjaW5nWCAvIDIgKyBcInB4XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tOiBjZWxsU3BhY2luZ1kgLyAyICsgXCJweFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiBjZWxsU3BhY2luZ1ggLyAyICsgXCJweFwiLFxyXG4gICAgICAgICAgICAgICAgfSwgY2xhc3NOYW1lOiBjbGFzc05hbWVzKChfYiA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3JlYWN0LXBhZ2Utcm93LWlzLWhvdmVyaW5nLXRoaXMnOiBCb29sZWFuKGhvdmVyUG9zaXRpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBfYltcInJlYWN0LXBhZ2Utcm93LWlzLWhvdmVyaW5nLVwiICsgKGhvdmVyUG9zaXRpb24gfHwgJycpXSA9IEJvb2xlYW4oaG92ZXJQb3NpdGlvbiksXHJcbiAgICAgICAgICAgICAgICAgICAgX2IpKSB9KSxcclxuICAgICAgICAgICAgY2hpbGRyZW5XaXRoT2Zmc2V0cy5tYXAoZnVuY3Rpb24gKF9hLCBpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9mZnNldCA9IF9hLm9mZnNldCwgaWQgPSBfYS5pZCwgc2l6ZSA9IF9hLnNpemUsIG1heFNpemUgPSBfYS5tYXhTaXplO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFJlc2l6YWJsZVJvd0NlbGwsIHsga2V5OiBpZCwgaXNMYXN0OiBpbmRleCA9PT0gY2hpbGRyZW5XaXRoT2Zmc2V0cy5sZW5ndGggLSAxLCByb3dXaWR0aDogcm93V2lkdGgsIG5vZGVJZDogaWQsIHJvd0hhc0lubGluZUNoaWxkcmVuUG9zaXRpb246IHJvd0hhc0lubGluZUNoaWxkcmVuUG9zaXRpb24sIG9mZnNldDogb2Zmc2V0LCBzaXplOiBzaXplLCBtYXhTaXplOiBtYXhTaXplIH0pKTtcclxuICAgICAgICAgICAgfSkpKSk7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IFJlYWN0Lm1lbW8oUm93KTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiaW1wb3J0IHsgaXNQcm9kdWN0aW9uIH0gZnJvbSAnLi4vLi4vY29uc3QnO1xyXG5leHBvcnQgdmFyIGRlbGF5ID0gaXNQcm9kdWN0aW9uID8gNDAgOiA2MDtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwidmFyIF9fYXNzaWduID0gKHRoaXMgJiYgdGhpcy5fX2Fzc2lnbikgfHwgZnVuY3Rpb24gKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKVxyXG4gICAgICAgICAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59O1xyXG52YXIgX19yZXN0ID0gKHRoaXMgJiYgdGhpcy5fX3Jlc3QpIHx8IGZ1bmN0aW9uIChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufTtcclxudmFyIHNlcmlhbGl6ZVJvdyA9IGZ1bmN0aW9uIChyLCBjZWxsUGx1Z2lucykge1xyXG4gICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCByKSwgeyBjZWxsczogci5jZWxscy5tYXAoZnVuY3Rpb24gKGMpIHsgcmV0dXJuIHNlcmlhbGl6ZUNlbGwoYywgY2VsbFBsdWdpbnMpOyB9KSB9KTtcclxufTtcclxudmFyIHNlcmlhbGl6ZUNlbGwgPSBmdW5jdGlvbiAoYywgY2VsbFBsdWdpbnMpIHtcclxuICAgIHZhciBfYTtcclxuICAgIHZhciBwbHVnaW5EZWYgPSBjLnBsdWdpbjtcclxuICAgIHZhciBwbHVnaW5Gb3VuZCA9IHBsdWdpbkRlZlxyXG4gICAgICAgID8gY2VsbFBsdWdpbnMuZmluZChmdW5jdGlvbiAocCkgeyByZXR1cm4gcC5pZCA9PT0gcGx1Z2luRGVmLmlkOyB9KVxyXG4gICAgICAgIDogbnVsbDtcclxuICAgIHZhciB0cmFuc2Zvcm1EYXRhID0gZnVuY3Rpb24gKGRhdGFJbikge1xyXG4gICAgICAgIHJldHVybiAocGx1Z2luRm91bmQgPT09IG51bGwgfHwgcGx1Z2luRm91bmQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBsdWdpbkZvdW5kLnNlcmlhbGl6ZSkgPyBwbHVnaW5Gb3VuZC5zZXJpYWxpemUoZGF0YUluKSA6IGRhdGFJbjtcclxuICAgIH07XHJcbiAgICB2YXIgZGF0YUkxOG4gPSBjLmRhdGFJMThuXHJcbiAgICAgICAgPyBPYmplY3Qua2V5cyhjLmRhdGFJMThuKS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgbGFuZykge1xyXG4gICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgIHZhciBfYjtcclxuICAgICAgICAgICAgcmV0dXJuIChfX2Fzc2lnbihfX2Fzc2lnbih7fSwgYWNjKSwgKF9hID0ge30sIF9hW2xhbmddID0gdHJhbnNmb3JtRGF0YSgoX2IgPSBjLmRhdGFJMThuKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2JbbGFuZ10pLCBfYSkpKTtcclxuICAgICAgICB9LCB7fSlcclxuICAgICAgICA6IG51bGw7XHJcbiAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIGMpLCB7IHJvd3M6IChfYSA9IGMucm93cykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1hcChmdW5jdGlvbiAocikgeyByZXR1cm4gc2VyaWFsaXplUm93KHIsIGNlbGxQbHVnaW5zKTsgfSksIGRhdGFJMThuOiBkYXRhSTE4biB9KTtcclxufTtcclxuZXhwb3J0IHZhciBzZXJpYWx6ZVZhbHVlID0gZnVuY3Rpb24gKF9hLCBwbHVnaW5zKSB7XHJcbiAgICB2YXIgcm93cyA9IF9hLnJvd3MsIHJlc3QgPSBfX3Jlc3QoX2EsIFtcInJvd3NcIl0pO1xyXG4gICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCByZXN0KSwgeyByb3dzOiByb3dzLm1hcChmdW5jdGlvbiAoYykgeyByZXR1cm4gc2VyaWFsaXplUm93KGMsIHBsdWdpbnMpOyB9KSB9KTtcclxufTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2VyaWFsemVWYWx1ZS5qcy5tYXAiLCJ2YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXHJcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn07XHJcbnZhciBfYTtcclxuaW1wb3J0IHsgaXNSb3cgfSBmcm9tICcuLi8uLi90eXBlcyc7XHJcbmltcG9ydCBkZWVwRXF1YWxzIGZyb20gJy4uLy4uL3V0aWxzL2RlZXBFcXVhbHMnO1xyXG5pbXBvcnQgbG9nZ2VyIGZyb20gJy4uL2xvZ2dlcic7XHJcbi8qKlxyXG4gKiBOTyAoTm9uZSk6IE5vIGRyb3Agem9uZS5cclxuICpcclxuICogQ29ybmVycyBhcmUgY291bnRlZCBjbG9ja3dpc2UsIGJlZ2lubmluZyB0b3AgbGVmdFxyXG4gKiBDMSAoQ29ybmVyIHRvcCBsZWZ0KTogUG9zaXRpb24gZGVjaWRlZCBieSB0b3AgbGVmdCBjb3JuZXIgZnVuY3Rpb25cclxuICogQzIgKENvcm5lciB0b3AgcmlnaHQpOiBQb3NpdGlvbiBkZWNpZGVkIGJ5IHRvcCByaWdodCBjb3JuZXIgZnVuY3Rpb25cclxuICogQzMgKENvcm5lciBib3R0b20gcmlnaHQpOiBQb3NpdGlvbiBkZWNpZGVkIGJ5IGJvdHRvbSByaWdodCBjb3JuZXIgZnVuY3Rpb25cclxuICogQzQgKENvcm5lciBib3R0b20gbGVmdCk6IFBvc2l0aW9uIGRlY2lkZWQgYnkgYm90dG9tIGxlZnQgY29ybmVyIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEFib3ZlOlxyXG4gKiBBSCAoQWJvdmUgaGVyZSk6IGFib3ZlLCBzYW1lIGxldmVsXHJcbiAqIEFBIChBYm92ZSBvZiBzZWxmIG9yIHNvbWUgYW5jZXN0b3IpOiBBYm92ZSwgY29tcHV0ZSBhY3RpdmUgbGV2ZWwgdXNpbmcgY2xhc3NpZmljYXRpb24gZnVuY3Rpb25zLCBlLmcuIGxvZywgc2luLCBteCArIHRcclxuICpcclxuICogQmVsb3c6XHJcbiAqIEJIIChCZWxvdyBoZXJlKVxyXG4gKiBCQSAoQmVsb3cgb2Ygc2VsZiBvciBzb21lIGFuY2VzdG9yKVxyXG4gKlxyXG4gKiBMZWZ0IG9mOlxyXG4gKiBMSCAoTGVmdCBvZiBoZXJlKVxyXG4gKiBMQSAoTGVmdCBvZiBzZWxmIG9yIHNvbWUgYW5jZXN0b3IpXHJcbiAqXHJcbiAqIFJpZ2h0IG9mOlxyXG4gKiBSSCAoUmlnaHQgb2YgaGVyZSlcclxuICogUkEgKFJpZ2h0IG9mIHNlbGYgb3Igc29tZSBhbmNlc3RvcilcclxuICpcclxuICogSW5zaWRlIC8gaW5saW5lXHJcbiAqIElMIChJbmxpbmUgbGVmdClcclxuICogSVIgKElubGluZSByaWdodClcclxuICovXHJcbmV4cG9ydCB2YXIgY2xhc3NlcyA9IHtcclxuICAgIE5POiAwLFxyXG4gICAgQzE6IDEwLFxyXG4gICAgQzI6IDExLFxyXG4gICAgQzM6IDEyLFxyXG4gICAgQzQ6IDEzLFxyXG4gICAgQUg6IDIwMCxcclxuICAgIEFBOiAyMDEsXHJcbiAgICBCSDogMjEwLFxyXG4gICAgQkE6IDIxMSxcclxuICAgIExIOiAyMjAsXHJcbiAgICBMQTogMjIxLFxyXG4gICAgUkg6IDIzMCxcclxuICAgIFJBOiAyMzEsXHJcbiAgICBJTDogMzAwLFxyXG4gICAgSVI6IDMwMSxcclxufTtcclxudmFyIGMgPSBjbGFzc2VzO1xyXG4vKipcclxuICogQSBsaXN0IG9mIG1hdHJpY2VzIHRoYXQgYXJlIHVzZWQgdG8gZGVmaW5lIHRoZSBjYWxsYmFjayBmdW5jdGlvbi5cclxuICpcclxuICogQHR5cGUge3sxMHgxMDogKltdLCAxMHgxMC1uby1pbmxpbmU6ICpbXX19XHJcbiAqL1xyXG52YXIgTUFUUklYX0xJU1QgPSB7XHJcbiAgICAnMTB4MTAnOiBbXHJcbiAgICAgICAgW2MuQzEsIGMuQUEsIGMuQUEsIGMuQUEsIGMuQUEsIGMuQUEsIGMuQUEsIGMuQUEsIGMuQUEsIGMuQzJdLFxyXG4gICAgICAgIFtjLkxBLCBjLklMLCBjLklMLCBjLklMLCBjLkFILCBjLkFILCBjLklSLCBjLklSLCBjLklSLCBjLlJBXSxcclxuICAgICAgICBbYy5MQSwgYy5JTCwgYy5JTCwgYy5JTCwgYy5BSCwgYy5BSCwgYy5JUiwgYy5JUiwgYy5JUiwgYy5SQV0sXHJcbiAgICAgICAgW2MuTEEsIGMuSUwsIGMuSUwsIGMuSUwsIGMuQUgsIGMuQUgsIGMuSVIsIGMuSVIsIGMuSVIsIGMuUkFdLFxyXG4gICAgICAgIFtjLkxBLCBjLkxILCBjLkxILCBjLkxILCBjLkMxLCBjLkMyLCBjLlJILCBjLlJILCBjLlJILCBjLlJBXSxcclxuICAgICAgICBbYy5MQSwgYy5MSCwgYy5MSCwgYy5MSCwgYy5DNCwgYy5DMywgYy5SSCwgYy5SSCwgYy5SSCwgYy5SQV0sXHJcbiAgICAgICAgW2MuTEEsIGMuTEgsIGMuTEgsIGMuQzQsIGMuQkgsIGMuQkgsIGMuQzMsIGMuSVIsIGMuUkgsIGMuUkFdLFxyXG4gICAgICAgIFtjLkxBLCBjLkxILCBjLkM0LCBjLkJILCBjLkJILCBjLkJILCBjLkJILCBjLkMzLCBjLlJILCBjLlJBXSxcclxuICAgICAgICBbYy5MQSwgYy5DNCwgYy5CSCwgYy5CSCwgYy5CSCwgYy5CSCwgYy5CSCwgYy5CSCwgYy5DMywgYy5SQV0sXHJcbiAgICAgICAgW2MuQzQsIGMuQkEsIGMuQkEsIGMuQkEsIGMuQkEsIGMuQkEsIGMuQkEsIGMuQkEsIGMuQkEsIGMuQzNdLFxyXG4gICAgXSxcclxuICAgICcxMHgxMC1uby1pbmxpbmUnOiBbXHJcbiAgICAgICAgW2MuQzEsIGMuQUEsIGMuQUEsIGMuQUEsIGMuQUEsIGMuQUEsIGMuQUEsIGMuQUEsIGMuQUEsIGMuQzJdLFxyXG4gICAgICAgIFtjLkxBLCBjLkMxLCBjLkFILCBjLkFILCBjLkFILCBjLkFILCBjLkFILCBjLkFILCBjLkMyLCBjLlJBXSxcclxuICAgICAgICBbYy5MQSwgYy5MSCwgYy5DMSwgYy5BSCwgYy5BSCwgYy5BSCwgYy5BSCwgYy5DMiwgYy5SSCwgYy5SQV0sXHJcbiAgICAgICAgW2MuTEEsIGMuTEgsIGMuTEgsIGMuQzEsIGMuQUgsIGMuQUgsIGMuQzIsIGMuUkgsIGMuUkgsIGMuUkFdLFxyXG4gICAgICAgIFtjLkxBLCBjLkxILCBjLkxILCBjLkxILCBjLkMxLCBjLkMyLCBjLlJILCBjLlJILCBjLlJILCBjLlJBXSxcclxuICAgICAgICBbYy5MQSwgYy5MSCwgYy5MSCwgYy5MSCwgYy5DNCwgYy5DMywgYy5SSCwgYy5SSCwgYy5SSCwgYy5SQV0sXHJcbiAgICAgICAgW2MuTEEsIGMuTEgsIGMuTEgsIGMuQzQsIGMuQkgsIGMuQkgsIGMuQzMsIGMuUkgsIGMuUkgsIGMuUkFdLFxyXG4gICAgICAgIFtjLkxBLCBjLkxILCBjLkM0LCBjLkJILCBjLkJILCBjLkJILCBjLkJILCBjLkMzLCBjLlJILCBjLlJBXSxcclxuICAgICAgICBbYy5MQSwgYy5DNCwgYy5CSCwgYy5CSCwgYy5CSCwgYy5CSCwgYy5CSCwgYy5CSCwgYy5DMywgYy5SQV0sXHJcbiAgICAgICAgW2MuQzQsIGMuQkEsIGMuQkEsIGMuQkEsIGMuQkEsIGMuQkEsIGMuQkEsIGMuQkEsIGMuQkEsIGMuQzNdLFxyXG4gICAgXSxcclxufTtcclxuLyoqXHJcbiAqIENvbXB1dGVzIHRoZSBhdmVyYWdlIHdpZHRoIGFuZCBoZWlnaHQgZm9yIGNlbGxzIGluIGEgcm9vbS5cclxuICpcclxuICogQHBhcmFtIHJvb21cclxuICogQHBhcmFtIG1hdHJpeFxyXG4gKiBAcmV0dXJucyB7e3g6IG51bWJlciwgeTogbnVtYmVyfX1cclxuICovXHJcbnZhciBnZXRSb29tU2NhbGUgPSBmdW5jdGlvbiAoX2EpIHtcclxuICAgIHZhciByb29tID0gX2Eucm9vbSwgbWF0cml4ID0gX2EubWF0cml4O1xyXG4gICAgdmFyIHJvd3MgPSBtYXRyaXgubGVuZ3RoO1xyXG4gICAgdmFyIGNlbGxzID0gbWF0cml4WzBdLmxlbmd0aDtcclxuICAgIHZhciBzY2FsaW5nWCA9IHJvb20ud2lkdGggLyBjZWxscztcclxuICAgIHZhciBzY2FsaW5nWSA9IHJvb20uaGVpZ2h0IC8gcm93cztcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgeDogc2NhbGluZ1gsXHJcbiAgICAgICAgeTogc2NhbGluZ1ksXHJcbiAgICB9O1xyXG59O1xyXG4vKipcclxuICogUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGhvdmVyIGNlbGwuXHJcbiAqXHJcbiAqIEBwYXJhbSBtb3VzZVxyXG4gKiBAcGFyYW0gc2NhbGVcclxuICovXHJcbnZhciBnZXRNb3VzZUhvdmVyQ2VsbCA9IGZ1bmN0aW9uIChfYSkge1xyXG4gICAgdmFyIG1vdXNlID0gX2EubW91c2UsIHNjYWxlID0gX2Euc2NhbGU7XHJcbiAgICByZXR1cm4gKHtcclxuICAgICAgICBjZWxsOiBNYXRoLmZsb29yKG1vdXNlLnggLyBzY2FsZS54KSxcclxuICAgICAgICByb3c6IE1hdGguZmxvb3IobW91c2UueSAvIHNjYWxlLnkpLFxyXG4gICAgfSk7XHJcbn07XHJcbi8qKlxyXG4gKiBVc2VkIGZvciBjYWNoaW5nLlxyXG4gKi9cclxudmFyIGxhc3QgPSB7ICcxMHgxMCc6IG51bGwsICcxMHgxMC1uby1pbmxpbmUnOiBudWxsIH07XHJcbmV4cG9ydCB2YXIgY29tcHV0ZUhvdmVyID0gZnVuY3Rpb24gKGRyYWcsIGhvdmVyLCBhY3Rpb25zLCBfYSkge1xyXG4gICAgdmFyIF9iLCBfYztcclxuICAgIHZhciByb29tID0gX2Eucm9vbSwgbW91c2UgPSBfYS5tb3VzZSwgY2VsbFBsdWdpbnMgPSBfYS5jZWxsUGx1Z2lucztcclxuICAgIHZhciBhbGxvd0lubGluZU5laWdoYm91cnMgPSAoX2MgPSAoX2IgPSBjZWxsUGx1Z2lucy5maW5kKGZ1bmN0aW9uIChwKSB7IHJldHVybiBwLmlkID09PSBob3Zlci5wbHVnaW5JZDsgfSkpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5hbGxvd0lubGluZU5laWdoYm91cnMpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IGZhbHNlO1xyXG4gICAgdmFyIG1hdHJpeE5hbWUgPSBcIjEweDEwXCIgKyAoYWxsb3dJbmxpbmVOZWlnaGJvdXJzID8gJycgOiAnLW5vLWlubGluZScpO1xyXG4gICAgdmFyIG1hdHJpeCA9IE1BVFJJWF9MSVNUW21hdHJpeE5hbWVdO1xyXG4gICAgdmFyIHNjYWxlID0gZ2V0Um9vbVNjYWxlKHsgcm9vbTogcm9vbSwgbWF0cml4OiBtYXRyaXggfSk7XHJcbiAgICB2YXIgaG92ZXJDZWxsID0gZ2V0TW91c2VIb3ZlckNlbGwoeyBtb3VzZTogbW91c2UsIHNjYWxlOiBzY2FsZSB9KTtcclxuICAgIHZhciByb3dzID0gbWF0cml4Lmxlbmd0aDtcclxuICAgIHZhciBjZWxscyA9IG1hdHJpeFswXS5sZW5ndGg7XHJcbiAgICBpZiAoaG92ZXJDZWxsLnJvdyA+PSByb3dzKSB7XHJcbiAgICAgICAgaG92ZXJDZWxsLnJvdyA9IHJvd3MgLSAxO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaG92ZXJDZWxsLnJvdyA8IDApIHtcclxuICAgICAgICBob3ZlckNlbGwucm93ID0gMDtcclxuICAgIH1cclxuICAgIGlmIChob3ZlckNlbGwuY2VsbCA+PSBjZWxscykge1xyXG4gICAgICAgIGhvdmVyQ2VsbC5jZWxsID0gY2VsbHMgLSAxO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaG92ZXJDZWxsLmNlbGwgPCAwKSB7XHJcbiAgICAgICAgaG92ZXJDZWxsLmNlbGwgPSAwO1xyXG4gICAgfVxyXG4gICAgdmFyIGNlbGwgPSBtYXRyaXhbaG92ZXJDZWxsLnJvd11baG92ZXJDZWxsLmNlbGxdO1xyXG4gICAgaWYgKCFDQUxMQkFDS19MSVNUW2NlbGxdKSB7XHJcbiAgICAgICAgbG9nZ2VyLmVycm9yKCdNYXRyaXggY2FsbGJhY2sgbm90IGZvdW5kLicsIHtcclxuICAgICAgICAgICAgcm9vbTogcm9vbSxcclxuICAgICAgICAgICAgbW91c2U6IG1vdXNlLFxyXG4gICAgICAgICAgICBtYXRyaXg6IG1hdHJpeCxcclxuICAgICAgICAgICAgc2NhbGU6IHNjYWxlLFxyXG4gICAgICAgICAgICBob3ZlckNlbGw6IGhvdmVyQ2VsbCxcclxuICAgICAgICAgICAgcm93czogcm93cyxcclxuICAgICAgICAgICAgY2VsbHM6IGNlbGxzLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciBhbGwgPSB7XHJcbiAgICAgICAgaXRlbTogZHJhZy5pZCxcclxuICAgICAgICBob3ZlcjogaG92ZXIuaWQsXHJcbiAgICAgICAgYWN0aW9uczogYWN0aW9ucyxcclxuICAgICAgICBjdHg6IHtcclxuICAgICAgICAgICAgcm9vbTogcm9vbSxcclxuICAgICAgICAgICAgbW91c2U6IG1vdXNlLFxyXG4gICAgICAgICAgICBwb3NpdGlvbjogaG92ZXJDZWxsLFxyXG4gICAgICAgICAgICBzaXplOiB7IHJvd3M6IHJvd3MsIGNlbGxzOiBjZWxscyB9LFxyXG4gICAgICAgICAgICBzY2FsZTogc2NhbGUsXHJcbiAgICAgICAgfSxcclxuICAgIH07XHJcbiAgICBpZiAoZGVlcEVxdWFscyhhbGwsIGxhc3RbbWF0cml4TmFtZV0pKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGFzdFttYXRyaXhOYW1lXSA9IGFsbDtcclxuICAgIHJldHVybiBDQUxMQkFDS19MSVNUW2NlbGxdKGRyYWcsIGhvdmVyLCBhY3Rpb25zLCB7XHJcbiAgICAgICAgcm9vbTogcm9vbSxcclxuICAgICAgICBtb3VzZTogbW91c2UsXHJcbiAgICAgICAgcG9zaXRpb246IGhvdmVyQ2VsbCxcclxuICAgICAgICBzaXplOiB7IHJvd3M6IHJvd3MsIGNlbGxzOiBjZWxscyB9LFxyXG4gICAgICAgIGNlbGxQbHVnaW5zOiBjZWxsUGx1Z2lucyxcclxuICAgICAgICBzY2FsZTogc2NhbGUsXHJcbiAgICB9KTtcclxufTtcclxuLyoqXHJcbiAqIFJldHVybiB0aGUgbW91c2UgcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIGNlbGwuXHJcbiAqL1xyXG52YXIgcmVsYXRpdmVNb3VzZVBvc2l0aW9uID0gZnVuY3Rpb24gKF9hKSB7XHJcbiAgICB2YXIgbW91c2UgPSBfYS5tb3VzZSwgcG9zaXRpb24gPSBfYS5wb3NpdGlvbiwgc2NhbGUgPSBfYS5zY2FsZTtcclxuICAgIHJldHVybiAoe1xyXG4gICAgICAgIHg6IE1hdGgucm91bmQobW91c2UueCAtIHBvc2l0aW9uLmNlbGwgKiBzY2FsZS54KSxcclxuICAgICAgICB5OiBNYXRoLnJvdW5kKG1vdXNlLnkgLSBwb3NpdGlvbi5yb3cgKiBzY2FsZS55KSxcclxuICAgIH0pO1xyXG59O1xyXG4vKipcclxuICogQ29tcHV0ZXMgdGhlIGRyb3AgbGV2ZWwgYmFzZWQgb24gdGhlIG1vdXNlIHBvc2l0aW9uIGFuZCB0aGUgY2VsbCB3aWR0aC5cclxuICovXHJcbmV4cG9ydCB2YXIgY29tcHV0ZUxldmVsID0gZnVuY3Rpb24gKF9hKSB7XHJcbiAgICB2YXIgc2l6ZSA9IF9hLnNpemUsIGxldmVscyA9IF9hLmxldmVscywgcG9zaXRpb24gPSBfYS5wb3NpdGlvbjtcclxuICAgIGlmIChzaXplIDw9IChsZXZlbHMgKyAxKSAqIDIpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChwb3NpdGlvbiAvIChzaXplIC8gbGV2ZWxzKSk7XHJcbiAgICB9XHJcbiAgICB2YXIgc3BhcmUgPSBzaXplIC0gKGxldmVscyArIDEpICogMjtcclxuICAgIHZhciBzdGVwcyA9IFswXTtcclxuICAgIHZhciBjdXJyZW50ID0gc3BhcmU7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8PSBsZXZlbHM7IGkrKykge1xyXG4gICAgICAgIHN0ZXBzLnB1c2goc3RlcHNbaV0gKyBjdXJyZW50IC8gMik7XHJcbiAgICAgICAgY3VycmVudCAvPSAyO1xyXG4gICAgICAgIGlmIChwb3NpdGlvbiA+PSBzdGVwc1tpXSArIGkgKiAyICYmIHBvc2l0aW9uIDwgc3RlcHNbaSArIDFdICsgKGkgKyAxKSAqIDIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGxldmVscztcclxufTtcclxuLyoqXHJcbiAqIENvbXB1dGVzIHRoZSBob3Jpem9udGFsIGRyb3AgbGV2ZWwgYmFzZWQgb24gdGhlIG1vdXNlIHBvc2l0aW9uLlxyXG4gKlxyXG4gKiBAcGFyYW0gbW91c2VcclxuICogQHBhcmFtIHBvc2l0aW9uXHJcbiAqIEBwYXJhbSBob3ZlclxyXG4gKiBAcGFyYW0gc2NhbGVcclxuICogQHBhcmFtIGxldmVsXHJcbiAqIEBwYXJhbSBpbnYgcmV0dXJucyB0aGUgaW52ZXJzZSBkcm9wIGxldmVsLiBVc3VhbGx5IHRydWUgZm9yIGxlZnQgYW5kIGFib3ZlIGRyb3AgbGV2ZWwgY29tcHV0YXRpb24uXHJcbiAqIEByZXR1cm5zIG51bWJlclxyXG4gKi9cclxudmFyIGNvbXB1dGVIb3Jpem9udGFsID0gZnVuY3Rpb24gKF9hLCBpbnYpIHtcclxuICAgIHZhciBtb3VzZSA9IF9hLm1vdXNlLCBwb3NpdGlvbiA9IF9hLnBvc2l0aW9uLCBob3ZlciA9IF9hLmhvdmVyLCBzY2FsZSA9IF9hLnNjYWxlLCBsZXZlbCA9IF9hLmxldmVsO1xyXG4gICAgaWYgKGludiA9PT0gdm9pZCAwKSB7IGludiA9IGZhbHNlOyB9XHJcbiAgICB2YXIgeCA9IHJlbGF0aXZlTW91c2VQb3NpdGlvbih7IG1vdXNlOiBtb3VzZSwgcG9zaXRpb246IHBvc2l0aW9uLCBzY2FsZTogc2NhbGUgfSkueDtcclxuICAgIHZhciBhdCA9IGNvbXB1dGVMZXZlbCh7IHNpemU6IHNjYWxlLngsIHBvc2l0aW9uOiB4LCBsZXZlbHM6IGxldmVsIH0pO1xyXG4gICAgaWYgKGlzUm93KGhvdmVyKSkge1xyXG4gICAgICAgIC8vIElzIHJvdywgYWx3YXlzIG9wdCBmb3IgbG93ZXN0IGxldmVsXHJcbiAgICAgICAgcmV0dXJuIGxldmVsO1xyXG4gICAgfVxyXG4gICAgLy8gSWYgdGhlIGhvdmVyZWQgZWxlbWVudCBpcyBhbiBpbmxpbmUgZWxlbWVudCwgbGV2ZWwgMCB3b3VsZCBiZSBkaXJlY3RseSBiZXNpZGVzIGl0IHdoaWNoIGRvZXNuJ3Qgd29yay5cclxuICAgIC8vIFNldCBpdCB0byAxIGluc3RlYWQuXHJcbiAgICBpZiAoaG92ZXIuaW5saW5lICYmIGF0ID09PSAwKSB7XHJcbiAgICAgICAgYXQgPSAxO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGludiA/IGxldmVsIC0gYXQgOiBhdDtcclxufTtcclxuLyoqXHJcbiAqIENvbXB1dGVzIHRoZSB2ZXJ0aWNhbCBkcm9wIGxldmVsIGJhc2VkIG9uIHRoZSBtb3VzZSBwb3NpdGlvbi5cclxuICpcclxuICogQHJldHVybnMgbnVtYmVyXHJcbiAqL1xyXG52YXIgY29tcHV0ZVZlcnRpY2FsID0gZnVuY3Rpb24gKF9hLCBpbnYpIHtcclxuICAgIHZhciBsZXZlbCA9IF9hLmxldmVsLCBtb3VzZSA9IF9hLm1vdXNlLCBob3ZlciA9IF9hLmhvdmVyLCBwb3NpdGlvbiA9IF9hLnBvc2l0aW9uLCBzY2FsZSA9IF9hLnNjYWxlO1xyXG4gICAgaWYgKGludiA9PT0gdm9pZCAwKSB7IGludiA9IGZhbHNlOyB9XHJcbiAgICB2YXIgeSA9IHJlbGF0aXZlTW91c2VQb3NpdGlvbih7IG1vdXNlOiBtb3VzZSwgcG9zaXRpb246IHBvc2l0aW9uLCBzY2FsZTogc2NhbGUgfSkueTtcclxuICAgIHZhciBhdCA9IGNvbXB1dGVMZXZlbCh7IHNpemU6IHNjYWxlLnksIHBvc2l0aW9uOiB5LCBsZXZlbHM6IGxldmVsIH0pO1xyXG4gICAgaWYgKGlzUm93KGhvdmVyKSkge1xyXG4gICAgICAgIC8vIElzIHJvdywgYWx3YXlzIG9wdCBmb3IgbG93ZXN0IGxldmVsXHJcbiAgICAgICAgcmV0dXJuIGxldmVsO1xyXG4gICAgfVxyXG4gICAgLy8gSWYgdGhlIGhvdmVyZWQgZWxlbWVudCBpcyBhbiBpbmxpbmUgZWxlbWVudCwgbGV2ZWwgMCB3b3VsZCBiZSBkaXJlY3RseSBiZXNpZGVzIGl0IHdoaWNoIGRvZXNuJ3Qgd29yay5cclxuICAgIC8vIFNldCBpdCB0byAxIGluc3RlYWQuXHJcbiAgICBpZiAoaG92ZXIuaW5saW5lICYmIGF0ID09PSAwKSB7XHJcbiAgICAgICAgYXQgPSAxO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGludiA/IGxldmVsIC0gYXQgOiBhdDtcclxufTtcclxudmFyIGdldERyb3BMZXZlbCA9IGZ1bmN0aW9uIChob3Zlcikge1xyXG4gICAgcmV0dXJuICFpc1Jvdyhob3ZlcikgJiYgaG92ZXIuaW5saW5lID8gMSA6IDA7XHJcbn07XHJcbi8qKlxyXG4gKiBBIGxpc3Qgb2YgY2FsbGJhY2tzLlxyXG4gKi9cclxuZXhwb3J0IHZhciBDQUxMQkFDS19MSVNUID0gKF9hID0ge30sXHJcbiAgICBfYVtjLk5PXSA9IGZ1bmN0aW9uIChpdGVtLCBob3ZlciwgX2EpIHtcclxuICAgICAgICB2YXIgY2xlYXIgPSBfYS5jbGVhcjtcclxuICAgICAgICByZXR1cm4gY2xlYXIoKTtcclxuICAgIH0sXHJcbiAgICAvKiBjb3JuZXJzICovXHJcbiAgICBfYVtjLkMxXSA9IGZ1bmN0aW9uIChpdGVtLCBob3ZlciwgX2EsIGN0eCkge1xyXG4gICAgICAgIHZhciBsZWZ0T2YgPSBfYS5sZWZ0T2YsIGFib3ZlID0gX2EuYWJvdmU7XHJcbiAgICAgICAgdmFyIG1vdXNlID0gcmVsYXRpdmVNb3VzZVBvc2l0aW9uKGN0eCk7XHJcbiAgICAgICAgdmFyIGxldmVsID0gZ2V0RHJvcExldmVsKGhvdmVyKTtcclxuICAgICAgICBpZiAobW91c2UueCA8IG1vdXNlLnkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGxlZnRPZihpdGVtLCBob3ZlciwgeyBsZXZlbDogbGV2ZWwgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFib3ZlKGl0ZW0sIGhvdmVyLCB7IGxldmVsOiBsZXZlbCB9KTtcclxuICAgIH0sXHJcbiAgICBfYVtjLkMyXSA9IGZ1bmN0aW9uIChpdGVtLCBob3ZlciwgX2EsIGN0eCkge1xyXG4gICAgICAgIHZhciByaWdodE9mID0gX2EucmlnaHRPZiwgYWJvdmUgPSBfYS5hYm92ZTtcclxuICAgICAgICB2YXIgbW91c2UgPSByZWxhdGl2ZU1vdXNlUG9zaXRpb24oY3R4KTtcclxuICAgICAgICB2YXIgbGV2ZWwgPSBnZXREcm9wTGV2ZWwoaG92ZXIpO1xyXG4gICAgICAgIGlmIChtb3VzZS54ID4gbW91c2UueSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmlnaHRPZihpdGVtLCBob3ZlciwgeyBsZXZlbDogbGV2ZWwgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFib3ZlKGl0ZW0sIGhvdmVyLCB7IGxldmVsOiBsZXZlbCB9KTtcclxuICAgIH0sXHJcbiAgICBfYVtjLkMzXSA9IGZ1bmN0aW9uIChpdGVtLCBob3ZlciwgX2EsIGN0eCkge1xyXG4gICAgICAgIHZhciByaWdodE9mID0gX2EucmlnaHRPZiwgYmVsb3cgPSBfYS5iZWxvdztcclxuICAgICAgICB2YXIgbW91c2UgPSByZWxhdGl2ZU1vdXNlUG9zaXRpb24oY3R4KTtcclxuICAgICAgICB2YXIgbGV2ZWwgPSBnZXREcm9wTGV2ZWwoaG92ZXIpO1xyXG4gICAgICAgIGlmIChtb3VzZS54ID4gbW91c2UueSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmlnaHRPZihpdGVtLCBob3ZlciwgeyBsZXZlbDogbGV2ZWwgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJlbG93KGl0ZW0sIGhvdmVyLCB7IGxldmVsOiBsZXZlbCB9KTtcclxuICAgIH0sXHJcbiAgICBfYVtjLkM0XSA9IGZ1bmN0aW9uIChpdGVtLCBob3ZlciwgX2EsIGN0eCkge1xyXG4gICAgICAgIHZhciBsZWZ0T2YgPSBfYS5sZWZ0T2YsIGJlbG93ID0gX2EuYmVsb3c7XHJcbiAgICAgICAgdmFyIG1vdXNlID0gcmVsYXRpdmVNb3VzZVBvc2l0aW9uKGN0eCk7XHJcbiAgICAgICAgdmFyIGxldmVsID0gZ2V0RHJvcExldmVsKGhvdmVyKTtcclxuICAgICAgICBpZiAobW91c2UueCA8IG1vdXNlLnkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGxlZnRPZihpdGVtLCBob3ZlciwgeyBsZXZlbDogbGV2ZWwgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJlbG93KGl0ZW0sIGhvdmVyLCB7IGxldmVsOiBsZXZlbCB9KTtcclxuICAgIH0sXHJcbiAgICAvKiBoZXJlcyAqL1xyXG4gICAgX2FbYy5BSF0gPSBmdW5jdGlvbiAoaXRlbSwgaG92ZXIsIF9hKSB7XHJcbiAgICAgICAgdmFyIGFib3ZlID0gX2EuYWJvdmU7XHJcbiAgICAgICAgdmFyIGxldmVsID0gZ2V0RHJvcExldmVsKGhvdmVyKTtcclxuICAgICAgICBhYm92ZShpdGVtLCBob3ZlciwgeyBsZXZlbDogbGV2ZWwgfSk7XHJcbiAgICB9LFxyXG4gICAgX2FbYy5CSF0gPSBmdW5jdGlvbiAoaXRlbSwgaG92ZXIsIF9hKSB7XHJcbiAgICAgICAgdmFyIGJlbG93ID0gX2EuYmVsb3c7XHJcbiAgICAgICAgdmFyIGxldmVsID0gZ2V0RHJvcExldmVsKGhvdmVyKTtcclxuICAgICAgICBiZWxvdyhpdGVtLCBob3ZlciwgeyBsZXZlbDogbGV2ZWwgfSk7XHJcbiAgICB9LFxyXG4gICAgX2FbYy5MSF0gPSBmdW5jdGlvbiAoaXRlbSwgaG92ZXIsIF9hKSB7XHJcbiAgICAgICAgdmFyIGxlZnRPZiA9IF9hLmxlZnRPZjtcclxuICAgICAgICB2YXIgbGV2ZWwgPSBnZXREcm9wTGV2ZWwoaG92ZXIpO1xyXG4gICAgICAgIGxlZnRPZihpdGVtLCBob3ZlciwgeyBsZXZlbDogbGV2ZWwgfSk7XHJcbiAgICB9LFxyXG4gICAgX2FbYy5SSF0gPSBmdW5jdGlvbiAoaXRlbSwgaG92ZXIsIF9hKSB7XHJcbiAgICAgICAgdmFyIHJpZ2h0T2YgPSBfYS5yaWdodE9mO1xyXG4gICAgICAgIHZhciBsZXZlbCA9IGdldERyb3BMZXZlbChob3Zlcik7XHJcbiAgICAgICAgcmlnaHRPZihpdGVtLCBob3ZlciwgeyBsZXZlbDogbGV2ZWwgfSk7XHJcbiAgICB9LFxyXG4gICAgLyogYW5jZXN0b3JzICovXHJcbiAgICBfYVtjLkFBXSA9IGZ1bmN0aW9uIChpdGVtLCBob3ZlciwgX2EsIGN0eCkge1xyXG4gICAgICAgIHZhciBhYm92ZSA9IF9hLmFib3ZlO1xyXG4gICAgICAgIHJldHVybiBhYm92ZShpdGVtLCBob3Zlciwge1xyXG4gICAgICAgICAgICBsZXZlbDogY29tcHV0ZVZlcnRpY2FsKF9fYXNzaWduKF9fYXNzaWduKHt9LCBjdHgpLCB7IGhvdmVyOiBob3ZlciwgbGV2ZWw6IGhvdmVyLmxldmVscy5hYm92ZSB9KSwgdHJ1ZSksXHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgX2FbYy5CQV0gPSBmdW5jdGlvbiAoaXRlbSwgaG92ZXIsIF9hLCBjdHgpIHtcclxuICAgICAgICB2YXIgYmVsb3cgPSBfYS5iZWxvdztcclxuICAgICAgICByZXR1cm4gYmVsb3coaXRlbSwgaG92ZXIsIHtcclxuICAgICAgICAgICAgbGV2ZWw6IGNvbXB1dGVWZXJ0aWNhbChfX2Fzc2lnbihfX2Fzc2lnbih7fSwgY3R4KSwgeyBob3ZlcjogaG92ZXIsIGxldmVsOiBob3Zlci5sZXZlbHMuYmVsb3cgfSkpLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIF9hW2MuTEFdID0gZnVuY3Rpb24gKGl0ZW0sIGhvdmVyLCBfYSwgY3R4KSB7XHJcbiAgICAgICAgdmFyIGxlZnRPZiA9IF9hLmxlZnRPZjtcclxuICAgICAgICByZXR1cm4gbGVmdE9mKGl0ZW0sIGhvdmVyLCB7XHJcbiAgICAgICAgICAgIGxldmVsOiBjb21wdXRlSG9yaXpvbnRhbChfX2Fzc2lnbihfX2Fzc2lnbih7fSwgY3R4KSwgeyBob3ZlcjogaG92ZXIsIGxldmVsOiBob3Zlci5sZXZlbHMubGVmdCB9KSwgdHJ1ZSksXHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgX2FbYy5SQV0gPSBmdW5jdGlvbiAoaXRlbSwgaG92ZXIsIF9hLCBjdHgpIHtcclxuICAgICAgICB2YXIgcmlnaHRPZiA9IF9hLnJpZ2h0T2Y7XHJcbiAgICAgICAgcmV0dXJuIHJpZ2h0T2YoaXRlbSwgaG92ZXIsIHtcclxuICAgICAgICAgICAgbGV2ZWw6IGNvbXB1dGVIb3Jpem9udGFsKF9fYXNzaWduKF9fYXNzaWduKHt9LCBjdHgpLCB7IGhvdmVyOiBob3ZlciwgbGV2ZWw6IGhvdmVyLmxldmVscy5yaWdodCB9KSksXHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgLyogaW5saW5lICovXHJcbiAgICBfYVtjLklMXSA9IGZ1bmN0aW9uIChpdGVtLCBob3ZlciwgX2EsIF9iKSB7XHJcbiAgICAgICAgdmFyIF9jO1xyXG4gICAgICAgIHZhciBpbmxpbmVMZWZ0ID0gX2EuaW5saW5lTGVmdCwgbGVmdE9mID0gX2EubGVmdE9mO1xyXG4gICAgICAgIHZhciBjZWxsUGx1Z2lucyA9IF9iLmNlbGxQbHVnaW5zO1xyXG4gICAgICAgIGlmIChpc1JvdyhpdGVtKSB8fCBpc1Jvdyhob3ZlcikpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgaW5saW5lID0gaG92ZXIuaW5saW5lLCBoYXNJbmxpbmVOZWlnaGJvdXIgPSBob3Zlci5oYXNJbmxpbmVOZWlnaGJvdXI7XHJcbiAgICAgICAgdmFyIHBsdWdpbiA9IGNlbGxQbHVnaW5zLmZpbmQoZnVuY3Rpb24gKHApIHtcclxuICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICByZXR1cm4gcC5pZCA9PT1cclxuICAgICAgICAgICAgICAgICh0eXBlb2YgaXRlbS5wbHVnaW4gPT09ICdzdHJpbmcnID8gaXRlbS5wbHVnaW4gOiAoX2EgPSBpdGVtLnBsdWdpbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmlkKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgaXNJbmxpbmVhYmxlID0gKF9jID0gcGx1Z2luID09PSBudWxsIHx8IHBsdWdpbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGx1Z2luLmlzSW5saW5lYWJsZSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogZmFsc2U7XHJcbiAgICAgICAgaWYgKGlubGluZSB8fCAhaXNJbmxpbmVhYmxlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBsZWZ0T2YoaXRlbSwgaG92ZXIsIHsgbGV2ZWw6IDIgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChoYXNJbmxpbmVOZWlnaGJvdXIgJiYgaGFzSW5saW5lTmVpZ2hib3VyICE9PSBpdGVtLmlkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBsZWZ0T2YoaXRlbSwgaG92ZXIsIHsgbGV2ZWw6IDIgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChoYXNJbmxpbmVOZWlnaGJvdXIgJiZcclxuICAgICAgICAgICAgaGFzSW5saW5lTmVpZ2hib3VyID09PSBpdGVtLmlkICYmXHJcbiAgICAgICAgICAgIGl0ZW0uaW5saW5lID09PSAnbGVmdCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGxlZnRPZihpdGVtLCBob3ZlciwgeyBsZXZlbDogMiB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW5saW5lTGVmdChpdGVtLCBob3Zlcik7XHJcbiAgICB9LFxyXG4gICAgX2FbYy5JUl0gPSBmdW5jdGlvbiAoaXRlbSwgaG92ZXIsIF9hLCBfYikge1xyXG4gICAgICAgIHZhciBfYztcclxuICAgICAgICB2YXIgaW5saW5lUmlnaHQgPSBfYS5pbmxpbmVSaWdodCwgcmlnaHRPZiA9IF9hLnJpZ2h0T2Y7XHJcbiAgICAgICAgdmFyIGNlbGxQbHVnaW5zID0gX2IuY2VsbFBsdWdpbnM7XHJcbiAgICAgICAgaWYgKGlzUm93KGl0ZW0pIHx8IGlzUm93KGhvdmVyKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBpbmxpbmUgPSBob3Zlci5pbmxpbmUsIGhhc0lubGluZU5laWdoYm91ciA9IGhvdmVyLmhhc0lubGluZU5laWdoYm91cjtcclxuICAgICAgICB2YXIgcGx1Z2luID0gY2VsbFBsdWdpbnMuZmluZChmdW5jdGlvbiAocCkge1xyXG4gICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgIHJldHVybiBwLmlkID09PVxyXG4gICAgICAgICAgICAgICAgKHR5cGVvZiBpdGVtLnBsdWdpbiA9PT0gJ3N0cmluZycgPyBpdGVtLnBsdWdpbiA6IChfYSA9IGl0ZW0ucGx1Z2luKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBpc0lubGluZWFibGUgPSAoX2MgPSBwbHVnaW4gPT09IG51bGwgfHwgcGx1Z2luID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwbHVnaW4uaXNJbmxpbmVhYmxlKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBmYWxzZTtcclxuICAgICAgICBpZiAoaW5saW5lIHx8ICFpc0lubGluZWFibGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJpZ2h0T2YoaXRlbSwgaG92ZXIsIHsgbGV2ZWw6IDIgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChoYXNJbmxpbmVOZWlnaGJvdXIgJiYgaGFzSW5saW5lTmVpZ2hib3VyICE9PSBpdGVtLmlkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByaWdodE9mKGl0ZW0sIGhvdmVyLCB7IGxldmVsOiAyIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaGFzSW5saW5lTmVpZ2hib3VyICYmXHJcbiAgICAgICAgICAgIGhhc0lubGluZU5laWdoYm91ciA9PT0gaXRlbS5pZCAmJlxyXG4gICAgICAgICAgICBpdGVtLmlubGluZSA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICByZXR1cm4gcmlnaHRPZihpdGVtLCBob3ZlciwgeyBsZXZlbDogMiB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW5saW5lUmlnaHQoaXRlbSwgaG92ZXIpO1xyXG4gICAgfSxcclxuICAgIF9hKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tcHV0ZUhvdmVyLmpzLm1hcCIsImltcG9ydCB7IGNvbXB1dGVIb3ZlciB9IGZyb20gJy4vY29tcHV0ZUhvdmVyJztcclxudmFyIGNvbXB1dGVDdXJyZW50RHJvcFBvc2l0aW9uID0gZnVuY3Rpb24gKGFjdGlvbnMsIGhvdmVyLCBkcmFnLCBtb25pdG9yLCBlbGVtZW50LCBjZWxsUGx1Z2lucykge1xyXG4gICAgdmFyIG1vdXNlUG9zaXRpb24gPSBtb25pdG9yLmdldENsaWVudE9mZnNldCgpO1xyXG4gICAgdmFyIGNvbXBvbmVudFBvc2l0aW9uID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIHZhciByb29tID0ge1xyXG4gICAgICAgIGhlaWdodDogY29tcG9uZW50UG9zaXRpb24uYm90dG9tIC0gY29tcG9uZW50UG9zaXRpb24udG9wLFxyXG4gICAgICAgIHdpZHRoOiBjb21wb25lbnRQb3NpdGlvbi5yaWdodCAtIGNvbXBvbmVudFBvc2l0aW9uLmxlZnQsXHJcbiAgICB9O1xyXG4gICAgdmFyIG1vdXNlID0ge1xyXG4gICAgICAgIHk6IG1vdXNlUG9zaXRpb24ueSAtIGNvbXBvbmVudFBvc2l0aW9uLnRvcCxcclxuICAgICAgICB4OiBtb3VzZVBvc2l0aW9uLnggLSBjb21wb25lbnRQb3NpdGlvbi5sZWZ0LFxyXG4gICAgfTtcclxuICAgIGNvbXB1dGVIb3ZlcihkcmFnLCBob3ZlciwgYWN0aW9ucywge1xyXG4gICAgICAgIHJvb206IHJvb20sXHJcbiAgICAgICAgbW91c2U6IG1vdXNlLFxyXG4gICAgICAgIGNlbGxQbHVnaW5zOiBjZWxsUGx1Z2lucyxcclxuICAgIH0pO1xyXG59O1xyXG5leHBvcnQgdmFyIGNvbXB1dGVBbmREaXNwYXRjaEluc2VydCA9IGZ1bmN0aW9uIChob3ZlciwgZHJhZywgbW9uaXRvciwgZWxlbWVudCwgYWN0aW9ucywgY2VsbFBsdWdpbnMpIHtcclxuICAgIHJldHVybiBjb21wdXRlQ3VycmVudERyb3BQb3NpdGlvbihhY3Rpb25zLCBob3ZlciwgZHJhZywgbW9uaXRvciwgZWxlbWVudCwgY2VsbFBsdWdpbnMpO1xyXG59O1xyXG5leHBvcnQgdmFyIGNvbXB1dGVBbmREaXNwYXRjaEhvdmVyID0gZnVuY3Rpb24gKGhvdmVyLCBkcmFnLCBtb25pdG9yLCBlbGVtZW50LCBhY3Rpb25zLCBjZWxsUGx1Z2lucykge1xyXG4gICAgcmV0dXJuIGNvbXB1dGVDdXJyZW50RHJvcFBvc2l0aW9uKGFjdGlvbnMsIGhvdmVyLCBkcmFnLCBtb25pdG9yLCBlbGVtZW50LCBjZWxsUGx1Z2lucyk7XHJcbn07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlucHV0LmpzLm1hcCIsIi8vIHRzbGludDpkaXNhYmxlOm5vLWNvbnNvbGVcclxudmFyIF9fcmVhZCA9ICh0aGlzICYmIHRoaXMuX19yZWFkKSB8fCBmdW5jdGlvbiAobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59O1xyXG52YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XHJcbiAgICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcclxuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcclxuICAgICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xyXG59O1xyXG52YXIgdHJhY2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZSA9IG5ldyBFcnJvcignZHVtbXknKTtcclxuICAgIHJldHVybiBlLnN0YWNrXHJcbiAgICAgICAgLnJlcGxhY2UoL15bXihdKz9bXFxuJF0vZ20sICcnKVxyXG4gICAgICAgIC5yZXBsYWNlKC9eXFxzK2F0XFxzKy9nbSwgJycpXHJcbiAgICAgICAgLnJlcGxhY2UoL15PYmplY3QuPGFub255bW91cz5cXHMqXFwoL2dtLCAne2Fub255bW91c30oKUAnKVxyXG4gICAgICAgIC5zcGxpdCgnXFxuJyk7XHJcbn07XHJcbnZhciBMb2dnZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBMb2dnZXIoKSB7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIExvZ3MgYSB3YXJuaW5nLiBXYXJuaW5ncyBhcmUgdGhpbmdzIHRoYXQgYXJlIGV4Y2VwdGlvbmFsLCBidXQgZWFzaWx5IHRvIHJlY292ZXIgZnJvbS5cclxuICAgICAqL1xyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgIExvZ2dlci5wcm90b3R5cGUud2FybiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc29sZS53YXJuLmFwcGx5KGNvbnNvbGUsIF9fc3ByZWFkQXJyYXkoWydXYXJuaW5nOiddLCBfX3JlYWQoYXJncyksIGZhbHNlKSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBMb2dzIGEgZGVidWcgbWVzc2FnZS4gRGVidWcgbWVzc2FnZXMgYXJlIHRoaW5ncyB0aGF0IGhlbHAgZGV2ZWxvcGVycyBkZWJ1Z2dpbmcgdGhpbmdzLlxyXG4gICAgICovXHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgTG9nZ2VyLnByb3RvdHlwZS5kZWJ1ZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgX19zcHJlYWRBcnJheShbJ0RlYnVnOiddLCBfX3JlYWQoYXJncyksIGZhbHNlKSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBMb2dzIGFuIGluZm8uIEluZm9zIGFyZSB0aGluZ3MgdGhhdCBtaWdodCBiZSBpbnRlcmVzdGluZyBmb3Igc29tZW9uZSB3aG8gbmVlZHMgdG8gdGFrZSBhIGNsb3NlciBsb29rLlxyXG4gICAgICovXHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgTG9nZ2VyLnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhcmdzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBfX3NwcmVhZEFycmF5KFsnSW5mbzonXSwgX19yZWFkKGFyZ3MpLCBmYWxzZSkpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogTG9ncyBhbiBlcnJvci4gRXJyb3IgYXJlIHRoaW5ncyB0aGF0IGFyZSBleGNlcHRpb25hbCwgYnV0IGNhbiBiZSByZWNvdmVyZWQgZnJvbS5cclxuICAgICAqL1xyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgIExvZ2dlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IuYXBwbHkoY29uc29sZSwgX19zcHJlYWRBcnJheShbJ0Vycm9yOiddLCBfX3JlYWQoYXJncyksIGZhbHNlKSk7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignVHJhY2U6JywgdHJhY2UoKSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBMb2dzIGEgZmF0YWwgZXJyb3IuIEZhdGFsIGVycm9ycyBhcmUgdGhpbmdzIHRoYXQgYXJlIGV4Y2VwdGlvbmFsIGFuZCBjYW4gbm90IGJlIHJlY292ZXJlZCBmcm9tLlxyXG4gICAgICovXHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgTG9nZ2VyLnByb3RvdHlwZS5mYXRhbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc29sZS5lcnJvci5hcHBseShjb25zb2xlLCBfX3NwcmVhZEFycmF5KFsnRmF0YWw6J10sIF9fcmVhZChhcmdzKSwgZmFsc2UpKTtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdUcmFjZTonLCB0cmFjZSgpKTtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYXJncy5qb2luKCcgJykpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogTG9ncyBhIG1lc3NhZ2UuXHJcbiAgICAgKi9cclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICBMb2dnZXIucHJvdG90eXBlLmxvZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgX19zcHJlYWRBcnJheShbJ0ZhdGFsOiddLCBfX3JlYWQoYXJncyksIGZhbHNlKSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1RyYWNlOicsIHRyYWNlKCkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBMb2dnZXI7XHJcbn0oKSk7XHJcbmV4cG9ydCB7IExvZ2dlciB9O1xyXG52YXIgaW5zdGFuY2UgPSBuZXcgTG9nZ2VyKCk7XHJcbmV4cG9ydCBkZWZhdWx0IGluc3RhbmNlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgRWRpdGFibGUgZnJvbSAnLi4vY29yZS9jb21wb25lbnRzL0VkaXRhYmxlJztcclxuaW1wb3J0IEdsb2JhbEhvdEtleXMgZnJvbSAnLi4vY29yZS9jb21wb25lbnRzL0hvdEtleS9HbG9iYWxIb3RLZXlzJztcclxuaW1wb3J0IHsgY3JlYXRlRW1wdHlTdGF0ZSB9IGZyb20gJy4uL2NvcmUvRWRpdG9yU3RvcmUnO1xyXG5pbXBvcnQgUHJvdmlkZXIgZnJvbSAnLi4vY29yZS9Qcm92aWRlcic7XHJcbmltcG9ydCBFZGl0b3JVSSBmcm9tICcuLi91aS9FZGl0b3JVSSc7XHJcbmltcG9ydCBTdGlja3lXcmFwcGVyIGZyb20gJy4vU3RpY2t5V3JhcHBlcic7XHJcbnZhciBFZGl0YWJsZUVkaXRvciA9IGZ1bmN0aW9uIChfYSkge1xyXG4gICAgdmFyIHZhbHVlID0gX2EudmFsdWUsIGxhbmcgPSBfYS5sYW5nLCBjaGlsZHJlbiA9IF9hLmNoaWxkcmVuLCBvcHRpb25zID0gX2Eub3B0aW9ucywgcmVuZGVyT3B0aW9ucyA9IF9hLnJlbmRlck9wdGlvbnMsIGNhbGxiYWNrcyA9IF9hLmNhbGxiYWNrcztcclxuICAgIHZhciB0aGVWYWx1ZSA9IHZhbHVlIHx8IGNyZWF0ZUVtcHR5U3RhdGUoKTtcclxuICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChQcm92aWRlciwgeyBsYW5nOiBsYW5nLCBjYWxsYmFja3M6IGNhbGxiYWNrcywgdmFsdWU6IHRoZVZhbHVlLCByZW5kZXJPcHRpb25zOiByZW5kZXJPcHRpb25zLCBvcHRpb25zOiBvcHRpb25zIH0sXHJcbiAgICAgICAgY2hpbGRyZW4sXHJcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChTdGlja3lXcmFwcGVyLCBudWxsLCBmdW5jdGlvbiAoc3RpY2t5TmVzcykgeyByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsXHJcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoR2xvYmFsSG90S2V5cywgeyBmb2N1c1JlZjogc3RpY2t5TmVzcy5mb2N1c1JlZiB9KSxcclxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChFZGl0YWJsZSwgbnVsbCksXHJcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRWRpdG9yVUksIHsgc3RpY2t5TmVzczogc3RpY2t5TmVzcyB9KSkpOyB9KSkpO1xyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBFZGl0YWJsZUVkaXRvcjtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RWRpdGFibGVFZGl0b3IuanMubWFwIiwidmFyIF9fcmVhZCA9ICh0aGlzICYmIHRoaXMuX19yZWFkKSB8fCBmdW5jdGlvbiAobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59O1xyXG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XHJcbnZhciBTdGlja3lXcmFwcGVyID0gZnVuY3Rpb24gKF9hKSB7XHJcbiAgICB2YXIgY2hpbGRyZW4gPSBfYS5jaGlsZHJlbjtcclxuICAgIHZhciByZWYgPSBSZWFjdC5jcmVhdGVSZWYoKTtcclxuICAgIHZhciBzdGlja3lFbFJlZiA9IFJlYWN0LmNyZWF0ZVJlZigpO1xyXG4gICAgdmFyIF9iID0gX19yZWFkKHVzZVN0YXRlKGZhbHNlKSwgMiksIHNob3VsZFN0aWNrVG9Ub3AgPSBfYlswXSwgc2V0U2hvdWxkU3RpY2tUb1RvcCA9IF9iWzFdO1xyXG4gICAgdmFyIF9jID0gX19yZWFkKHVzZVN0YXRlKHRydWUpLCAyKSwgc2hvdWxkU3RpY2tUb0JvdHRvbSA9IF9jWzBdLCBzZXRTaG91bGRTdGlja1RvQm90dG9tID0gX2NbMV07XHJcbiAgICB2YXIgX2QgPSBfX3JlYWQodXNlU3RhdGUoMCksIDIpLCByaWdodE9mZnNldCA9IF9kWzBdLCBzZXRSaWdodE9mZnNldCA9IF9kWzFdO1xyXG4gICAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY2FsYyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX2EgPSByZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgdG9wXzEgPSBfYS50b3AsIGxlZnQgPSBfYS5sZWZ0O1xyXG4gICAgICAgICAgICAgICAgdmFyIGJvdHRvbSA9IHRvcF8xICsgcmVmLmN1cnJlbnQuY2xpZW50SGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgLy8gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIGlzIHdpdGhvdXQgc2Nyb2xsYmFycywgc28gYmV0dGVyIGZvciB1c1xyXG4gICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIC0gbGVmdCAtIHJlZi5jdXJyZW50LmNsaWVudFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgdmFyIHVpSGVpZ2h0ID0gc3RpY2t5RWxSZWYuY3VycmVudFxyXG4gICAgICAgICAgICAgICAgICAgID8gc3RpY2t5RWxSZWYuY3VycmVudC5jbGllbnRIZWlnaHRcclxuICAgICAgICAgICAgICAgICAgICA6IDQwMDtcclxuICAgICAgICAgICAgICAgIHNldFJpZ2h0T2Zmc2V0KHJpZ2h0KTtcclxuICAgICAgICAgICAgICAgIHNldFNob3VsZFN0aWNrVG9Ub3AodG9wXzEgPiB3aW5kb3cuaW5uZXJIZWlnaHQgLSB1aUhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICBzZXRTaG91bGRTdGlja1RvQm90dG9tKGJvdHRvbSA8IHdpbmRvdy5pbm5lckhlaWdodCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGNhbGMpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBjYWxjKTtcclxuICAgICAgICB2YXIgb2JzZXJ2ZXIgPSBudWxsO1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgaWYgKGdsb2JhbC5JbnRlcnNlY3Rpb25PYnNlcnZlcikge1xyXG4gICAgICAgICAgICBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihjYWxjKTtcclxuICAgICAgICAgICAgaWYgKHJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKHJlZi5jdXJyZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBkbyBpdCBvbmNlXHJcbiAgICAgICAgY2FsYygpO1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGNhbGMpO1xyXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgY2FsYyk7XHJcbiAgICAgICAgICAgIG9ic2VydmVyID09PSBudWxsIHx8IG9ic2VydmVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYnNlcnZlci5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgfTtcclxuICAgIH0sIFtyZWYsIHN0aWNreUVsUmVmXSk7XHJcbiAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBzdHlsZTogeyBwb3NpdGlvbjogJ3JlbGF0aXZlJyB9LCByZWY6IHJlZiB9LCBjaGlsZHJlbih7XHJcbiAgICAgICAgcmlnaHRPZmZzZXQ6IHJpZ2h0T2Zmc2V0LFxyXG4gICAgICAgIHN0aWNreUVsUmVmOiBzdGlja3lFbFJlZixcclxuICAgICAgICBmb2N1c1JlZjogcmVmLFxyXG4gICAgICAgIHNob3VsZFN0aWNrVG9Ub3A6IHNob3VsZFN0aWNrVG9Ub3AsXHJcbiAgICAgICAgc2hvdWxkU3RpY2tUb0JvdHRvbTogc2hvdWxkU3RpY2tUb0JvdHRvbSxcclxuICAgIH0pKSk7XHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IFN0aWNreVdyYXBwZXI7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN0aWNreVdyYXBwZXIuanMubWFwIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgVGhlbWVQcm92aWRlciB9IGZyb20gJy4uL1RoZW1lUHJvdmlkZXInO1xyXG5pbXBvcnQgeyBQbHVnaW5EcmF3ZXIgfSBmcm9tICcuLi9QbHVnaW5EcmF3ZXInO1xyXG5pbXBvcnQgeyBUcmFzaCB9IGZyb20gJy4uL1RyYXNoJztcclxuaW1wb3J0IHsgU2lkZWJhciB9IGZyb20gJy4uL1NpZGViYXInO1xyXG5pbXBvcnQgeyB1c2VPcHRpb24gfSBmcm9tICcuLi8uLi9jb3JlL2NvbXBvbmVudHMvaG9va3MnO1xyXG5pbXBvcnQgeyBNdWx0aU5vZGVzQm90dG9tVG9vbGJhciB9IGZyb20gJy4uL011bHRpTm9kZXNCb3R0b21Ub29sYmFyJztcclxuZXhwb3J0IGRlZmF1bHQgUmVhY3QubWVtbyhmdW5jdGlvbiAoX2EpIHtcclxuICAgIHZhciBfYiA9IF9hLnN0aWNreU5lc3MsIHN0aWNreU5lc3MgPSBfYiA9PT0gdm9pZCAwID8ge1xyXG4gICAgICAgIHNob3VsZFN0aWNrVG9Ub3A6IGZhbHNlLFxyXG4gICAgICAgIHNob3VsZFN0aWNrVG9Cb3R0b206IGZhbHNlLFxyXG4gICAgICAgIHJpZ2h0T2Zmc2V0OiAwLFxyXG4gICAgfSA6IF9iO1xyXG4gICAgdmFyIGhpZGVFZGl0b3JTaWRlYmFyID0gdXNlT3B0aW9uKCdoaWRlRWRpdG9yU2lkZWJhcicpO1xyXG4gICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFRoZW1lUHJvdmlkZXIsIG51bGwsXHJcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChUcmFzaCwgbnVsbCksXHJcbiAgICAgICAgIWhpZGVFZGl0b3JTaWRlYmFyICYmIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU2lkZWJhciwgeyBzdGlja3lOZXNzOiBzdGlja3lOZXNzIH0pLFxyXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUGx1Z2luRHJhd2VyLCBudWxsKSxcclxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KE11bHRpTm9kZXNCb3R0b21Ub29sYmFyLCBudWxsKSkpO1xyXG59KTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgSWNvbkJ1dHRvbiwgVG9vbHRpcCB9IGZyb20gJ0BtYXRlcmlhbC11aS9jb3JlJztcclxuaW1wb3J0IERlbGV0ZSBmcm9tICdAbWF0ZXJpYWwtdWkvaWNvbnMvRGVsZXRlJztcclxuaW1wb3J0IHsgdXNlQWxsRm9jdXNlZE5vZGVJZHMsIHVzZVJlbW92ZU11bHRpcGxlTm9kZUlkcywgdXNlVWlUcmFuc2xhdG9yLCB9IGZyb20gJy4uLy4uL2NvcmUvY29tcG9uZW50cy9ob29rcyc7XHJcbnZhciBEZWxldGVBbGwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgcmVtb3ZlID0gdXNlUmVtb3ZlTXVsdGlwbGVOb2RlSWRzKCk7XHJcbiAgICB2YXIgZm9jdXNlZCA9IHVzZUFsbEZvY3VzZWROb2RlSWRzKCk7XHJcbiAgICB2YXIgdCA9IHVzZVVpVHJhbnNsYXRvcigpLnQ7XHJcbiAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoVG9vbHRpcCwgeyB0aXRsZTogdCgnUmVtb3ZlIGFsbCBzZWxlY3RlZCcpIH0sXHJcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJY29uQnV0dG9uLCB7IG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlbW92ZShmb2N1c2VkKTsgfSwgXCJhcmlhLWxhYmVsXCI6IFwiZGVsZXRlXCIsIGNvbG9yOiBcInNlY29uZGFyeVwiIH0sXHJcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRGVsZXRlLCBudWxsKSkpKTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgRGVsZXRlQWxsO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1EZWxldGVBbGwuanMubWFwIiwiaW1wb3J0IHsgSWNvbkJ1dHRvbiwgVG9vbHRpcCB9IGZyb20gJ0BtYXRlcmlhbC11aS9jb3JlJztcclxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlQWxsRm9jdXNlZE5vZGVJZHMsIHVzZUR1cGxpY2F0ZU11bHRpcGxlQ2VsbHMsIHVzZVVpVHJhbnNsYXRvciwgfSBmcm9tICcuLi8uLi9jb3JlL2NvbXBvbmVudHMvaG9va3MnO1xyXG5pbXBvcnQgSWNvbiBmcm9tICdAbWF0ZXJpYWwtdWkvaWNvbnMvRmlsZUNvcHknO1xyXG52YXIgRHVwbGljYXRlQWxsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGR1cGxpY2F0ZSA9IHVzZUR1cGxpY2F0ZU11bHRpcGxlQ2VsbHMoKTtcclxuICAgIHZhciB0ID0gdXNlVWlUcmFuc2xhdG9yKCkudDtcclxuICAgIHZhciBub2RlSWRzID0gdXNlQWxsRm9jdXNlZE5vZGVJZHMoKTtcclxuICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChUb29sdGlwLCB7IHRpdGxlOiB0KCdEdXBsaWNhdGUgYWwnKSB9LFxyXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSWNvbkJ1dHRvbiwgeyBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7IHJldHVybiBkdXBsaWNhdGUobm9kZUlkcyk7IH0sIFwiYXJpYS1sYWJlbFwiOiBcImRlbGV0ZVwiLCBjb2xvcjogXCJkZWZhdWx0XCIgfSxcclxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJY29uLCBudWxsKSkpKTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgRHVwbGljYXRlQWxsO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1EdXBsaWNhdGVBbGwuanMubWFwIiwiaW1wb3J0IHsgQXZhdGFyLCBHcmlkLCBUeXBvZ3JhcGh5IH0gZnJvbSAnQG1hdGVyaWFsLXVpL2NvcmUnO1xyXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyB1c2VBbGxGb2N1c2VkTm9kZUlkcywgdXNlVWlUcmFuc2xhdG9yLCB9IGZyb20gJy4uLy4uL2NvcmUvY29tcG9uZW50cy9ob29rcyc7XHJcbmltcG9ydCB7IEJvdHRvbVRvb2xiYXJEcmF3ZXIgfSBmcm9tICcuLi9Cb3R0b21Ub29sYmFyJztcclxuaW1wb3J0IERlbGV0ZUFsbCBmcm9tICcuL0RlbGV0ZUFsbCc7XHJcbmltcG9ydCBEdXBsaWNhdGVBbGwgZnJvbSAnLi9EdXBsaWNhdGVBbGwnO1xyXG5leHBvcnQgdmFyIE11bHRpTm9kZXNCb3R0b21Ub29sYmFyID0gUmVhY3QubWVtbyhmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgdCA9IHVzZVVpVHJhbnNsYXRvcigpLnQ7XHJcbiAgICB2YXIgZm9jdXNlZE5vZGVJZHMgPSB1c2VBbGxGb2N1c2VkTm9kZUlkcygpO1xyXG4gICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KEJvdHRvbVRvb2xiYXJEcmF3ZXIsIHsgb3BlbjogZm9jdXNlZE5vZGVJZHMubGVuZ3RoID4gMSwgYW5jaG9yOiAnYm90dG9tJyB9LFxyXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoR3JpZCwgeyBjb250YWluZXI6IHRydWUsIGRpcmVjdGlvbjogXCJyb3dcIiwgYWxpZ25JdGVtczogXCJjZW50ZXJcIiB9LFxyXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEdyaWQsIHsgaXRlbTogdHJ1ZSB9LFxyXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChBdmF0YXIsIHsgY2hpbGRyZW46IGZvY3VzZWROb2RlSWRzLmxlbmd0aCwgc3R5bGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luUmlnaHQ6IDE2LFxyXG4gICAgICAgICAgICAgICAgICAgIH0gfSkpLFxyXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEdyaWQsIHsgaXRlbTogdHJ1ZSB9LFxyXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChUeXBvZ3JhcGh5LCB7IHZhcmlhbnQ6IFwic3VidGl0bGUxXCIgfSwgdCgnKG11bHRpcGxlIHNlbGVjdGVkKScpKSksXHJcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoR3JpZCwgeyBpdGVtOiB0cnVlLCBzdHlsZTogeyBtYXJnaW5MZWZ0OiAnYXV0bycgfSB9LFxyXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChEdXBsaWNhdGVBbGwsIG51bGwpKSxcclxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChHcmlkLCB7IGl0ZW06IHRydWUgfSxcclxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRGVsZXRlQWxsLCBudWxsKSkpKSk7XHJcbn0pO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwic291cmNlUm9vdCI6IiJ9